<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>5.11. ページネーション &mdash; TERASOLUNA Global Framework Development Guideline 1.0.0.publicreview documentation</title>
    
    <link rel="stylesheet" href="../_static/solar.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.0.publicreview',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="TERASOLUNA Global Framework Development Guideline 1.0.0.publicreview documentation" href="../index.html" />
    <link rel="up" title="5. TERASOLUNA Global Frameworkの機能詳細" href="index.html" />
    <link rel="next" title="5.12. 二重送信防止" href="DoubleSubmitProtection.html" />
    <link rel="prev" title="5.10. プロパティ管理" href="PropertyManagement.html" /><script src="../_static/jquery.treeview.js" type="text/javascript"></script>
<!-- <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro|Open+Sans:300italic,400italic,700italic,400,300,700' rel='stylesheet' type='text/css'> -->
<link href="../_static/solarized-dark.css" rel="stylesheet">
<link href="../_static/jquery.treeview.css" rel="stylesheet">
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="DoubleSubmitProtection.html" title="5.12. 二重送信防止"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="PropertyManagement.html" title="5.10. プロパティ管理"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">TERASOLUNA Global Framework Development Guideline 1.0.0.publicreview documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">5. TERASOLUNA Global Frameworkの機能詳細</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><label><input id="scroll" type="checkbox" checked> scroll sidebar</label>

  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">5.11. ページネーション</a><ul>
<li><a class="reference internal" href="#overview">5.11.1. Overview</a><ul>
<li><a class="reference internal" href="#id3">5.11.1.1. ページ分割時の一覧画面の表示について</a></li>
<li><a class="reference internal" href="#id4">5.11.1.2. ページ検索について</a><ul>
<li><a class="reference internal" href="#spring-data">5.11.1.2.1. Spring Data提供のページ検索機能について</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pagination-overview-paginationlink">5.11.1.3. ページネーションリンクの表示について</a><ul>
<li><a class="reference internal" href="#id6">5.11.1.3.1. ページネーションリンクの構成</a></li>
<li><a class="reference internal" href="#html">5.11.1.3.2. ページネーションリンクのHTML構造</a></li>
<li><a class="reference internal" href="#jsp">5.11.1.3.3. JSPタブライブラリのパラメータについて</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id7">5.11.1.4. ページネーション機能使用時の処理フロー</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-use">5.11.2. How to use</a><ul>
<li><a class="reference internal" href="#id8">5.11.2.1. アプリケーションの設定</a><ul>
<li><a class="reference internal" href="#id9">5.11.2.1.1. Spring Dataのページネーション機能を有効化するための設定</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id10">5.11.2.2. ページ検索の実装</a><ul>
<li><a class="reference internal" href="#id11">5.11.2.2.1. アプリケーション層の実装</a></li>
<li><a class="reference internal" href="#jpa">5.11.2.2.2. ドメイン層の実装(JPA編)</a></li>
<li><a class="reference internal" href="#service-mybatis2">5.11.2.2.3. Serviceの実装(Mybatis2編)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id12">5.11.2.3. JSPの実装(基本編)</a><ul>
<li><a class="reference internal" href="#id13">5.11.2.3.1. 取得データの表示</a></li>
<li><a class="reference internal" href="#id14">5.11.2.3.2. ページネーションリンクの表示</a></li>
<li><a class="reference internal" href="#id15">5.11.2.3.3. ページネーション情報の表示</a></li>
<li><a class="reference internal" href="#id16">5.11.2.3.4. ページリンクで検索条件を引き継ぐ</a></li>
<li><a class="reference internal" href="#id17">5.11.2.3.5. ページリンクでソート条件を引き継ぐ</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id18">5.11.2.4. JSPの実装(レイアウト変更編)</a><ul>
<li><a class="reference internal" href="#id19">5.11.2.4.1. 先頭ページと最終ページに移動するリンクの削除</a></li>
<li><a class="reference internal" href="#id20">5.11.2.4.2. 前ページと次ページに移動するリンクの削除</a></li>
<li><a class="reference internal" href="#disabled">5.11.2.4.3. disabled状態のリンクの削除</a></li>
<li><a class="reference internal" href="#id21">5.11.2.4.4. 指定ページへ移動するリンクの最大表示数の変更</a></li>
<li><a class="reference internal" href="#id22">5.11.2.4.5. 指定ページへ移動するリンクの削除</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id23">5.11.2.5. JSPの実装(動作編)</a><ul>
<li><a class="reference internal" href="#id24">5.11.2.5.1. ソート条件の指定</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#appendix">5.11.3. Appendix</a><ul>
<li><a class="reference internal" href="#pageablehandlermethodargumentresolver">5.11.3.1. <tt class="docutils literal"><span class="pre">PageableHandlerMethodArgumentResolver</span></tt> のプロパティ値について</a></li>
<li><a class="reference internal" href="#sorthandlermethodargumentresolver">5.11.3.2. <tt class="docutils literal"><span class="pre">SortHandlerMethodArgumentResolver</span></tt> のプロパティ値について</a></li>
</ul>
</li>
</ul>
</li>
</ul>


  <h4>Previous topic</h4>
  <p class="topless"><a href="PropertyManagement.html"
                        title="previous chapter">5.10. プロパティ管理</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="DoubleSubmitProtection.html"
                        title="next chapter">5.12. 二重送信防止</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/ArchitectureInDetail/Pagination.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="id1">
<div class="admonition caution">
  <p class="first admonition-title">Caution</p>
  <p><strong>本バージョンの内容は既に古くなっています</strong>。最新のガイドラインは<a href="http://terasolunaorg.github.io/guideline/">こちら</a>からご参照ください。</p>
</div>
<h1>5.11. ページネーション<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="id2">
<p class="topic-title first">目次</p>
<ul class="simple">
<li><a class="reference internal" href="#overview" id="id25">Overview</a><ul>
<li><a class="reference internal" href="#id3" id="id26">ページ分割時の一覧画面の表示について</a></li>
<li><a class="reference internal" href="#id4" id="id27">ページ検索について</a><ul>
<li><a class="reference internal" href="#spring-data" id="id28">Spring Data提供のページ検索機能について</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pagination-overview-paginationlink" id="id29">ページネーションリンクの表示について</a><ul>
<li><a class="reference internal" href="#id6" id="id30">ページネーションリンクの構成</a></li>
<li><a class="reference internal" href="#html" id="id31">ページネーションリンクのHTML構造</a></li>
<li><a class="reference internal" href="#jsp" id="id32">JSPタブライブラリのパラメータについて</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id7" id="id33">ページネーション機能使用時の処理フロー</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-use" id="id34">How to use</a><ul>
<li><a class="reference internal" href="#id8" id="id35">アプリケーションの設定</a><ul>
<li><a class="reference internal" href="#id9" id="id36">Spring Dataのページネーション機能を有効化するための設定</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id10" id="id37">ページ検索の実装</a><ul>
<li><a class="reference internal" href="#id11" id="id38">アプリケーション層の実装</a></li>
<li><a class="reference internal" href="#jpa" id="id39">ドメイン層の実装(JPA編)</a></li>
<li><a class="reference internal" href="#service-mybatis2" id="id40">Serviceの実装(Mybatis2編)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id12" id="id41">JSPの実装(基本編)</a><ul>
<li><a class="reference internal" href="#id13" id="id42">取得データの表示</a></li>
<li><a class="reference internal" href="#id14" id="id43">ページネーションリンクの表示</a></li>
<li><a class="reference internal" href="#id15" id="id44">ページネーション情報の表示</a></li>
<li><a class="reference internal" href="#id16" id="id45">ページリンクで検索条件を引き継ぐ</a></li>
<li><a class="reference internal" href="#id17" id="id46">ページリンクでソート条件を引き継ぐ</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id18" id="id47">JSPの実装(レイアウト変更編)</a><ul>
<li><a class="reference internal" href="#id19" id="id48">先頭ページと最終ページに移動するリンクの削除</a></li>
<li><a class="reference internal" href="#id20" id="id49">前ページと次ページに移動するリンクの削除</a></li>
<li><a class="reference internal" href="#disabled" id="id50">disabled状態のリンクの削除</a></li>
<li><a class="reference internal" href="#id21" id="id51">指定ページへ移動するリンクの最大表示数の変更</a></li>
<li><a class="reference internal" href="#id22" id="id52">指定ページへ移動するリンクの削除</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id23" id="id53">JSPの実装(動作編)</a><ul>
<li><a class="reference internal" href="#id24" id="id54">ソート条件の指定</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#appendix" id="id55">Appendix</a><ul>
<li><a class="reference internal" href="#pageablehandlermethodargumentresolver" id="id56"><tt class="docutils literal"><span class="pre">PageableHandlerMethodArgumentResolver</span></tt> のプロパティ値について</a></li>
<li><a class="reference internal" href="#sorthandlermethodargumentresolver" id="id57"><tt class="docutils literal"><span class="pre">SortHandlerMethodArgumentResolver</span></tt> のプロパティ値について</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#id25">5.11.1. Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>本章では、検索条件に一致するデータをページ分割して表示する方法(ページネーション)について説明する。</p>
<div class="line-block">
<div class="line"><strong>検索条件に一致するデータが大量になる場合は、ページネーション機能を使用することを推奨する。</strong></div>
<div class="line">一度に大量のデータを取得し画面に表示すると、以下3点の問題が発生する可能性がある。</div>
</div>
<ul>
<li><div class="first line-block">
<div class="line">サーバ側のメモリ枯渇の発生。</div>
<div class="line">単発のリクエストで問題が発生しなくても、同時に複数実行された場合に <tt class="docutils literal"><span class="pre">java.lang.OutOfMemoryError</span></tt> が発生する可能性がある。</div>
</div>
</li>
<li><div class="first line-block">
<div class="line">ネットワーク負荷の発生。</div>
<div class="line">不要なデータがネットワークに流れることで、ネットワーク全体にかかる負荷が高くなり、システム全体のレスポンスタイムに影響を与える可能性がある。</div>
</div>
</li>
<li><div class="first line-block">
<div class="line">画面のレスポンス遅延の発生。</div>
<div class="line">大量のデータを扱う場合、サーバの処理、ネットワークのトラフィック処理、クライアントの描画処理の全てで時間がかかるため、画面のレスポンスが遅くなる可能性がある。</div>
</div>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="id3">
<h3><a class="toc-backref" href="#id26">5.11.1.1. ページ分割時の一覧画面の表示について</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>ページネーション機能を利用してページ分割した場合、以下のような画面になる。</p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../_images/pagination-overview_screen.png"><img alt="Screen image of Pagination." src="../_images/pagination-overview_screen.png" style="width: 100%;" /></a>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">ページを移動するためのリンクを表示する。</div>
<div class="line">リンク押下時には、該当ページを表示するためのリクエストを送信する。この領域を表示するためのJSPタグライブラリを共通ライブラリとして提供している。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">ページネーションに関連する情報(合計件数、合計ページ数、表示ページ数など)を表示する。</div>
<div class="line">この領域を表示するためのタグライブラリは存在しないため、JSPの処理として個別に実装する必要がある。</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id4">
<h3><a class="toc-backref" href="#id27">5.11.1.2. ページ検索について</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">ページネーションを実現する際には、まずサーバ側で行う検索処理をページ検索できるように実装する必要がある。</div>
<div class="line">本ガイドラインでは、サーバ側のページ検索は、 Spring Data から提供されている仕組みを利用することを前提としている。</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="spring-data">
<span id="pagination-overview-page-springdata"></span><h4><a class="toc-backref" href="#id28">5.11.1.2.1. Spring Data提供のページ検索機能について</a><a class="headerlink" href="#spring-data" title="Permalink to this headline">¶</a></h4>
<p>Spring Dataより提供されているページ検索用の機能は、以下の通り。</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td><div class="first last line-block">
<div class="line">リクエストパラメータよりページ検索に必要な情報(検索対象のページ位置、取得件数、ソート条件)を抽出し、抽出した情報を <tt class="docutils literal"><span class="pre">org.springframework.data.domain.Pageable</span></tt> のオブジェクトとしてControllerの引数に引き渡す。</div>
<div class="line">この機能は、 <tt class="docutils literal"><span class="pre">org.springframework.data.web.PageableHandlerMethodArgumentResolver</span></tt> クラスとして提供されており、 <tt class="file docutils literal"><span class="pre">spring-mvc.xml</span></tt> の <tt class="docutils literal"><span class="pre">&lt;mvc:argument-resolvers&gt;</span></tt> 要素に追加することで有効となる。</div>
<div class="line">リクエストパラメータについては、「 <a class="reference internal" href="#pagination-overview-pagesearch-requestparameter"><em>Note欄</em></a> 」を参照されたい。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td>2</td>
<td><div class="first last line-block">
<div class="line">ページ情報(合計件数、該当ページのデータ、検索対象のページ位置、取得件数、ソート条件)を保持する。</div>
<div class="line">この機能は、 <tt class="docutils literal"><span class="pre">org.springframework.data.domain.Page</span></tt> インタフェースとして提供されており、デフォルトの実装クラスとして <tt class="docutils literal"><span class="pre">org.springframework.data.domain.PageImpl</span></tt> が提供されている。</div>
<div class="line"><strong>共通ライブラリより提供しているページネーションリンクを出力するためのJSPタグライブラリでは、 Pageオブジェクトから必要なデータを取得する仕様となっている。</strong></div>
</div>
</td>
</tr>
<tr class="row-even"><td>3</td>
<td><div class="first last line-block">
<div class="line">データベースアクセスとしてSpring Data JPAを使用する場合は、RepositoryのQueryメソッドの引数に <tt class="docutils literal"><span class="pre">Pageable</span></tt> オブジェクトを指定することで、該当ページの情報が <tt class="docutils literal"><span class="pre">Page</span></tt> オブジェクトとして返却される。</div>
<div class="line">合計件数を取得するSQLの発行、ソート条件の追加、該当ページに一致するデータの抽出などの処理が全て自動で行われる。</div>
<div class="line">データベースアクセスとして、Mybatis2を使用する場合は、Spring Data JPAが自動で行ってくれる処理を、Java又はSQLマッピングファイル内で実装する必要がある。</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<blockquote id="pagination-overview-pagesearch-requestparameter">
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>ページ検索用のリクエストパラメータについて</strong></p>
<p>Spring Dataより提供されているページ検索用のリクエストパラメータは以下の3つとなる。</p>
<blockquote class="last">
<div><table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="15%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">パラメータ名</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ol class="first last arabic simple">
<li></li>
</ol>
</td>
<td>page</td>
<td><div class="first last line-block">
<div class="line">検索対象のページ位置を指定するためのリクエストパラメータ。</div>
<div class="line">値には、0以上の数値を指定する。</div>
<div class="line">デフォルトの設定では、ページ位置の値は <tt class="docutils literal"><span class="pre">0</span></tt> から開始する。そのため、1ページ目のデータを取得する場合は <tt class="docutils literal"><span class="pre">0</span></tt> を、2ページ目のデータを取得する場合は <tt class="docutils literal"><span class="pre">1</span></tt> を指定する必要がある。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="2">
<li></li>
</ol>
</td>
<td>size</td>
<td><div class="first last line-block">
<div class="line">取得する件数を指定するためのリクエストパラメータ。</div>
<div class="line">値には、1以上の数値を指定する。</div>
<div class="line"><tt class="docutils literal"><span class="pre">PageableHandlerMethodArgumentResolver</span></tt> の <tt class="docutils literal"><span class="pre">maxPageSize</span></tt> に指定された値より大きい値が指定された場合は、 <tt class="docutils literal"><span class="pre">maxPageSize</span></tt> の値が <tt class="docutils literal"><span class="pre">size</span></tt> の値となる。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><ol class="first last arabic simple" start="3">
<li></li>
</ol>
</td>
<td>sort</td>
<td><div class="first last line-block">
<div class="line">ソート条件を指定するためのパラメータ(複数指定可能)。</div>
<div class="line">値には、<tt class="docutils literal"><span class="pre">&quot;{ソート項目名(,ソート順)}&quot;</span></tt> の形式で指定する。</div>
<div class="line">ソート順には、<tt class="docutils literal"><span class="pre">&quot;ASC&quot;</span></tt> 又は <tt class="docutils literal"><span class="pre">&quot;DESC&quot;</span></tt> のどちらかの値を指定し、省略した場合は <tt class="docutils literal"><span class="pre">&quot;ASC&quot;</span></tt> が適用される。</div>
<div class="line">項目名は <tt class="docutils literal"><span class="pre">&quot;,&quot;</span></tt> 区切りで複数指定することが可能である。</div>
<div class="line">例えば、クエリ文字列として <tt class="docutils literal"><span class="pre">&quot;sort=lastModifiedDate,id,DESC&amp;sort=subId&quot;</span></tt> を指定した場合、 <tt class="docutils literal"><span class="pre">&quot;ORDER</span> <span class="pre">BY</span> <span class="pre">lastModifiedDate</span> <span class="pre">DESC,</span> <span class="pre">id</span> <span class="pre">DESC,</span> <span class="pre">subId</span> <span class="pre">ASC&quot;</span></tt> というOrder By句がQueryに追加される。</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p><strong>size=0 指定時の動作について</strong></p>
<p>現在使用しているSpring Data Commonsのバージョン(1.6.x)だと、<tt class="docutils literal"><span class="pre">&quot;size=0&quot;</span></tt> とすると条件に一致するレコードを全件取得してしまう。
大量のレコードが取得対象となる可能性がある場合は、<tt class="docutils literal"><span class="pre">java.lang.OutOfMemoryError</span></tt> が発生する可能性が高くなるため、
<tt class="docutils literal"><span class="pre">PageableHandlerMethodArgumentResolver</span></tt> を拡張し <tt class="docutils literal"><span class="pre">&quot;size=0&quot;</span></tt> の場合に全件取得されないように制御する必要がある。</p>
<p class="last">この問題は <a class="reference external" href="https://jira.springsource.org/browse/DATACMNS-377">Spring Data CommonsのJIRA(DATACMNS-377)</a> で対応されているため、次版(1.7.x)のリリースで解消される。
対応後は <tt class="docutils literal"><span class="pre">&quot;size&lt;=0&quot;</span></tt> 場合は、 sizeパラメータ省略時のデフォルト値が使用されるように改修されている。</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p><strong>リクエストパラメータに不正な値を指定した際の動作について</strong></p>
<p>Spring Dataより提供されているページ検索用のリクエストパラメータ(page, size, sort)に不正な値を指定した場合、
<tt class="docutils literal"><span class="pre">java.lang.IllegalArgumentException</span></tt> 又は <tt class="docutils literal"><span class="pre">java.lang.ArrayIndexOutOfBoundsException</span></tt> が発生し、
SpringMVCのデフォルトの設定だとシステムエラー(HTTPステータスコード=500)となってしまう。
<tt class="docutils literal"><span class="pre">IllegalArgumentException</span></tt> 及び <tt class="docutils literal"><span class="pre">ArrayIndexOutOfBoundsException</span></tt> は、バグが原因で発生する可能性もあるため、
アプリケーション全体の例外ハンドリングでリクエストエラー(HTTPステータスコード=400)にすることは推奨できない。</p>
<p class="last">そのため、システムエラーではなくリクエストエラーにする必要がある場合は、 <tt class="docutils literal"><span class="pre">PageableHandlerMethodArgumentResolver</span></tt> を拡張し、
リクエストエラーとなるように制御する必要がある。</p>
</div>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p>リクエストパラメータに不正な値を指定した際に、 <tt class="docutils literal"><span class="pre">IllegalArgumentException</span></tt> 及び <tt class="docutils literal"><span class="pre">ArrayIndexOutOfBoundsException</span></tt> が発生する事象については、
Spring Data Commons プロジェクトに改修依頼中であり、現在以下の状況である。</p>
<ul class="last simple">
<li><tt class="docutils literal"><span class="pre">ArrayIndexOutOfBoundsException</span></tt> が発生するケースは明らかに Spring Data Commons のバグなので、 <a class="reference external" href="https://jira.springsource.org/browse/DATACMNS-379">Spring Data CommonsのJIRA(DATACMNS-379)</a> を発行し対応待ちの状態である。</li>
<li><tt class="docutils literal"><span class="pre">IllegalArgumentException</span></tt> が発生するケースについては、改善版の取り込み依頼(<a class="reference external" href="https://github.com/spring-projects/spring-data-commons/pull/48">Spring Data CommonsへのPull Request(#48)</a> を送って対応待ちの状態である。</li>
</ul>
</div>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="pagination-overview-paginationlink">
<span id="id5"></span><h3><a class="toc-backref" href="#id29">5.11.1.3. ページネーションリンクの表示について</a><a class="headerlink" href="#pagination-overview-paginationlink" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">共通ライブラリから提供しているJSPタグライブラリを使って出力されるページネーションリンクについて説明する。</div>
</div>
<div class="line-block">
<div class="line">共通ライブラリからはページネーションリンクを表示するためのスタイルシートの提供は行っていないため、各プロジェクトにて用意すること。</div>
<div class="line">以降の説明で使用する画面は、Bootstrap v3.0.0のスタイルシートを適用している。</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="id6">
<h4><a class="toc-backref" href="#id30">5.11.1.3.1. ページネーションリンクの構成</a><a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<p>ページネーションリンクは、以下の要素から構成される。</p>
<blockquote>
<div><div class="figure align-center">
<a class="reference internal image-reference" href="../_images/pagination-how_to_use_jsp_pagelink_description.png"><img alt="Structure of the pagination link." src="../_images/pagination-how_to_use_jsp_pagelink_description.png" style="width: 90%;" /></a>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">最初のページに移動するためのリンク。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">前のページに移動するためのリンク。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">指定したページに移動するためのリンク。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">次のページに移動するためのリンク。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">最後のページに移動するためのリンク。</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>ページネーションリンクは、以下の状態をもつ。</p>
<blockquote>
<div><div class="figure align-center">
<a class="reference internal image-reference" href="../_images/pagination-how_to_use_jsp_pagelink_description_status.png"><img alt="Status of the pagination link." src="../_images/pagination-how_to_use_jsp_pagelink_description_status.png" style="width: 90%;" /></a>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(6)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">現在表示しているページで操作することができないリンクであることを示す状態。</div>
<div class="line">具体的には、1ページ目を表示している時の「最初のページに移動するためのリンク」「前のページに移動するためのリンク」と、最終ページを表示している時の「次のページに移動するためのリンク」「最後のページに移動するためのリンク」がこの状態となる。</div>
<div class="line">共通ライブラリから提供しているJSPタグライブラリでは、この状態を <tt class="docutils literal"><span class="pre">&quot;disabled&quot;</span></tt> と定義している。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(7)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">現在表示しているページであることを示す状態。</div>
<div class="line">共通ライブラリから提供しているJSPタグライブラリでは、この状態を <tt class="docutils literal"><span class="pre">&quot;active&quot;</span></tt> と定義している。</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">共通ライブラリを使って出力されるHTMLは、以下の構造となる。</div>
<div class="line">図中の番号は、上記で説明した「ページネーションリンクの構成」と「ページネーションリンクの状態」の項番に対応させている。</div>
</div>
<ul class="simple">
<li>JSP</li>
</ul>
<blockquote>
<div><div class="highlight-jsp"><div class="highlight"><pre><span class="nt">&lt;t:pagination</span> <span class="na">page=</span><span class="s">&quot;${page}&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li>出力されるHTML</li>
</ul>
<blockquote>
<div><div class="figure align-center">
<a class="reference internal image-reference" href="../_images/pagination-overview_html.png"><img alt="html of the pagination link." src="../_images/pagination-overview_html.png" style="width: 90%;" /></a>
</div>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="html">
<h4><a class="toc-backref" href="#id31">5.11.1.3.2. ページネーションリンクのHTML構造</a><a class="headerlink" href="#html" title="Permalink to this headline">¶</a></h4>
<p>共通ライブラリを使って出力されるページネーションリンクのHTMLは、以下の構造となる。</p>
<ul class="simple">
<li>HTML</li>
</ul>
<blockquote>
<div><div class="figure align-center">
<a class="reference internal image-reference" href="../_images/pagination-overview_html_basic.png"><img alt="html structure of the pagination link." src="../_images/pagination-overview_html_basic.png" style="width: 100%;" /></a>
</div>
</div></blockquote>
<ul class="simple">
<li>画面イメージ</li>
</ul>
<blockquote>
<div><div class="figure align-center">
<a class="reference internal image-reference" href="../_images/pagination-overview_html_basic_screen.png"><img alt="screen structure of the pagination link." src="../_images/pagination-overview_html_basic_screen.png" style="width: 80%;" /></a>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="70%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
<th class="head">デフォルト値</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">ページネーションリンクの構成要素をまとめるための要素。</div>
<div class="line">共通ライブラリでは、この部分を「Outer Element」と呼び、複数の「Inner Element」を保持する。</div>
<div class="line">使用する要素は、JSPタグライブラリのパラメータによって変更することが出来る。</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">&lt;ul&gt;</span></tt> 要素</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">「Outer Element」のスタイルクラスを指定するための属性。</div>
<div class="line">共通ライブラリでは、この部分を「Outer Element Class」と呼び、属性値はJSPタグライブラリのパラメータによって指定する。</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">指定なし</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">ページネーションリンクを構成するための要素。</div>
<div class="line">共通ライブラリでは、この部分を「Inner Element」と呼び、 ページ移動するためのリクエストを送信するための <tt class="docutils literal"><span class="pre">&lt;a&gt;</span></tt> 要素を保持する。</div>
<div class="line">使用する要素は、JSPタグライブラリのパラメータによって変更することが出来る。</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">&lt;li&gt;</span></tt> 要素</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">「Inner Element」のスタイルクラスを指定するための属性。</div>
<div class="line">共通ライブラリでは、この部分を「Inner Element Class」と呼び、属性値は表示しているページ位置によってJSPタグライブラリ内の処理で切り替わる。</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">「 <a class="reference internal" href="#pagination-overview-paginationlink-innerelementclass"><em>Note欄</em></a> 」を参照されたい。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">ページ移動するためのリクエストを送信するための要素。</div>
<div class="line">共通ライブラリでは、この部分を「Page Link」と呼ぶ。</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><cite>&lt;a&gt;</cite> 要素固定</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(6)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">ページ移動するためのURLを指定するための属性。</div>
<div class="line">共通ライブラリでは、この部分を「Page Link URL」と呼ぶ。</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">下記の「 <a class="reference internal" href="#pagination-overview-paginationlink-pagelinkurl"><em>Note欄</em></a> 」を参照されたい。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(7)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">ページ移動するためのリンクの表示テキストを指定する。</div>
<div class="line">共通ライブラリでは、この部分を「Page Link Text」と呼ぶ。</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">下記の「 <a class="reference internal" href="#pagination-overview-paginationlink-pagelinktext"><em>Note欄</em></a> 」を参照されたい。</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>「Inner Element」の数について</strong></p>
<p>デフォルトの設定では、「Inner Element」は最大で14個となる。内訳は以下の通り。</p>
<ul class="simple">
<li>最初のページに移動するためのリンク : 1</li>
<li>前のページに移動するためのリンク : 1</li>
<li>指定したページに移動するためのリンク : 最大10</li>
<li>次のページに移動するためのリンク : 1</li>
<li>最後のページに移動するためのリンク : 1</li>
</ul>
<p class="last">「Inner Element」の数は、JSPタグライブラリのパラメータの指定によって変更することができる。</p>
</div>
</div></blockquote>
<blockquote id="pagination-overview-paginationlink-innerelementclass">
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>「Inner Element Class」の設定値について</strong></p>
<p>デフォルトの設定では、ページ位置によって、以下3つの値となる。</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">&quot;disabled&quot;</span></tt> : 現在表示しているページでは操作することができないリンクであることを示すためのスタイルクラス。</li>
<li><tt class="docutils literal"><span class="pre">&quot;active&quot;</span></tt> : 現在表示しているページのリンクであることを示すためのスタイルクラス。</li>
<li>指定なし : 上記以外のリンクであることを示す。</li>
</ul>
<p class="last"><tt class="docutils literal"><span class="pre">&quot;disabled&quot;</span></tt> と <tt class="docutils literal"><span class="pre">&quot;active&quot;</span></tt> は、JSPタグライブラリのパラメータの指定によって別の値に変更することができる。</p>
</div>
</div></blockquote>
<blockquote id="pagination-overview-paginationlink-pagelinkurl">
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>「Page Link URL」のデフォルト値について</strong></p>
<p>リンクの状態が <tt class="docutils literal"><span class="pre">&quot;disabled&quot;</span></tt> の場合は <tt class="docutils literal"><span class="pre">&quot;#&quot;</span></tt> 、 <tt class="docutils literal"><span class="pre">&quot;disabled&quot;</span></tt> 以外の場合は <tt class="docutils literal"><span class="pre">&quot;?page={page}&amp;size={size}&quot;</span></tt> となる。</p>
<p class="last">「Page Link URL」は、JSPタグライブラリのパラメータの指定によって別の値に変更することができる。</p>
</div>
</div></blockquote>
<blockquote id="pagination-overview-paginationlink-pagelinktext">
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>「Page Link Text」のデフォルト値について</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="56%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">リンク名</th>
<th class="head">デフォルト値</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ol class="first last arabic simple">
<li></li>
</ol>
</td>
<td>最初のページに移動するためのリンク</td>
<td><tt class="docutils literal"><span class="pre">&quot;&lt;&lt;&quot;</span></tt></td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="2">
<li></li>
</ol>
</td>
<td>前のページに移動するためのリンク</td>
<td><tt class="docutils literal"><span class="pre">&quot;&lt;&quot;</span></tt></td>
</tr>
<tr class="row-even"><td><ol class="first last arabic simple" start="3">
<li></li>
</ol>
</td>
<td>指定したページに移動するためのリンク</td>
<td><div class="first last line-block">
<div class="line">該当ページのページ番号</div>
<div class="line">(変更不可)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="4">
<li></li>
</ol>
</td>
<td>次のページに移動するためのリンク</td>
<td><tt class="docutils literal"><span class="pre">&quot;&gt;&quot;</span></tt></td>
</tr>
<tr class="row-even"><td><ol class="first last arabic simple" start="5">
<li></li>
</ol>
</td>
<td>最後のページに移動するためのリンク</td>
<td><tt class="docutils literal"><span class="pre">&quot;&gt;&gt;&quot;</span></tt></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p class="last">「指定したページに移動するためのリンク」以外は、JSPタグライブラリのパラメータの指定によって、別の値に変更することができる。</p>
</div>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="jsp">
<h4><a class="toc-backref" href="#id32">5.11.1.3.3. JSPタブライブラリのパラメータについて</a><a class="headerlink" href="#jsp" title="Permalink to this headline">¶</a></h4>
<p>JSPタグライブラリのパラメータに値を指定することで、デフォルト動作を変更することができる。</p>
<p>以下にパラメータの一覧を示す。</p>
<p><strong>レイアウトを制御するためのパラメータ</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="25%" />
<col width="65%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">パラメータ名</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ol class="first last arabic simple">
<li></li>
</ol>
</td>
<td>outerElement</td>
<td><div class="first last line-block">
<div class="line">「Outer Element」として使用するHTML要素名を指定する。</div>
<div class="line">例) div</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="2">
<li></li>
</ol>
</td>
<td>outerElementClass</td>
<td><div class="first last line-block">
<div class="line">「Outer Element Class」に設定するスタイルシートのクラス名を指定する。</div>
<div class="line">例) pagination</div>
</div>
</td>
</tr>
<tr class="row-even"><td><ol class="first last arabic simple" start="3">
<li></li>
</ol>
</td>
<td>innerElement</td>
<td><div class="first last line-block">
<div class="line">「Inner Element」として使用するHTML要素名を指定する。</div>
<div class="line">例) span</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="4">
<li></li>
</ol>
</td>
<td>disabledClass</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">&quot;disabled&quot;</span></tt> 状態と判断された「Inner Element」のclass属性に設定する値を指定する。</div>
<div class="line">例) hiddenPageLink</div>
</div>
</td>
</tr>
<tr class="row-even"><td><ol class="first last arabic simple" start="5">
<li></li>
</ol>
</td>
<td>activeClass</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">&quot;active&quot;</span></tt> 状態の「Inner Element」のclass属性に設定する値を指定する。</div>
<div class="line">例) currentPageLink</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="6">
<li></li>
</ol>
</td>
<td>firstLinkText</td>
<td><div class="first last line-block">
<div class="line">「最初のページに移動するためのリンク」の「Page Link Text」に設定する値を指定する。</div>
<div class="line"><tt class="docutils literal"><span class="pre">&quot;&quot;</span></tt> を指定すると、「最初のページに移動するためのリンク」自体が出力されなくなる。</div>
<div class="line">例) First</div>
</div>
</td>
</tr>
<tr class="row-even"><td><ol class="first last arabic simple" start="7">
<li></li>
</ol>
</td>
<td>previousLinkText</td>
<td><div class="first last line-block">
<div class="line">「前のページに移動するためのリンク」の「Page Link Text」に設定する値を指定する。</div>
<div class="line"><tt class="docutils literal"><span class="pre">&quot;&quot;</span></tt> を指定すると、「前のページに移動するためのリンク」自体が出力されなくなる。</div>
<div class="line">例) Prev</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="8">
<li></li>
</ol>
</td>
<td>nextLinkText</td>
<td><div class="first last line-block">
<div class="line">「次のページに移動するためのリンク」の「Page Link Text」に設定する値を指定する。</div>
<div class="line"><tt class="docutils literal"><span class="pre">&quot;&quot;</span></tt> を指定すると、「次のページに移動するためのリンク」自体が出力されなくなる。</div>
<div class="line">例) Next</div>
</div>
</td>
</tr>
<tr class="row-even"><td><ol class="first last arabic simple" start="9">
<li></li>
</ol>
</td>
<td>lastLinkText</td>
<td><div class="first last line-block">
<div class="line">「最後のページに移動するためのリンク」の「Page Link Text」に設定する値を指定する。</div>
<div class="line"><tt class="docutils literal"><span class="pre">&quot;&quot;</span></tt> を指定すると、「次のページに移動するためのリンク」自体が出力されなくなる。</div>
<div class="line">例) Last</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="10">
<li></li>
</ol>
</td>
<td>maxDisplayCount</td>
<td><div class="first last line-block">
<div class="line">「指定したページに移動するためのリンク」の最大表示数を指定する。</div>
<div class="line"><tt class="docutils literal"><span class="pre">0</span></tt> を指定すると、「指定したページに移動するためのリンク」自体が出力されなくなる。</div>
<div class="line">例) 5</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p><strong>active状態のページリンクの制約事項</strong></p>
<p class="last"><tt class="docutils literal"><span class="pre">&quot;active&quot;</span></tt> 状態のページリンクを無効化する仕組みは提供していないため、ページリンクが押下された場合は、該当ページを取得するためのリクエストが送信される。
リクエストが送信されないようにする必要がある場合は、共通ライブラリから提供しているJSPタグライブラリを拡張するか、JavaScriptによってリクエストが送信されないように制御する必要がある。</p>
</div>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<blockquote>
<div><p>レイアウトを制御するためのパラメータを、全てデフォルトから変更した時に出力されるHTMLは以下の通り。
図中の番号は、上記で説明したパラメータ一覧の項番に対応している。</p>
<ul class="simple">
<li>JSP</li>
</ul>
<blockquote>
<div><div class="highlight-jsp"><div class="highlight"><pre><span class="nt">&lt;t:pagination</span> <span class="na">page=</span><span class="s">&quot;${page}&quot;</span>
    <span class="na">outerElement=</span><span class="s">&quot;div&quot;</span>
    <span class="na">outerElementClass=</span><span class="s">&quot;pagination&quot;</span>
    <span class="na">innerElement=</span><span class="s">&quot;span&quot;</span>
    <span class="na">disabledClass=</span><span class="s">&quot;hiddenPageLink&quot;</span>
    <span class="na">activeClass=</span><span class="s">&quot;currentPageLink&quot;</span>
    <span class="na">firstLinkText=</span><span class="s">&quot;First&quot;</span>
    <span class="na">previousLinkText=</span><span class="s">&quot;Prev&quot;</span>
    <span class="na">nextLinkText=</span><span class="s">&quot;Next&quot;</span>
    <span class="na">lastLinkText=</span><span class="s">&quot;Last&quot;</span>
    <span class="na">maxDisplayCount=</span><span class="s">&quot;5&quot;</span>
    <span class="nt">/&gt;</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li>出力されるHTML</li>
</ul>
<blockquote>
<div><div class="figure align-center">
<a class="reference internal image-reference" href="../_images/pagination-overview_html_changed.png"><img alt="html of the pagination link(changed layout)." src="../_images/pagination-overview_html_changed.png" style="width: 100%;" /></a>
</div>
</div></blockquote>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>動作を制御するためのパラメータ</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="25%" />
<col width="65%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">パラメータ名</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ol class="first last arabic simple">
<li></li>
</ol>
</td>
<td>disabledHref</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">&quot;disabled&quot;</span></tt> 状態のリンクの「Page Link URL」に設定する値を指定する。</div>
<div class="line">例) javascript:void(0);</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="2">
<li></li>
</ol>
</td>
<td>pathTmpl</td>
<td><div class="first last line-block">
<div class="line">「Page Link URL」のリクエストパスを指定する。</div>
<div class="line">ページ表示時のリクエストパスとページ移動するためのリクエストパスが異なる場合は、このパラメータにページ移動用のリクエストパスを指定する必要がある。</div>
<div class="line">指定するリクエストパスには、ページ位置(page)や取得件数(size)などをパス変数(プレースホルダ)として指定することができる。</div>
<div class="line">指定した値はUTF-8でURLエンコーディングされる。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><ol class="first last arabic simple" start="3">
<li></li>
</ol>
</td>
<td>queryTmpl</td>
<td><div class="first last line-block">
<div class="line">「Page Link URL」のクエリ文字列を指定する。</div>
<div class="line">ページ移動する際に必要となるクエリ文字列(リクエストパラメータ)を指定する。</div>
<div class="line">ページ位置や取得件数のリクエストパラメータ名をデフォルト以外の値にする場合は、このパラメータにクエリ文字列を指定する必要がある。</div>
<div class="line">指定するクエリ文字列には、ページ位置(page)や取得件数(size)などをパス変数(プレースホルダ)として指定することができる。</div>
<div class="line">指定した値はUTF-8でURLエンコーディングされる。</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>disabledHrefの設定値について</strong></p>
<p class="last">デフォルトでは、 <tt class="docutils literal"><span class="pre">disabledHref</span></tt> には <tt class="docutils literal"><span class="pre">&quot;#&quot;</span></tt> が設定されているため、ページリンクを押すとフォーカスがページのトップに移動する。
ページリンク押下時の動作を完全に無効化したい場合は、 <tt class="docutils literal"><span class="pre">&quot;javascript:void(0);&quot;</span></tt> を指定する必要がある。</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>パス変数(プレースホルダ)について</strong></p>
<p><tt class="docutils literal"><span class="pre">pathTmpl</span></tt> 及び <tt class="docutils literal"><span class="pre">queryTmpl</span></tt> に指定できるパス変数は、以下の通り。</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="23%" />
<col width="68%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">パス変数名</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ol class="first last arabic simple">
<li></li>
</ol>
</td>
<td>page</td>
<td>ページ位置を埋め込むためのパス変数。</td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="2">
<li></li>
</ol>
</td>
<td>size</td>
<td>取得件数を埋め込むためのパス変数。</td>
</tr>
<tr class="row-even"><td><ol class="first last arabic simple" start="3">
<li></li>
</ol>
</td>
<td>sortOrderProperty</td>
<td>ソート条件のソート項目を埋め込むためのパス変数。</td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="4">
<li></li>
</ol>
</td>
<td>sortOrderDirection</td>
<td>ソート条件のソート順を埋め込むためのパス変数。</td>
</tr>
</tbody>
</table>
<p class="last">パス変数は、<tt class="docutils literal"><span class="pre">&quot;{パス変数名}&quot;</span></tt> の形式で指定する。</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p><strong>ソート条件の制約事項</strong></p>
<p class="last">ソート条件のパス変数に設定される値は、ひとつのソート条件のみとなっている。
そのため、複数のソート条件を指定して検索した結果を、ページネーション表示する必要がある場合は、
共通ライブラリから提供しているJSPタグライブラリを拡張する必要がある。</p>
</div>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<blockquote>
<div><p>動作を制御するためのパラメータを、全てデフォルトから変更した時に出力されるHTMLは、以下の通り。
図中の番号は、上記で説明したパラメータ一覧の項番に対応している。</p>
<ul class="simple">
<li>JSP</li>
</ul>
<blockquote>
<div><div class="highlight-jsp"><div class="highlight"><pre><span class="nt">&lt;t:pagination</span> <span class="na">page=</span><span class="s">&quot;${page}&quot;</span>
    <span class="na">disabledHref=</span><span class="s">&quot;javascript:void(0);&quot;</span>
    <span class="na">pathTmpl=</span><span class="s">&quot;${pageContext.request.contextPath}/article/list/{page}/{size}&quot;</span>
    <span class="na">queryTmpl=</span><span class="s">&quot;sort={sortOrderProperty},{sortOrderDirection}&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li>出力されるHTML</li>
</ul>
<blockquote>
<div><div class="figure align-center">
<a class="reference internal image-reference" href="../_images/pagination-overview_html_changed2.png"><img alt="html of the pagination link(changed behavior)." src="../_images/pagination-overview_html_changed2.png" style="width: 100%;" /></a>
</div>
</div></blockquote>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="id7">
<h3><a class="toc-backref" href="#id33">5.11.1.4. ページネーション機能使用時の処理フロー</a><a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>Spring Dataより提供されているページネーション機能と、共通ライブラリから提供してるJSPタグライブラリを利用した際の処理フローは、以下の通り。</p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../_images/pagination-overview_flow.png"><img alt="processing flow of pagination" src="../_images/pagination-overview_flow.png" style="width: 100%;" /></a>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">検索条件と共に、リクエストパラメータとして検索対象のページ位置(page)と取得件数(size)を指定してリクエストを送信する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">PageableHandlerMethodArgumentResolver</span></tt> は、リクエストパラメータに指定されている検索対象のページ位置(page)と取得件数(size)を取得し、 <tt class="docutils literal"><span class="pre">Pageable</span></tt> オブジェクトを生成する。</div>
<div class="line">生成された <tt class="docutils literal"><span class="pre">Pageable</span></tt> オブジェクトは、Controllerの処理メソッドの引数に設定される。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Controllerは、引数で受け取った <tt class="docutils literal"><span class="pre">Pageable</span></tt> オブジェクトを、Serviceのメソッドに引き渡す。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Serviceは、引数で受け取った <tt class="docutils literal"><span class="pre">Pageable</span></tt> オブジェクトを、 RepositoryのQueryメソッドに引き渡す。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Repositoryは、検索条件に一致するデータの合計件数(totalElements)と、引数で受け取った <tt class="docutils literal"><span class="pre">Pageable</span></tt> オブジェクトに指定されているページ位置(page)と取得件数(size)の範囲に存在するデータを、データベースより取得する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(6)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Repositoryは、取得した合計件数(totalElements)、取得データ(content)、引数で受け取った <tt class="docutils literal"><span class="pre">Pageable</span></tt> オブジェクトより <tt class="docutils literal"><span class="pre">Page</span></tt> オブジェクトを作成し、Service及びControllerへ返却する。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(7)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Controllerは、返却された <tt class="docutils literal"><span class="pre">Page</span></tt> オブジェクトを、 <tt class="docutils literal"><span class="pre">Model</span></tt> オブジェクトに格納後、JSPに遷移する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(8)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">JSPは、 <tt class="docutils literal"><span class="pre">Model</span></tt> オブジェクトに格納されている <tt class="docutils literal"><span class="pre">Page</span></tt> オブジェクトを取得し、共通ライブラリから提供されているページネーション用のJSPタグライブラリ( <tt class="docutils literal"><span class="pre">&lt;t:pagination&gt;</span></tt> )を呼び出す。</div>
<div class="line">ページネーション用のJSPタグライブラリは <tt class="docutils literal"><span class="pre">Page</span></tt> オブジェクトを参照し、ページネーションリンクを生成する。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(9)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">JSPで生成したHTMLを、クライアント(ブラウザ)に返却する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(10)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">ページネーションリンクを押下すると、該当ページを表示するためリクエストが送信される。</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>Repositoryの実装について</strong></p>
<p>Spring Data JPAのRepositoryインタフェースのメソッドを使用した場合は、(5)と(6)の処理はSpring Data JPAの機能で自動的に行われる。</p>
<p class="last">Mybatis2を使用する場合は、Java又はSQLマッピングファイル内で実装する必要がある。具体的な実装例については、「 <a class="reference internal" href="DataAccessMybatis2.html"><em>データベースアクセス（Mybatis2編）</em></a> 」を参照されたい。</p>
</div>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="how-to-use">
<h2><a class="toc-backref" href="#id34">5.11.2. How to use</a><a class="headerlink" href="#how-to-use" title="Permalink to this headline">¶</a></h2>
<p>ページネーション機能の具体的な使用方法を以下に示す。</p>
<div class="section" id="id8">
<h3><a class="toc-backref" href="#id35">5.11.2.1. アプリケーションの設定</a><a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id9">
<h4><a class="toc-backref" href="#id36">5.11.2.1.1. Spring Dataのページネーション機能を有効化するための設定</a><a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<div class="line-block">
<div class="line">リクエストパラメータに指定された検索対象のページ位置(page)、取得件数(size)、ソート条件(sort)を、 <tt class="docutils literal"><span class="pre">Pageable</span></tt> オブジェクトとしてControllerの引数に設定するための機能を有効化する。</div>
<div class="line">下記の設定は、ブランクプロジェクトでは設定済みの状態になっている。</div>
</div>
<p><tt class="file docutils literal"><span class="pre">spring-mvc.xml</span></tt></p>
<blockquote>
<div><div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;mvc:annotation-driven&gt;</span>
    <span class="nt">&lt;mvc:argument-resolvers&gt;</span>
        <span class="c">&lt;!-- (1) --&gt;</span>
        <span class="nt">&lt;bean</span>
            <span class="na">class=</span><span class="s">&quot;org.springframework.data.web.PageableHandlerMethodArgumentResolver&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/mvc:argument-resolvers&gt;</span>
<span class="nt">&lt;/mvc:annotation-driven&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">&lt;mvc:argument-resolvers&gt;</span></tt> に <tt class="docutils literal"><span class="pre">org.springframework.data.web.PageableHandlerMethodArgumentResolver</span></tt> を指定する。</div>
<div class="line"><tt class="docutils literal"><span class="pre">PageableHandlerMethodArgumentResolver</span></tt> で指定できるプロパティについては、「 <a class="reference internal" href="#paginatin-appendix-pageablehandlermethodargumentresolver"><em>PageableHandlerMethodArgumentResolver のプロパティ値について</em></a> 」を参照されたい。</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="id10">
<h3><a class="toc-backref" href="#id37">5.11.2.2. ページ検索の実装</a><a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<p>ページ検索を実現するための実装方法を以下に示す。</p>
<div class="section" id="id11">
<h4><a class="toc-backref" href="#id38">5.11.2.2.1. アプリケーション層の実装</a><a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<p>ページ検索に必要な情報(検索対象のページ位置、取得件数、ソート条件)を、Controllerの引数として受け取り、Serviceのメソッドに引き渡す。</p>
<ul class="simple">
<li>Controller</li>
</ul>
<blockquote>
<div><div class="highlight-java"><div class="highlight"><pre><span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&quot;list&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">String</span> <span class="nf">list</span><span class="o">(</span><span class="nd">@Validated</span> <span class="n">ArticleSearchCriteriaForm</span> <span class="n">form</span><span class="o">,</span>
        <span class="n">BindingResult</span> <span class="n">result</span><span class="o">,</span>
        <span class="n">Pageable</span> <span class="n">pageable</span><span class="o">,</span> <span class="c1">// (1)</span>
        <span class="n">Model</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>

    <span class="n">ArticleSearchCriteria</span> <span class="n">criteria</span> <span class="o">=</span> <span class="n">beanMapper</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">form</span><span class="o">,</span>
            <span class="n">ArticleSearchCriteria</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

    <span class="n">Page</span><span class="o">&lt;</span><span class="n">Article</span><span class="o">&gt;</span> <span class="n">page</span> <span class="o">=</span> <span class="n">articleService</span><span class="o">.</span><span class="na">searchArticle</span><span class="o">(</span><span class="n">criteria</span><span class="o">,</span> <span class="n">pageable</span><span class="o">);</span> <span class="c1">// (2)</span>

    <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;page&quot;</span><span class="o">,</span> <span class="n">page</span><span class="o">);</span> <span class="c1">// (3)</span>

    <span class="k">return</span> <span class="s">&quot;article/list&quot;</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">処理メソッドの引数として <tt class="docutils literal"><span class="pre">Pageable</span></tt> を指定する。</div>
<div class="line"><tt class="docutils literal"><span class="pre">Pageable</span></tt> オブジェクトには、ページ検索に必要な情報(検索対象のページ位置、取得件数、ソート条件)が格納されている。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Serviceのメソッドの引数に <tt class="docutils literal"><span class="pre">Pageable</span></tt> オブジェクトを指定して呼び出す。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Serviceから返却された検索結果( <tt class="docutils literal"><span class="pre">Page</span></tt> オブジェクト )を <tt class="docutils literal"><span class="pre">Model</span></tt> に追加する。 <tt class="docutils literal"><span class="pre">Model</span></tt> に追加することで、View(JSP)から参照できるようになる。</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>リクエストパラメータにページ検索に必要な情報の指定がない場合の動作について</strong></p>
<p>ページ検索に必要な情報(検索対象のページ位置、取得件数、ソート条件)がリクエストパラメータに指定されていない場合は、デフォルト値が適用される。
デフォルト値は、以下の通り。</p>
<ul class="simple">
<li>検索対象のページ位置 : <cite>0</cite> (1ページ目)</li>
<li>取得件数 : <cite>20</cite></li>
<li>ソート条件 : <cite>null</cite> (ソート条件なし)</li>
</ul>
<p>デフォルト値は、以下の２つの方法で変更することができる。</p>
<ul class="last simple">
<li>処理メソッドの <tt class="docutils literal"><span class="pre">Pageable</span></tt> の引数に、 <tt class="docutils literal"><span class="pre">&#64;org.springframework.data.web.PageableDefault</span></tt> アノテーションを指定してデフォルト値を定義する。</li>
<li><tt class="docutils literal"><span class="pre">PageableHandlerMethodArgumentResolver</span></tt> の <tt class="docutils literal"><span class="pre">fallbackPageable</span></tt> プロパティにデフォルト値を定義した <tt class="docutils literal"><span class="pre">Pageable</span></tt> オブジェクトを指定する。</li>
</ul>
</div>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line"><tt class="docutils literal"><span class="pre">&#64;PageableDefault</span></tt> アノテーションを使用してデフォルト値を指定する方法について説明する。</div>
<div class="line">ページ検索処理毎にデフォルト値を変更する必要がある場合は、<tt class="docutils literal"><span class="pre">&#64;PageableDefault</span></tt> アノテーションを使ってデフォルト値を指定する。</div>
</div>
<blockquote>
<div><div class="highlight-java"><div class="highlight"><pre><span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&quot;list&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">String</span> <span class="nf">list</span><span class="o">(</span><span class="nd">@Validated</span> <span class="n">ArticleSearchCriteriaForm</span> <span class="n">form</span><span class="o">,</span>
        <span class="n">BindingResult</span> <span class="n">result</span><span class="o">,</span>
        <span class="nd">@PageableDefault</span><span class="o">(</span> <span class="c1">// (1)</span>
                <span class="n">page</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span>    <span class="c1">// (2)</span>
                <span class="n">size</span> <span class="o">=</span> <span class="mi">50</span><span class="o">,</span>   <span class="c1">// (3)</span>
                <span class="n">direction</span> <span class="o">=</span> <span class="n">Direction</span><span class="o">.</span><span class="na">DESC</span><span class="o">,</span>  <span class="c1">// (4)</span>
                <span class="n">sort</span> <span class="o">=</span> <span class="o">{</span>     <span class="c1">// (5)</span>
                    <span class="s">&quot;publishedDate&quot;</span><span class="o">,</span>
                    <span class="s">&quot;articleId&quot;</span>
                    <span class="o">}</span>
                <span class="o">)</span> <span class="n">Pageable</span> <span class="n">pageable</span><span class="o">,</span>
        <span class="n">Model</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// ...</span>
    <span class="k">return</span> <span class="s">&quot;article/list&quot;</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="70%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
<th class="head">デフォルト値</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">Pageable</span></tt> の引数に <tt class="docutils literal"><span class="pre">&#64;PageableDefault</span></tt> アノテーションを指定する。</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">-</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">ページ位置のデフォルト値を変更する場合は、 <tt class="docutils literal"><span class="pre">&#64;PageableDefault</span></tt> のpage属性に値を指定する。</div>
<div class="line">通常変更する必要はない。</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">0</span></tt></div>
<div class="line">(1ページ目)</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">取得件数のデフォルト値を変更する場合は、 <tt class="docutils literal"><span class="pre">&#64;PageableDefault</span></tt> のsize又はvalue属性に値を指定する。</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">10</span></tt></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">ソート条件のデフォルト値を変更する場合は、 <tt class="docutils literal"><span class="pre">&#64;PageableDefault</span></tt> のdirection属性に値を指定する。</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">Direction.ASC</span></tt></div>
<div class="line">(昇順)</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">ソート条件のソート項目を指定する場合は、 <tt class="docutils literal"><span class="pre">&#64;PageableDefault</span></tt> のsort属性にソート項目を指定する。</div>
<div class="line">複数の項目でソートする場合は、ソートするプロパティ名を配列で指定する。</div>
<div class="line">上記例では、 <tt class="docutils literal"><span class="pre">&quot;ORDER</span> <span class="pre">BY</span> <span class="pre">publishedDate</span> <span class="pre">DESC,</span> <span class="pre">articleId</span> <span class="pre">DESC&quot;</span></tt> というソート条件がQueryに追加される。</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">空の配列</div>
<div class="line">(ソート項目なし)</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>&#64;PageableDefaultアノテーションで指定できるソート順について</strong></p>
<p class="last"><tt class="docutils literal"><span class="pre">&#64;PageableDefault</span></tt> アノテーションで指定できるソート順は昇順か降順のどちらか一つなので、項目ごとに異なるソート順を指定したい場合は <tt class="docutils literal"><span class="pre">&#64;org.springframework.data.web.SortDefaults</span></tt> アノテーションを使用する必要がある。
具体的には、 <tt class="docutils literal"><span class="pre">&quot;ORDER</span> <span class="pre">BY</span> <span class="pre">publishedDate</span> <span class="pre">DESC,</span> <span class="pre">articleId</span> <span class="pre">ASC&quot;</span></tt> というソート順にしたい場合である。</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p><strong>取得件数のデフォルト値のみ変更する場合の指定方法</strong></p>
<p class="last">取得件数のデフォルト値のみ変更する場合は、 <tt class="docutils literal"><span class="pre">&#64;PageableDefault(50)</span></tt> と指定することもできる。これは <tt class="docutils literal"><span class="pre">&#64;PageableDefault(size</span> <span class="pre">=</span> <span class="pre">50)</span></tt> と同じ動作となる。</p>
</div>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line"><tt class="docutils literal"><span class="pre">&#64;SortDefaults</span></tt> アノテーションを使用してデフォルト値を指定する方法について説明する。</div>
<div class="line"><tt class="docutils literal"><span class="pre">&#64;SortDefaults</span></tt> アノテーションは、ソート項目が複数あり、項目ごとに異なるソート順を指定したい場合に使用する。</div>
</div>
<blockquote>
<div><div class="highlight-java"><div class="highlight"><pre><span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&quot;list&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">String</span> <span class="nf">list</span><span class="o">(</span>
        <span class="nd">@Validated</span> <span class="n">ArticleSearchCriteriaForm</span> <span class="n">form</span><span class="o">,</span>
        <span class="n">BindingResult</span> <span class="n">result</span><span class="o">,</span>
        <span class="nd">@PageableDefault</span><span class="o">(</span><span class="n">size</span> <span class="o">=</span> <span class="mi">50</span><span class="o">)</span>
        <span class="nd">@SortDefaults</span><span class="o">(</span>  <span class="c1">// (1)</span>
                <span class="o">{</span>
                    <span class="nd">@SortDefault</span><span class="o">(</span>  <span class="c1">// (2)</span>
                                 <span class="n">sort</span> <span class="o">=</span> <span class="s">&quot;publishedDate&quot;</span><span class="o">,</span>    <span class="c1">// (3)</span>
                                 <span class="n">direction</span> <span class="o">=</span> <span class="n">Direction</span><span class="o">.</span><span class="na">DESC</span> <span class="c1">// (4)</span>
                                <span class="o">),</span>
                    <span class="nd">@SortDefault</span><span class="o">(</span>
                                 <span class="n">sort</span> <span class="o">=</span> <span class="s">&quot;articleId&quot;</span>
                                <span class="o">)</span>
                <span class="o">})</span> <span class="n">Pageable</span> <span class="n">pageable</span><span class="o">,</span>
        <span class="n">Model</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// ...</span>
    <span class="k">return</span> <span class="s">&quot;article/list&quot;</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="70%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
<th class="head">デフォルト値</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">Pageable</span></tt> の引数に <tt class="docutils literal"><span class="pre">&#64;SortDefaults</span></tt> アノテーションを指定する。</div>
<div class="line"><tt class="docutils literal"><span class="pre">&#64;SortDefaults</span></tt> アノテーションには、複数の <tt class="docutils literal"><span class="pre">&#64;org.springframework.data.web.SortDefault</span></tt> アノテーションを配列として指定することができる。</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">-</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">&#64;SortDefaults</span></tt> アノテーションの value属性に、 <tt class="docutils literal"><span class="pre">&#64;SortDefault</span></tt> アノテーションを指定する。</div>
<div class="line">複数指定する場合は配列として指定する。</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">-</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">&#64;PageableDefault</span></tt> のsort又はvalue属性にソート項目を指定する。</div>
<div class="line">複数の項目を指定する場合は配列として指定する。</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">空の配列</div>
<div class="line">(ソート項目なし)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">ソート条件のデフォルト値を変更する場合は、<tt class="docutils literal"><span class="pre">&#64;PageableDefault</span></tt> のdirection属性に値を指定する。</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">Direction.ASC</span></tt></div>
<div class="line">(昇順)</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>上記例では、 <tt class="docutils literal"><span class="pre">&quot;ORDER</span> <span class="pre">BY</span> <span class="pre">publishedDate</span> <span class="pre">DESC,</span> <span class="pre">articleId</span> <span class="pre">ASC&quot;</span></tt> というソート条件がQueryに追加される。</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p><strong>ソート項目のデフォルト値のみ指定する場合の指定方法</strong></p>
<p class="last">取得項目のみ指定する場合は、 <tt class="docutils literal"><span class="pre">&#64;PageableDefault(&quot;articleId&quot;)</span></tt> と指定することもできる。
これは <tt class="docutils literal"><span class="pre">&#64;PageableDefault(sort</span> <span class="pre">=</span> <span class="pre">&quot;articleId&quot;)</span></tt> や <tt class="docutils literal"><span class="pre">&#64;PageableDefault(sort</span> <span class="pre">=</span> <span class="pre">&quot;articleId&quot;,</span> <span class="pre">direction</span> <span class="pre">=</span> <span class="pre">Direction.ASC)</span></tt> と同じ動作となる。</p>
</div>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>アプリケーション全体のデフォルト値を変更する必要がある場合は、 <tt class="file docutils literal"><span class="pre">spring-mvc.xml</span></tt> に定義した <tt class="docutils literal"><span class="pre">PageableHandlerMethodArgumentResolver</span></tt>
の <tt class="docutils literal"><span class="pre">fallbackPageable</span></tt> プロパティにデフォルト値を定義した <tt class="docutils literal"><span class="pre">Pageable</span></tt> オブジェクトを指定する。</p>
<p><tt class="docutils literal"><span class="pre">fallbackPageable</span></tt> の説明や具体的な設定例については、「 <a class="reference internal" href="#paginatin-appendix-pageablehandlermethodargumentresolver"><em>PageableHandlerMethodArgumentResolver のプロパティ値について</em></a> 」を参照されたい。</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="jpa">
<h4><a class="toc-backref" href="#id39">5.11.2.2.2. ドメイン層の実装(JPA編)</a><a class="headerlink" href="#jpa" title="Permalink to this headline">¶</a></h4>
<div class="line-block">
<div class="line">JPA(Spring Data JPA)を使用してデータベースにアクセスする場合は、Controllerから受け取った <tt class="docutils literal"><span class="pre">Pageable</span></tt> オブジェクトをRepositoryに引き渡す。</div>
<div class="line">以下にもっともシンプルな実装例を示す。</div>
<div class="line">ドメイン層で実装するページ検索処理の詳細については、 「 <a class="reference internal" href="DataAccessJpa.html"><em>データベースアクセス（JPA編）</em></a> 」 を参照されたい。</div>
</div>
<ul class="simple">
<li>Service</li>
</ul>
<blockquote>
<div><div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="n">Page</span><span class="o">&lt;</span><span class="n">Article</span><span class="o">&gt;</span> <span class="nf">searchArticle</span><span class="o">(</span><span class="n">ArticleSearchCriteria</span> <span class="n">criteria</span><span class="o">,</span>
        <span class="n">Pageable</span> <span class="n">pageable</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// (1)</span>

    <span class="n">String</span> <span class="n">word</span> <span class="o">=</span> <span class="n">QueryEscapeUtils</span><span class="o">.</span><span class="na">toLikeCondition</span><span class="o">(</span><span class="n">criteria</span><span class="o">.</span><span class="na">getWord</span><span class="o">());</span>

    <span class="n">Page</span><span class="o">&lt;</span><span class="n">Article</span><span class="o">&gt;</span> <span class="n">page</span> <span class="o">=</span> <span class="n">articleRepository</span><span class="o">.</span><span class="na">findPageBy</span><span class="o">(</span><span class="n">word</span><span class="o">,</span> <span class="n">pageable</span><span class="o">);</span> <span class="c1">// (2)</span>

    <span class="k">return</span> <span class="n">page</span><span class="o">;</span> <span class="c1">// (3)</span>
<span class="o">}</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">ページ検索に必要な情報( <tt class="docutils literal"><span class="pre">Pageable</span></tt> )をServiceのメソッドの引数として受け取る。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">RepositoryのQueryメソッドの引数に <tt class="docutils literal"><span class="pre">Pageable</span></tt> オブジェクトを指定して呼び出す。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Repositoryから返却された検索結果( <tt class="docutils literal"><span class="pre">Page</span></tt> オブジェクト )をControllerに返却する。</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<ul class="simple">
<li>Repository</li>
</ul>
<blockquote>
<div><div class="highlight-java"><div class="highlight"><pre><span class="nd">@Query</span><span class="o">(</span><span class="s">&quot;SELECT a FROM Article a WHERE a.title LIKE %:freeWord% ESCAPE &#39;~&#39; OR a.overview LIKE %:freeWord% ESCAPE &#39;~&#39;&quot;</span><span class="o">)</span>
<span class="n">Page</span><span class="o">&lt;</span><span class="n">Article</span><span class="o">&gt;</span> <span class="nf">findPageByFreeWord</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">&quot;freeWord&quot;</span><span class="o">)</span> <span class="n">String</span> <span class="n">word</span><span class="o">,</span> <span class="n">Pageable</span> <span class="n">pageable</span><span class="o">);</span> <span class="c1">// (4)</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">ページ検索に必要な情報( <tt class="docutils literal"><span class="pre">Pageable</span></tt> )をRepositoryのQueryメソッドの引数として受け取る。</div>
<div class="line">返り値の型は、<tt class="docutils literal"><span class="pre">Page&lt;Entity&gt;</span></tt> とする。</div>
<div class="line">上記のようなメソッドを用意すると、Spring Data JPAの機能が <tt class="docutils literal"><span class="pre">Pageable</span></tt> オブジェクトの状態に該当するデータを抽出して <tt class="docutils literal"><span class="pre">Page</span></tt> オブジェクトを返却してくれる。</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="service-mybatis2">
<h4><a class="toc-backref" href="#id40">5.11.2.2.3. Serviceの実装(Mybatis2編)</a><a class="headerlink" href="#service-mybatis2" title="Permalink to this headline">¶</a></h4>
<div class="line-block">
<div class="line">Mybatis2(TERASOLUNA DAO)を使用してデータベースにアクセスする場合は、Controllerから受け取った <tt class="docutils literal"><span class="pre">Pageable</span></tt> オブジェクトより、必要な情報を抜き出してTERASOLUNA DAOのメソッドを呼び出す。</div>
<div class="line">該当データを抽出するためのSQLやソート条件については、SQLマッピングで実装する必要がある。</div>
<div class="line">ドメイン層で実装するページ検索処理の詳細については、 「 <a class="reference internal" href="DataAccessMybatis2.html"><em>データベースアクセス（Mybatis2編）</em></a> 」 を参照されたい。</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="id12">
<h3><a class="toc-backref" href="#id41">5.11.2.3. JSPの実装(基本編)</a><a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<p>ページ検索処理で取得した <tt class="docutils literal"><span class="pre">Page</span></tt> オブジェクトを一覧画面に表示し、ページネーションリンク及びページネーション情報(合計件数、合計ページ数、表示ページ数など)を表示する方法を以下に示す。</p>
<div class="section" id="id13">
<h4><a class="toc-backref" href="#id42">5.11.2.3.1. 取得データの表示</a><a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h4>
<p>ページ検索処理で取得したデータを表示するための実装例を以下に示す。</p>
<ul class="simple">
<li>Controller</li>
</ul>
<blockquote>
<div><div class="highlight-java"><div class="highlight"><pre><span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&quot;list&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">String</span> <span class="nf">list</span><span class="o">(</span><span class="nd">@Validated</span> <span class="n">ArticleSearchCriteriaForm</span> <span class="n">form</span><span class="o">,</span> <span class="n">BindingResult</span> <span class="n">result</span><span class="o">,</span>
        <span class="n">Pageable</span> <span class="n">pageable</span><span class="o">,</span> <span class="n">Model</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>

    <span class="k">if</span> <span class="o">(!</span><span class="n">StringUtils</span><span class="o">.</span><span class="na">hasLength</span><span class="o">(</span><span class="n">form</span><span class="o">.</span><span class="na">getWord</span><span class="o">()))</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">&quot;article/list&quot;</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="n">ArticleSearchCriteria</span> <span class="n">criteria</span> <span class="o">=</span> <span class="n">beanMapper</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">form</span><span class="o">,</span>
            <span class="n">ArticleSearchCriteria</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

    <span class="n">Page</span><span class="o">&lt;</span><span class="n">Article</span><span class="o">&gt;</span> <span class="n">page</span> <span class="o">=</span> <span class="n">articleService</span><span class="o">.</span><span class="na">searchArticle</span><span class="o">(</span><span class="n">criteria</span><span class="o">,</span> <span class="n">pageable</span><span class="o">);</span>

    <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;page&quot;</span><span class="o">,</span> <span class="n">page</span><span class="o">);</span> <span class="c1">// (1)</span>

    <span class="k">return</span> <span class="s">&quot;article/list&quot;</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">&quot;page&quot;</span></tt> という属性名で <tt class="docutils literal"><span class="pre">Page</span></tt> オブジェクトを <tt class="docutils literal"><span class="pre">Model</span></tt> に格納する。</div>
<div class="line">JSPでは <tt class="docutils literal"><span class="pre">&quot;page&quot;</span></tt> という属性名を指定して <tt class="docutils literal"><span class="pre">Page</span></tt> オブジェクトにアクセスすることになる。</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<ul class="simple">
<li>JSP</li>
</ul>
<blockquote>
<div><div class="highlight-jsp"><div class="highlight"><pre><span class="k">&lt;%-</span><span class="o">-</span> <span class="o">...</span> <span class="o">--</span><span class="k">%&gt;</span>

<span class="k">&lt;%-</span><span class="o">-</span> <span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="o">--</span><span class="k">%&gt;</span>
<span class="nt">&lt;c:when</span> <span class="na">test=</span><span class="s">&quot;${page != null &amp;&amp; page.totalPages != 0}&quot;</span><span class="nt">&gt;</span>

  <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">&quot;maintable&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;thead&gt;</span>
      <span class="nt">&lt;tr&gt;</span>
        <span class="nt">&lt;th</span> <span class="na">class=</span><span class="s">&quot;no&quot;</span><span class="nt">&gt;</span>No<span class="nt">&lt;/th&gt;</span>
        <span class="nt">&lt;th</span> <span class="na">class=</span><span class="s">&quot;articleClass&quot;</span><span class="nt">&gt;</span>Class<span class="nt">&lt;/th&gt;</span>
        <span class="nt">&lt;th</span> <span class="na">class=</span><span class="s">&quot;title&quot;</span><span class="nt">&gt;</span>Title<span class="nt">&lt;/th&gt;</span>
        <span class="nt">&lt;th</span> <span class="na">class=</span><span class="s">&quot;overview&quot;</span><span class="nt">&gt;</span>Overview<span class="nt">&lt;/th&gt;</span>
        <span class="nt">&lt;th</span> <span class="na">class=</span><span class="s">&quot;date&quot;</span><span class="nt">&gt;</span>Published Date<span class="nt">&lt;/th&gt;</span>
      <span class="nt">&lt;/tr&gt;</span>
    <span class="nt">&lt;/thead&gt;</span>

    <span class="k">&lt;%-</span><span class="o">-</span> <span class="o">(</span><span class="mi">3</span><span class="o">)</span> <span class="o">--</span><span class="k">%&gt;</span>
    <span class="nt">&lt;c:forEach</span> <span class="na">var=</span><span class="s">&quot;article&quot;</span> <span class="na">items=</span><span class="s">&quot;${page.content}&quot;</span> <span class="na">varStatus=</span><span class="s">&quot;rowStatus&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;tr&gt;</span>
        <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">&quot;no&quot;</span><span class="nt">&gt;</span>
          ${(page.number * page.size) + rowStatus.count}
        <span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">&quot;articleClass&quot;</span><span class="nt">&gt;</span>
          ${f:h(article.articleClass.name)}
        <span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">&quot;title&quot;</span><span class="nt">&gt;</span>
          ${f:h(article.title)}
        <span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">&quot;overview&quot;</span><span class="nt">&gt;</span>
          ${f:h(article.overview)}
        <span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">&quot;date&quot;</span><span class="nt">&gt;</span>
          ${f:h(article.publishedDate)}
        <span class="nt">&lt;/td&gt;</span>
      <span class="nt">&lt;/tr&gt;</span>
    <span class="nt">&lt;/c:forEach&gt;</span>

  <span class="nt">&lt;/table&gt;</span>

  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;paginationPart&quot;</span><span class="nt">&gt;</span>

    <span class="k">&lt;%-</span><span class="o">-</span> <span class="o">...</span> <span class="o">--</span><span class="k">%&gt;</span>

  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/c:when&gt;</span>

<span class="k">&lt;%-</span><span class="o">-</span> <span class="o">...</span> <span class="o">--</span><span class="k">%&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">上記例では、条件に一致するデータが存在するかチェックを行い、一致するデータがない場合はヘッダ行も含めて表示していない。</div>
<div class="line">一致するデータがない場合でもヘッダ行は表示させる必要がある場合は、この分岐は不要となる。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">JSTLの <tt class="docutils literal"><span class="pre">&lt;c:forEach&gt;</span></tt> タグを使用して、取得したデータの一覧を表示する。</div>
<div class="line">取得したデータは、 <tt class="docutils literal"><span class="pre">Page</span></tt> オブジェクトの <tt class="docutils literal"><span class="pre">content</span></tt> プロパティにリスト形式で格納されている。</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<ul class="simple">
<li>上記JSPで出力される画面例</li>
</ul>
<blockquote>
<div><div class="figure align-center">
<a class="reference internal image-reference" href="../_images/pagination-how_to_use_view_list_screen.png"><img alt="Screen image of content table" src="../_images/pagination-how_to_use_view_list_screen.png" style="width: 100%;" /></a>
</div>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id14">
<h4><a class="toc-backref" href="#id43">5.11.2.3.2. ページネーションリンクの表示</a><a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h4>
<p>ページ移動するためのリンク(ページネーションリンク)を表示するための実装例を以下に示す。</p>
<p>共通ライブラリより提供しているJSPタグライブラリを使用して、ページネーションリンクを出力する。</p>
<ul class="simple">
<li><tt class="file docutils literal"><span class="pre">include.jsp</span></tt></li>
</ul>
<blockquote>
<div><p>共通ライブラリより提供しているJSPタグライブラリの宣言を行う。ブランクプロジェクトでは設定済みの状態となっている。</p>
<div class="highlight-jsp"><div class="highlight"><pre><span class="k">&lt;%@</span> <span class="n">taglib</span> <span class="n">uri</span><span class="o">=</span><span class="s">&quot;http://terasoluna.org/tags&quot;</span> <span class="n">prefix</span><span class="o">=</span><span class="s">&quot;t&quot;</span><span class="k">%&gt;</span>       <span class="k">&lt;%-</span><span class="o">-</span> <span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">--</span><span class="k">%&gt;</span>
<span class="k">&lt;%@</span> <span class="n">taglib</span> <span class="n">uri</span><span class="o">=</span><span class="s">&quot;http://terasoluna.org/functions&quot;</span> <span class="n">prefix</span><span class="o">=</span><span class="s">&quot;f&quot;</span><span class="k">%&gt;</span>  <span class="k">&lt;%-</span><span class="o">-</span> <span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="o">--</span><span class="k">%&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">ページネーションリンクを表示するためのJSPタグが格納されている。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">ページネーションリンクを使う際に利用するJSPのELファンクションが格納されている。</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<ul class="simple">
<li>JSP</li>
</ul>
<blockquote>
<div><div class="highlight-jsp"><div class="highlight"><pre><span class="nt">&lt;t:pagination</span> <span class="na">page=</span><span class="s">&quot;${page}&quot;</span> <span class="nt">/&gt;</span> <span class="k">&lt;%-</span><span class="o">-</span> <span class="o">(</span><span class="mi">3</span><span class="o">)</span> <span class="o">--</span><span class="k">%&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">&lt;t:pagination&gt;</span></tt> タグを使用する。 page属性には、 Controllerで <tt class="docutils literal"><span class="pre">Model</span></tt> に格納した <tt class="docutils literal"><span class="pre">Page</span></tt> オブジェクトを指定する。</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple">
<li>出力されるHTML</li>
</ul>
<blockquote>
<div><p>下記の出力例は、<tt class="docutils literal"><span class="pre">&quot;?page=0&amp;size=6&quot;</span></tt> を指定して検索した際の結果である。</p>
<div class="highlight-html"><div class="highlight"><pre> <span class="nt">&lt;ul&gt;</span>
    <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">&quot;disabled&quot;</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span><span class="ni">&amp;lt;&amp;lt;</span><span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">&quot;disabled&quot;</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span><span class="ni">&amp;lt;</span><span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">&quot;active&quot;</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;?page=0&amp;size=6&quot;</span><span class="nt">&gt;</span>1<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;?page=1&amp;size=6&quot;</span><span class="nt">&gt;</span>2<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;?page=2&amp;size=6&quot;</span><span class="nt">&gt;</span>3<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;?page=3&amp;size=6&quot;</span><span class="nt">&gt;</span>4<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;?page=4&amp;size=6&quot;</span><span class="nt">&gt;</span>5<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;?page=5&amp;size=6&quot;</span><span class="nt">&gt;</span>6<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;?page=6&amp;size=6&quot;</span><span class="nt">&gt;</span>7<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;?page=7&amp;size=6&quot;</span><span class="nt">&gt;</span>8<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;?page=8&amp;size=6&quot;</span><span class="nt">&gt;</span>9<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;?page=9&amp;size=6&quot;</span><span class="nt">&gt;</span>10<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;?page=1&amp;size=6&quot;</span><span class="nt">&gt;</span><span class="ni">&amp;gt;</span><span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;?page=9&amp;size=6&quot;</span><span class="nt">&gt;</span><span class="ni">&amp;gt;&amp;gt;</span><span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></div>
</div>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">ページネーションリンク用のスタイルシートを用意しないと以下のような表示となる。</div>
<div class="line">見てわかる通り、ページネーションリンクとして成立していない。</div>
</div>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../_images/pagination-how_to_use_jsp_not_applied_css.png"><img alt="Screen image that style sheet is not applied." src="../_images/pagination-how_to_use_jsp_not_applied_css.png" style="width: 120px; height: 290px;" /></a>
</div>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">ページネーションリンクとして成立する最低限のスタイルシートの定義の追加と、JSPの変更を行うと、以下のような表示となる。</div>
</div>
<ul class="simple">
<li>画面イメージ</li>
</ul>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../_images/pagination-how_to_use_jsp_applied_simple_css.png"><img alt="Screen image that simple style sheet applied." src="../_images/pagination-how_to_use_jsp_applied_simple_css.png" style="width: 290px; height: 40px;" /></a>
</div>
</div></blockquote>
<ul class="simple">
<li>JSP</li>
</ul>
<blockquote>
<div><div class="highlight-jsp"><div class="highlight"><pre><span class="k">&lt;%-</span><span class="o">-</span> <span class="o">...</span> <span class="o">--</span><span class="k">%&gt;</span>

<span class="nt">&lt;t:pagination</span> <span class="na">page=</span><span class="s">&quot;${page}&quot;</span>
    <span class="na">outerElementClass=</span><span class="s">&quot;pagination&quot;</span> <span class="nt">/&gt;</span> <span class="k">&lt;%-</span><span class="o">-</span> <span class="o">(</span><span class="mi">4</span><span class="o">)</span> <span class="o">--</span><span class="k">%&gt;</span>

<span class="k">&lt;%-</span><span class="o">-</span> <span class="o">...</span> <span class="o">--</span><span class="k">%&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">ページネーションリンクであることを示すクラス名を指定する。</div>
<div class="line">クラス名を指定することでスタイルシートで指定するスタイルの適用範囲をページネーションリンクに限定することができる。</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<ul class="simple">
<li>スタイルシート</li>
</ul>
<blockquote>
<div><div class="highlight-css"><div class="highlight"><pre><span class="nc">.pagination</span> <span class="nt">li</span> <span class="p">{</span>
    <span class="k">display</span><span class="o">:</span> <span class="k">inline</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.pagination</span> <span class="nt">li</span><span class="o">&gt;</span><span class="nt">a</span> <span class="p">{</span>
    <span class="k">margin-left</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>ページネーションリンクとして成立したが、以下2つの問題が残る。</p>
<ul class="simple">
<li>押下できるリンクと押下できないリンクの区別ができない。</li>
<li>現在表示しているページ位置がわからない。</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>上記の問題を解決する手段として、Bootstrap v3.0.0のスタイルシートと適用すると、以下のような表示となる。</p>
<ul class="simple">
<li>画面イメージ</li>
</ul>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../_images/pagination-how_to_use_jsp_applied_bootstrap_v3.0.0_css.png"><img alt="Screen image that v3.0.0 of bootstrap is applied." src="../_images/pagination-how_to_use_jsp_applied_bootstrap_v3.0.0_css.png" style="width: 520px; height: 70px;" /></a>
</div>
</div></blockquote>
<ul class="simple">
<li>スタイルシート</li>
</ul>
<blockquote>
<div><div class="line-block">
<div class="line">bootstrap v3.0.0 の cssファイルを <tt class="docutils literal"><span class="pre">$WEB_APP_ROOT/resources/vendor/bootstrap-3.0.0/css/bootstrap.css</span></tt> に配置する。</div>
<div class="line">以下、ページネーション関連のスタイル定義の抜粋。</div>
</div>
<div class="highlight-css"><div class="highlight"><pre><span class="nc">.pagination</span> <span class="p">{</span>
  <span class="k">display</span><span class="o">:</span> <span class="k">inline</span><span class="o">-</span><span class="k">block</span><span class="p">;</span>
  <span class="k">padding-left</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="k">margin</span><span class="o">:</span> <span class="m">20px</span> <span class="m">0</span><span class="p">;</span>
  <span class="k">border</span><span class="o">-</span><span class="n">radius</span><span class="o">:</span> <span class="m">4px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.pagination</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="p">{</span>
  <span class="k">display</span><span class="o">:</span> <span class="k">inline</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.pagination</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">a</span><span class="o">,</span>
<span class="nc">.pagination</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">span</span> <span class="p">{</span>
  <span class="k">position</span><span class="o">:</span> <span class="k">relative</span><span class="p">;</span>
  <span class="k">float</span><span class="o">:</span> <span class="k">left</span><span class="p">;</span>
  <span class="k">padding</span><span class="o">:</span> <span class="m">6px</span> <span class="m">12px</span><span class="p">;</span>
  <span class="k">margin-left</span><span class="o">:</span> <span class="m">-1px</span><span class="p">;</span>
  <span class="k">line-height</span><span class="o">:</span> <span class="m">1</span><span class="o">.</span><span class="m">428571429</span><span class="p">;</span>
  <span class="k">text-decoration</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
  <span class="k">background-color</span><span class="o">:</span> <span class="m">#ffffff</span><span class="p">;</span>
  <span class="k">border</span><span class="o">:</span> <span class="m">1px</span> <span class="k">solid</span> <span class="m">#dddddd</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.pagination</span> <span class="o">&gt;</span> <span class="nt">li</span><span class="nd">:first-child</span> <span class="o">&gt;</span> <span class="nt">a</span><span class="o">,</span>
<span class="nc">.pagination</span> <span class="o">&gt;</span> <span class="nt">li</span><span class="nd">:first-child</span> <span class="o">&gt;</span> <span class="nt">span</span> <span class="p">{</span>
  <span class="k">margin-left</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="k">border-bottom</span><span class="o">-</span><span class="k">left</span><span class="o">-</span><span class="n">radius</span><span class="o">:</span> <span class="m">4px</span><span class="p">;</span>
  <span class="k">border-top</span><span class="o">-</span><span class="k">left</span><span class="o">-</span><span class="n">radius</span><span class="o">:</span> <span class="m">4px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.pagination</span> <span class="o">&gt;</span> <span class="nt">li</span><span class="nd">:last-child</span> <span class="o">&gt;</span> <span class="nt">a</span><span class="o">,</span>
<span class="nc">.pagination</span> <span class="o">&gt;</span> <span class="nt">li</span><span class="nd">:last-child</span> <span class="o">&gt;</span> <span class="nt">span</span> <span class="p">{</span>
  <span class="k">border-top</span><span class="o">-</span><span class="k">right</span><span class="o">-</span><span class="n">radius</span><span class="o">:</span> <span class="m">4px</span><span class="p">;</span>
  <span class="k">border-bottom</span><span class="o">-</span><span class="k">right</span><span class="o">-</span><span class="n">radius</span><span class="o">:</span> <span class="m">4px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.pagination</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">a</span><span class="nd">:hover</span><span class="o">,</span>
<span class="nc">.pagination</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">span</span><span class="nd">:hover</span><span class="o">,</span>
<span class="nc">.pagination</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">a</span><span class="nd">:focus</span><span class="o">,</span>
<span class="nc">.pagination</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">span</span><span class="nd">:focus</span> <span class="p">{</span>
  <span class="k">background-color</span><span class="o">:</span> <span class="m">#eeeeee</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.pagination</span> <span class="o">&gt;</span> <span class="nc">.active</span> <span class="o">&gt;</span> <span class="nt">a</span><span class="o">,</span>
<span class="nc">.pagination</span> <span class="o">&gt;</span> <span class="nc">.active</span> <span class="o">&gt;</span> <span class="nt">span</span><span class="o">,</span>
<span class="nc">.pagination</span> <span class="o">&gt;</span> <span class="nc">.active</span> <span class="o">&gt;</span> <span class="nt">a</span><span class="nd">:hover</span><span class="o">,</span>
<span class="nc">.pagination</span> <span class="o">&gt;</span> <span class="nc">.active</span> <span class="o">&gt;</span> <span class="nt">span</span><span class="nd">:hover</span><span class="o">,</span>
<span class="nc">.pagination</span> <span class="o">&gt;</span> <span class="nc">.active</span> <span class="o">&gt;</span> <span class="nt">a</span><span class="nd">:focus</span><span class="o">,</span>
<span class="nc">.pagination</span> <span class="o">&gt;</span> <span class="nc">.active</span> <span class="o">&gt;</span> <span class="nt">span</span><span class="nd">:focus</span> <span class="p">{</span>
  <span class="k">z-index</span><span class="o">:</span> <span class="m">2</span><span class="p">;</span>
  <span class="k">color</span><span class="o">:</span> <span class="m">#ffffff</span><span class="p">;</span>
  <span class="k">cursor</span><span class="o">:</span> <span class="k">default</span><span class="p">;</span>
  <span class="k">background-color</span><span class="o">:</span> <span class="m">#428bca</span><span class="p">;</span>
  <span class="k">border-color</span><span class="o">:</span> <span class="m">#428bca</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.pagination</span> <span class="o">&gt;</span> <span class="nc">.disabled</span> <span class="o">&gt;</span> <span class="nt">span</span><span class="o">,</span>
<span class="nc">.pagination</span> <span class="o">&gt;</span> <span class="nc">.disabled</span> <span class="o">&gt;</span> <span class="nt">a</span><span class="o">,</span>
<span class="nc">.pagination</span> <span class="o">&gt;</span> <span class="nc">.disabled</span> <span class="o">&gt;</span> <span class="nt">a</span><span class="nd">:hover</span><span class="o">,</span>
<span class="nc">.pagination</span> <span class="o">&gt;</span> <span class="nc">.disabled</span> <span class="o">&gt;</span> <span class="nt">a</span><span class="nd">:focus</span> <span class="p">{</span>
  <span class="k">color</span><span class="o">:</span> <span class="m">#999999</span><span class="p">;</span>
  <span class="k">cursor</span><span class="o">:</span> <span class="n">not</span><span class="o">-</span><span class="n">allowed</span><span class="p">;</span>
  <span class="k">background-color</span><span class="o">:</span> <span class="m">#ffffff</span><span class="p">;</span>
  <span class="k">border-color</span><span class="o">:</span> <span class="m">#dddddd</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li>JSP</li>
</ul>
<blockquote>
<div><p>JSPでは配置したcssファイルを読み込む定義を追加する。</p>
<div class="highlight-jsp"><div class="highlight"><pre><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span>
    <span class="na">href=</span><span class="s">&quot;${pageContext.request.contextPath}/resources/vendor/bootstrap-3.0.0/css/bootstrap.css&quot;</span>
    <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">media=</span><span class="s">&quot;screen, projection&quot;</span><span class="nt">&gt;</span>
</pre></div>
</div>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id15">
<h4><a class="toc-backref" href="#id44">5.11.2.3.3. ページネーション情報の表示</a><a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h4>
<p>ページネーションに関連する情報(合計件数、合計ページ数、表示ページ数など)を表示するための実装例を以下に示す。</p>
<ul class="simple">
<li>画面例</li>
</ul>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../_images/pagination-how_to_use_view_pagination_info1.png"><img alt="Screen image of pagination information(total results, current pages, total pages)" src="../_images/pagination-how_to_use_view_pagination_info1.png" style="width: 400px; height: 250px;" /></a>
</div>
</div></blockquote>
<ul class="simple">
<li>JSP</li>
</ul>
<blockquote>
<div><div class="highlight-jsp"><div class="highlight"><pre><span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;fmt:formatNumber</span> <span class="na">value=</span><span class="s">&quot;${page.totalElements}&quot;</span> <span class="nt">/&gt;</span> results <span class="k">&lt;%-</span><span class="o">-</span> <span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">--</span><span class="k">%&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div&gt;</span>
    ${f:h(page.number + 1) } /       <span class="k">&lt;%-</span><span class="o">-</span> <span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="o">--</span><span class="k">%&gt;</span>
    ${f:h(page.totalPages)} Pages    <span class="k">&lt;%-</span><span class="o">-</span> <span class="o">(</span><span class="mi">3</span><span class="o">)</span> <span class="o">--</span><span class="k">%&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">検索条件に一致するデータの合計件数を表示する場合は、 <tt class="docutils literal"><span class="pre">Page</span></tt> オブジェクトの <tt class="docutils literal"><span class="pre">totalElements</span></tt> プロパティから値を取得する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">表示しているページのページ数を表示する場合は、 <tt class="docutils literal"><span class="pre">Page</span></tt> オブジェクトの <tt class="docutils literal"><span class="pre">number</span></tt> プロパティから値を取得し、<tt class="docutils literal"><span class="pre">+1</span></tt> する。</div>
<div class="line"><tt class="docutils literal"><span class="pre">Page</span></tt> オブジェクトの <tt class="docutils literal"><span class="pre">number</span></tt> プロパティは <tt class="docutils literal"><span class="pre">0</span></tt> 開始のため、 ページ番号を表示する際は <tt class="docutils literal"><span class="pre">+1</span></tt> が必要となる。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">検索条件に一致するデータの合計ページ数を表示する場合は、 <tt class="docutils literal"><span class="pre">Page</span></tt> オブジェクトの <tt class="docutils literal"><span class="pre">totalPages</span></tt> プロパティから値をする。</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>該当ページの表示データ範囲を表示するための実装例を以下に示す。</p>
<ul class="simple">
<li>画面例</li>
</ul>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../_images/pagination-how_to_use_view_pagination_info2.png"><img alt="Screen image of pagination information(begin position, end position)" src="../_images/pagination-how_to_use_view_pagination_info2.png" style="width: 400px; height: 250px;" /></a>
</div>
</div></blockquote>
<ul class="simple">
<li>JSP</li>
</ul>
<blockquote>
<div><div class="highlight-jsp"><div class="highlight"><pre><span class="nt">&lt;div&gt;</span>
    <span class="k">&lt;%-</span><span class="o">-</span> <span class="o">(</span><span class="mi">4</span><span class="o">)</span> <span class="o">--</span><span class="k">%&gt;</span>
    <span class="nt">&lt;fmt:formatNumber</span> <span class="na">value=</span><span class="s">&quot;${(page.number * page.size) + 1}&quot;</span> <span class="nt">/&gt;</span> -
    <span class="k">&lt;%-</span><span class="o">-</span> <span class="o">(</span><span class="mi">5</span><span class="o">)</span> <span class="o">--</span><span class="k">%&gt;</span>
    <span class="nt">&lt;fmt:formatNumber</span> <span class="na">value=</span><span class="s">&quot;${(page.number * page.size) + page.numberOfElements}&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">開始位置を表示する場合は、 <tt class="docutils literal"><span class="pre">Page</span></tt> オブジェクトの <tt class="docutils literal"><span class="pre">number</span></tt> プロパティと <tt class="docutils literal"><span class="pre">size</span></tt> プロパティを使って計算する。</div>
<div class="line"><tt class="docutils literal"><span class="pre">Page</span></tt> オブジェクトの <tt class="docutils literal"><span class="pre">number</span></tt> プロパティは <tt class="docutils literal"><span class="pre">0</span></tt> 開始のため、データ開始位置を表示する際は <tt class="docutils literal"><span class="pre">+1</span></tt> が必要となる。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">終了位置を表示する場合は、 <tt class="docutils literal"><span class="pre">Page</span></tt> オブジェクトの <tt class="docutils literal"><span class="pre">number</span></tt> プロパティ、 <tt class="docutils literal"><span class="pre">size</span></tt> プロパティ、 <tt class="docutils literal"><span class="pre">numberOfElements</span></tt> プロパティ を使って計算する。</div>
<div class="line">最終ページは端数となる可能性があるので、 <tt class="docutils literal"><span class="pre">numberOfElements</span></tt> を加算する必要がある。</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p><strong>数値のフォーマットについて</strong></p>
<p class="last">表示する数値をフォーマットする必要がある場合は、 JSTLから提供されているタグライブラリ( <tt class="docutils literal"><span class="pre">&lt;fmt:formatNumber&gt;</span></tt> )を使用する。</p>
</div>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id16">
<h4><a class="toc-backref" href="#id45">5.11.2.3.4. ページリンクで検索条件を引き継ぐ</a><a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h4>
<p>検索条件をページ移動時のリクエストに引き継ぐ方法を、以下に示す。</p>
<blockquote>
<div><div class="figure align-center">
<a class="reference internal image-reference" href="../_images/pagination-how_to_use_view_take_over_search_criteria.png"><img alt="Processing image of take over search criteria" src="../_images/pagination-how_to_use_view_take_over_search_criteria.png" style="width: 100%;" /></a>
</div>
</div></blockquote>
<ul class="simple">
<li>JSP</li>
</ul>
<blockquote>
<div><div class="highlight-jsp"><div class="highlight"><pre><span class="k">&lt;%-</span><span class="o">-</span> <span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">--</span><span class="k">%&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;criteriaPart&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;form:form</span> <span class="na">action=</span><span class="s">&quot;${pageContext.request.contextPath}/article/list&quot;</span> <span class="na">method=</span><span class="s">&quot;get&quot;</span>
             <span class="na">modelAttribute=</span><span class="s">&quot;articleSearchCriteriaForm&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;form:input</span> <span class="na">path=</span><span class="s">&quot;word&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;form:button&gt;</span>Search<span class="nt">&lt;/form:button&gt;</span>
    <span class="nt">&lt;br&gt;</span>
  <span class="nt">&lt;/form:form&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="k">&lt;%-</span><span class="o">-</span> <span class="o">...</span> <span class="o">--</span><span class="k">%&gt;</span>

<span class="nt">&lt;t:pagination</span> <span class="na">page=</span><span class="s">&quot;${page}&quot;</span>
    <span class="na">outerElementClass=</span><span class="s">&quot;pagination&quot;</span>
    <span class="na">queryTmpl=</span><span class="s">&quot;page={page}&amp;size={size}&amp;${f:query(articleSearchCriteriaForm)}&quot;</span> <span class="nt">/&gt;</span> <span class="k">&lt;%-</span><span class="o">-</span> <span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="o">--</span><span class="k">%&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">検索条件を指定するフォーム。</div>
<div class="line">検索条件として <tt class="docutils literal"><span class="pre">word</span></tt> が存在する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">ページ移動時のリクエストに検索条件を引き継ぐ場合は、 <tt class="docutils literal"><span class="pre">queryTmpl</span></tt> を指定し、クエリ文字列に検索条件を追加する。</div>
<div class="line">検索条件をフォームオブジェクトに格納する場合は、共通ライブラリから提供しているELファクション( <tt class="docutils literal"><span class="pre">f:query(Object)</span></tt> ) を使用すると、簡単に条件を引き継ぐことができる。</div>
<div class="line">上記例の場合、 <tt class="docutils literal"><span class="pre">&quot;?page=ページ位置&amp;size=6&amp;word=入力値&quot;</span></tt> がクエリ文字列となる。</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>f:query(Object) の仕様について</strong></p>
<p class="last"><tt class="docutils literal"><span class="pre">f:query</span></tt> の引数には、 フォームオブジェクトなどのJavaBeanと <tt class="docutils literal"><span class="pre">Map</span></tt> オブジェクトを指定することができる。
JavaBeanの場合はプロパティ名がリクエストパラメータ名となり、 <tt class="docutils literal"><span class="pre">Map</span></tt> オブジェクトの場合はマップのキー名がリクエストパラメータとなる。
生成されるクエリ文字列は、UTF-8のURLエンコーディングが行われる。</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p><strong>f:queryとqueryTmplの組み合わせについて</strong></p>
<p>f:queryとqueryTmpl を組み合わせると、URLエンコーディングが重複してしまい、特殊文字の引き継ぎができないことが判明している。</p>
<p class="last">1.0.1版としてライブラリを改修(機能追加)を行い対応する予定である。</p>
</div>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>検索条件をフォームオブジェクトに格納しない場合の実装例を以下に示す。</p>
<ul class="simple">
<li>JSP</li>
</ul>
<blockquote>
<div><div class="highlight-jsp"><div class="highlight"><pre><span class="nt">&lt;t:pagination</span> <span class="na">page=</span><span class="s">&quot;${page}&quot;</span>
    <span class="na">outerElementClass=</span><span class="s">&quot;pagination&quot;</span>
    <span class="na">queryTmpl=</span><span class="s">&quot;page={page}&amp;size={size}&amp;word=${param.word}&quot;</span> <span class="nt">/&gt;</span>  <span class="k">&lt;%-</span><span class="o">-</span> <span class="o">(</span><span class="mi">3</span><span class="o">)</span> <span class="o">--</span><span class="k">%&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">検索条件をフォームオブジェクトに格納しない場合は、リクエストパラメータを保持する暗黙オブジェクト <tt class="docutils literal"><span class="pre">param</span></tt> からリクエストパラメータの値を取得し、クエリ文字列に追加する。</div>
<div class="line">上記例の場合、 <tt class="docutils literal"><span class="pre">&quot;?page=0&amp;size=20&amp;word=入力値&quot;</span></tt> がクエリ文字列となる。</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id17">
<h4><a class="toc-backref" href="#id46">5.11.2.3.5. ページリンクでソート条件を引き継ぐ</a><a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h4>
<p>ソート条件をページ移動時のリクエストに引き継ぐ方法を、以下に示す。</p>
<ul class="simple">
<li>JSP</li>
</ul>
<blockquote>
<div><div class="highlight-jsp"><div class="highlight"><pre><span class="nt">&lt;t:pagination</span> <span class="na">page=</span><span class="s">&quot;${page}&quot;</span>
    <span class="na">outerElementClass=</span><span class="s">&quot;pagination&quot;</span>
    <span class="na">queryTmpl=</span><span class="s">&quot;page={page}&amp;size={size}&amp;sort={sortOrderProperty},{sortOrderDirection}&quot;</span> <span class="nt">/&gt;</span>  <span class="k">&lt;%-</span><span class="o">-</span> <span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">--</span><span class="k">%&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">ページ移動時のリクエストにソート条件を引き継ぐ場合は、 <tt class="docutils literal"><span class="pre">queryTmpl</span></tt> を指定し、クエリ文字列にソート条件を追加する。</div>
<div class="line">ソート条件を指定するためのパラメータの仕様については、「 <a class="reference internal" href="#pagination-overview-pagesearch-requestparameter"><em>ページ検索用のリクエストパラメータについて</em></a> 」を参照されたい。</div>
<div class="line">上記例の場合、 <tt class="docutils literal"><span class="pre">&quot;?page=0&amp;size=20&amp;sort=ソート項目,ソート順(ASC</span> <span class="pre">or</span> <span class="pre">DESC)&quot;</span></tt> がクエリ文字列となる。</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="id18">
<h3><a class="toc-backref" href="#id47">5.11.2.4. JSPの実装(レイアウト変更編)</a><a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id19">
<h4><a class="toc-backref" href="#id48">5.11.2.4.1. 先頭ページと最終ページに移動するリンクの削除</a><a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h4>
<p>「最初のページに移動するためのリンク」と「最後のページに移動するためのリンク」を削除するための実装例を、以下に示す。</p>
<ul class="simple">
<li>画面例</li>
</ul>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../_images/pagination-how_to_use_view_remove_link1.png"><img alt="Remove page link that move to first &amp; last page" src="../_images/pagination-how_to_use_view_remove_link1.png" style="width: 510px; height: 140px;" /></a>
</div>
</div></blockquote>
<ul class="simple">
<li>JSP</li>
</ul>
<blockquote>
<div><div class="highlight-jsp"><div class="highlight"><pre><span class="nt">&lt;t:pagination</span> <span class="na">page=</span><span class="s">&quot;${page}&quot;</span>
    <span class="na">outerElementClass=</span><span class="s">&quot;pagination&quot;</span>
    <span class="na">firstLinkText=</span><span class="s">&quot;&quot;</span>
    <span class="na">lastLinkText=</span><span class="s">&quot;&quot;</span> <span class="nt">/&gt;</span> <span class="k">&lt;%-</span><span class="o">-</span> <span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="o">--</span><span class="k">%&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">「最初のページに移動するためのリンク」を非表示にする場合は、 <tt class="docutils literal"><span class="pre">&lt;t:pagination&gt;</span></tt> タグの firstLinkText属性に <tt class="docutils literal"><span class="pre">&quot;&quot;</span></tt> を指定する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">「最後のページに移動するためのリンク」を非表示にする場合は、 <tt class="docutils literal"><span class="pre">&lt;t:pagination&gt;</span></tt> タグの lastLinkText属性に <tt class="docutils literal"><span class="pre">&quot;&quot;</span></tt> を指定する。</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id20">
<h4><a class="toc-backref" href="#id49">5.11.2.4.2. 前ページと次ページに移動するリンクの削除</a><a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h4>
<p>「最初のページに移動するためのリンク」と「最後のページに移動するためのリンク」を削除するための実装例を、以下に示す。</p>
<ul class="simple">
<li>画面例</li>
</ul>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../_images/pagination-how_to_use_view_remove_link2.png"><img alt="Remove page link that move to previous &amp; next page" src="../_images/pagination-how_to_use_view_remove_link2.png" style="width: 470px; height: 220px;" /></a>
</div>
</div></blockquote>
<ul class="simple">
<li>JSP</li>
</ul>
<blockquote>
<div><div class="highlight-jsp"><div class="highlight"><pre><span class="nt">&lt;t:pagination</span> <span class="na">page=</span><span class="s">&quot;${page}&quot;</span>
    <span class="na">outerElementClass=</span><span class="s">&quot;pagination&quot;</span>
    <span class="na">previousLinkText=</span><span class="s">&quot;&quot;</span>
    <span class="na">nextLinkText=</span><span class="s">&quot;&quot;</span> <span class="nt">/&gt;</span> <span class="k">&lt;%-</span><span class="o">-</span> <span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="o">--</span><span class="k">%&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">「前のページに移動するためのリンク」を非表示にする場合は、 <tt class="docutils literal"><span class="pre">&lt;t:pagination&gt;</span></tt> タグの previousLinkText属性に <tt class="docutils literal"><span class="pre">&quot;&quot;</span></tt> を指定する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">「次のページに移動するためのリンク」を非表示にする場合は、 <tt class="docutils literal"><span class="pre">&lt;t:pagination&gt;</span></tt> タグの nextLinkText属性に <tt class="docutils literal"><span class="pre">&quot;&quot;</span></tt> を指定する。</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="disabled">
<h4><a class="toc-backref" href="#id50">5.11.2.4.3. disabled状態のリンクの削除</a><a class="headerlink" href="#disabled" title="Permalink to this headline">¶</a></h4>
<div class="line-block">
<div class="line"><tt class="docutils literal"><span class="pre">&quot;disabled&quot;</span></tt> 状態のリンクを削除するための実装例を、以下に示す。</div>
<div class="line"><tt class="docutils literal"><span class="pre">&quot;disabled&quot;</span></tt> 時のスタイルシートに、以下の定義を追加する。</div>
</div>
<ul class="simple">
<li>画面例</li>
</ul>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../_images/pagination-how_to_use_view_remove_link3.png"><img alt="Remove page link that move to previous &amp; next page" src="../_images/pagination-how_to_use_view_remove_link3.png" style="width: 530px; height: 200px;" /></a>
</div>
</div></blockquote>
<ul class="simple">
<li>スタイルシート</li>
</ul>
<blockquote>
<div><div class="highlight-css"><div class="highlight"><pre><span class="nc">.pagination</span> <span class="nc">.disabled</span> <span class="p">{</span>
    <span class="k">display</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>  <span class="c">/* (1) */</span>
<span class="p">}</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">&quot;disabled&quot;</span></tt> クラスの属性値として、 <tt class="docutils literal"><span class="pre">&quot;display:</span> <span class="pre">none;&quot;</span></tt> を指定する。</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id21">
<h4><a class="toc-backref" href="#id51">5.11.2.4.4. 指定ページへ移動するリンクの最大表示数の変更</a><a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h4>
<p>指定したページに移動するためのリンクの最大表示数を変更するための実装例を、以下に示す。</p>
<ul class="simple">
<li>画面例</li>
</ul>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../_images/pagination-how_to_use_view_change_maxsize.png"><img alt="change max display count of page link that move to specified page" src="../_images/pagination-how_to_use_view_change_maxsize.png" style="width: 450px; height: 220px;" /></a>
</div>
</div></blockquote>
<ul class="simple">
<li>JSP</li>
</ul>
<blockquote>
<div><div class="highlight-jsp"><div class="highlight"><pre><span class="nt">&lt;t:pagination</span> <span class="na">page=</span><span class="s">&quot;${page}&quot;</span>
    <span class="na">outerElementClass=</span><span class="s">&quot;pagination&quot;</span>
    <span class="na">maxDisplayCount=</span><span class="s">&quot;5&quot;</span> <span class="nt">/&gt;</span> <span class="k">&lt;%-</span><span class="o">-</span> <span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">--</span><span class="k">%&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">指定したページに移動するためのリンクの最大表示数を変更する場合は、 <tt class="docutils literal"><span class="pre">&lt;t:pagination&gt;</span></tt> タグの maxDisplayCount属性に値を指定する。</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id22">
<h4><a class="toc-backref" href="#id52">5.11.2.4.5. 指定ページへ移動するリンクの削除</a><a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h4>
<div class="line-block">
<div class="line">指定したページに移動するためのリンクを削除するための実装例を、以下に示す。</div>
</div>
<ul class="simple">
<li>画面例</li>
</ul>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../_images/pagination-how_to_use_view_remove_link4.png"><img alt="Remove page link that move to specified page" src="../_images/pagination-how_to_use_view_remove_link4.png" style="width: 410px; height: 220px;" /></a>
</div>
</div></blockquote>
<ul class="simple">
<li>JSP</li>
</ul>
<blockquote>
<div><div class="highlight-jsp"><div class="highlight"><pre><span class="nt">&lt;t:pagination</span> <span class="na">page=</span><span class="s">&quot;${page}&quot;</span>
    <span class="na">outerElementClass=</span><span class="s">&quot;pagination&quot;</span>
    <span class="na">maxDisplayCount=</span><span class="s">&quot;0&quot;</span> <span class="nt">/&gt;</span> <span class="k">&lt;%-</span><span class="o">-</span> <span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">--</span><span class="k">%&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">指定したページに移動するためのリンクを非表示にする場合は、 <tt class="docutils literal"><span class="pre">&lt;t:pagination&gt;</span></tt> タグの maxDisplayCount属性に <tt class="docutils literal"><span class="pre">&quot;0&quot;</span></tt> を指定する。</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="id23">
<h3><a class="toc-backref" href="#id53">5.11.2.5. JSPの実装(動作編)</a><a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id24">
<h4><a class="toc-backref" href="#id54">5.11.2.5.1. ソート条件の指定</a><a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h4>
<p>クライアントからソート条件を指定するための実装例を、以下に示す。</p>
<ul class="simple">
<li>画面例</li>
</ul>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../_images/pagination-how_to_use_view_sort.png"><img alt="specify the sort condition" src="../_images/pagination-how_to_use_view_sort.png" style="width: 100%;" /></a>
</div>
</div></blockquote>
<ul class="simple">
<li>JSP</li>
</ul>
<blockquote>
<div><div class="highlight-jsp"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;criteriaPart&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;form:form</span>
    <span class="na">action=</span><span class="s">&quot;${pageContext.request.contextPath}/article/search&quot;</span>
    <span class="na">method=</span><span class="s">&quot;get&quot;</span> <span class="na">modelAttribute=</span><span class="s">&quot;articleSearchCriteriaForm&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;form:input</span> <span class="na">path=</span><span class="s">&quot;word&quot;</span> <span class="nt">/&gt;</span>
    <span class="k">&lt;%-</span><span class="o">-</span> <span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">--</span><span class="k">%&gt;</span>
    <span class="nt">&lt;form:select</span> <span class="na">path=</span><span class="s">&quot;sort&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;form:option</span> <span class="na">value=</span><span class="s">&quot;publishedDate,DESC&quot;</span><span class="nt">&gt;</span>Newest<span class="nt">&lt;/form:option&gt;</span>
        <span class="nt">&lt;form:option</span> <span class="na">value=</span><span class="s">&quot;publishedDate,ASC&quot;</span><span class="nt">&gt;</span>Oldest<span class="nt">&lt;/form:option&gt;</span>
    <span class="nt">&lt;/form:select&gt;</span>
    <span class="nt">&lt;form:button&gt;</span>Search<span class="nt">&lt;/form:button&gt;</span>
    <span class="nt">&lt;br&gt;</span>
  <span class="nt">&lt;/form:form&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">クライアントからソート条件を指定する場合は、 ソート条件を指定するためのパラメータを追加する。</div>
<div class="line">ソート条件を指定するためのパラメータの仕様については、「 <a class="reference internal" href="#pagination-overview-pagesearch-requestparameter"><em>ページ検索用のリクエストパラメータについて</em></a> 」を参照されたい。</div>
<div class="line">上記例では、publishedDateの昇順と降順をプルダウンで選択できるようにしている。</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
</div>
<div class="section" id="appendix">
<span id="paginatin-appendix"></span><h2><a class="toc-backref" href="#id55">5.11.3. Appendix</a><a class="headerlink" href="#appendix" title="Permalink to this headline">¶</a></h2>
<div class="section" id="pageablehandlermethodargumentresolver">
<span id="paginatin-appendix-pageablehandlermethodargumentresolver"></span><h3><a class="toc-backref" href="#id56">5.11.3.1. <tt class="docutils literal"><span class="pre">PageableHandlerMethodArgumentResolver</span></tt> のプロパティ値について</a><a class="headerlink" href="#pageablehandlermethodargumentresolver" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line"><tt class="docutils literal"><span class="pre">PageableHandlerMethodArgumentResolver</span></tt> で指定できるプロパティは以下の通り。</div>
<div class="line">アプリケーションの要件に応じて、値を変更すること。</div>
</div>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="55%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">プロパティ名</th>
<th class="head">説明</th>
<th class="head">デフォルト値</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ol class="first last arabic simple">
<li></li>
</ol>
</td>
<td>maxPageSize</td>
<td><div class="first last line-block">
<div class="line">取得件数として許可する最大値を指定する。</div>
<div class="line">指定された取得件数が <tt class="docutils literal"><span class="pre">maxPageSize</span></tt> を超えていた場合は、 <tt class="docutils literal"><span class="pre">maxPageSize</span></tt> が取得件数となる。</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><cite>2000</cite></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="2">
<li></li>
</ol>
</td>
<td>fallbackPageable</td>
<td><div class="first last line-block">
<div class="line">アプリケーション全体のページ位置、取得件数、ソート条件のデフォルト値を指定する。</div>
<div class="line">ページ位置、取得件数、ソート条件が指定されていない場合は、fallbackPageableに設定されている値が適用される。</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">ページ位置 : <cite>0</cite></div>
<div class="line">取得件数 : <cite>20</cite></div>
<div class="line">ソート条件 : <cite>null</cite></div>
</div>
</td>
</tr>
<tr class="row-even"><td><ol class="first last arabic simple" start="3">
<li></li>
</ol>
</td>
<td>oneIndexedParameters</td>
<td><div class="first last line-block">
<div class="line">ページ位置の開始値を指定する。</div>
<div class="line"><cite>false</cite> を指定した場合はページ位置の開始値は <cite>0</cite> となり、 <cite>true</cite> を指定した場合はページ位置の開始値は <cite>1</cite> となる。</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><cite>false</cite></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="4">
<li></li>
</ol>
</td>
<td>pageParameterName</td>
<td><div class="first last line-block">
<div class="line">ページ位置を指定するためのリクエストパラメータ名を指定する。</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">&quot;page&quot;</span></tt></div>
</div>
</td>
</tr>
<tr class="row-even"><td><ol class="first last arabic simple" start="5">
<li></li>
</ol>
</td>
<td>sizeParameterName</td>
<td><div class="first last line-block">
<div class="line">取得件数を指定するためのリクエストパラメータ名を指定する。</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">&quot;size&quot;</span></tt></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="6">
<li></li>
</ol>
</td>
<td>prefix</td>
<td><div class="first last line-block">
<div class="line">ページ位置と取得件数を指定するためのリクエストパラメータの接頭辞(ネームスペース)を指定する。</div>
<div class="line">デフォルトのパラメータ名がアプリケーションで使用するパラメータと衝突する場合は、ネームスペースを指定することでリクエストパラメータ名の衝突を防ぐことが出来る。</div>
<div class="line">prefixを指定すると、ページ位置を指定するためのリクエストパラメータ名は <tt class="docutils literal"><span class="pre">prefix</span> <span class="pre">+</span> <span class="pre">pageParameterName</span></tt> 、取得件数を指定するためのリクエストパラメータ名は <tt class="docutils literal"><span class="pre">prefix</span> <span class="pre">+</span> <span class="pre">sizeParameterName</span></tt> となる。</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">&quot;&quot;</span></tt></div>
<div class="line">(ネームスペースなし)</div>
</div>
</td>
</tr>
<tr class="row-even"><td><ol class="first last arabic simple" start="7">
<li></li>
</ol>
</td>
<td>qualifierDelimiter</td>
<td><div class="first last line-block">
<div class="line">同一リクエストで複数のページ検索が必要になる場合、ページ検索に必要な情報(検索対象のページ位置、取得件数など)を区別するために、リクエストパラメータ名は <tt class="docutils literal"><span class="pre">qualifier</span> <span class="pre">+</span> <span class="pre">delimiter</span> <span class="pre">+</span> <span class="pre">標準パラメータ名</span></tt> の形式で指定する。</div>
<div class="line">本プロパティは、上記形式の中の <tt class="docutils literal"><span class="pre">delimiter</span></tt> の値を設定する。</div>
<div class="line">この設定を変更する場合は、 <tt class="docutils literal"><span class="pre">SortHandlerMethodArgumentResolver</span></tt> の <tt class="docutils literal"><span class="pre">qualifierDelimiter</span></tt> 設定も合わせて変更する必要がある。</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">&quot;_&quot;</span></tt></div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>maxPageSizeの設定値について</strong></p>
<p class="last">デフォルト値は <tt class="docutils literal"><span class="pre">2000</span></tt> であるが、アプリケーションが許容する最大値に設定を変更することを推奨する。
アプリケーションが許可する最大値が <cite>100</cite> ならば、maxPageSizeも <cite>100</cite> に設定する。</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>fallbackPageableの設定方法について</strong></p>
<p class="last">アプリケーション全体に適用するデフォルト値を変更する場合は、 <tt class="docutils literal"><span class="pre">fallbackPageable</span></tt> プロパティにデフォルト値が定義されている <tt class="docutils literal"><span class="pre">Pageable</span></tt> ( <tt class="docutils literal"><span class="pre">org.springframework.data.domain.PageRequest</span></tt> ) オブジェクトを設定する。
ソート条件のデフォルト値を変更する場合は、 <tt class="docutils literal"><span class="pre">SortHandlerMethodArgumentResolver</span></tt> の <tt class="docutils literal"><span class="pre">fallbackSort</span></tt> プロパティにデフォルト値が定義されている  <tt class="docutils literal"><span class="pre">org.springframework.data.domain.Sort</span></tt> オブジェクトを設定する。</p>
</div>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>開発するアプリケーション毎に変更が想定される以下の項目について、デフォルト値を変更する際の設定例を以下に示す。</p>
<ul class="simple">
<li>取得件数として許可する最大値( <tt class="docutils literal"><span class="pre">maxPageSize</span></tt> )</li>
<li>アプリケーション全体のページ位置、取得件数のデフォルト値( <tt class="docutils literal"><span class="pre">fallbackPageable</span></tt> )</li>
<li>ソート条件のデフォルト値( <tt class="docutils literal"><span class="pre">fallbackSort</span></tt> )</li>
</ul>
<blockquote>
<div><div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;mvc:annotation-driven&gt;</span>
    <span class="nt">&lt;mvc:argument-resolvers&gt;</span>
        <span class="nt">&lt;bean</span>
            <span class="na">class=</span><span class="s">&quot;org.springframework.data.web.PageableHandlerMethodArgumentResolver&quot;</span><span class="nt">&gt;</span>
            <span class="c">&lt;!-- (1) --&gt;</span>
            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;maxPageSize&quot;</span> <span class="na">value=</span><span class="s">&quot;100&quot;</span> <span class="nt">/&gt;</span>
            <span class="c">&lt;!-- (2) --&gt;</span>
            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;fallbackPageable&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">&quot;org.springframework.data.domain.PageRequest&quot;</span><span class="nt">&gt;</span>
                    <span class="c">&lt;!-- (3) --&gt;</span>
                    <span class="nt">&lt;constructor-arg</span> <span class="na">index=</span><span class="s">&quot;0&quot;</span> <span class="na">value=</span><span class="s">&quot;0&quot;</span> <span class="nt">/&gt;</span>
                    <span class="c">&lt;!-- (4) --&gt;</span>
                    <span class="nt">&lt;constructor-arg</span> <span class="na">index=</span><span class="s">&quot;1&quot;</span> <span class="na">value=</span><span class="s">&quot;50&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/bean&gt;</span>
            <span class="nt">&lt;/property&gt;</span>
            <span class="c">&lt;!-- (5) --&gt;</span>
            <span class="nt">&lt;constructor-arg</span> <span class="na">index=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">&quot;org.springframework.data.web.SortHandlerMethodArgumentResolver&quot;</span><span class="nt">&gt;</span>
                    <span class="c">&lt;!-- (6) --&gt;</span>
                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;fallbackSort&quot;</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">&quot;org.springframework.data.domain.Sort&quot;</span><span class="nt">&gt;</span>
                            <span class="c">&lt;!-- (7) --&gt;</span>
                            <span class="nt">&lt;constructor-arg</span> <span class="na">index=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;list&gt;</span>
                                    <span class="c">&lt;!-- (8) --&gt;</span>
                                    <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">&quot;org.springframework.data.domain.Sort.Order&quot;</span><span class="nt">&gt;</span>
                                        <span class="c">&lt;!-- (9) --&gt;</span>
                                        <span class="nt">&lt;constructor-arg</span> <span class="na">index=</span><span class="s">&quot;0&quot;</span> <span class="na">value=</span><span class="s">&quot;DESC&quot;</span> <span class="nt">/&gt;</span>
                                        <span class="c">&lt;!-- (10) --&gt;</span>
                                        <span class="nt">&lt;constructor-arg</span> <span class="na">index=</span><span class="s">&quot;1&quot;</span> <span class="na">value=</span><span class="s">&quot;lastModifiedDate&quot;</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;/bean&gt;</span>
                                    <span class="c">&lt;!-- (8) --&gt;</span>
                                    <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">&quot;org.springframework.data.domain.Sort.Order&quot;</span><span class="nt">&gt;</span>
                                        <span class="nt">&lt;constructor-arg</span> <span class="na">index=</span><span class="s">&quot;0&quot;</span> <span class="na">value=</span><span class="s">&quot;ASC&quot;</span> <span class="nt">/&gt;</span>
                                        <span class="nt">&lt;constructor-arg</span> <span class="na">index=</span><span class="s">&quot;1&quot;</span> <span class="na">value=</span><span class="s">&quot;id&quot;</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;/bean&gt;</span>
                                <span class="nt">&lt;/list&gt;</span>
                            <span class="nt">&lt;/constructor-arg&gt;</span>
                        <span class="nt">&lt;/bean&gt;</span>
                    <span class="nt">&lt;/property&gt;</span>
                <span class="nt">&lt;/bean&gt;</span>
            <span class="nt">&lt;/constructor-arg&gt;</span>
        <span class="nt">&lt;/bean&gt;</span>
    <span class="nt">&lt;/mvc:argument-resolvers&gt;</span>
<span class="nt">&lt;/mvc:annotation-driven&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">上記例では取得件数の最大値を <cite>100</cite> に設定している。 取得件数(size)に <cite>101</cite> 以上が指定された場合は、 <cite>100</cite> に切り捨てて検索が行われる。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">org.springframework.data.domain.PageRequest</span></tt> のインスタンスを生成し、 <tt class="docutils literal"><span class="pre">fallbackPageable</span></tt> に設定する。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">PageRequest</span></tt> のコンストラクタの第1引数に、ページ位置のデフォルト値を指定する。</div>
<div class="line-block">
<div class="line">上記例では <cite>0</cite> を指定しているため、デフォルト値は変更していない。</div>
</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">PageRequest</span></tt> のコンストラクタの第2引数に、取得件数のデフォルト値を指定する。</div>
<div class="line">上記例ではリクエストパラメータに取得件数の指定がない場合の取得件数は <cite>50</cite> となる。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">PageableHandlerMethodArgumentResolver</span></tt> のコンストラクタとして、 <tt class="docutils literal"><span class="pre">SortHandlerMethodArgumentResolver</span></tt> のインスタンスを設定する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(6)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">Sort</span></tt> のインスタンスを生成し、 <tt class="docutils literal"><span class="pre">fallbackSort</span></tt> に設定する。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(7)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">Sort</span></tt> のコンストラクタの第1引数に、 デフォルト値として使用する <tt class="docutils literal"><span class="pre">Order</span></tt> オブジェクトのリストを設定する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(8)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">Order</span></tt> のインスタンスを生成し、 デフォルト値として使用する <tt class="docutils literal"><span class="pre">Order</span></tt> オブジェクトのリストに追加する。</div>
<div class="line">上記例ではリクエストパラメータにソート条件の指定がない場合は <tt class="docutils literal"><span class="pre">&quot;ORDER</span> <span class="pre">BY</span> <span class="pre">x.lastModifiedDate</span> <span class="pre">DESC,</span> <span class="pre">x.id</span> <span class="pre">ASC&quot;</span></tt> というソート条件がQueryに追加される。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(9)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">Order</span></tt> のコンストラクタの第1引数に、ソート順(ASC/DESC)を指定する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(10)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">Order</span></tt> のコンストラクタの第2引数に、ソート項目を指定する。</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="sorthandlermethodargumentresolver">
<span id="paginatin-appendix-sorthandlermethodargumentresolver"></span><h3><a class="toc-backref" href="#id57">5.11.3.2. <tt class="docutils literal"><span class="pre">SortHandlerMethodArgumentResolver</span></tt> のプロパティ値について</a><a class="headerlink" href="#sorthandlermethodargumentresolver" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line"><tt class="docutils literal"><span class="pre">SortHandlerMethodArgumentResolver</span></tt> で指定できるプロパティは以下の通り。</div>
<div class="line">アプリケーションの要件に応じて、値を変更すること。</div>
</div>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="55%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">プロパティ名</th>
<th class="head">説明</th>
<th class="head">デフォルト値</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ol class="first last arabic simple">
<li></li>
</ol>
</td>
<td>fallbackSort</td>
<td><div class="first last line-block">
<div class="line">アプリケーション全体のソート条件のデフォルト値を指定する。</div>
<div class="line">ソート条件が指定されていない場合は、fallbackSortに設定されている値が適用される。</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><cite>null</cite></div>
<div class="line">(ソート条件なし)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="2">
<li></li>
</ol>
</td>
<td>sortParameter</td>
<td><div class="first last line-block">
<div class="line">ソート条件を指定するためのリクエストパラメータ名を指定する。</div>
<div class="line">デフォルトのパラメータ名がアプリケーションで使用するパラメータと衝突する場合は、リクエストパラメータ名を変更することで衝突を防ぐことができる。</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">&quot;sort&quot;</span></tt></div>
</div>
</td>
</tr>
<tr class="row-even"><td><ol class="first last arabic simple" start="3">
<li></li>
</ol>
</td>
<td>propertyDelimiter</td>
<td><div class="first last line-block">
<div class="line">ソート項目及びソート順(ASC,DESC)の区切り文字を指定する。</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">&quot;,&quot;</span></tt></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="4">
<li></li>
</ol>
</td>
<td>qualifierDelimiter</td>
<td><div class="first last line-block">
<div class="line">同一リクエストで複数のページ検索が必要になる場合、ページ検索に必要な情報(ソート条件)を区別するために、リクエストパラメータ名は <tt class="docutils literal"><span class="pre">qualifier</span> <span class="pre">+</span> <span class="pre">delimiter</span> <span class="pre">+</span> <span class="pre">sortParameter</span></tt> の形式で指定する。</div>
<div class="line">本プロパティは、上記形式の中の <tt class="docutils literal"><span class="pre">delimiter</span></tt> の値を設定する。</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">&quot;_&quot;</span></tt></div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="DoubleSubmitProtection.html" title="5.12. 二重送信防止"
             >next</a> |</li>
        <li class="right" >
          <a href="PropertyManagement.html" title="5.10. プロパティ管理"
             >previous</a> |</li>
        <li><a href="../index.html">TERASOLUNA Global Framework Development Guideline 1.0.0.publicreview documentation</a> &raquo;</li>
          <li><a href="index.html" >5. TERASOLUNA Global Frameworkの機能詳細</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, NTT DATA.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.Theme by <a href="http://github.com/vkvn">vkvn</a>
    </div>
    
    <script>
    
    $(function() {
    	var $sidebar	= $('.sphinxsidebar'),
    		$window		= $(window),
    		offset		= $sidebar.offset(),
    		topPadding	= 3,
    		$scroll		= $('#scroll');
    	
    	$window.scroll(function() {
    		if ($scroll.is(':checked')) {
				if ($window.scrollTop() > offset.top) {
					$sidebar.stop().animate({
						marginTop:$window.scrollTop() - offset.top + topPadding
					});
				} else {
					$sidebar.stop().animate({
						marginTop:0
					});
				}
			}
		});
    	
    	var $navList = $('ul:first', $sidebar);
    	$('li:first', $navList).addClass('open');
    	
    	$navList.treeview({
    		persist: "location",
    		collapsed: true,
    		unique: false
    	});
    	
	});
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-46550814-1', 'terasolunaorg.github.io');
    ga('send', 'pageview');
    </script>
  </body>
</html>