<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>4.6. Message Management &#8212; TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.4.1.RELEASE documentation</title>
    <link rel="stylesheet" href="../../_static/solar.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '5.4.1.RELEASE',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="4.7. Internationalization" href="Internationalization.html" />
    <link rel="prev" title="4.5. Double Submit Protection" href="DoubleSubmitProtection.html" /><script src="../../_static/jquery.treeview.js" type="text/javascript"></script>
<!-- <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro|Open+Sans:300italic,400italic,700italic,400,300,700' rel='stylesheet' type='text/css'> -->
<link href="../../_static/solarized-dark.css" rel="stylesheet">
<link href="../../_static/jquery.treeview.css" rel="stylesheet">
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Internationalization.html" title="4.7. Internationalization"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="DoubleSubmitProtection.html" title="4.5. Double Submit Protection"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.4.1.RELEASE documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">4. Web Application Development Features</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><label><input id="scroll" type="checkbox" checked> scroll sidebar</label>

  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">4.6. Message Management</a><ul>
<li><a class="reference internal" href="#overview">4.6.1. Overview</a><ul>
<li><a class="reference internal" href="#types-of-messages">4.6.1.1. Types of messages</a></li>
<li><a class="reference internal" href="#types-of-messages-depending-on-patterns">4.6.1.2. Types of messages depending on patterns</a></li>
<li><a class="reference internal" href="#message-id">4.6.1.3. Message ID</a><ul>
<li><a class="reference internal" href="#title">4.6.1.3.1. Title</a></li>
<li><a class="reference internal" href="#labels">4.6.1.3.2. Labels</a></li>
<li><a class="reference internal" href="#result-messages">4.6.1.3.3. Result messages</a><ul>
<li><a class="reference internal" href="#messages-commonly-used-in-business-processes">4.6.1.3.3.1. Messages commonly used in business processes</a></li>
<li><a class="reference internal" href="#messages-used-individually-in-each-business-process">4.6.1.3.3.2. Messages used individually in each business process</a></li>
</ul>
</li>
<li><a class="reference internal" href="#input-validation-error-message">4.6.1.3.4. Input validation error message</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-use">4.6.2. How to use</a><ul>
<li><a class="reference internal" href="#display-of-messages-set-in-properties-file">4.6.2.1. Display of messages set in properties file</a><ul>
<li><a class="reference internal" href="#settings-at-the-time-of-using-properties">4.6.2.1.1. Settings at the time of using properties</a></li>
<li><a class="reference internal" href="#display-of-messages-set-in-properties">4.6.2.1.2. Display of messages set in properties</a></li>
</ul>
</li>
<li><a class="reference internal" href="#display-of-result-messages">4.6.2.2. Display of result messages</a><ul>
<li><a class="reference internal" href="#using-basic-result-messages">4.6.2.2.1. Using basic result messages</a></li>
<li><a class="reference internal" href="#specifying-attribute-name-of-result-messages">4.6.2.2.2. Specifying attribute name of result messages</a></li>
<li><a class="reference internal" href="#displaying-business-exception-messages">4.6.2.2.3. Displaying business exception messages</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-extend">4.6.3. How to extend</a><ul>
<li><a class="reference internal" href="#creating-independent-message-types">4.6.3.1. Creating independent message types</a></li>
</ul>
</li>
<li><a class="reference internal" href="#appendix">4.6.4. Appendix</a><ul>
<li><a class="reference internal" href="#changing-attribute-of-t-messagespanel-tag">4.6.4.1. Changing attribute of &lt;t:messagesPanel&gt; tag</a></li>
<li><a class="reference internal" href="#display-of-result-message-wherein-resultmessages-is-not-used">4.6.4.2. Display of result message wherein ResultMessages is not used</a></li>
<li><a class="reference internal" href="#auto-generation-tool-of-message-key-constant-class">4.6.4.3. Auto-generation tool of message key constant class</a></li>
</ul>
</li>
</ul>
</li>
</ul>


  <h4>Previous topic</h4>
  <p class="topless"><a href="DoubleSubmitProtection.html"
                        title="previous chapter">4.5. Double Submit Protection</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="Internationalization.html"
                        title="next chapter">4.7. Internationalization</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/ArchitectureInDetail/WebApplicationDetail/MessageManagement.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="message-management">
<h1>4.6. Message Management<a class="headerlink" href="#message-management" title="Permalink to this headline">Â¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#overview" id="id3">Overview</a><ul>
<li><a class="reference internal" href="#types-of-messages" id="id4">Types of messages</a></li>
<li><a class="reference internal" href="#types-of-messages-depending-on-patterns" id="id5">Types of messages depending on patterns</a></li>
<li><a class="reference internal" href="#message-id" id="id6">Message ID</a><ul>
<li><a class="reference internal" href="#title" id="id7">Title</a></li>
<li><a class="reference internal" href="#labels" id="id8">Labels</a></li>
<li><a class="reference internal" href="#result-messages" id="id9">Result messages</a><ul>
<li><a class="reference internal" href="#messages-commonly-used-in-business-processes" id="id10">Messages commonly used in business processes</a></li>
<li><a class="reference internal" href="#messages-used-individually-in-each-business-process" id="id11">Messages used individually in each business process</a></li>
</ul>
</li>
<li><a class="reference internal" href="#input-validation-error-message" id="id12">Input validation error message</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-use" id="id13">How to use</a><ul>
<li><a class="reference internal" href="#display-of-messages-set-in-properties-file" id="id14">Display of messages set in properties file</a><ul>
<li><a class="reference internal" href="#settings-at-the-time-of-using-properties" id="id15">Settings at the time of using properties</a></li>
<li><a class="reference internal" href="#display-of-messages-set-in-properties" id="id16">Display of messages set in properties</a></li>
</ul>
</li>
<li><a class="reference internal" href="#display-of-result-messages" id="id17">Display of result messages</a><ul>
<li><a class="reference internal" href="#using-basic-result-messages" id="id18">Using basic result messages</a></li>
<li><a class="reference internal" href="#specifying-attribute-name-of-result-messages" id="id19">Specifying attribute name of result messages</a></li>
<li><a class="reference internal" href="#displaying-business-exception-messages" id="id20">Displaying business exception messages</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-extend" id="id21">How to extend</a><ul>
<li><a class="reference internal" href="#creating-independent-message-types" id="id22">Creating independent message types</a></li>
</ul>
</li>
<li><a class="reference internal" href="#appendix" id="id23">Appendix</a><ul>
<li><a class="reference internal" href="#changing-attribute-of-t-messagespanel-tag" id="id24">Changing attribute of &lt;t:messagesPanel&gt; tag</a></li>
<li><a class="reference internal" href="#display-of-result-message-wherein-resultmessages-is-not-used" id="id25">Display of result message wherein ResultMessages is not used</a></li>
<li><a class="reference internal" href="#auto-generation-tool-of-message-key-constant-class" id="id26">Auto-generation tool of message key constant class</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#id3">4.6.1. Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">Â¶</a></h2>
<div class="line-block">
<div class="line">A message consists of fixed text displayed on screens or reports, or dynamic text displayed depending on screen operations performed by user.</div>
<div class="line">It is also recommended to define a error message in as much details as possible.</div>
</div>
<p></p>
<blockquote>
<div><div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>In following cases, there is a risk of inability to identify error cause during the production phase or during the testing just before entering into production phase (however, such risks may not surface during the development phase).</p>
<ul class="simple">
<li>When only one error message is defined</li>
<li>When only two types of error messages (âImportantâ and âWarningâ) are defined</li>
</ul>
<p class="last">Thus, if messages are changed when the number of developers in the team is less, the cost to modify these messages would increase as the development progresses.
It is, therefore, recommended to define the messages in advance at a detailed level.</p>
</div>
</div></blockquote>
<div class="section" id="types-of-messages">
<h3><a class="toc-backref" href="#id4">4.6.1.1. Types of messages</a><a class="headerlink" href="#types-of-messages" title="Permalink to this headline">Â¶</a></h3>
<div class="line-block">
<div class="line">Message that display according to the result of the userâs screen operation should be classified into following 3 types depending on the message contents.</div>
<div class="line">When defining any message, it important to note its type.</div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Message type</th>
<th class="head">Category</th>
<th class="head">Overview</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>info</td>
<td>Information message</td>
<td>This message is displayed when a process is executed normally by the user.</td>
</tr>
<tr class="row-odd"><td>warn</td>
<td>Warning message</td>
<td>This message is displayed to indicate waring to be focused on; however the process can be continued. (Example: Notification indicating that the password is about to expire)</td>
</tr>
<tr class="row-even"><td>error</td>
<td>Input error message</td>
<td>This message is displayed on input screen when value entered by the user is invalid.</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>Business error message</td>
<td>This message is displayed to indicate error in the business logic</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>System error message</td>
<td>This message is displayed when system errors (database connection failure etc.) occur and recovery is not possible by user operations.</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="types-of-messages-depending-on-patterns">
<h3><a class="toc-backref" href="#id5">4.6.1.2. Types of messages depending on patterns</a><a class="headerlink" href="#types-of-messages-depending-on-patterns" title="Permalink to this headline">Â¶</a></h3>
<p>Message output patterns are shown below.</p>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/message-pattern.png"><img alt="message pattern" src="../../_images/message-pattern.png" style="width: 95%;" /></a>
</div>
<p>Message patterns, message display contents and the message type are shown below.</p>
<table border="1" class="colwidths-given longtable docutils">
<colgroup>
<col width="5%" />
<col width="15%" />
<col width="20%" />
<col width="10%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Symbol</th>
<th class="head">Pattern</th>
<th class="head">Display contents</th>
<th class="head">Message type</th>
<th class="head">Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(A)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Title</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Screen title</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">-</div>
</div>
</td>
<td><ul class="first last simple">
<li>Employee Registration screen</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line"><br /></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Label</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Screen field name</div>
<div class="line">Report field name</div>
<div class="line">Comment</div>
<div class="line">Guidance</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">-</div>
</div>
</td>
<td><ul class="first last simple">
<li>User name</li>
<li>Password</li>
</ul>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(B)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Dialog</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Confirmation message</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">info</div>
</div>
</td>
<td><ul class="first last simple">
<li>Are you sure you want to register?</li>
<li>Are you sure you want to delete?</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(C)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Result message</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Successful completion</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">info</div>
</div>
</td>
<td><ul class="first last simple">
<li>Registered.</li>
<li>Deleted.</li>
</ul>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(D)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><br /></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Warning</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">warn</div>
</div>
</td>
<td><ul class="first last simple">
<li>Password is about to expire. Please change the password.</li>
<li>Server is busy. Please try again later.</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(E)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><br /></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Single field validation error</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">error</div>
</div>
</td>
<td><ul class="first last simple">
<li>âUser nameâ is mandatory.</li>
<li>Please enter âNameâ within 20 characters.</li>
<li>Please enter the âAmountâ in number.</li>
</ul>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(F)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><br /></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Correlation check error</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">error</div>
</div>
</td>
<td><ul class="first last simple">
<li>âPasswordâ and âConfirm Passwordâ do not match.</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(G)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><br /></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Business error</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">error</div>
</div>
</td>
<td><ul class="first last simple">
<li>Failed to cancel the reservation as cancellation period has elapsed.</li>
<li>Failed to register as number of allowed registrations exceeded.</li>
</ul>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(H)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><br /></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">System error</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">error</div>
</div>
</td>
<td><ul class="first last simple">
<li>XXXSystem is blocked, please try again later.</li>
<li>Timeout has occurred.</li>
<li>System error.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="message-id">
<h3><a class="toc-backref" href="#id6">4.6.1.3. Message ID</a><a class="headerlink" href="#message-id" title="Permalink to this headline">Â¶</a></h3>
<div class="line-block">
<div class="line">For effective message management, adding an ID to the message is recommended.</div>
<div class="line">The advantages of adding an ID are as follows:</div>
</div>
<ul class="simple">
<li>To change the message without modifying the source code.</li>
<li>To be able to identify the message output location easily</li>
<li>To support internationalization</li>
</ul>
<p>From maintenance perspective, it is strongly recommended that you define the message IDs by creating and standardizing the rules.</p>
<div class="line-block">
<div class="line">See the example below for Message ID rules for each message pattern.</div>
<div class="line">Refer to these rules when message ID rules are not defined in a development project.</div>
</div>
<div class="section" id="title">
<h4><a class="toc-backref" href="#id7">4.6.1.3.1. Title</a><a class="headerlink" href="#title" title="Permalink to this headline">Â¶</a></h4>
<div class="line-block">
<div class="line">The method of defining message ID to be used in screen title is described below.</div>
</div>
<ul>
<li><p class="first">Format</p>
<blockquote>
<div><table border="1" class="colwidths-given docutils">
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Prefix</th>
<th class="head">Delimiter</th>
<th class="head">Business process name</th>
<th class="head">Delimiter</th>
<th class="head">Screen name</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">title</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">.</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">nnn*</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">.</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">nnn*</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p class="first">Description</p>
<blockquote>
<div><table border="1" class="colwidths-given docutils">
<colgroup>
<col width="13%" />
<col width="13%" />
<col width="31%" />
<col width="44%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Position</th>
<th class="head">Contents</th>
<th class="head">Remarks</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">Prefix</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">1st - 5th digit (5 digits)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">âtitleâ (fixed)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">Business process name</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Variable lengthï¼Optional</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Directory under prefix of viewResolver defined in spring-mvc.xml (parent directory of JSP)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">Screen name</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Variable lengthï¼Optional</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">JSP name</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">âaaaâ when file name is âaaa.jspâ</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p class="first">Example</p>
<blockquote>
<div><div class="highlight-properties"><div class="highlight"><pre><span></span><span class="c"># In case of &quot;/WEB-INF/views/admin/top.jsp&quot;</span>
<span class="na">title.admin.top</span><span class="o">=</span><span class="s">Admin Top</span>
<span class="c"># In case of &quot;/WEB-INF/views/staff/createForm.jsp&quot;</span>
<span class="na">title.staff.createForm</span><span class="o">=</span><span class="s">Staff Register Input</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">This example is valid when using Tiles. For details, refer to <a class="reference internal" href="TilesLayout.html"><span class="doc">Screen Layout using Tiles</span></a>.
When not using Tiles, follow the <a class="reference internal" href="#message-management-label-rule"><span class="std std-ref">Labels</span></a> rules explained later.</p>
</div>
</div></blockquote>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="labels">
<span id="message-management-label-rule"></span><h4><a class="toc-backref" href="#id8">4.6.1.3.2. Labels</a><a class="headerlink" href="#labels" title="Permalink to this headline">Â¶</a></h4>
<p>The method of defining message ID to be used in screen label and fixed text of reports is described below.</p>
<ul>
<li><p class="first">Format</p>
<blockquote>
<div><table border="1" class="colwidths-given docutils">
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="16%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Prefix</th>
<th class="head">Delimiter</th>
<th class="head">Project code</th>
<th class="head">Delimiter</th>
<th class="head">Business process name</th>
<th class="head">Delimiter</th>
<th class="head">Field name</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">label</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">.</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">xx</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">.</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">nnn*</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">.</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">nnn*</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p class="first">Description</p>
<blockquote>
<div><table border="1" class="colwidths-given docutils">
<colgroup>
<col width="13%" />
<col width="13%" />
<col width="31%" />
<col width="44%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Position</th>
<th class="head">Contents</th>
<th class="head">Remarks</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">Prefix</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">1st - 5th digit (5 digits)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">âlabelâ (Fixed)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">Project code</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">7th - 8th digit (2 digits)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Enter 2 alphabets of project name</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">Business process name</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Variable lengthï¼Optional</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><br /></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">Field name</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Variable lengthï¼Optional</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Label name, Caption</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><br /></div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>When including the field name into validation error message, define messages as follows.</p>
<ul class="simple">
<li>model attribute name of form + â.â + field name</li>
</ul>
<blockquote>
<div><div class="highlight-properties"><div class="highlight"><pre><span></span><span class="na">staffForm.staffName</span> <span class="o">=</span> <span class="s">Staff name</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li>filed name</li>
</ul>
<blockquote class="last">
<div><div class="highlight-properties"><div class="highlight"><pre><span></span><span class="na">staffName</span> <span class="o">=</span> <span class="s">Staff name</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div></blockquote>
</li>
<li><p class="first">Example</p>
<blockquote>
<div><div class="highlight-properties"><div class="highlight"><pre><span></span><span class="c"># Form field name on Staff Registration screen</span>
<span class="c"># Project code=em (Event Management System)</span>
<span class="na">label.em.staff.staffName</span><span class="o">=</span><span class="s">Staff name</span>
<span class="c"># In case of a caption to be displayed on Tour Search screen</span>
<span class="c"># Project code=tr (Tour Reservation System)</span>
<span class="na">label.tr.tourSearch.tourSearchMessage</span><span class="o">=</span><span class="s">You can search tours with the specified conditions.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In case of multiple projects, define a project code to avoid duplication of message ID.
Even if there is a single project, it is recommended to define a project code for future enhancements.</p>
</div>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="result-messages">
<span id="message-management-result-rule"></span><h4><a class="toc-backref" href="#id9">4.6.1.3.3. Result messages</a><a class="headerlink" href="#result-messages" title="Permalink to this headline">Â¶</a></h4>
<div class="section" id="messages-commonly-used-in-business-processes">
<h5><a class="toc-backref" href="#id10">4.6.1.3.3.1. Messages commonly used in business processes</a><a class="headerlink" href="#messages-commonly-used-in-business-processes" title="Permalink to this headline">Â¶</a></h5>
<p>To avoid duplication of messages, the messages which are common in multiple business processes are explained below.</p>
<ul>
<li><p class="first">Format</p>
<blockquote>
<div><table border="1" class="colwidths-given docutils">
<colgroup>
<col width="12%" />
<col width="12%" />
<col width="14%" />
<col width="12%" />
<col width="14%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Message type</th>
<th class="head">Delimiter</th>
<th class="head">Project code</th>
<th class="head">Delimiter</th>
<th class="head">Common message code</th>
<th class="head">Delimiter</th>
<th class="head">Error level</th>
<th class="head">Sr. No.</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">x</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">.</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">xx</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">.</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">fw</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">.</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">9</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">999</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p class="first">Description</p>
<blockquote>
<div><table border="1" class="colwidths-given docutils">
<colgroup>
<col width="22%" />
<col width="22%" />
<col width="44%" />
<col width="11%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Position</th>
<th class="head">Contents</th>
<th class="head">Remarks</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">Message type</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">1st digit (1 digit)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">info  : i</div>
<div class="line">warn  : w</div>
<div class="line">error : e</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">Project code</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">3rd - 4th digit (2 digits)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Enter 2 alphabets of project name</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">Common message code</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">6th - 7th digit (2 digits)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">âfwâ (fixed)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">Error level</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">9th digit (1 digit)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">0-1 : Normal message</div>
<div class="line">2-4 : Business error (semi-normal message)</div>
<div class="line">5-7 : Input validation error</div>
<div class="line">8 : Business error (error)</div>
<div class="line">9 : System error</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">Sr. No.</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">10th -12th digit (3 digits)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Use as per serial number (000-999)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Even if the message is deleted, serial number field should be blank and it should not be deleted.</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p class="first">Example</p>
<blockquote>
<div><div class="highlight-properties"><div class="highlight"><pre><span></span><span class="c"># When registration is successful (Normal message)</span>
<span class="na">i.ex.fw.0001</span><span class="o">=</span><span class="s">Registered successfully.</span>
<span class="c"># Insufficient server resources</span>
<span class="na">w.ex.fw.9002</span><span class="o">=</span><span class="s">Server busy. Please, try again.</span>
<span class="c"># When system error occurs (System error)</span>
<span class="na">e.ex.fw.9001</span><span class="o">=</span><span class="s">A system error has occurred.</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="messages-used-individually-in-each-business-process">
<span id="message-properties-example"></span><h5><a class="toc-backref" href="#id11">4.6.1.3.3.2. Messages used individually in each business process</a><a class="headerlink" href="#messages-used-individually-in-each-business-process" title="Permalink to this headline">Â¶</a></h5>
<p>The messages used individually in each business process are explained below.</p>
<ul>
<li><p class="first">Format</p>
<blockquote>
<div><table border="1" class="colwidths-given docutils">
<colgroup>
<col width="12%" />
<col width="12%" />
<col width="14%" />
<col width="12%" />
<col width="14%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Message type</th>
<th class="head">Delimiter</th>
<th class="head">Project code</th>
<th class="head">Delimiter</th>
<th class="head">Business process message code</th>
<th class="head">Delimiter</th>
<th class="head">Error level</th>
<th class="head">Sr. No.</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">x</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">.</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">xx</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">.</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">xx</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">.</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">9</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">999</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p class="first">Description</p>
<blockquote>
<div><table border="1" class="colwidths-given docutils">
<colgroup>
<col width="22%" />
<col width="22%" />
<col width="44%" />
<col width="11%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Position</th>
<th class="head">Contents</th>
<th class="head">Remarks</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">Message type</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">1st digit (1 digit)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">info  : i</div>
<div class="line">warn  : w</div>
<div class="line">error : e</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">Project code</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">3rd -4th digit (2 digits)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Enter 2 alphabets of project name</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">Business process message code</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">6th -7th digit (2 digits)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">2 characters defined for each business process such as Business ID</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">Error level</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">9th digit (1 digit)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">0-1 : Normal message</div>
<div class="line">2-4 : Business error (semi-normal message)</div>
<div class="line">5-7 : Input validation error</div>
<div class="line">8 : Business error (error)</div>
<div class="line">9 : System error</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">Sr. No.</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">10th -12th digit (3 digits)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Use as per serial number (000-999)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Even if the message is deleted, serial number field should be blank and it should not be deleted.</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p class="first">Example</p>
<blockquote>
<div><div class="highlight-properties"><div class="highlight"><pre><span></span><span class="c"># When file upload is successful.</span>
<span class="na">i.ex.an.0001</span><span class="o">=</span><span class="s">{0} upload completed.</span>
<span class="c"># When the recommended password change interval has passed.</span>
<span class="na">w.ex.an.2001</span><span class="o">=</span><span class="s">The recommended change interval has passed password. Please change your password.</span>
<span class="c"># When file size exceeds the limit.</span>
<span class="na">e.ex.an.8001</span><span class="o">=</span><span class="s">Cannot upload, Because the file size must be less than {0}MB.</span>
<span class="c"># When there is inconsistency in data.</span>
<span class="na">e.ex.an.9001</span><span class="o">=</span><span class="s">There are inconsistencies in the data.</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="input-validation-error-message">
<h4><a class="toc-backref" href="#id12">4.6.1.3.4. Input validation error message</a><a class="headerlink" href="#input-validation-error-message" title="Permalink to this headline">Â¶</a></h4>
<p>For the messages to be displayed in case of input validation error, refer to <a class="reference internal" href="Validation.html#validation-message-def"><span class="std std-ref">Definition of error messages</span></a>.</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Basic policies related to output location of input validation error are as follows:</p>
<ul class="last">
<li><div class="first line-block">
<div class="line">Single field input validation error messages should be displayed next to the target field so that it can be identified easily.</div>
</div>
</li>
<li><div class="first line-block">
<div class="line">Correlation input validation error messages should be displayed collectively on the top of the page .</div>
</div>
</li>
<li><div class="first line-block">
<div class="line">When it is difficult to display the single field validation message next to the target field, it should be displayed on the top of the page.</div>
<div class="line">In that case, field name should be included in the message.</div>
</div>
</li>
</ul>
</div>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
</div>
<div class="section" id="how-to-use">
<h2><a class="toc-backref" href="#id13">4.6.2. How to use</a><a class="headerlink" href="#how-to-use" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="display-of-messages-set-in-properties-file">
<h3><a class="toc-backref" href="#id14">4.6.2.1. Display of messages set in properties file</a><a class="headerlink" href="#display-of-messages-set-in-properties-file" title="Permalink to this headline">Â¶</a></h3>
<div class="section" id="settings-at-the-time-of-using-properties">
<h4><a class="toc-backref" href="#id15">4.6.2.1.1. Settings at the time of using properties</a><a class="headerlink" href="#settings-at-the-time-of-using-properties" title="Permalink to this headline">Â¶</a></h4>
<p>Define implementation class of <code class="docutils literal"><span class="pre">org.springframework.context.MessageSource</span></code> which is used for performing message management.</p>
<ul>
<li><p class="first">applicationContext.xml</p>
<blockquote>
<div><div class="highlight-xml"><div class="highlight"><pre><span></span><span class="c">&lt;!-- Message --&gt;</span>
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;messageSource&quot;</span>
    <span class="na">class=</span><span class="s">&quot;org.springframework.context.support.ResourceBundleMessageSource&quot;</span><span class="nt">&gt;</span> <span class="c">&lt;!-- (1) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;basenames&quot;</span><span class="nt">&gt;</span> <span class="c">&lt;!-- (2) --&gt;</span>
        <span class="nt">&lt;list&gt;</span>
            <span class="nt">&lt;value&gt;</span>i18n/application-messages<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/list&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Definition of <code class="docutils literal"><span class="pre">MessageSource</span></code>. Here, use <code class="docutils literal"><span class="pre">ResourceBundleMessageSource</span></code> .</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define the base name of message property to be used. Specify it with relative class path.</div>
<div class="line">In this example, read âsrc/main/resources/i18n/application-messages.propertiesâ.</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="display-of-messages-set-in-properties">
<span id="properties-display"></span><h4><a class="toc-backref" href="#id16">4.6.2.1.2. Display of messages set in properties</a><a class="headerlink" href="#display-of-messages-set-in-properties" title="Permalink to this headline">Â¶</a></h4>
<ul>
<li><p class="first">application-messages.properties</p>
<blockquote>
<div><p>See the example below for defining the messages in <code class="file docutils literal"><span class="pre">application-messages.properties</span></code> .</p>
<div class="highlight-properties"><div class="highlight"><pre><span></span><span class="na">label.aa.bb.year</span><span class="o">=</span><span class="s">Year</span>
<span class="na">label.aa.bb.month</span><span class="o">=</span><span class="s">Month</span>
<span class="na">label.aa.bb.day</span><span class="o">=</span><span class="s">Day</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Earlier, it was necessary to convert the characters (such as Japanese characters etc.) that cannot be expressed into âISO-8859-1â
with the help of <code class="docutils literal"><span class="pre">native2ascii</span></code> command. However, from JDK version 6 onwards, it has become possible to specify the character encoding;
hence character conversion is no longer needed. By setting the character encoding to UTF-8, Japanese characters etc. can be used directly in properties file.</p>
<ul>
<li><p class="first">application-messages.properties</p>
<blockquote>
<div><div class="highlight-properties"><div class="highlight"><pre><span></span><span class="na">label.aa.bb.year</span><span class="o">=</span> <span class="s">Year</span>
<span class="na">label.aa.bb.month</span><span class="o">=</span> <span class="s">Month</span>
<span class="na">label.aa.bb.day</span><span class="o">=</span> <span class="s">Day</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<p>In such a case, it is necessary to specify the character encoding that can also be read in <code class="docutils literal"><span class="pre">ResourceBundleMessageSource</span></code> .</p>
<ul>
<li><p class="first">applicationContext.xml</p>
<blockquote>
<div><div class="highlight-java"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">bean</span> <span class="n">id</span><span class="o">=</span><span class="s">&quot;messageSource&quot;</span>
    <span class="n">class</span><span class="o">=</span><span class="s">&quot;org.springframework.context.support.ResourceBundleMessageSource&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">property</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;basenames&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">list</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">i18n</span><span class="o">/</span><span class="n">application</span><span class="o">-</span><span class="n">messages</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">list</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">property</span><span class="o">&gt;</span>
<span class="hll">    <span class="o">&lt;</span><span class="n">property</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;defaultEncoding&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span> <span class="o">/&gt;</span>
</span><span class="o">&lt;/</span><span class="n">bean</span><span class="o">&gt;</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<p class="last">ISO-8859-1 is used by default; hence when describing the Japanese characters directly in properties file,
make sure that the character encoding is set as value of <code class="docutils literal"><span class="pre">defaultEncoding</span></code> property.</p>
</div>
</div></blockquote>
</li>
<li><p class="first">JSP</p>
<blockquote>
<div><p>Messages set above can be displayed using <code class="docutils literal"><span class="pre">&lt;spring:message&gt;</span></code> tag in JSP.
For using it, settings mentioned in <a class="reference internal" href="../../ImplementationAtEachLayer/ApplicationLayer.html#view-jsp-include-label"><span class="std std-ref">Creating common JSP for include</span></a> must be done.</p>
<div class="highlight-jsp"><div class="highlight"><pre><span></span><span class="nt">&lt;spring:message</span> <span class="na">code=</span><span class="s">&quot;label.aa.bb.year&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;spring:message</span> <span class="na">code=</span><span class="s">&quot;label.aa.bb.month&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;spring:message</span> <span class="na">code=</span><span class="s">&quot;label.aa.bb.day&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p>When used with form label, it can be used as follows:</p>
<div class="highlight-jsp"><div class="highlight"><pre><span></span><span class="nt">&lt;form:form</span> <span class="na">modelAttribute=</span><span class="s">&quot;sampleForm&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;form:label</span> <span class="na">path=</span><span class="s">&quot;year&quot;</span><span class="nt">&gt;</span>
<span class="hll">        <span class="nt">&lt;spring:message</span> <span class="na">code=</span><span class="s">&quot;label.aa.bb.year&quot;</span> <span class="nt">/&gt;</span>
</span>    <span class="nt">&lt;/form:label&gt;</span>: <span class="nt">&lt;form:input</span> <span class="na">path=</span><span class="s">&quot;year&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;br&gt;</span>
    <span class="nt">&lt;form:label</span> <span class="na">path=</span><span class="s">&quot;month&quot;</span><span class="nt">&gt;</span>
<span class="hll">        <span class="nt">&lt;spring:message</span> <span class="na">code=</span><span class="s">&quot;label.aa.bb.month&quot;</span> <span class="nt">/&gt;</span>
</span>    <span class="nt">&lt;/form:label&gt;</span>: <span class="nt">&lt;form:input</span> <span class="na">path=</span><span class="s">&quot;month&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;br&gt;</span>
    <span class="nt">&lt;form:label</span> <span class="na">path=</span><span class="s">&quot;day&quot;</span><span class="nt">&gt;</span>
<span class="hll">        <span class="nt">&lt;spring:message</span> <span class="na">code=</span><span class="s">&quot;label.aa.bb.day&quot;</span> <span class="nt">/&gt;</span>
</span>    <span class="nt">&lt;/form:label&gt;</span>: <span class="nt">&lt;form:input</span> <span class="na">path=</span><span class="s">&quot;day&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form:form&gt;</span>
</pre></div>
</div>
<p>It is displayed in browser as follows:</p>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/message-management-ymd.png"><img alt="../../_images/message-management-ymd.png" src="../../_images/message-management-ymd.png" style="width: 40%;" /></a>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>When supporting internationalization,</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>src/main/resources/i18n
                    â application-messages.properties (English message)
                    â application-messages_fr.properties (French message)
                    â ...
                    â application-messages_ja.properties (Japanese message)
</pre></div>
</div>
<p class="last">properties file should be created for each language as shown above.
For details, refer to <a class="reference internal" href="Internationalization.html"><span class="doc">Internationalization</span></a> .</p>
</div>
</div></blockquote>
</li>
</ul>
</div>
</div>
<div class="section" id="display-of-result-messages">
<span id="message-display"></span><h3><a class="toc-backref" href="#id17">4.6.2.2. Display of result messages</a><a class="headerlink" href="#display-of-result-messages" title="Permalink to this headline">Â¶</a></h3>
<p><code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.message.ResultMessages</span></code> and <code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.message.ResultMessage</span></code> are provided in common library,
as classes storing the result messages which indicate success or failure of process at server side.</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Class name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">ResultMessages</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Class having list of result messages and message type.</div>
<div class="line">List of Result messages is expressed in terms of <code class="docutils literal"><span class="pre">List&lt;ResultMessage&gt;</span></code> and message type is expressed in terms of <code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.message.ResultMessageType</span></code> interface.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">ResultMessage</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Class having result message ID or message text.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">&lt;t:messagesPanel&gt;</span></code> tag is also provided as JSP tag library for displaying this result message in JSP.</div>
</div>
<div class="section" id="using-basic-result-messages">
<h4><a class="toc-backref" href="#id18">4.6.2.2.1. Using basic result messages</a><a class="headerlink" href="#using-basic-result-messages" title="Permalink to this headline">Â¶</a></h4>
<p>The way of creating <code class="docutils literal"><span class="pre">ResultMessages</span></code> in Controller, passing them to screen and displaying
the result messages using <code class="docutils literal"><span class="pre">&lt;t:messagesPanel&gt;</span></code> tag in JSP, is displayed below.</p>
<ul>
<li><p class="first">Controller class</p>
<blockquote>
<div><p>The methods of creating <code class="docutils literal"><span class="pre">ResultMessages</span></code> object and passing the messages to screen are given below.
An example of <a class="reference internal" href="#message-properties-example"><span class="std std-ref">Messages used individually in each business process</span></a> should be defined in application-messages.properties.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.example.sample.app.message</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Controller</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.ui.Model</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMethod</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.terasoluna.gfw.common.message.ResultMessages</span><span class="o">;</span>

<span class="nd">@Controller</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&quot;message&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MessageController</span> <span class="o">{</span>

  <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">hello</span><span class="o">(</span><span class="n">Model</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">ResultMessages</span> <span class="n">messages</span> <span class="o">=</span> <span class="n">ResultMessages</span><span class="o">.</span><span class="na">error</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;e.ex.an.9001&quot;</span><span class="o">);</span> <span class="c1">// (1)</span>
    <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="n">messages</span><span class="o">);</span> <span class="c1">// (2)</span>
    <span class="k">return</span> <span class="s">&quot;message/index&quot;</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Create <code class="docutils literal"><span class="pre">ResultMessages</span></code> wherein message type is âerrorâ and</div>
<div class="line">set result messages wherein message ID is âe.ex.an.9001â.</div>
<div class="line">This process is same as follows:</div>
<div class="line"><code class="docutils literal"><span class="pre">ResultMessages.error().add(ResultMessage.fromCode(&quot;e.ex.an.9001&quot;));</span></code></div>
<div class="line">Since it is possible to skip the creation of  <code class="docutils literal"><span class="pre">ResultMessage</span></code> object if message ID is specified, it is recommended to skip the same.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Add <code class="docutils literal"><span class="pre">ResultMessages</span></code> to Model.</div>
<div class="line">It is ok even if the attribute is not specified. (Attribute name is âresultMessagesâ)</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p class="first">JSP</p>
<blockquote>
<div><p>Write WEB-INF/views/message/index.jsp as follows:</p>
<div class="highlight-jsp"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE HTML&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;title&gt;</span>Result Message Example<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Result Message<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;t:messagesPanel</span> <span class="nt">/&gt;</span><span class="c">&lt;!-- (1) --&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">&lt;t:messagesPanel&gt;</span></code> tag is used with default settings.</div>
<div class="line">By default, âresultMessagesâ object is displayed.</div>
<div class="line">Therefore, attribute name need not be specified when <code class="docutils literal"><span class="pre">ResultMessages</span></code> is set in Model from Controller with default settings.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>It is displayed in browser as follows:</p>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/message-management-resultmessage-basic.png"><img alt="../../_images/message-management-resultmessage-basic.png" src="../../_images/message-management-resultmessage-basic.png" style="width: 40%;" /></a>
</div>
<p>HTML output by <code class="docutils literal"><span class="pre">&lt;t:messagesPanel&gt;</span></code> is shown below. (The format makes the explanation easier).</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;alert alert-error&quot;</span><span class="p">&gt;</span><span class="c">&lt;!-- (1) --&gt;</span>
  <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span><span class="c">&lt;!-- (2) --&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>There are inconsistencies in the data.<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span><span class="c">&lt;!-- (3) --&gt;</span>
  <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">âalert-errorâclass is assigned in accordance with the message type. âerror error-[Message type]â is assigned to <code class="docutils literal"><span class="pre">&lt;div&gt;</span></code> tag class by default.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Result message list is output using <code class="docutils literal"><span class="pre">&lt;ul&gt;</span></code> tag.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">The message corresponding to message ID is resolved from <code class="docutils literal"><span class="pre">MessageSource</span></code>.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p><code class="docutils literal"><span class="pre">&lt;t:messagesPanel&gt;</span></code> outputs only HTML with class; hence it is necessary to customize the look and feel using CSS as per the output class (explained later).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Message text can be hard-coded such as <code class="docutils literal"><span class="pre">ResultMessages.error().add(ResultMessage.fromText(&quot;There</span> <span class="pre">are</span> <span class="pre">inconsistencies</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">data.&quot;));</span></code>;
however, to enhance maintainability, it is recommended to create <code class="docutils literal"><span class="pre">ResultMessage</span></code> object using message key,
and to fetch the message text from properties file.</p>
</div>
</div></blockquote>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>For inserting a value in message placeholder, set second or subsequent arguments of <code class="docutils literal"><span class="pre">add</span></code> method as follows:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">ResultMessages</span> <span class="n">messages</span> <span class="o">=</span> <span class="n">ResultMessages</span><span class="o">.</span><span class="na">error</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;e.ex.an.8001&quot;</span><span class="o">,</span> <span class="mi">1024</span><span class="o">);</span>
<span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="n">messages</span><span class="o">);</span>
</pre></div>
</div>
<p>In such a case, the HTML shown below is output using <code class="docutils literal"><span class="pre">&lt;t:messagesPanel</span> <span class="pre">/&gt;</span></code> tag.</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;alert alert-error&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>Cannot upload, Because the file size must be less than 1,024MB.<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p></p>
<blockquote>
<div><div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p><strong>Points to be noted when inserting values in placeholder using terasoluna-gfw-web 1.0.0.RELEASE</strong></p>
<p>When using terasoluna-gfw-web 1.0.0.RELEASE, <strong>if the user entered value is inserted in the placeholder, there is a risk of XSS vulnerability.</strong>If the user entered value is likely to include XSS vulnerable characters, then the value should not be inserted in the placeholder.</p>
<p class="last">When using terasoluna-gfw-web 1.0.1.RELEASE or higher version, XSS vulnerability does not occur even after inserting the user entered value in the placeholder.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><code class="docutils literal"><span class="pre">ResourceBundleMessageSource</span></code> uses <code class="docutils literal"><span class="pre">java.text.MessageFormat</span></code> at the time of creating a message; hence <code class="docutils literal"><span class="pre">1024</span></code> is displayed as
<code class="docutils literal"><span class="pre">1,024</span></code> with comma. When comma is not required, perform settings in properties file as shown below.</p>
<blockquote>
<div><div class="highlight-properties"><div class="highlight"><pre><span></span><span class="na">e.ex.an.8001</span><span class="o">=</span><span class="s">Cannot upload, Because the file size must be less than {0,number,#}MB.</span>
</pre></div>
</div>
</div></blockquote>
<p class="last">For details, refer to <a class="reference external" href="http://docs.oracle.com/javase/8/docs/api/java/text/MessageFormat.html">Javadoc</a>.</p>
</div>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>It is also possible to set multiple result messages as shown below.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">ResultMessages</span> <span class="n">messages</span> <span class="o">=</span> <span class="n">ResultMessages</span><span class="o">.</span><span class="na">error</span><span class="o">()</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;e.ex.an.9001&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;e.ex.an.8001&quot;</span><span class="o">,</span> <span class="mi">1024</span><span class="o">);</span>
<span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="n">messages</span><span class="o">);</span>
</pre></div>
</div>
<p>In such a case, HTML is output as follows (no need to change JSP).</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;alert alert-error&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>There are inconsistencies in the data.<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>Cannot upload, Because the file size must be less than 1,024MB.<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>In order to display info message, it is desirable to create <code class="docutils literal"><span class="pre">ResultMessages</span></code> object using <code class="docutils literal"><span class="pre">ResultMessages.info()</span></code> method as shown below.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">ResultMessages</span> <span class="n">messages</span> <span class="o">=</span> <span class="n">ResultMessages</span><span class="o">.</span><span class="na">info</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;i.ex.an.0001&quot;</span><span class="o">,</span> <span class="s">&quot;XXXX&quot;</span><span class="o">);</span>
<span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="n">messages</span><span class="o">);</span>
</pre></div>
</div>
<p>HTML shown below is output.</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;alert alert-info&quot;</span><span class="p">&gt;</span><span class="c">&lt;!-- (1) --&gt;</span>
  <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>XXXX upload completed.<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">The output class name has changed to âalert alert-<strong>info</strong>â in accordance with the message type.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Fundamentally the following message types are created.</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="15%" />
<col width="30%" />
<col width="25%" />
<col width="30%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Message type</th>
<th class="head">Creation of <code class="docutils literal"><span class="pre">ResultMessages</span></code> object</th>
<th class="head">Default class name</th>
<th class="head">Remarks</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">success</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">ResultMessages.success()</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">alert alert-success</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">-</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">info</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">ResultMessages.info()</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">alert alert-info</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">-</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">warn</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">ResultMessages.warn()</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">alert alert-warn</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">This type is deprecated because added âwarningâ as new message type from terasoluna-gfw-common 5.0.0.RELEASE.</div>
<div class="line"><strong>This message type might be removed in the future.</strong></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">warning</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">ResultMessages.warning()</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">alert alert-warning</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Added this message type to support <a class="reference external" href="https://getbootstrap.com/docs/3.3/components/#alerts">Alerts component</a> of <a class="reference external" href="http://getbootstrap.com/">Bootstrap(CSS Framework)</a> from the terasoluna-gfw-common 5.0.0.RELEASE.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">error</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">ResultMessages.error()</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">alert alert-error</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">-</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">danger</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">ResultMessages.danger()</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">alert alert-danger</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">-</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>CSS should be defined according to the message type. Example of applying CSS is given below.</p>
<div class="highlight-css"><div class="highlight"><pre><span></span><span class="p">.</span><span class="nc">alert</span> <span class="p">{</span>
  <span class="k">margin-bottom</span><span class="p">:</span> <span class="mi">15</span><span class="kt">px</span><span class="p">;</span>
  <span class="k">padding</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
  <span class="k">border</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span><span class="p">;</span>
  <span class="k">border-radius</span><span class="p">:</span> <span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
  <span class="k">text-shadow</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">1</span><span class="kt">px</span> <span class="mi">0</span> <span class="mh">#ffffff</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">.</span><span class="nc">alert-info</span> <span class="p">{</span>
  <span class="k">background</span><span class="p">:</span> <span class="mh">#ebf7fd</span><span class="p">;</span>
  <span class="k">color</span><span class="p">:</span> <span class="mh">#2d7091</span><span class="p">;</span>
  <span class="k">border-color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="mi">112</span><span class="p">,</span> <span class="mi">145</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">.</span><span class="nc">alert-warning</span> <span class="p">{</span>
  <span class="k">background</span><span class="p">:</span> <span class="mh">#fffceb</span><span class="p">;</span>
  <span class="k">color</span><span class="p">:</span> <span class="mh">#e28327</span><span class="p">;</span>
  <span class="k">border-color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">226</span><span class="p">,</span> <span class="mi">131</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">.</span><span class="nc">alert-error</span> <span class="p">{</span>
  <span class="k">background</span><span class="p">:</span> <span class="mh">#fff1f0</span><span class="p">;</span>
  <span class="k">color</span><span class="p">:</span> <span class="mh">#d85030</span><span class="p">;</span>
  <span class="k">border-color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">216</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<ul>
<li><p class="first">Example wherein <code class="docutils literal"><span class="pre">ResultMessages.error().add(&quot;e.ex.an.9001&quot;)</span></code> is output using <code class="docutils literal"><span class="pre">&lt;t:messagesPanel</span> <span class="pre">/&gt;</span></code></p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../../_images/message-management-resultmessage-error.jpg"><img alt="../../_images/message-management-resultmessage-error.jpg" src="../../_images/message-management-resultmessage-error.jpg" style="width: 100%;" /></a>
</div>
</div></blockquote>
</li>
<li><p class="first">Example wherein <code class="docutils literal"><span class="pre">ResultMessages.warning().add(&quot;w.ex.an.2001&quot;)</span></code> is output using <code class="docutils literal"><span class="pre">&lt;t:messagesPanel</span> <span class="pre">/&gt;</span></code></p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../../_images/message-management-resultmessage-warn.jpg"><img alt="../../_images/message-management-resultmessage-warn.jpg" src="../../_images/message-management-resultmessage-warn.jpg" style="width: 100%;" /></a>
</div>
</div></blockquote>
</li>
<li><p class="first">Example wherein <code class="docutils literal"><span class="pre">ResultMessages.info().add(&quot;i.ex.an.0001&quot;,</span> <span class="pre">&quot;XXXX&quot;)</span></code> is output using <code class="docutils literal"><span class="pre">&lt;t:messagesPanel</span> <span class="pre">/&gt;</span></code></p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../../_images/message-management-resultmessage-info.jpg"><img alt="../../_images/message-management-resultmessage-info.jpg" src="../../_images/message-management-resultmessage-info.jpg" style="width: 100%;" /></a>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">âsuccessâ and âdangerâ are provided to have diversity in style. In this guideline, success is synonymous with info and error is synonymous with danger.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last"><a class="reference external" href="https://getbootstrap.com/docs/3.3/components/#alerts">Alerts component</a> of <a class="reference external" href="http://getbootstrap.com/">Bootstrap</a> which is a CSS framework can be used with default settings of <code class="docutils literal"><span class="pre">&lt;t:messagePanel</span> <span class="pre">/&gt;</span></code>.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>In this example, message keys are hardcoded. However, in order to improve maintainability, it is recommended to define message keys in constant class.</p>
<p class="last">Refer to <a class="reference internal" href="#message-management-messagekeysgen"><span class="std std-ref">Auto-generation tool of message key constant class</span></a>.</p>
</div>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="specifying-attribute-name-of-result-messages">
<h4><a class="toc-backref" href="#id19">4.6.2.2.2. Specifying attribute name of result messages</a><a class="headerlink" href="#specifying-attribute-name-of-result-messages" title="Permalink to this headline">Â¶</a></h4>
<div class="line-block">
<div class="line">Attribute name can be omitted when adding <code class="docutils literal"><span class="pre">ResultMessages</span></code> to Model.</div>
<div class="line">However, <code class="docutils literal"><span class="pre">ResultMessages</span></code> cannot represent more than one message type.</div>
<div class="line">In order to <strong>simultaneously</strong> display the <code class="docutils literal"><span class="pre">ResultMessages</span></code> of different message types on 1 screen, it is necessary to specify the attribute name explicitly and set it in Model.</div>
</div>
<ul>
<li><p class="first">Controller (Add to MessageController)</p>
<blockquote>
<div><div class="highlight-java"><div class="highlight"><pre><span></span><span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;showMessages&quot;</span><span class="o">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">String</span> <span class="nf">showMessages</span><span class="o">(</span><span class="n">Model</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>

    <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;messages1&quot;</span><span class="o">,</span>
                <span class="n">ResultMessages</span><span class="o">.</span><span class="na">warning</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;w.ex.an.2001&quot;</span><span class="o">));</span> <span class="c1">// (1)</span>
    <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;messages2&quot;</span><span class="o">,</span>
                <span class="n">ResultMessages</span><span class="o">.</span><span class="na">error</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;e.ex.an.9001&quot;</span><span class="o">));</span> <span class="c1">// (2)</span>

    <span class="k">return</span> <span class="s">&quot;message/showMessages&quot;</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Add <code class="docutils literal"><span class="pre">ResultMessages</span></code> of âwarningâ message type to Model with attribute name âmessages1â.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Add <code class="docutils literal"><span class="pre">ResultMessages</span></code> of âinfoâ message type to Model with attribute name âmessages2â.</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p class="first">JSP (WEB-INF/views/message/showMessages.jsp)</p>
<blockquote>
<div><div class="highlight-jsp"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE HTML&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;title&gt;</span>Result Message Example<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;style</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span><span class="nt">&gt;</span>
.alert {
    margin-bottom: 15px;
    padding: 10px;
    border: 1px solid;
    border-radius: 4px;
    text-shadow: 0 1px 0 #ffffff;
}

.alert-info {
    background: #ebf7fd;
    color: #2d7091;
    border-color: rgba(45, 112, 145, 0.3);
}

.alert-warning {
    background: #fffceb;
    color: #e28327;
    border-color: rgba(226, 131, 39, 0.3);
}

.alert-error {
    background: #fff1f0;
    color: #d85030;
    border-color: rgba(216, 80, 48, 0.3);
}
<span class="nt">&lt;/style&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Result Message<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;h2&gt;</span>Messages1<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;t:messagesPanel</span> <span class="na">messagesAttributeName=</span><span class="s">&quot;messages1&quot;</span> <span class="nt">/&gt;</span><span class="c">&lt;!-- (1) --&gt;</span>
    <span class="nt">&lt;h2&gt;</span>Messages2<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;t:messagesPanel</span> <span class="na">messagesAttributeName=</span><span class="s">&quot;messages2&quot;</span> <span class="nt">/&gt;</span><span class="c">&lt;!-- (2) --&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Display <code class="docutils literal"><span class="pre">ResultMessages</span></code> having attribute name âmessages1â.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Display <code class="docutils literal"><span class="pre">ResultMessages</span></code> having attribute name âmessages2â.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>It is displayed in browser as follows:</p>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/message-management-multiple-messages.jpg"><img alt="../../_images/message-management-multiple-messages.jpg" src="../../_images/message-management-multiple-messages.jpg" style="width: 80%;" /></a>
</div>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="displaying-business-exception-messages">
<h4><a class="toc-backref" href="#id20">4.6.2.2.3. Displaying business exception messages</a><a class="headerlink" href="#displaying-business-exception-messages" title="Permalink to this headline">Â¶</a></h4>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.exception.BusinessException</span></code> and <code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.exception.ResourceNotFoundException</span></code> stores</div>
<div class="line"><code class="docutils literal"><span class="pre">ResultMessages</span></code> internally.</div>
</div>
<div class="line-block">
<div class="line">When displaying the business exception message, <code class="docutils literal"><span class="pre">BusinessException</span></code> wherein <code class="docutils literal"><span class="pre">ResultMessages</span></code> is set should be thrown in Service class.</div>
<div class="line">Catch <code class="docutils literal"><span class="pre">BusinessException</span></code> in Controller class and add the result message fetched from the caught exception to Model.</div>
</div>
<ul>
<li><p class="first">Service class</p>
<blockquote>
<div><div class="highlight-java"><div class="highlight"><pre><span></span><span class="nd">@Service</span>
<span class="nd">@Transactional</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserServiceImpl</span> <span class="kd">implements</span> <span class="n">UserService</span> <span class="o">{</span>
    <span class="c1">// omitted</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">create</span><span class="o">(...)</span> <span class="o">{</span>

        <span class="c1">// omitted...</span>

        <span class="k">if</span> <span class="o">(...)</span> <span class="o">{</span>
            <span class="c1">// illegal state!</span>
            <span class="n">ResultMessages</span> <span class="n">messages</span> <span class="o">=</span> <span class="n">ResultMessages</span><span class="o">.</span><span class="na">error</span><span class="o">()</span>
                                                    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;e.ex.an.9001&quot;</span><span class="o">);</span> <span class="c1">// (1)</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">BusinessException</span><span class="o">(</span><span class="n">messages</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Create error message using <code class="docutils literal"><span class="pre">ResultMessages</span></code> and set in <code class="docutils literal"><span class="pre">BusinessException</span></code>.</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p class="first">Controller class</p>
<blockquote>
<div><div class="highlight-java"><div class="highlight"><pre><span></span><span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;create&quot;</span><span class="o">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">POST</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">String</span> <span class="nf">create</span><span class="o">(</span><span class="nd">@Validated</span> <span class="n">UserForm</span> <span class="n">form</span><span class="o">,</span> <span class="n">BindingResult</span> <span class="n">result</span><span class="o">,</span> <span class="n">Model</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// omitted</span>

    <span class="k">try</span> <span class="o">{</span>
        <span class="n">userService</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">BusinessException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">ResultMessages</span> <span class="n">messages</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="na">getResultMessages</span><span class="o">();</span> <span class="c1">// (1)</span>
        <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="n">messages</span><span class="o">);</span>

        <span class="k">return</span> <span class="s">&quot;user/createForm&quot;</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// omitted</span>
<span class="o">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Fetch <code class="docutils literal"><span class="pre">ResultMessages</span></code> held by <code class="docutils literal"><span class="pre">BusinessException</span></code> and add to Model.</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
</ul>
<p>Normally, this method should be used to display error message instead of creating
<code class="docutils literal"><span class="pre">ResultMessages</span></code> object in Controller.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
</div>
<div class="section" id="how-to-extend">
<h2><a class="toc-backref" href="#id21">4.6.3. How to extend</a><a class="headerlink" href="#how-to-extend" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="creating-independent-message-types">
<h3><a class="toc-backref" href="#id22">4.6.3.1. Creating independent message types</a><a class="headerlink" href="#creating-independent-message-types" title="Permalink to this headline">Â¶</a></h3>
<div class="line-block">
<div class="line">The method of creating independent message type is given below.</div>
<div class="line">Normally, the available message types are sufficient. However, new message type may need to be added</div>
<div class="line">depending upon the CSS library. See the example below for adding the message type ânoticeâ.</div>
</div>
<p>First, create independent message type class wherein <code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.message.ResultMessageType</span></code> interface is implemented
as follows:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">org.terasoluna.gfw.common.message.ResultMessageType</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">enum</span> <span class="n">ResultMessageTypes</span> <span class="kd">implements</span> <span class="n">ResultMessageType</span> <span class="o">{</span> <span class="c1">// (1)</span>
    <span class="n">NOTICE</span><span class="o">(</span><span class="s">&quot;notice&quot;</span><span class="o">);</span>

    <span class="kd">private</span> <span class="nf">ResultMessageTypes</span><span class="o">(</span><span class="n">String</span> <span class="n">type</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">type</span> <span class="o">=</span> <span class="n">type</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">type</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getType</span><span class="o">()</span> <span class="o">{</span> <span class="c1">// (2)</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">type</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">type</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define Enum wherein <code class="docutils literal"><span class="pre">ResultMessageType</span></code> interface is implemented. A new message type can be created using constant class; however it is recommended to create it using Enum.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Return value of <code class="docutils literal"><span class="pre">getType</span></code> corresponds to class name of CSS which is output.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">Create <code class="docutils literal"><span class="pre">ResultMessages</span></code> using this message type as mentioned below.</div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">ResultMessages</span> <span class="n">messages</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultMessages</span><span class="o">(</span><span class="n">ResultMessageTypes</span><span class="o">.</span><span class="na">NOTICE</span><span class="o">)</span> <span class="c1">// (1)</span>
        <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;w.ex.an.2001&quot;</span><span class="o">);</span>
<span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="n">messages</span><span class="o">);</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify <code class="docutils literal"><span class="pre">ResultMessageType</span></code> in constructor of <code class="docutils literal"><span class="pre">ResultMessages</span></code>.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>In such a case, HTML shown below is output in <code class="docutils literal"><span class="pre">&lt;t:messagesPanel</span> <span class="pre">/&gt;</span></code> .</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;alert alert-notice&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>The recommended change interval has passed password. Please change your password.<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p></p>
<blockquote>
<div><div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">For extension method, refer to <code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.message.StandardResultMessageType</span></code>.</p>
</div>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="appendix">
<h2><a class="toc-backref" href="#id23">4.6.4. Appendix</a><a class="headerlink" href="#appendix" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="changing-attribute-of-t-messagespanel-tag">
<span id="message-management-messagepanel-attribute"></span><h3><a class="toc-backref" href="#id24">4.6.4.1. Changing attribute of &lt;t:messagesPanel&gt; tag</a><a class="headerlink" href="#changing-attribute-of-t-messagespanel-tag" title="Permalink to this headline">Â¶</a></h3>
<p><code class="docutils literal"><span class="pre">&lt;t:messagesPanel&gt;</span></code> tag contains various attributes for changing the display format.</p>
<table border="1" class="colwidths-given docutils" id="id2">
<caption><span class="caption-text"><code class="docutils literal"><span class="pre">&lt;t:messagesPanel&gt;</span></code> Tag attribute list</span><a class="headerlink" href="#id2" title="Permalink to this table">Â¶</a></caption>
<colgroup>
<col width="25%" />
<col width="50%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Contents</th>
<th class="head">Default setting value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>panelElement</td>
<td>Result message display panel elements</td>
<td>div</td>
</tr>
<tr class="row-odd"><td>panelClassName</td>
<td>CSS class name of result message display panel.</td>
<td>alert</td>
</tr>
<tr class="row-even"><td>panelTypeClassPrefix</td>
<td>Prefix of CSS class name</td>
<td>alert-</td>
</tr>
<tr class="row-odd"><td>messagesType</td>
<td>Message type. When this attribute is set, the set message type is given preference over the message type of <code class="docutils literal"><span class="pre">ResultMessages</span></code> object.</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>outerElement</td>
<td>Outer tag of HTML configuring result messages list</td>
<td>ul</td>
</tr>
<tr class="row-odd"><td>innerElement</td>
<td>Inner tag of HTML configuring result messages list</td>
<td>li</td>
</tr>
<tr class="row-even"><td>disableHtmlEscape</td>
<td><div class="first last line-block">
<div class="line">Flag for disabling HTML escaping.</div>
<div class="line">By setting the flag to <code class="docutils literal"><span class="pre">true</span></code>, HTML escaping is no longer performed for the message to be output.</div>
<div class="line">This attribute is used to create different message styles by inserting HTML into the message to be output.</div>
<div class="line"><strong>When the flag is set to true, XSS vulnerable characters should not be included in the message.</strong></div>
<div class="line"><br /></div>
<div class="line">This attribute can be used with terasoluna-gfw-web 1.0.1.RELEASE or higher version.</div>
</div>
</td>
<td><code class="docutils literal"><span class="pre">false</span></code></td>
</tr>
</tbody>
</table>
<p>For example, following CSS is provided in CSS framework â<a class="reference external" href="http://www.bluetrip.org/">BlueTrip</a>â.</p>
<div class="highlight-css"><div class="highlight"><pre><span></span><span class="p">.</span><span class="nc">error</span><span class="o">,</span><span class="p">.</span><span class="nc">notice</span><span class="o">,</span><span class="p">.</span><span class="nc">success</span> <span class="p">{</span>
    <span class="k">padding</span><span class="p">:</span> <span class="mf">.8</span><span class="kt">em</span><span class="p">;</span>
    <span class="k">margin-bottom</span><span class="p">:</span> <span class="mf">1.6</span><span class="kt">em</span><span class="p">;</span>
    <span class="k">border</span><span class="p">:</span> <span class="mi">2</span><span class="kt">px</span> <span class="kc">solid</span> <span class="mh">#ddd</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">error</span> <span class="p">{</span>
    <span class="k">background</span><span class="p">:</span> <span class="mh">#FBE3E4</span><span class="p">;</span>
    <span class="k">color</span><span class="p">:</span> <span class="mh">#8a1f11</span><span class="p">;</span>
    <span class="k">border-color</span><span class="p">:</span> <span class="mh">#FBC2C4</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">notice</span> <span class="p">{</span>
    <span class="k">background</span><span class="p">:</span> <span class="mh">#FFF6BF</span><span class="p">;</span>
    <span class="k">color</span><span class="p">:</span> <span class="mh">#514721</span><span class="p">;</span>
    <span class="k">border-color</span><span class="p">:</span> <span class="mh">#FFD324</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">success</span> <span class="p">{</span>
    <span class="k">background</span><span class="p">:</span> <span class="mh">#E6EFC2</span><span class="p">;</span>
    <span class="k">color</span><span class="p">:</span> <span class="mh">#264409</span><span class="p">;</span>
    <span class="k">border-color</span><span class="p">:</span> <span class="mh">#C6D880</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">To use this CSS, the message <code class="docutils literal"><span class="pre">&lt;div</span> <span class="pre">class=&quot;error&quot;&gt;...&lt;/div&gt;</span></code> should be output.</div>
<div class="line">In this case, <code class="docutils literal"><span class="pre">&lt;t:messagesPanel&gt;</span></code> tag can be used as follows (no need to modify the Controller):</div>
</div>
<div class="highlight-jsp"><div class="highlight"><pre><span></span><span class="nt">&lt;t:messagesPanel</span> <span class="na">panelClassName=</span><span class="s">&quot;&quot;</span> <span class="na">panelTypeClassPrefix=</span><span class="s">&quot;&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p>HTML shown below is output.</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;error&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>There are inconsistencies in the data.<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>It is displayed in browser as follows:</p>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/message-management-bluetrip-error.jpg"><img alt="../../_images/message-management-bluetrip-error.jpg" src="../../_images/message-management-bluetrip-error.jpg" style="width: 80%;" /></a>
</div>
<p>When you do not want to use <code class="docutils literal"><span class="pre">&lt;ul&gt;</span></code> tag to display the message list,
it can be customized using <code class="docutils literal"><span class="pre">outerElement</span></code> attribute and <code class="docutils literal"><span class="pre">innerElement</span></code> attribute.</p>
<p>When the attributes are set as follows:</p>
<div class="highlight-jsp"><div class="highlight"><pre><span></span><span class="nt">&lt;t:messagesPanel</span> <span class="na">outerElement=</span><span class="s">&quot;&quot;</span> <span class="na">innerElement=</span><span class="s">&quot;span&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p>HTML shown below is output.</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;alert alert-error&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>There are inconsistencies in the data.<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>Cannot upload, Because the file size must be less than 1,024MB.<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Set the CSS as follows:</p>
<div class="highlight-css"><div class="highlight"><pre><span></span><span class="p">.</span><span class="nc">alert</span> <span class="o">&gt;</span> <span class="nt">span</span> <span class="p">{</span>
    <span class="k">display</span><span class="p">:</span> <span class="kc">block</span><span class="p">;</span> <span class="c">/* (1) */</span>
<span class="p">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Set <code class="docutils literal"><span class="pre">&lt;span&gt;</span></code> tag which is a child element of âalertâ class to Block-level element.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>It is displayed in browser as follows:</p>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/message-management-messagespanel-span.jpg"><img alt="../../_images/message-management-messagespanel-span.jpg" src="../../_images/message-management-messagespanel-span.jpg" style="width: 60%;" /></a>
</div>
<div class="line-block">
<div class="line">When disableHtmlEscape attribute is set to <code class="docutils literal"><span class="pre">true</span></code>, the output will be as follows:</div>
<div class="line">In the example below, font of a part of the message has been set to 16px Red.</div>
</div>
<ul class="simple">
<li>jsp</li>
</ul>
<blockquote>
<div><div class="highlight-jsp"><div class="highlight"><pre><span></span><span class="nt">&lt;spring:message</span> <span class="na">var=</span><span class="s">&quot;informationMessage&quot;</span> <span class="na">code=</span><span class="s">&quot;i.ex.od.0001&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;t:messagesPanel</span> <span class="na">messagesAttributeName=</span><span class="s">&quot;informationMessage&quot;</span>
    <span class="na">messagesType=</span><span class="s">&quot;alert alert-info&quot;</span>
<span class="hll">    <span class="na">disableHtmlEscape=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
</span></pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li>properties</li>
</ul>
<blockquote>
<div><div class="highlight-properties"><div class="highlight"><pre><span></span><span class="na">i.ex.od.0001</span> <span class="o">=</span> <span class="s">Please confirm order content. &lt;font style=&quot;color: red; font-size: 16px;&quot;&gt;If this orders submitted, cannot cancel.&lt;/font&gt;</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li>Output image</li>
</ul>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../../_images/message-management-disableHtmlEscape-true.png"><img alt="../../_images/message-management-disableHtmlEscape-true.png" src="../../_images/message-management-disableHtmlEscape-true.png" style="width: 100%;" /></a>
</div>
<p>When disableHtmlEscape attribute is <code class="docutils literal"><span class="pre">false</span></code>(default), the output will be as follows after HTML escaping.</p>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/message-management-disableHtmlEscape-false.png"><img alt="../../_images/message-management-disableHtmlEscape-false.png" src="../../_images/message-management-disableHtmlEscape-false.png" style="width: 100%;" /></a>
</div>
</div></blockquote>
</div>
<div class="section" id="display-of-result-message-wherein-resultmessages-is-not-used">
<h3><a class="toc-backref" href="#id25">4.6.4.2. Display of result message wherein ResultMessages is not used</a><a class="headerlink" href="#display-of-result-message-wherein-resultmessages-is-not-used" title="Permalink to this headline">Â¶</a></h3>
<p>Apart from <code class="docutils literal"><span class="pre">ResultMessages</span></code> object, <code class="docutils literal"><span class="pre">&lt;t:messagesPanel&gt;</span></code> tag can also output the following objects.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">java.lang.String</span></code></li>
<li><code class="docutils literal"><span class="pre">java.lang.Exception</span></code></li>
<li><code class="docutils literal"><span class="pre">java.util.List</span></code></li>
</ul>
<div class="line-block">
<div class="line">Normally <code class="docutils literal"><span class="pre">&lt;t:messagesPanel&gt;</span></code> tag is used to output the <code class="docutils literal"><span class="pre">ResultMessages</span></code> object; however</div>
<div class="line">it can also be used to display strings (error messages) set in the request scope by the framework.</div>
</div>
<div class="line-block">
<div class="line">For example, at the time of authentication error, Spring Security sets the exception class with attribute name âSPRING_SECURITY_LAST_EXCEPTIONâ</div>
<div class="line">in the request scope.</div>
</div>
<div class="line-block">
<div class="line">Perform the following settings if you want to output this exception message in <code class="docutils literal"><span class="pre">&lt;t:messagesPanel&gt;</span></code> tag similar to the result messages.</div>
</div>
<div class="highlight-jsp"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE HTML&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;title&gt;</span>Login<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;style</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span><span class="nt">&gt;</span>
/* (1) */
.alert {
    margin-bottom: 15px;
    padding: 10px;
    border: 1px solid;
    border-radius: 4px;
    text-shadow: 0 1px 0 #ffffff;
}

.alert-error {
    background: #fff1f0;
    color: #d85030;
    border-color: rgba(216, 80, 48, 0.3);
}
<span class="nt">&lt;/style&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;c:if</span> <span class="na">test=</span><span class="s">&quot;${param.containsKey(&#39;error&#39;)}&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;t:messagesPanel</span> <span class="na">messagesType=</span><span class="s">&quot;error&quot;</span>
            <span class="na">messagesAttributeName=</span><span class="s">&quot;SPRING_SECURITY_LAST_EXCEPTION&quot;</span> <span class="nt">/&gt;</span><span class="c">&lt;!-- (2) --&gt;</span>
    <span class="nt">&lt;/c:if&gt;</span>
    <span class="nt">&lt;form:form</span>
        <span class="na">action=</span><span class="s">&quot;${pageContext.request.contextPath}/authentication&quot;</span>
        <span class="na">method=</span><span class="s">&quot;post&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;fieldset&gt;</span>
            <span class="nt">&lt;legend&gt;</span>Login Form<span class="nt">&lt;/legend&gt;</span>
            <span class="nt">&lt;div&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;username&quot;</span><span class="nt">&gt;</span>Username: <span class="nt">&lt;/label&gt;&lt;input</span>
                    <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;username&quot;</span> <span class="na">name=</span><span class="s">&quot;username&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;username&quot;</span><span class="nt">&gt;</span>Password:<span class="nt">&lt;/label&gt;&lt;input</span>
                    <span class="na">type=</span><span class="s">&quot;password&quot;</span> <span class="na">id=</span><span class="s">&quot;password&quot;</span> <span class="na">name=</span><span class="s">&quot;password&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div&gt;</span>
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">value=</span><span class="s">&quot;Login&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/fieldset&gt;</span>
    <span class="nt">&lt;/form:form&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Re-define the CSS. It is strongly recommended to mention it in CSS file.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">In <code class="docutils literal"><span class="pre">messagesAttributeName</span></code> attribute, specify the attribute name wherein <code class="docutils literal"><span class="pre">Exception</span></code>  object is stored.</div>
<div class="line">Unlike the <code class="docutils literal"><span class="pre">ResultMessages</span></code> object, it does not contain the information of message type; hence</div>
<div class="line">it is necessary to explicitly specify the message type in <code class="docutils literal"><span class="pre">messagesType</span></code> attribute.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>The HTML output in case of an authentication error will be,</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;alert alert-error&quot;</span><span class="p">&gt;&lt;</span><span class="nt">ul</span><span class="p">&gt;&lt;</span><span class="nt">li</span><span class="p">&gt;</span>Bad credentials<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;&lt;/</span><span class="nt">ul</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>and it will be displayed in the browser as follows:</p>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/message-management-login-error.jpg"><img alt="../../_images/message-management-login-error.jpg" src="../../_images/message-management-login-error.jpg" style="width: 60%;" /></a>
</div>
<p></p>
<blockquote>
<div><div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">For details on JSP for login, refer to <a class="reference internal" href="../../Security/Authentication.html"><span class="doc">Authentication</span></a>.</p>
</div>
</div></blockquote>
</div>
<div class="section" id="auto-generation-tool-of-message-key-constant-class">
<span id="message-management-messagekeysgen"></span><h3><a class="toc-backref" href="#id26">4.6.4.3. Auto-generation tool of message key constant class</a><a class="headerlink" href="#auto-generation-tool-of-message-key-constant-class" title="Permalink to this headline">Â¶</a></h3>
<p>In all earlier examples, message keys were hard-coded strings; however
it is recommended that you define the message keys in constant class.</p>
<p>This section introduces the program that auto-generates message key constant class from properties file
and the corresponding usage method. You can customize and use them based on the requirements.</p>
<ol class="arabic">
<li><p class="first">Creation of message key constant class</p>
<blockquote>
<div><p>First, create an empty message key constant class. Here, it is <code class="docutils literal"><span class="pre">com.example.common.message.MessageKeys</span></code>.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.example.common.message</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MessageKeys</span> <span class="o">{</span>

<span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Creation of auto-generation class</p>
<blockquote>
<div><p>Next, create <code class="docutils literal"><span class="pre">MessageKeysGen</span></code> class in the same package as <code class="docutils literal"><span class="pre">MessageKeys</span></code> class and write the logic as follows:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.example.common.message</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.FileInputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.PrintWriter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.regex.Pattern</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.apache.commons.io.FileUtils</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.commons.io.IOUtils</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MessageKeysGen</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="c1">// message properties file</span>
        <span class="n">InputStream</span> <span class="n">inputStream</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="s">&quot;src/main/resources/i18n/application-messages.properties&quot;</span><span class="o">);</span>
        <span class="n">BufferedReader</span> <span class="n">br</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">inputStream</span><span class="o">));</span>
        <span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">targetClazz</span> <span class="o">=</span> <span class="n">MessageKeys</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
        <span class="n">File</span> <span class="n">output</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&quot;src/main/java/&quot;</span>
                <span class="o">+</span> <span class="n">targetClazz</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">replaceAll</span><span class="o">(</span><span class="n">Pattern</span><span class="o">.</span><span class="na">quote</span><span class="o">(</span><span class="s">&quot;.&quot;</span><span class="o">),</span> <span class="s">&quot;/&quot;</span><span class="o">)</span>
                <span class="o">+</span> <span class="s">&quot;.java&quot;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;write &quot;</span> <span class="o">+</span> <span class="n">output</span><span class="o">.</span><span class="na">getAbsolutePath</span><span class="o">());</span>
        <span class="n">PrintWriter</span> <span class="n">pw</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PrintWriter</span><span class="o">(</span><span class="n">FileUtils</span><span class="o">.</span><span class="na">openOutputStream</span><span class="o">(</span><span class="n">output</span><span class="o">));</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="n">pw</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;package &quot;</span> <span class="o">+</span> <span class="n">targetClazz</span><span class="o">.</span><span class="na">getPackage</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot;;&quot;</span><span class="o">);</span>
            <span class="n">pw</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;/**&quot;</span><span class="o">);</span>
            <span class="n">pw</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot; * Message Id&quot;</span><span class="o">);</span>
            <span class="n">pw</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot; */&quot;</span><span class="o">);</span>
            <span class="n">pw</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;public class &quot;</span> <span class="o">+</span> <span class="n">targetClazz</span><span class="o">.</span><span class="na">getSimpleName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot; {&quot;</span><span class="o">);</span>

            <span class="n">String</span> <span class="n">line</span><span class="o">;</span>
            <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">String</span><span class="o">[]</span> <span class="n">vals</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&quot;=&quot;</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">vals</span><span class="o">.</span><span class="na">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">String</span> <span class="n">key</span> <span class="o">=</span> <span class="n">vals</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="na">trim</span><span class="o">();</span>
                    <span class="n">String</span> <span class="n">value</span> <span class="o">=</span> <span class="n">vals</span><span class="o">[</span><span class="mi">1</span><span class="o">].</span><span class="na">trim</span><span class="o">();</span>
                    <span class="n">pw</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;    /** &quot;</span> <span class="o">+</span> <span class="n">key</span> <span class="o">+</span> <span class="s">&quot;=&quot;</span> <span class="o">+</span> <span class="n">value</span> <span class="o">+</span> <span class="s">&quot; */&quot;</span><span class="o">);</span>
                    <span class="n">pw</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;    public static final String &quot;</span>
                            <span class="o">+</span> <span class="n">key</span><span class="o">.</span><span class="na">toUpperCase</span><span class="o">().</span><span class="na">replaceAll</span><span class="o">(</span><span class="n">Pattern</span><span class="o">.</span><span class="na">quote</span><span class="o">(</span><span class="s">&quot;.&quot;</span><span class="o">),</span>
                                    <span class="s">&quot;_&quot;</span><span class="o">).</span><span class="na">replaceAll</span><span class="o">(</span><span class="n">Pattern</span><span class="o">.</span><span class="na">quote</span><span class="o">(</span><span class="s">&quot;-&quot;</span><span class="o">),</span> <span class="s">&quot;_&quot;</span><span class="o">)</span>
                            <span class="o">+</span> <span class="s">&quot; = \&quot;&quot;</span> <span class="o">+</span> <span class="n">key</span> <span class="o">+</span> <span class="s">&quot;\&quot;;&quot;</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="n">pw</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;}&quot;</span><span class="o">);</span>
            <span class="n">pw</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
            <span class="n">IOUtils</span><span class="o">.</span><span class="na">closeQuietly</span><span class="o">(</span><span class="n">br</span><span class="o">);</span>
            <span class="n">IOUtils</span><span class="o">.</span><span class="na">closeQuietly</span><span class="o">(</span><span class="n">pw</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Provision of message properties file</p>
<blockquote>
<div><p>Define the messages in src/main/resource/i18m/application-messages.properties. The settings are carried out as follows:</p>
<div class="highlight-properties"><div class="highlight"><pre><span></span><span class="na">i.ex.an.0001</span><span class="o">=</span><span class="s">{0} upload completed.</span>
<span class="na">w.ex.an.2001</span><span class="o">=</span><span class="s">The recommended change interval has passed password. Please change your password.</span>
<span class="na">e.ex.an.8001</span><span class="o">=</span><span class="s">Cannot upload, Because the file size must be less than {0}MB.</span>
<span class="na">e.ex.an.9001</span><span class="o">=</span><span class="s">There are inconsistencies in the data.</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Execution of auto-generation class</p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../../_images/message-management-messagekeysgen.png"><img alt="../../_images/message-management-messagekeysgen.png" src="../../_images/message-management-messagekeysgen.png" style="width: 60%;" /></a>
</div>
<p><code class="docutils literal"><span class="pre">MessageKeys</span></code> class is overwritten as follows:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.example.common.message</span><span class="o">;</span>
<span class="cm">/**</span>
<span class="cm"> * Message Id</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MessageKeys</span> <span class="o">{</span>
    <span class="cm">/** i.ex.an.0001={0} upload completed. */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">I_EX_AN_0001</span> <span class="o">=</span> <span class="s">&quot;i.ex.an.0001&quot;</span><span class="o">;</span>
    <span class="cm">/** w.ex.an.2001=The recommended change interval has passed password. Please change your password. */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">W_EX_AN_2001</span> <span class="o">=</span> <span class="s">&quot;w.ex.an.2001&quot;</span><span class="o">;</span>
    <span class="cm">/** e.ex.an.8001=Cannot upload, Because the file size must be less than {0}MB. */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">E_EX_AN_8001</span> <span class="o">=</span> <span class="s">&quot;e.ex.an.8001&quot;</span><span class="o">;</span>
    <span class="cm">/** e.ex.an.9001=There are inconsistencies in the data. */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">E_EX_AN_9001</span> <span class="o">=</span> <span class="s">&quot;e.ex.an.9001&quot;</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<p></p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="Internationalization.html" title="4.7. Internationalization"
             >next</a> |</li>
        <li class="right" >
          <a href="DoubleSubmitProtection.html" title="4.5. Double Submit Protection"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.4.1.RELEASE documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >4. Web Application Development Features</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer">
      Â© Copyright 2013-2018, NTT DATA Corporation. Â© Copyright 2013-2018, NTT Corporation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.6.3.Theme is <a href="http://github.com/vimalkvn/solar-theme">Solar</a>
    </div>
    
    <script>
    
    $(function() {
    	var $sidebar	= $('.sphinxsidebar'),
    		$window		= $(window),
    		offset		= $sidebar.offset(),
    		topPadding	= 3,
    		$scroll		= $('#scroll');
    	
    	$window.scroll(function() {
    		if ($scroll.is(':checked')) {
				if ($window.scrollTop() > offset.top) {
					$sidebar.stop().animate({
						marginTop:$window.scrollTop() - offset.top + topPadding
					});
				} else {
					$sidebar.stop().animate({
						marginTop:0
					});
				}
			}
		});
    	
    	var $navList = $('ul:first', $sidebar);
    	$('li:first', $navList).addClass('open');
    	
    	$navList.treeview({
    		persist: "location",
    		collapsed: true,
    		unique: false
    	});
    	
	});
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-46550814-1', 'terasolunaorg.github.io');
    ga('send', 'pageview');
    </script>
  </body>
</html>