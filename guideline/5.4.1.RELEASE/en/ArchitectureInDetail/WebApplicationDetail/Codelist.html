<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>4.8. Codelist &#8212; TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.4.1.RELEASE documentation</title>
    <link rel="stylesheet" href="../../_static/solar.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '5.4.1.RELEASE',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="4.9. File Upload" href="FileUpload.html" />
    <link rel="prev" title="4.7. Internationalization" href="Internationalization.html" /><script src="../../_static/jquery.treeview.js" type="text/javascript"></script>
<!-- <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro|Open+Sans:300italic,400italic,700italic,400,300,700' rel='stylesheet' type='text/css'> -->
<link href="../../_static/solarized-dark.css" rel="stylesheet">
<link href="../../_static/jquery.treeview.css" rel="stylesheet">
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="FileUpload.html" title="4.9. File Upload"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Internationalization.html" title="4.7. Internationalization"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.4.1.RELEASE documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">4. Web Application Development Features</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><label><input id="scroll" type="checkbox" checked> scroll sidebar</label>

  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">4.8. Codelist</a><ul>
<li><a class="reference internal" href="#overview">4.8.1. Overview</a></li>
<li><a class="reference internal" href="#how-to-use">4.8.2. How to use</a><ul>
<li><a class="reference internal" href="#using-simplemapcodelist">4.8.2.1. Using SimpleMapCodeList</a><ul>
<li><a class="reference internal" href="#example-of-codelist-settings">4.8.2.1.1. Example of codelist settings</a></li>
<li><a class="reference internal" href="#using-codelist-in-jsp">4.8.2.1.2. Using codelist in JSP</a></li>
<li><a class="reference internal" href="#using-codelist-in-java-class">4.8.2.1.3. Using codelist in Java class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-numberrangecodelist">4.8.2.2. Using NumberRangeCodeList</a><ul>
<li><a class="reference internal" href="#id1">4.8.2.2.1. Example of codelist settings</a></li>
<li><a class="reference internal" href="#id2">4.8.2.2.2. Using codelist in JSP</a></li>
<li><a class="reference internal" href="#id3">4.8.2.2.3. Using codelist in Java class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-jdbccodelist">4.8.2.3. Using JdbcCodeList</a><ul>
<li><a class="reference internal" href="#id4">4.8.2.3.1. Example of codelist settings</a></li>
<li><a class="reference internal" href="#id5">4.8.2.3.2. Using codelist in JSP</a></li>
<li><a class="reference internal" href="#id6">4.8.2.3.3. Using codelist in Java class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-use-enumcodelist">4.8.2.4. How to use EnumCodeList</a><ul>
<li><a class="reference internal" href="#id7">4.8.2.4.1. Example of codelist settings</a></li>
<li><a class="reference internal" href="#id8">4.8.2.4.2. Using codelist in JSP</a></li>
<li><a class="reference internal" href="#id9">4.8.2.4.3. Using codelist in Java class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-use-simplei18ncodelist">4.8.2.5. How to use SimpleI18nCodeList</a><ul>
<li><a class="reference internal" href="#id10">4.8.2.5.1. Example of codelist settings</a></li>
<li><a class="reference internal" href="#id11">4.8.2.5.2. Using codelist in JSP</a></li>
<li><a class="reference internal" href="#id12">4.8.2.5.3. Using codelist in Java class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#display-code-name-corresponding-to-code-value">4.8.2.6. Display code name corresponding to code value</a></li>
<li><a class="reference internal" href="#input-validation-of-code-value-using-codelist">4.8.2.7. Input validation of code value using codelist</a><ul>
<li><a class="reference internal" href="#example-of-existincodelist-settings">4.8.2.7.1. Example of &#64;ExistInCodeList settings</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-extend">4.8.3. How to extend</a><ul>
<li><a class="reference internal" href="#when-reloading-the-codelist">4.8.3.1. When reloading the codelist</a><ul>
<li><a class="reference internal" href="#using-task-scheduler">4.8.3.1.1. Using Task Scheduler</a></li>
<li><a class="reference internal" href="#calling-refresh-method-in-controller-service-class">4.8.3.1.2. Calling refresh method in Controller (Service) class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#customizing-the-codelist-independently">4.8.3.2. Customizing the codelist independently</a></li>
</ul>
</li>
<li><a class="reference internal" href="#appendix">4.8.4. Appendix</a><ul>
<li><a class="reference internal" href="#setting-simplei18ncodelist">4.8.4.1. Setting SimpleI18nCodeList</a><ul>
<li><a class="reference internal" href="#set-java-util-map-key-code-value-value-label-for-each-locale-by-rows">4.8.4.1.1. Set <code class="docutils literal"><span class="pre">java.util.Map</span></code> (key = code value, value = label) for each locale by rows</a></li>
<li><a class="reference internal" href="#set-java-util-map-key-locale-value-label-for-each-code-value-by-columns">4.8.4.1.2. Set <code class="docutils literal"><span class="pre">java.util.Map</span></code>(key = locale, value = label) for each code value by columns</a></li>
</ul>
</li>
<li><a class="reference internal" href="#variations-of-numberrangecodelist">4.8.4.2. Variations of NumberRangeCodeList</a><ul>
<li><a class="reference internal" href="#create-the-descending-numberrangecodelist">4.8.4.2.1. Create the Descending NumberRangeCodeList</a></li>
<li><a class="reference internal" href="#change-interval-of-numberrangecodelist">4.8.4.2.2. Change interval of NumberRangeCodeList</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


  <h4>Previous topic</h4>
  <p class="topless"><a href="Internationalization.html"
                        title="previous chapter">4.7. Internationalization</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="FileUpload.html"
                        title="next chapter">4.9. File Upload</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/ArchitectureInDetail/WebApplicationDetail/Codelist.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="codelist">
<h1>4.8. Codelist<a class="headerlink" href="#codelist" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#overview" id="id15">Overview</a></li>
<li><a class="reference internal" href="#how-to-use" id="id16">How to use</a><ul>
<li><a class="reference internal" href="#using-simplemapcodelist" id="id17">Using SimpleMapCodeList</a><ul>
<li><a class="reference internal" href="#example-of-codelist-settings" id="id18">Example of codelist settings</a></li>
<li><a class="reference internal" href="#using-codelist-in-jsp" id="id19">Using codelist in JSP</a></li>
<li><a class="reference internal" href="#using-codelist-in-java-class" id="id20">Using codelist in Java class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-numberrangecodelist" id="id21">Using NumberRangeCodeList</a><ul>
<li><a class="reference internal" href="#id1" id="id22">Example of codelist settings</a></li>
<li><a class="reference internal" href="#id2" id="id23">Using codelist in JSP</a></li>
<li><a class="reference internal" href="#id3" id="id24">Using codelist in Java class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-jdbccodelist" id="id25">Using JdbcCodeList</a><ul>
<li><a class="reference internal" href="#id4" id="id26">Example of codelist settings</a></li>
<li><a class="reference internal" href="#id5" id="id27">Using codelist in JSP</a></li>
<li><a class="reference internal" href="#id6" id="id28">Using codelist in Java class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-use-enumcodelist" id="id29">How to use EnumCodeList</a><ul>
<li><a class="reference internal" href="#id7" id="id30">Example of codelist settings</a></li>
<li><a class="reference internal" href="#id8" id="id31">Using codelist in JSP</a></li>
<li><a class="reference internal" href="#id9" id="id32">Using codelist in Java class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-use-simplei18ncodelist" id="id33">How to use SimpleI18nCodeList</a><ul>
<li><a class="reference internal" href="#id10" id="id34">Example of codelist settings</a></li>
<li><a class="reference internal" href="#id11" id="id35">Using codelist in JSP</a></li>
<li><a class="reference internal" href="#id12" id="id36">Using codelist in Java class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#display-code-name-corresponding-to-code-value" id="id37">Display code name corresponding to code value</a></li>
<li><a class="reference internal" href="#input-validation-of-code-value-using-codelist" id="id38">Input validation of code value using codelist</a><ul>
<li><a class="reference internal" href="#example-of-existincodelist-settings" id="id39">Example of &#64;ExistInCodeList settings</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-extend" id="id40">How to extend</a><ul>
<li><a class="reference internal" href="#when-reloading-the-codelist" id="id41">When reloading the codelist</a><ul>
<li><a class="reference internal" href="#using-task-scheduler" id="id42">Using Task Scheduler</a></li>
<li><a class="reference internal" href="#calling-refresh-method-in-controller-service-class" id="id43">Calling refresh method in Controller (Service) class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#customizing-the-codelist-independently" id="id44">Customizing the codelist independently</a></li>
</ul>
</li>
<li><a class="reference internal" href="#appendix" id="id45">Appendix</a><ul>
<li><a class="reference internal" href="#setting-simplei18ncodelist" id="id46">Setting SimpleI18nCodeList</a><ul>
<li><a class="reference internal" href="#set-java-util-map-key-code-value-value-label-for-each-locale-by-rows" id="id47">Set <code class="docutils literal"><span class="pre">java.util.Map</span></code> (key = code value, value = label) for each locale by rows</a></li>
<li><a class="reference internal" href="#set-java-util-map-key-locale-value-label-for-each-code-value-by-columns" id="id48">Set <code class="docutils literal"><span class="pre">java.util.Map</span></code>(key = locale, value = label) for each code value by columns</a></li>
</ul>
</li>
<li><a class="reference internal" href="#variations-of-numberrangecodelist" id="id49">Variations of NumberRangeCodeList</a><ul>
<li><a class="reference internal" href="#create-the-descending-numberrangecodelist" id="id50">Create the Descending NumberRangeCodeList</a></li>
<li><a class="reference internal" href="#change-interval-of-numberrangecodelist" id="id51">Change interval of NumberRangeCodeList</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#id15">4.8.1. Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>A codelist is a pair comprising of “Code values (Value) and their display names (Label)”.</p>
<p>It is used for mapping code values with the labels to be displayed on screen such as selectbox.</p>
<p>Common library provides the following functionalities:</p>
<ul class="simple">
<li>Functionality to read and cache the codelist defined in xml file or DB at the time of launching the application.</li>
<li>Functionality to refer to the codelist from JSP or Java class</li>
<li>Functionality to perform input validation using codelist</li>
</ul>
<p>Moreover, it also supports</p>
<ul class="simple">
<li>internationalization of codelist</li>
<li>reloading of cached codelist</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As per standard specifications, only the codelist defined in DB is reloadable.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Following four types of codelists are implemented in common library.</p>
<table border="1" class="colwidths-given docutils" id="id13">
<caption><span class="caption-text"><strong>Types of codelist</strong></span><a class="headerlink" href="#id13" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="50%" />
<col width="30%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Types</th>
<th class="head">Contents</th>
<th class="head">Reloadable</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.SimpleMapCodeList</span></code></td>
<td>Use the hard-coded contents from xml file.</td>
<td>NO</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.NumberRangeCodeList</span></code></td>
<td>Use when creating number range list.</td>
<td>NO</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.JdbcCodeList</span></code></td>
<td>Use the codelist by fetching the code from DB using SQL.</td>
<td>YES</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.EnumCodeList</span></code></td>
<td>Use when creating the codelist from constant defined in <code class="docutils literal"><span class="pre">Enum</span></code> class.</td>
<td>NO</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.i18n.SimpleI18nCodeList</span></code></td>
<td>Use the codelist corresponding to java.util.Locale.</td>
<td>NO</td>
</tr>
</tbody>
</table>
<p>Common library provides <code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.CodeList</span></code> for the interface of above codelists.</p>
<p>Codelist class diagram provided in common library is as follows:</p>
<div class="figure align-center" id="id14">
<img alt="codelist class diagram" src="../../_images/codelist-class-diagram.png" />
<p class="caption"><span class="caption-text"><strong>Picture - Image of codelist class diagram</strong></span></p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="how-to-use">
<h2><a class="toc-backref" href="#id16">4.8.2. How to use</a><a class="headerlink" href="#how-to-use" title="Permalink to this headline">¶</a></h2>
<p>This section describes settings for various codelists and their implementation methods.</p>
<ul class="simple">
<li><a class="reference internal" href="#codelist-simple"><span class="std std-ref">Using SimpleMapCodeList</span></a></li>
<li><a class="reference internal" href="#codelist-number"><span class="std std-ref">Using NumberRangeCodeList</span></a></li>
<li><a class="reference internal" href="#codelist-jdbc"><span class="std std-ref">Using JdbcCodeList</span></a></li>
<li><a class="reference internal" href="#codelist-enum"><span class="std std-ref">How to use EnumCodeList</span></a></li>
<li><a class="reference internal" href="#codelisti18n"><span class="std std-ref">How to use SimpleI18nCodeList</span></a></li>
<li><a class="reference internal" href="#codelist-display-label"><span class="std std-ref">Display code name corresponding to code value</span></a></li>
<li><a class="reference internal" href="#codelist-validate"><span class="std std-ref">Input validation of code value using codelist</span></a></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="using-simplemapcodelist">
<span id="codelist-simple"></span><h3><a class="toc-backref" href="#id17">4.8.2.1. Using SimpleMapCodeList</a><a class="headerlink" href="#using-simplemapcodelist" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.SimpleMapCodeList</span></code> reads the code values defined in xml file at the time of launching the application and uses them as is.</p>
<p><strong>SimpleMapCodeList image</strong></p>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/codelist-simple.png"><img alt="codelist simple" src="../../_images/codelist-simple.png" style="width: 100%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="example-of-codelist-settings">
<h4><a class="toc-backref" href="#id18">4.8.2.1.1. Example of codelist settings</a><a class="headerlink" href="#example-of-codelist-settings" title="Permalink to this headline">¶</a></h4>
<p><strong>Definition of Bean definition file(xxx-codelist.xml)</strong></p>
<p>It is recommended to create a bean definition file for codelist.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="hll"> <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_ORDERSTATUS&quot;</span> <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.SimpleMapCodeList&quot;</span><span class="nt">&gt;</span> <span class="c">&lt;!-- (1) --&gt;</span>
</span>     <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;map&quot;</span><span class="nt">&gt;</span>
         <span class="nt">&lt;util:map&gt;</span>
<span class="hll">             <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;1&quot;</span> <span class="na">value=</span><span class="s">&quot;Received&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (2) --&gt;</span>
</span>             <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;2&quot;</span> <span class="na">value=</span><span class="s">&quot;Sent&quot;</span> <span class="nt">/&gt;</span>
             <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;3&quot;</span> <span class="na">value=</span><span class="s">&quot;Cancelled&quot;</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;/util:map&gt;</span>
     <span class="nt">&lt;/property&gt;</span>
 <span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define a bean of SimpleMapCodeList class.</div>
<div class="line">beanID should have the name matching with the ID pattern of <code class="docutils literal"><span class="pre">org.terasoluna.gfw.web.codelist.CodeListInterceptor</span></code> described later.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define Key, Value pairs of Map.</div>
<div class="line">When map-class attribute is omitted, it is registered in <code class="docutils literal"><span class="pre">java.util.LinkedHashMap</span></code>; hence in the above example, “Name and value” are stored in Map in the order of registration.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Definition of Bean definition file(xxx-domain.xml)</strong></p>
<p>Once the bean definition file for codelist is created, it should be imported to already existing bean definition file.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="hll"> <span class="nt">&lt;import</span> <span class="na">resource=</span><span class="s">&quot;classpath:META-INF/spring/projectName-codelist.xml&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (3) --&gt;</span>
</span> <span class="nt">&lt;context:component-scan</span> <span class="na">base-package=</span><span class="s">&quot;com.example.domain&quot;</span> <span class="nt">/&gt;</span>

<span class="hll"> <span class="c">&lt;!-- omitted --&gt;</span>
</span></pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Import bean definition file for codelist.</div>
<div class="line">Resource information of import is necessary during component-scan;</div>
<div class="line">hence import should be set above <code class="docutils literal"><span class="pre">&lt;context:component-scan</span> <span class="pre">base-package=&quot;com.example.domain&quot;</span> <span class="pre">/&gt;</span></code>.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="using-codelist-in-jsp">
<span id="clientside"></span><h4><a class="toc-backref" href="#id19">4.8.2.1.2. Using codelist in JSP</a><a class="headerlink" href="#using-codelist-in-jsp" title="Permalink to this headline">¶</a></h4>
<p>By using the interceptor of common library,
codelist can be set automatically in request scope and can be easily referred from JSP.</p>
<p><strong>Definition of Bean definition file(spring-mvc.xml)</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span></span> <span class="nt">&lt;mvc:interceptors&gt;</span>
   <span class="nt">&lt;mvc:interceptor&gt;</span>
<span class="hll">     <span class="nt">&lt;mvc:mapping</span> <span class="na">path=</span><span class="s">&quot;/**&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (1) --&gt;</span>
</span>     <span class="nt">&lt;bean</span>
<span class="hll">       <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.web.codelist.CodeListInterceptor&quot;</span><span class="nt">&gt;</span> <span class="c">&lt;!-- (2) --&gt;</span>
</span><span class="hll">       <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;codeListIdPattern&quot;</span> <span class="na">value=</span><span class="s">&quot;CL_.+&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (3) --&gt;</span>
</span>     <span class="nt">&lt;/bean&gt;</span>
   <span class="nt">&lt;/mvc:interceptor&gt;</span>

   <span class="c">&lt;!-- omitted --&gt;</span>

 <span class="nt">&lt;/mvc:interceptors&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Set the applicable path.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define a bean of CodeListInterceptor class.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Set the beanID pattern of codelist which is automatically set in the request scope.</div>
<div class="line">In pattern, regular expression used in <code class="docutils literal"><span class="pre">java.util.regex.Pattern</span></code> should be set.</div>
<div class="line">In the above example, only the data in which id is defined in “CL_XXX” format is targeted. In that case, bean definition wherein id does not start with “CL_” should not be imported.</div>
<div class="line">beanID defined in “CL_” can be used in JSP since it is set in the request scope.</div>
<div class="line"><br /></div>
<div class="line"><code class="docutils literal"><span class="pre">codeListIdPattern</span></code> property can be omitted.</div>
<div class="line">If omitting <code class="docutils literal"><span class="pre">codeListIdPattern</span></code> property, all of <code class="docutils literal"><span class="pre">CodeList</span></code>s (all beans which implements <code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.CodeList</span></code>) are available in JSP.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Example of implementing the codelist in jsp</strong></p>
<div class="highlight-jsp"><div class="highlight"><pre><span></span><span class="nt">&lt;form:select</span> <span class="na">path=</span><span class="s">&quot;orderStatus&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;form:option</span> <span class="na">value=</span><span class="s">&quot;&quot;</span> <span class="na">label=</span><span class="s">&quot;--Select--&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (4) --&gt;</span>
  <span class="nt">&lt;form:options</span> <span class="na">items=</span><span class="s">&quot;${CL_ORDERSTATUS}&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (5) --&gt;</span>
<span class="nt">&lt;/form:select&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">When setting dummy value at the top of the selectbox, null characters should be specified in the value.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify the beanID for which codelist is defined.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p><strong>Output HTML</strong></p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">select</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;orderStatus&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;orderStatus&quot;</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">&gt;</span>&quot;--Select--<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;1&quot;</span><span class="p">&gt;</span>Received<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2&quot;</span><span class="p">&gt;</span>Sent<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;3&quot;</span><span class="p">&gt;</span>Cancelled<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
</pre></div>
</div>
<p><strong>Output screen</strong></p>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/codelist_selectbox.png"><img alt="codelist selectbox" src="../../_images/codelist_selectbox.png" style="width: 40%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="using-codelist-in-java-class">
<span id="serverside"></span><h4><a class="toc-backref" href="#id20">4.8.2.1.3. Using codelist in Java class</a><a class="headerlink" href="#using-codelist-in-java-class" title="Permalink to this headline">¶</a></h4>
<p>When using the codelist in Java class,
inject the codelist by setting <code class="docutils literal"><span class="pre">javax.inject.Inject</span></code> annotation and <code class="docutils literal"><span class="pre">javax.inject.Named</span></code> annotation.
Specify the codelist name in <code class="docutils literal"><span class="pre">&#64;Named</span></code> annotation.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">javax.inject.Named</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.terasoluna.gfw.common.codelist.CodeList</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrderServiceImpl</span> <span class="kd">implements</span> <span class="n">OrderService</span> <span class="o">{</span>

    <span class="nd">@Inject</span>
    <span class="nd">@Named</span><span class="o">(</span><span class="s">&quot;CL_ORDERSTATUS&quot;</span><span class="o">)</span>
    <span class="n">CodeList</span> <span class="n">orderStatusCodeList</span><span class="o">;</span> <span class="c1">// (1)</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">existOrderStatus</span><span class="o">(</span><span class="n">String</span> <span class="n">target</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">orderStatusCodeList</span><span class="o">.</span><span class="na">asMap</span><span class="o">().</span><span class="na">containsKey</span><span class="o">(</span><span class="n">target</span><span class="o">);</span> <span class="c1">// (2)</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Inject the codelist with beanID “CL_ORDERSTATUS”.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Fetch the codelist in <code class="docutils literal"><span class="pre">java.util.Map</span></code> format using CodeList#asMap method.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="using-numberrangecodelist">
<span id="codelist-number"></span><h3><a class="toc-backref" href="#id21">4.8.2.2. Using NumberRangeCodeList</a><a class="headerlink" href="#using-numberrangecodelist" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.NumberRangeCodeList</span></code> is a codelist that creates the list of numeric values of specified range at the time of launching the application.
It is assumed that this codelist will mainly be used in the selectboxes having only numbers i.e. selectbox for month, date etc.</p>
<p><strong>Image of NumberRangeCodeList</strong></p>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/codelist-number.png"><img alt="codelist number" src="../../_images/codelist-number.png" style="width: 100%;" /></a>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">NumberRangeCodeList supports only Arabic numbers and does not support Chinese and Roman numbers.
Chinese and Roman numbers can be supported by using JdbcCodeList and SimpleMapCodeList.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>NumberRangeCodeList has the following features:</p>
<ol class="arabic simple">
<li>In order to set From value &lt; To value, the values increased in accordance with the interval are set in From-To range in ascending order.</li>
<li>In order to set To value &lt; From value, the values decreased in accordance with the interval are set in To-From range in descending order.</li>
<li>Increment (decrement) can be changed by setting intervals.</li>
</ol>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>The information here describes how to configure the ascending <code class="docutils literal"><span class="pre">NumberRangeCodeList</span></code>.
For how to create the descending <code class="docutils literal"><span class="pre">NumberRangeCodeList</span></code> or change interval, refer to “<a class="reference internal" href="#codelistappendixnumberrangecodelistvariation"><span class="std std-ref">Variations of NumberRangeCodeList</span></a>”.
|</p>
<div class="section" id="id1">
<h4><a class="toc-backref" href="#id22">4.8.2.2.1. Example of codelist settings</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>Example of setting From value &lt; To value is shown below.</p>
<p><strong>Definition of Bean definition file(xxx-codelist.xml)</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_MONTH&quot;</span>
    <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.NumberRangeCodeList&quot;</span><span class="nt">&gt;</span> <span class="c">&lt;!-- (1) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;from&quot;</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (2) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;to&quot;</span> <span class="na">value=</span><span class="s">&quot;12&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (3) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;valueFormat&quot;</span> <span class="na">value=</span><span class="s">&quot;%d&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (4) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;labelFormat&quot;</span> <span class="na">value=</span><span class="s">&quot;%02d&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (5) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;interval&quot;</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (6) --&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define a bean of NumberRangeCodeList.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify the range start value. When omitted, “0” is set as range start value.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify the range end value. It cannot be blank.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify the format of the code value. Format used should be <code class="docutils literal"><span class="pre">java.lang.String.format</span></code>.</div>
<div class="line">When omitted, “%s” is set.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify the format of the code name. Format used should be <code class="docutils literal"><span class="pre">java.lang.String.format</span></code>.</div>
<div class="line">When omitted, “%s” is set.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(6)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Set the increment value. When omitted, “1” is set.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id2">
<h4><a class="toc-backref" href="#id23">4.8.2.2.2. Using codelist in JSP</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p>For details on settings shown below, refer to <a class="reference internal" href="#clientside"><span class="std std-ref">Using codelist in JSP</span></a> described earlier.</p>
<p><strong>Example of jsp implementation</strong></p>
<div class="highlight-jsp"><div class="highlight"><pre><span></span><span class="nt">&lt;form:select</span> <span class="na">path=</span><span class="s">&quot;depMonth&quot;</span> <span class="na">items=</span><span class="s">&quot;${CL_MONTH}&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p><strong>Output HTML</strong></p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">select</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;depMonth&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;depMonth&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;1&quot;</span><span class="p">&gt;</span>01<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2&quot;</span><span class="p">&gt;</span>02<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;3&quot;</span><span class="p">&gt;</span>03<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;4&quot;</span><span class="p">&gt;</span>04<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;5&quot;</span><span class="p">&gt;</span>05<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;6&quot;</span><span class="p">&gt;</span>06<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;7&quot;</span><span class="p">&gt;</span>07<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;8&quot;</span><span class="p">&gt;</span>08<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;9&quot;</span><span class="p">&gt;</span>09<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;10&quot;</span><span class="p">&gt;</span>10<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;11&quot;</span><span class="p">&gt;</span>11<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;12&quot;</span><span class="p">&gt;</span>12<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
</pre></div>
</div>
<p><strong>Output screen</strong></p>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/codelist_numberrenge.png"><img alt="codelist numberrange" src="../../_images/codelist_numberrenge.png" style="width: 5%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id3">
<h4><a class="toc-backref" href="#id24">4.8.2.2.3. Using codelist in Java class</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p>For details on settings shown below, refer to <a class="reference internal" href="#serverside"><span class="std std-ref">Using codelist in Java class</span></a> described earlier.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="using-jdbccodelist">
<span id="codelist-jdbc"></span><h3><a class="toc-backref" href="#id25">4.8.2.3. Using JdbcCodeList</a><a class="headerlink" href="#using-jdbccodelist" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.JdbcCodeList</span></code> is a class for creating codelist by fetching values from DB at the time of starting the application.</div>
<div class="line">Since <code class="docutils literal"><span class="pre">JdbcCodeList</span></code> creates a cache while starting the application, no delay occurs during DB access when you want to display a list.</div>
</div>
<div class="line-block">
<div class="line">If you want to reduce the read time for the startup, it is preferable to set an upper limit on the number of acquisitions.</div>
<div class="line"><code class="docutils literal"><span class="pre">JdbcCodeList</span></code> consists of a field which sets the <code class="docutils literal"><span class="pre">org.springframework.jdbc.core.JdbcTemplate</span></code>.</div>
<div class="line">If an upper limit is set for the <code class="docutils literal"><span class="pre">fetchSize</span></code> of <code class="docutils literal"><span class="pre">JdbcTemplate</span></code>, the records only till the upper limit are read at the startup.</div>
<div class="line">The fetched values can be changed dynamically by reloading. For details, refer to <a class="reference internal" href="#codelisttaskscheduler"><span class="std std-ref">When reloading the codelist</span></a>.</div>
</div>
<p><strong>JdbcCodeList image</strong></p>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/codelist-jdbc.png"><img alt="codelist simple" src="../../_images/codelist-jdbc.png" style="width: 100%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="id4">
<h4><a class="toc-backref" href="#id26">4.8.2.3.1. Example of codelist settings</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<p><strong>Definition of Table(authority)</strong></p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">authority_id</th>
<th class="head">authority_name</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">01</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">STAFF_MANAGEMENT</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">02</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">MASTER_MANAGEMENT</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">03</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">STOCK_MANAGEMENT</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">04</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">ORDER_MANAGEMENT</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">05</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">SHOW_SHOPPING_CENTER</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Definition of Bean definition file(xxx-codelist.xml)</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;jdbcTemplateForCodeList&quot;</span> <span class="na">class=</span><span class="s">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span> <span class="nt">&gt;</span> <span class="c">&lt;!-- (1) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;dataSource&quot;</span> <span class="na">ref=</span><span class="s">&quot;dataSource&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;fetchSize&quot;</span> <span class="na">value=</span><span class="s">&quot;${codelist.jdbc.fetchSize:1000}&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (2) --&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;AbstractJdbcCodeList&quot;</span>
    <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.JdbcCodeList&quot;</span> <span class="na">abstract=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span> <span class="c">&lt;!-- (3) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;jdbcTemplate&quot;</span> <span class="na">ref=</span><span class="s">&quot;jdbcTemplateForCodeList&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (4) --&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_AUTHORITIES&quot;</span> <span class="na">parent=</span><span class="s">&quot;AbstractJdbcCodeList&quot;</span> <span class="nt">&gt;</span> <span class="c">&lt;!-- (5) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;querySql&quot;</span>
        <span class="na">value=</span><span class="s">&quot;SELECT authority_id, authority_name FROM authority ORDER BY authority_id&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (6) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;valueColumn&quot;</span> <span class="na">value=</span><span class="s">&quot;authority_id&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (7) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;labelColumn&quot;</span> <span class="na">value=</span><span class="s">&quot;authority_name&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (8) --&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define a bean for <code class="docutils literal"><span class="pre">org.springframework.jdbc.core.JdbcTemplate</span></code> class.</div>
<div class="line">It is necessary for independently setting the fetchSize.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Set the fetchSize.</div>
<div class="line">An appropriate value must be set since FetchSize is set to Fetch All by default.</div>
<div class="line">When <code class="docutils literal"><span class="pre">fetchSize</span></code> is set to “fetch all” and when the records that are required to be read by <code class="docutils literal"><span class="pre">JdbcCodeList</span></code> are large, process efficiency while fetching a list from DB is likely to reduce resulting in prolonged startup time of application.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define a common bean of JdbcCodeList.</div>
<div class="line">Common parts of another <code class="docutils literal"><span class="pre">JdbcCodeList</span></code> are specified. Therefore, the bean is defined in parent class for bean definition of basic <code class="docutils literal"><span class="pre">JdbcCodeList</span></code>.</div>
<div class="line">An instance cannot be created for this bean by setting abstract attribute to true.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify <code class="docutils literal"><span class="pre">jdbcTemplate</span></code> set in (1).</div>
<div class="line"><code class="docutils literal"><span class="pre">JdbcTemplate</span></code> which specifies <code class="docutils literal"><span class="pre">fetchSize</span></code> is stored in <code class="docutils literal"><span class="pre">JdbcCodeList</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Bean definition of JdbcCodeList</div>
<div class="line">By setting Bean defined in (3) as parent class in parent attribute, <code class="docutils literal"><span class="pre">JdbcCodeList</span></code> which specifies <code class="docutils literal"><span class="pre">fetchSize</span></code> is set.</div>
<div class="line">In this bean definition, only the query related settings are carried out and the required CodeList is created.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(6)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Write an SQL to be fetched in querySql property. At that time, <strong>always specify “ORDER BY” clause and determine the order</strong>.</div>
<div class="line">If “ORDER BY” is not specified, the order gets changed while fetching the records.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(7)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Set the value corresponding to the Key of Map in valueColumn property. In this example, authority_id is set.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(8)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Set the value corresponding to Value of Map in labelColumn property. In this example, authority_name is set.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id5">
<h4><a class="toc-backref" href="#id27">4.8.2.3.2. Using codelist in JSP</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<div class="line-block">
<div class="line">For details on settings shown below, refer to <a class="reference internal" href="#clientside"><span class="std std-ref">Using codelist in JSP</span></a> described earlier.</div>
</div>
<p><strong>Example of jsp implementation</strong></p>
<div class="highlight-jsp"><div class="highlight"><pre><span></span><span class="nt">&lt;form:checkboxes</span> <span class="na">items=</span><span class="s">&quot;${CL_AUTHORITIES}&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p><strong>Output HTML</strong></p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;authorities1&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;authorities&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;01&quot;</span><span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;authorities1&quot;</span><span class="p">&gt;</span>STAFF_MANAGEMENT<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;authorities2&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;authorities&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;02&quot;</span><span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;authorities2&quot;</span><span class="p">&gt;</span>MASTER_MANAGEMENT<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;authorities3&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;authorities&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;03&quot;</span><span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;authorities3&quot;</span><span class="p">&gt;</span>STOCK_MANAGEMENT<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;authorities4&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;authorities&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;04&quot;</span><span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;authorities4&quot;</span><span class="p">&gt;</span>ORDER_MANAGEMENT<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;authorities5&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;authorities&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;05&quot;</span><span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;authorities5&quot;</span><span class="p">&gt;</span>SHOW_SHOPPING_CENTER<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</pre></div>
</div>
<p><strong>Output screen</strong></p>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/codelist_checkbox.png"><img alt="codelist checkbox" src="../../_images/codelist_checkbox.png" style="width: 50%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id6">
<h4><a class="toc-backref" href="#id28">4.8.2.3.3. Using codelist in Java class</a><a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<p>For details on settings shown below, refer to <a class="reference internal" href="#serverside"><span class="std std-ref">Using codelist in Java class</span></a> described earlier.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="how-to-use-enumcodelist">
<span id="codelist-enum"></span><h3><a class="toc-backref" href="#id29">4.8.2.4. How to use EnumCodeList</a><a class="headerlink" href="#how-to-use-enumcodelist" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.EnumCodeList</span></code> is a class
for creating codelist from constant defined in <code class="docutils literal"><span class="pre">Enum</span></code> class.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>In case of handling codelist in applications that match with the following conditions,
it should be analyzed if the codelist label can be stored in <code class="docutils literal"><span class="pre">Enum</span></code> class using <code class="docutils literal"><span class="pre">EnumCodeList</span></code> .
By storing codelist label in <code class="docutils literal"><span class="pre">Enum</span></code> class,
the information and operations linked with code values can be aggregated in <code class="docutils literal"><span class="pre">Enum</span></code> class.</p>
<ul class="last simple">
<li>It is necessary to store the code values in <code class="docutils literal"><span class="pre">Enum</span></code> class (i.e. the process needs to be performed considering code values in Java logic)</li>
<li>Internationalization (multilingualization) of UI is not required</li>
</ul>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Image of using <code class="docutils literal"><span class="pre">EnumCodeList</span></code> is shown below.</p>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/codelist-enum.png"><img alt="codelist enum" src="../../_images/codelist-enum.png" style="width: 100%;" /></a>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>In <code class="docutils literal"><span class="pre">EnumCodeList</span></code>, <code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.EnumCodeList.CodeListItem</span></code> interface
is provided to fetch the information (code values and labels) required for creating codelist from <code class="docutils literal"><span class="pre">Enum</span></code> class.</p>
<p class="last">In case of using <code class="docutils literal"><span class="pre">EnumCodeList</span></code>, <code class="docutils literal"><span class="pre">EnumCodeList.CodeListItem</span></code> interface should be implemented in <code class="docutils literal"><span class="pre">Enum</span></code> class to be created.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="id7">
<h4><a class="toc-backref" href="#id30">4.8.2.4.1. Example of codelist settings</a><a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<p><strong>Creating Enum class</strong></p>
<p>In case of using <code class="docutils literal"><span class="pre">EnumCodeList</span></code>,
create <code class="docutils literal"><span class="pre">Enum</span></code> class that implements <code class="docutils literal"><span class="pre">EnumCodeList.CodeListItem</span></code> interface.
Example is shown below.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.example.domain.model</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.terasoluna.gfw.common.codelist.EnumCodeList</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">enum</span> <span class="n">OrderStatus</span>
    <span class="c1">// (1)</span>
    <span class="kd">implements</span> <span class="n">EnumCodeList</span><span class="o">.</span><span class="na">CodeListItem</span> <span class="o">{</span>

    <span class="c1">// (2)</span>
    <span class="n">RECEIVED</span>  <span class="o">(</span><span class="s">&quot;1&quot;</span><span class="o">,</span> <span class="s">&quot;Received&quot;</span><span class="o">),</span>
    <span class="n">SENT</span>      <span class="o">(</span><span class="s">&quot;2&quot;</span><span class="o">,</span> <span class="s">&quot;Sent&quot;</span><span class="o">),</span>
    <span class="n">CANCELLED</span> <span class="o">(</span><span class="s">&quot;3&quot;</span><span class="o">,</span><span class="s">&quot;Cancelled&quot;</span><span class="o">);</span>

    <span class="c1">// (3)</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">value</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">label</span><span class="o">;</span>

    <span class="c1">// (4)</span>
    <span class="kd">private</span> <span class="nf">OrderStatus</span><span class="o">(</span><span class="n">String</span> <span class="n">codeValue</span><span class="o">,</span> <span class="n">String</span> <span class="n">codeLabel</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">codeValue</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">label</span> <span class="o">=</span> <span class="n">codeLabel</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// (5)</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getCodeValue</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">value</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// (6)</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getCodeLabel</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">label</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><p class="first">In <code class="docutils literal"><span class="pre">Enum</span></code> class to be used as codelist,
implement the <code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.EnumCodeList.CodeListItem</span></code> interface provided by common library.</p>
<p>In <code class="docutils literal"><span class="pre">EnumCodeList.CodeListItem</span></code> interface, following methods are defined to fetch the information (code values and labels) required for creating a codelist.</p>
<ul class="last simple">
<li><code class="docutils literal"><span class="pre">getCodeValue()</span></code> method to fetch code values</li>
<li><code class="docutils literal"><span class="pre">getCodeLabel()</span></code> method to fetch labels</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><p class="first">Define constants.</p>
<p>When creating constants, specify the information (code values and labels) required for creating a codelist.</p>
<p>In above example, following 3 constants are defined.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">RECEIVED</span></code> (code value=”<code class="docutils literal"><span class="pre">1</span></code>” , label=<code class="docutils literal"><span class="pre">&quot;Received&quot;</span></code>)</li>
<li><code class="docutils literal"><span class="pre">SENT</span></code> (code value=”<code class="docutils literal"><span class="pre">2</span></code>” , label=<code class="docutils literal"><span class="pre">&quot;Sent&quot;</span></code>)</li>
<li><code class="docutils literal"><span class="pre">CANCELLED</span></code> (code value=”<code class="docutils literal"><span class="pre">3</span></code>” , label=<code class="docutils literal"><span class="pre">&quot;Cancelled&quot;</span></code>)</li>
</ul>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Sorting order of codelist when using <code class="docutils literal"><span class="pre">EnumCodeList</span></code> will be the order of defining constants.</p>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td>Create a property to store the information (code values and labels) required for creating a codelist.</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td>Create a constructor to receive the information (code values and labels) required for creating a codelist.</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(5)</div>
</div>
</td>
<td><p class="first">Return the code values storing constants.</p>
<p class="last">This method is defined in <code class="docutils literal"><span class="pre">EnumCodeList.CodeListItem</span></code> interface, and
it is called when <code class="docutils literal"><span class="pre">EnumCodeList</span></code> fetches code value from a constant.</p>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(6)</div>
</div>
</td>
<td><p class="first">Return the label storing constants.</p>
<p class="last">This method is defined in <code class="docutils literal"><span class="pre">EnumCodeList.CodeListItem</span></code> interface, and
it is called when <code class="docutils literal"><span class="pre">EnumCodeList</span></code> fetches label from a constant.</p>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Definition of bean definition file (xxx-codelist.xml)</strong></p>
<p><code class="docutils literal"><span class="pre">EnumCodeList</span></code> is defined in bean definition file for codelist.
Example of definition is shown below.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_ORDERSTATUS&quot;</span>
      <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.EnumCodeList&quot;</span><span class="nt">&gt;</span> <span class="c">&lt;!-- (7) --&gt;</span>
    <span class="nt">&lt;constructor-arg</span> <span class="na">value=</span><span class="s">&quot;com.example.domain.model.OrderStatus&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (8) --&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(7)</div>
</div>
</td>
<td>Specify <code class="docutils literal"><span class="pre">EnumCodeList</span></code> class as codelist implementation class.</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(8)</div>
</div>
</td>
<td>Specify FQCN of <code class="docutils literal"><span class="pre">Enum</span></code> class that implements <code class="docutils literal"><span class="pre">EnumCodeList.CodeListItem</span></code> interface in constructor of <code class="docutils literal"><span class="pre">EnumCodeList</span></code> class.</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id8">
<h4><a class="toc-backref" href="#id31">4.8.2.4.2. Using codelist in JSP</a><a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<p>For details on how to use codelist in JSP, refer to <a class="reference internal" href="#clientside"><span class="std std-ref">Using codelist in JSP</span></a> described earlier.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id9">
<h4><a class="toc-backref" href="#id32">4.8.2.4.3. Using codelist in Java class</a><a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<p>For details on how to use codelist in Java class,
refer to <a class="reference internal" href="#serverside"><span class="std std-ref">Using codelist in Java class</span></a> described earlier.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="how-to-use-simplei18ncodelist">
<span id="codelisti18n"></span><h3><a class="toc-backref" href="#id33">4.8.2.5. How to use SimpleI18nCodeList</a><a class="headerlink" href="#how-to-use-simplei18ncodelist" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.i18n.SimpleI18nCodeList</span></code> is a codelist supporting internationalization.
By setting the codelist for each locale, the codelist corresponding to locale can be returned.</p>
<p><strong>SimpleI18nCodeList image</strong></p>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/codelist-i18n.png"><img alt="codelist i18n" src="../../_images/codelist-i18n.png" style="width: 100%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="id10">
<h4><a class="toc-backref" href="#id34">4.8.2.5.1. Example of codelist settings</a><a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h4>
<p>It is easier to understand if you consider <code class="docutils literal"><span class="pre">SimpleI18nCodeList</span></code> as two dimensional table wherein row is <code class="docutils literal"><span class="pre">Locale</span></code>, column contains code values and cell details are labels.</p>
<p>The table would be as follows in case of a selectbox for selecting charges.</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="15%" />
<col width="15%" />
<col width="15%" />
<col width="15%" />
<col width="15%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head stub">row=Locale,column=Code</th>
<th class="head">0</th>
<th class="head">10000</th>
<th class="head">20000</th>
<th class="head">30000</th>
<th class="head">40000</th>
<th class="head">50000</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><th class="stub">en</th>
<td>unlimited</td>
<td>Less than \10,000</td>
<td>Less than \20,000</td>
<td>Less than \30,000</td>
<td>Less than \40,000</td>
<td>Less than \50,000</td>
</tr>
<tr class="row-odd"><th class="stub">ja</th>
<td>上限なし</td>
<td>10,000円以下</td>
<td>20,000円以下</td>
<td>30,000円以下</td>
<td>40,000円以下</td>
<td>50,000円以下</td>
</tr>
</tbody>
</table>
<p>For creating a codelist table that supports internationalization, <code class="docutils literal"><span class="pre">SimpleI18nCodeList</span></code> has been set in following 3 ways.</p>
<ul class="simple">
<li>Set <code class="docutils literal"><span class="pre">CodeList</span></code> for each locale by rows.</li>
<li>Set <code class="docutils literal"><span class="pre">java.util.Map</span></code>(key = code value, value = label) for each locale by rows.</li>
<li>Set <code class="docutils literal"><span class="pre">java.util.Map</span></code>(key = locale, value = label) for each code value by columns.</li>
</ul>
<p>It is recommended that you set the codelist using “Set <code class="docutils literal"><span class="pre">CodeList</span></code> for each locale by rows.” method.</p>
<p>The way of setting the <code class="docutils literal"><span class="pre">CodeList</span></code> for each locale by rows considering the above example of selectbox for selecting charges, is mentioned below.
For other setting methods, refer to <a class="reference internal" href="#aftercodelisti18n"><span class="std std-ref">Setting SimpleI18nCodeList</span></a>.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Definition of Bean definition file (xxx-codelist.xml)</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_I18N_PRICE&quot;</span>
    <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.i18n.SimpleI18nCodeList&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;rowsByCodeList&quot;</span><span class="nt">&gt;</span> <span class="c">&lt;!-- (1) --&gt;</span>
        <span class="nt">&lt;util:map&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;en&quot;</span> <span class="na">value-ref=</span><span class="s">&quot;CL_PRICE_EN&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;ja&quot;</span> <span class="na">value-ref=</span><span class="s">&quot;CL_PRICE_JA&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/util:map&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Set Map wherein key is <code class="docutils literal"><span class="pre">java.lang.Locale</span></code>, in rowsByCodeList properties.</div>
<div class="line">In Map, specify locale in key and a reference link to codelist class corresponding to locale in value-ref.</div>
<div class="line">For Map values, refer to codelist class corresponding to each locale.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Definition of Bean definition file(xxx-codelist.xml) when creating SimpleMapCodeList for each locale</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_I18N_PRICE&quot;</span>
    <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.i18n.SimpleI18nCodeList&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;rowsByCodeList&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;util:map&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;en&quot;</span> <span class="na">value-ref=</span><span class="s">&quot;CL_PRICE_EN&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;ja&quot;</span> <span class="na">value-ref=</span><span class="s">&quot;CL_PRICE_JA&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/util:map&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_PRICE_EN&quot;</span> <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.SimpleMapCodeList&quot;</span><span class="nt">&gt;</span>  <span class="c">&lt;!-- (2) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;map&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;util:map&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;0&quot;</span> <span class="na">value=</span><span class="s">&quot;unlimited&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;10000&quot;</span> <span class="na">value=</span><span class="s">&quot;Less than \\10,000&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;20000&quot;</span> <span class="na">value=</span><span class="s">&quot;Less than \\20,000&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;30000&quot;</span> <span class="na">value=</span><span class="s">&quot;Less than \\30,000&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;40000&quot;</span> <span class="na">value=</span><span class="s">&quot;Less than \\40,000&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;50000&quot;</span> <span class="na">value=</span><span class="s">&quot;Less than \\50,000&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/util:map&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_PRICE_JA&quot;</span> <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.SimpleMapCodeList&quot;</span><span class="nt">&gt;</span>  <span class="c">&lt;!-- (3) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;map&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;util:map&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;0&quot;</span> <span class="na">value=</span><span class="s">&quot;上限なし&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;10000&quot;</span> <span class="na">value=</span><span class="s">&quot;10,000円以下&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;20000&quot;</span> <span class="na">value=</span><span class="s">&quot;20,000円以下&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;30000&quot;</span> <span class="na">value=</span><span class="s">&quot;30,000円以下&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;40000&quot;</span> <span class="na">value=</span><span class="s">&quot;40,000円以下&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;50000&quot;</span> <span class="na">value=</span><span class="s">&quot;50,000円以下&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/util:map&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">For bean definition <code class="docutils literal"><span class="pre">CL_PRICE_EN</span></code> where locale is “en”, codelist class is set in <code class="docutils literal"><span class="pre">SimpleMapCodeList</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">For bean definition <code class="docutils literal"><span class="pre">CL_PRICE_JA</span></code> where locale is “ja”, codelist class is set in <code class="docutils literal"><span class="pre">SimpleMapCodeList</span></code>.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Definition of Bean definition file(xxx-codelist.xml) when creating JdbcCodeList for each locale</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_I18N_PRICE&quot;</span>
    <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.i18n.SimpleI18nCodeList&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;rowsByCodeList&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;util:map&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;en&quot;</span> <span class="na">value-ref=</span><span class="s">&quot;CL_PRICE_EN&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;ja&quot;</span> <span class="na">value-ref=</span><span class="s">&quot;CL_PRICE_JA&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/util:map&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_PRICE_EN&quot;</span> <span class="na">parent=</span><span class="s">&quot;AbstractJdbcCodeList&quot;</span><span class="nt">&gt;</span>  <span class="c">&lt;!-- (4) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;querySql&quot;</span>
        <span class="na">value=</span><span class="s">&quot;SELECT code, label FROM price WHERE locale = &#39;en&#39; ORDER BY code&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;valueColumn&quot;</span> <span class="na">value=</span><span class="s">&quot;code&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;labelColumn&quot;</span> <span class="na">value=</span><span class="s">&quot;label&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_PRICE_JA&quot;</span> <span class="na">parent=</span><span class="s">&quot;AbstractJdbcCodeList&quot;</span><span class="nt">&gt;</span>  <span class="c">&lt;!-- (5) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;querySql&quot;</span>
        <span class="na">value=</span><span class="s">&quot;SELECT code, label FROM price WHERE locale = &#39;ja&#39; ORDER BY code&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;valueColumn&quot;</span> <span class="na">value=</span><span class="s">&quot;code&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;labelColumn&quot;</span> <span class="na">value=</span><span class="s">&quot;label&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">For bean definition <code class="docutils literal"><span class="pre">CL_PRICE_EN</span></code> where locale is “en”, codelist class is set in <code class="docutils literal"><span class="pre">JdbcCodeList</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">For bean definition <code class="docutils literal"><span class="pre">CL_PRICE_JA</span></code> where locale is “ja”, codelist class is set in <code class="docutils literal"><span class="pre">JdbcCodeList</span></code>.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Insert the following data in Table Definition (price table).</p>
<table border="1" class="colwidths-given longtable docutils">
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">locale</th>
<th class="head">code</th>
<th class="head">label</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">en</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">0</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">unlimited</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">en</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">10000</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Less than \10,000</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">en</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">20000</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Less than \20,000</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">en</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">30000</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Less than \30,000</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">en</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">40000</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Less than \40,000</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">en</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">50000</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Less than \50,000</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">ja</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">0</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">上限なし</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">ja</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">10000</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">10,000円以下</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">ja</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">20000</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">20,000円以下</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">ja</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">30000</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">30,000円以下</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">ja</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">40000</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">40,000円以下</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">ja</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">50000</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">50,000円以下</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Currently <code class="docutils literal"><span class="pre">SimpleI18nCodeList</span></code> does not support reloadable functionality.
It should be noted that even if <code class="docutils literal"><span class="pre">JdbcCodeList</span></code> (reloadable CodeList) referred by <code class="docutils literal"><span class="pre">SimpleI18nCodeList</span></code> is reloaded, it does not get reflected in <code class="docutils literal"><span class="pre">SimpleI18nCodeList</span></code>.
In order to make it reloadable, it should be implemented independently.
For implementation method, refer to <a class="reference internal" href="#originalcustomizecodelist"><span class="std std-ref">Customizing the codelist independently</span></a>.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id11">
<h4><a class="toc-backref" href="#id35">4.8.2.5.2. Using codelist in JSP</a><a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<p>Description of basic settings is omitted since it is same as <a class="reference internal" href="#clientside"><span class="std std-ref">Using codelist in JSP</span></a> described earlier.</p>
<p><strong>Definition of Bean definition file(spring-mvc.xml)</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;mvc:interceptors&gt;</span>
  <span class="nt">&lt;mvc:interceptor&gt;</span>
    <span class="nt">&lt;mvc:mapping</span> <span class="na">path=</span><span class="s">&quot;/**&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;bean</span>
      <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.web.codelist.CodeListInterceptor&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;codeListIdPattern&quot;</span> <span class="na">value=</span><span class="s">&quot;CL_.+&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;fallbackTo&quot;</span> <span class="na">value=</span><span class="s">&quot;en&quot;</span> <span class="nt">/&gt;</span>  <span class="c">&lt;!-- (1) --&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>
  <span class="nt">&lt;/mvc:interceptor&gt;</span>

  <span class="c">&lt;!-- omitted --&gt;</span>

<span class="nt">&lt;/mvc:interceptors&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">When request locale is not defined in codelist,</div>
<div class="line">codelist is fetched using the locale set in fallbackTo property.</div>
<div class="line">When fallbackTo property is not set, default JVM locale is used as fallbackTo property.</div>
<div class="line">When codelist cannot be fetched even after using the locale set in fallbackTo property, WARN log is output and empty Map is returned.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Example of jsp implementation</strong></p>
<div class="highlight-jsp"><div class="highlight"><pre><span></span><span class="nt">&lt;form:select</span> <span class="na">path=</span><span class="s">&quot;basePrice&quot;</span> <span class="na">items=</span><span class="s">&quot;${CL_I18N_PRICE}&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p><strong>Output HTML lang=en</strong></p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">select</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;basePrice&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;basePrice&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;0&quot;</span><span class="p">&gt;</span>unlimited<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;1&quot;</span><span class="p">&gt;</span>Less than \\10,000<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2&quot;</span><span class="p">&gt;</span>Less than \\20,000<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;3&quot;</span><span class="p">&gt;</span>Less than \\30,000<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;4&quot;</span><span class="p">&gt;</span>Less than \\40,000<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;5&quot;</span><span class="p">&gt;</span>Less than \\50,000<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
</pre></div>
</div>
<p><strong>Output HTML lang=ja</strong></p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">select</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;basePrice&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;basePrice&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;0&quot;</span><span class="p">&gt;</span>上限なし<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;1&quot;</span><span class="p">&gt;</span>10,000円以下<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2&quot;</span><span class="p">&gt;</span>20,000円以下<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;3&quot;</span><span class="p">&gt;</span>30,000円以下<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;4&quot;</span><span class="p">&gt;</span>40,000円以下<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;5&quot;</span><span class="p">&gt;</span>50,000円以下<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
</pre></div>
</div>
<p><strong>Output screen lang=en</strong></p>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/codelist_i18n_en.png"><img alt="codelist i18n en" src="../../_images/codelist_i18n_en.png" style="width: 20%;" /></a>
</div>
<p><strong>Output screen lang=ja</strong></p>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/codelist_i18n_ja.png"><img alt="codelist i18n ja" src="../../_images/codelist_i18n_ja.png" style="width: 20%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id12">
<h4><a class="toc-backref" href="#id36">4.8.2.5.3. Using codelist in Java class</a><a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h4>
<p>Description of basic settings is omitted since it is same as <a class="reference internal" href="#serverside"><span class="std std-ref">Using codelist in Java class</span></a> described earlier.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&quot;orders&quot;</span><span class="o">)</span>
<span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrderController</span> <span class="o">{</span>

    <span class="nd">@Inject</span>
    <span class="nd">@Named</span><span class="o">(</span><span class="s">&quot;CL_I18N_PRICE&quot;</span><span class="o">)</span>
    <span class="n">I18nCodeList</span> <span class="n">priceCodeList</span><span class="o">;</span>

    <span class="c1">// ...</span>

    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">POST</span><span class="o">,</span> <span class="n">params</span> <span class="o">=</span> <span class="s">&quot;confirm&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">confirm</span><span class="o">(</span><span class="n">OrderForm</span> <span class="n">form</span><span class="o">,</span> <span class="n">Locale</span> <span class="n">locale</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// ...</span>
        <span class="n">String</span> <span class="n">priceMassage</span> <span class="o">=</span> <span class="n">getPriceMessage</span><span class="o">(</span><span class="n">form</span><span class="o">.</span><span class="na">getPriceCode</span><span class="o">(),</span> <span class="n">locale</span><span class="o">);</span>
        <span class="c1">// ...</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="nf">getPriceMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">targetPrice</span><span class="o">,</span> <span class="n">Locale</span> <span class="n">locale</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">return</span> <span class="n">priceCodeList</span><span class="o">.</span><span class="na">asMap</span><span class="o">(</span><span class="n">locale</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="n">targetPrice</span><span class="o">);</span>  <span class="c1">// (1)</span>
    <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Map of locale corresponding to I18nCodeList#asMap(Locale) can be fetched.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="display-code-name-corresponding-to-code-value">
<span id="codelist-display-label"></span><h3><a class="toc-backref" href="#id37">4.8.2.6. Display code name corresponding to code value</a><a class="headerlink" href="#display-code-name-corresponding-to-code-value" title="Permalink to this headline">¶</a></h3>
<p>When it is necessary to refer the codelist in JSP, it can be referred same as <code class="docutils literal"><span class="pre">java.util.Map</span></code> interface.</p>
<p>For details, see the below example.</p>
<p><strong>Example of jsp implementation</strong></p>
<div class="highlight-jsp"><div class="highlight"><pre><span></span>Order Status : ${f:h(CL_ORDERSTATUS[orderForm.orderStatus])}
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Get a codelist that has been converted to the <code class="docutils literal"><span class="pre">java.util.Map</span></code> from the request scope (In this example, <code class="docutils literal"><span class="pre">CL_ORDERSTATUS</span></code> used as codelist ). The codelist has been referred with the beanID of codelist.</div>
<div class="line">Then specify a code value as a key of the <code class="docutils literal"><span class="pre">Map</span></code> interface which displays a corresponding code name (In this example, <code class="docutils literal"><span class="pre">orderStatus</span></code> value is used as a key).</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="input-validation-of-code-value-using-codelist">
<span id="codelist-validate"></span><h3><a class="toc-backref" href="#id38">4.8.2.7. Input validation of code value using codelist</a><a class="headerlink" href="#input-validation-of-code-value-using-codelist" title="Permalink to this headline">¶</a></h3>
<p>When checking whether the input value is the code value defined in codelist,
<code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.ExistInCodeList</span></code> annotation for BeanValidation is provided in common library.</p>
<p>For details on BeanValidation and message output method, refer to <a class="reference internal" href="Validation.html"><span class="doc">Input Validation</span></a>.</p>
<p>For input validation using <code class="docutils literal"><span class="pre">&#64;ExistInCodeList</span></code> annotation,
it is necessary to carry out “<a class="reference internal" href="Validation.html#validation-message-def"><span class="std std-ref">Definition of error messages</span></a>” for <code class="docutils literal"><span class="pre">&#64;ExistInCodeList</span></code> .</p>
<p>When project is created by <a class="reference external" href="https://github.com/terasolunaorg/terasoluna-gfw-web-multi-blank">Blank project</a> ,
the following message is defined in <code class="docutils literal"><span class="pre">ValidationMessages.properties</span></code> file directly under <code class="docutils literal"><span class="pre">xxx-web/src/main/resources</span></code>.
Please change the message to fit the application requirements.</p>
<div class="highlight-properties"><div class="highlight"><pre><span></span><span class="na">org.terasoluna.gfw.common.codelist.ExistInCodeList.message</span> <span class="o">=</span> <span class="s">Does not exist in {codeListId}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>In the terasoluna-gfw-common 5.0.0.RELEASE or later,
the format of message property key has been changed to standard format of Bean Validation (FQCN of annotation + <code class="docutils literal"><span class="pre">.message</span></code>).</p>
<blockquote>
<div><table border="1" class="colwidths-given docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Version</th>
<th class="head">Property key of message</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">version 5.0.0.RELEASE or later</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.ExistInCodeList.message</span></code></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">version 1.0.x.RELEASE</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.ExistInCodeList</span></code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p class="last">For migrating to the version 5.0.0.RELEASE or later from the version 1.0.x.RELEASE,
when message is changed to fit the application requirements,
the property key should be changed.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>From terasoluna-gfw-common 1.0.2.RELEASE,
<code class="docutils literal"><span class="pre">ValidationMessages.properties</span></code>wherein <code class="docutils literal"><span class="pre">&#64;ExistInCodeList</span></code>message is defined,
is not included in jar file.
This is to fix the “<a class="reference external" href="https://github.com/terasolunaorg/terasoluna-gfw/issues/256">Bug in which message is not displayed if multiple ValidationMessages.properties exist</a>”.</p>
<p class="last">For migrating to version 1.0.2.RELEASE or later from version 1.0.1.RELEASE or prior,
if the message defined in <code class="docutils literal"><span class="pre">ValidationMessages.properties</span></code>included in jar of terasoluna-gfw-common, is used,
it is necessary to define the message by creating <code class="docutils literal"><span class="pre">ValidationMessages.properties</span></code>.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="example-of-existincodelist-settings">
<h4><a class="toc-backref" href="#id39">4.8.2.7.1. Example of &#64;ExistInCodeList settings</a><a class="headerlink" href="#example-of-existincodelist-settings" title="Permalink to this headline">¶</a></h4>
<p>See below the example of input validation method using codelist.</p>
<p><strong>Definition of Bean definition file(xxx-codelist.xml)</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_GENDER&quot;</span> <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.SimpleMapCodeList&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;map&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;map&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;M&quot;</span> <span class="na">value=</span><span class="s">&quot;Male&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;F&quot;</span> <span class="na">value=</span><span class="s">&quot;Female&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/map&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<p><strong>Form object</strong></p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Person</span> <span class="o">{</span>
    <span class="nd">@ExistInCodeList</span><span class="o">(</span><span class="n">codeListId</span> <span class="o">=</span> <span class="s">&quot;CL_GENDER&quot;</span><span class="o">)</span>  <span class="c1">// (1)</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">gender</span><span class="o">;</span>

    <span class="c1">// getter and setter omitted</span>
<span class="o">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Set <code class="docutils literal"><span class="pre">&#64;ExistInCodeList</span></code> annotation for the field for which input is to be validated,</div>
<div class="line">and specify the target codelist in codeListId.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>As a result of above settings, when characters other than M, F are stored in <code class="docutils literal"><span class="pre">gender</span></code>, the system throws an error.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p><code class="docutils literal"><span class="pre">&#64;ExistInCodeList</span></code> input validation supports only the implementation class (<code class="docutils literal"><span class="pre">String</span></code> etc) of <code class="docutils literal"><span class="pre">CharSequence</span></code> interface or <code class="docutils literal"><span class="pre">Character</span></code> type.
Therefore, even if the fields with <code class="docutils literal"><span class="pre">&#64;ExistInCodeList</span></code>may contain integer values, they should be defined as <code class="docutils literal"><span class="pre">String</span></code>data type. (such as Year/Month/Day)</p>
<p class="last">Also, because <code class="docutils literal"><span class="pre">&#64;ExistInCodeList</span></code>does not correspond to the values in the collection,it is necessary to device the implementation in order to correspond <code class="docutils literal"><span class="pre">&#64;ExistInCodeList</span></code>annotation to multiple selectable screen items (check boxes, multiple selection drop down, etc.)
For details, please refer <a class="reference internal" href="Validation.html#validation-for-parameter-object-in-collection-corresponding-annotation"><span class="std std-ref">How to check the values in the collection using Bean Validation’s annotation</span></a> .</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
</div>
<div class="section" id="how-to-extend">
<h2><a class="toc-backref" href="#id40">4.8.3. How to extend</a><a class="headerlink" href="#how-to-extend" title="Permalink to this headline">¶</a></h2>
<div class="section" id="when-reloading-the-codelist">
<span id="codelisttaskscheduler"></span><h3><a class="toc-backref" href="#id41">4.8.3.1. When reloading the codelist</a><a class="headerlink" href="#when-reloading-the-codelist" title="Permalink to this headline">¶</a></h3>
<p>Codelist provided in common library is read at the time of launching the application and it is never updated subsequently.
However, in some cases, when the master data of the codelist is updated, the codelist also needs to be updated.</p>
<p>Example: Updating the codelist when DB master is updated using JdbcCodeList.</p>
<p>Common library provides <code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.ReloadableCodeList</span></code> interface.
The class implementing the above interface, implements refresh method. Codelist can be updated by calling this refresh method.
JdbcCodeList implements ReloadableCodeList interface; hence it is possible to update the codelist.</p>
<p>Codelist can be updated in following two ways.</p>
<ol class="arabic simple">
<li>By using Task Scheduler</li>
<li>By calling refresh method in Controller (Service) class</li>
</ol>
<p>This guideline recommends the method to reload the codelist periodically using <a class="reference external" href="http://docs.spring.io/spring/docs/4.3.11.RELEASE/spring-framework-reference/html/scheduling.html">Spring Task Scheduler</a>.</p>
<p>However, when it is necessary to arbitrarily refresh the codelist, it is appropriate to call refresh method in Controller class.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For the codelist having ReloadableCodeList interface, refer to <a class="reference internal" href="#listofcodelist"><span class="std std-ref">List of codelist types</span></a>.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="using-task-scheduler">
<h4><a class="toc-backref" href="#id42">4.8.3.1.1. Using Task Scheduler</a><a class="headerlink" href="#using-task-scheduler" title="Permalink to this headline">¶</a></h4>
<p>Example for setting the Task Scheduler is shown below.</p>
<p><strong>Definition of Bean definition file(xxx-codelist.xml)</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;task:scheduler</span> <span class="na">id=</span><span class="s">&quot;taskScheduler&quot;</span> <span class="na">pool-size=</span><span class="s">&quot;10&quot;</span><span class="nt">/&gt;</span>  <span class="c">&lt;!-- (1) --&gt;</span>

<span class="nt">&lt;task:scheduled-tasks</span> <span class="na">scheduler=</span><span class="s">&quot;taskScheduler&quot;</span><span class="nt">&gt;</span>  <span class="c">&lt;!-- (2) --&gt;</span>
    <span class="nt">&lt;task:scheduled</span> <span class="na">ref=</span><span class="s">&quot;CL_AUTHORITIES&quot;</span> <span class="na">method=</span><span class="s">&quot;refresh&quot;</span> <span class="na">cron=</span><span class="s">&quot;${cron.codelist.refreshTime}&quot;</span><span class="nt">/&gt;</span>  <span class="c">&lt;!-- (3) --&gt;</span>
<span class="nt">&lt;/task:scheduled-tasks&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_AUTHORITIES&quot;</span> <span class="na">parent=</span><span class="s">&quot;AbstractJdbcCodeList&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;querySql&quot;</span>
        <span class="na">value=</span><span class="s">&quot;SELECT authority_id, authority_name FROM authority ORDER BY authority_id&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;valueColumn&quot;</span> <span class="na">value=</span><span class="s">&quot;authority_id&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;labelColumn&quot;</span> <span class="na">value=</span><span class="s">&quot;authority_name&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify the thread pool size in pool-size attribute of <code class="docutils literal"><span class="pre">&lt;task:scheduler&gt;</span></code> element.</div>
<div class="line">When pool-size attribute is not specified, the value is set to “1”.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define <code class="docutils literal"><span class="pre">&lt;task:scheduled-tasks&gt;</span></code> element and set <code class="docutils literal"><span class="pre">&lt;task:scheduler&gt;</span></code> ID in scheduler attribute.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define <code class="docutils literal"><span class="pre">&lt;task:scheduled&gt;</span></code> element. Specify refresh method in method attribute.</div>
<div class="line">In cron attribute, the value should be mentioned in <code class="docutils literal"><span class="pre">org.springframework.scheduling.support.CronSequenceGenerator</span></code> supported format.</div>
<div class="line">Reload timing for cron attribute may change with development environment and commercial environment; hence it is recommended to fetch the codelist from property file or environment variable.</div>
<div class="line"><br /></div>
<div class="line"><strong>Example of setting cron attribute</strong></div>
<div class="line">Specify in “Seconds Minutes Hours Month Year Day”.</div>
<div class="line">execution every second                      “* * * * * *”</div>
<div class="line">execution every hour                        “0 0 * * * *”</div>
<div class="line">execution every hour 9:00-17:00 on weekdays “0 0 9-17 * * MON-FRI”</div>
<div class="line"><br /></div>
<div class="line">For details, refer to JavaDoc.</div>
<div class="line"><a class="reference external" href="http://docs.spring.io/spring/docs/4.3.11.RELEASE/javadoc-api/org/springframework/scheduling/support/CronSequenceGenerator.html">http://docs.spring.io/spring/docs/4.3.11.RELEASE/javadoc-api/org/springframework/scheduling/support/CronSequenceGenerator.html</a></div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="calling-refresh-method-in-controller-service-class">
<h4><a class="toc-backref" href="#id43">4.8.3.1.2. Calling refresh method in Controller (Service) class</a><a class="headerlink" href="#calling-refresh-method-in-controller-service-class" title="Permalink to this headline">¶</a></h4>
<p>See the example below for directly calling refresh method of JdbcCodeList in Service class.</p>
<p><strong>Definition of Bean definition file(xxx-codelist.xml)</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_AUTHORITIES&quot;</span> <span class="na">parent=</span><span class="s">&quot;AbstractJdbcCodeList&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;querySql&quot;</span>
        <span class="na">value=</span><span class="s">&quot;SELECT authority_id, authority_name FROM authority ORDER BY authority_id&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;valueColumn&quot;</span> <span class="na">value=</span><span class="s">&quot;authority_id&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;labelColumn&quot;</span> <span class="na">value=</span><span class="s">&quot;authority_name&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<p><strong>Controller class</strong></p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="nd">@Controller</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;codelist&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CodeListController</span> <span class="o">{</span>

    <span class="nd">@Inject</span>
    <span class="n">CodeListService</span> <span class="n">codeListService</span><span class="o">;</span> <span class="c1">// (1)</span>

    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">,</span> <span class="n">params</span> <span class="o">=</span> <span class="s">&quot;refresh&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">refreshJdbcCodeList</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">codeListService</span><span class="o">.</span><span class="na">refresh</span><span class="o">();</span> <span class="c1">// (2)</span>
        <span class="k">return</span> <span class="s">&quot;codelist/jdbcCodeList&quot;</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Inject the Service class that executes refresh method of ReloadableCodeList class.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Execute the refresh method of Service class that executes refresh method of ReloadableCodeList class.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p><strong>Service class</strong></p>
<p>The description below is given only for the implementation class. Description for interface class has been omitted.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CodeListServiceImpl</span> <span class="kd">implements</span> <span class="n">CodeListService</span> <span class="o">{</span> <span class="c1">// (3)</span>

    <span class="nd">@Inject</span>
    <span class="nd">@Named</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;CL_AUTHORITIES&quot;</span><span class="o">)</span> <span class="c1">// (4)</span>
    <span class="n">ReloadableCodeList</span> <span class="n">codeListItem</span><span class="o">;</span> <span class="c1">// (5)</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">refresh</span><span class="o">()</span> <span class="o">{</span> <span class="c1">// (6)</span>
        <span class="n">codeListItem</span><span class="o">.</span><span class="na">refresh</span><span class="o">();</span> <span class="c1">// (7)</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Implement <code class="docutils literal"><span class="pre">CodeListService</span></code> interface for <code class="docutils literal"><span class="pre">CodeListServiceImpl</span></code> class.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify the corresponding codelist using <code class="docutils literal"><span class="pre">&#64;Named</span></code> annotation at the time of injecting the codelist.</div>
<div class="line">ID of the bean to be fetched should be specified in <code class="docutils literal"><span class="pre">value</span></code> attribute.</div>
<div class="line">Codelist of ID attribute “CL_AUTHORITIES” of bean tag defined in Bean definition file is injected.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">ReloadableCodeList interface should be defined in field type.</div>
<div class="line">ReloadableCodeList interface should be implemented for Bean specified in (4).</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(6)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">refresh method defined in Service class</div>
<div class="line">is called from Controller class.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(7)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">refresh method of codelist wherein ReloadableCodeList interface is implemented.</div>
<div class="line">Codelist is updated by executing refresh method.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="customizing-the-codelist-independently">
<span id="originalcustomizecodelist"></span><h3><a class="toc-backref" href="#id44">4.8.3.2. Customizing the codelist independently</a><a class="headerlink" href="#customizing-the-codelist-independently" title="Permalink to this headline">¶</a></h3>
<p>In order to create a codelist which does not fall under the 4 types provided by the common library, the existing codelist can be customized independently.
Refer to the table below for the implementation method and type of codelist that can be created.</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="15%" />
<col width="30%" />
<col width="45%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Reloadable</th>
<th class="head">Class to be inherited</th>
<th class="head">Implementation location</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Not required</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.AbstractCodeList</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Override <code class="docutils literal"><span class="pre">asMap</span></code></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Required</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.AbstractReloadableCodeList</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Override <code class="docutils literal"><span class="pre">retrieveMap</span></code></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>The codelist can be customized by directly implementing <code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.CodeList</span></code> and <code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.ReloadableCodeList</span></code> interfaces; however extending the abstract class provided in common library minimizes the implementation efforts.</p>
<p>Actual example of independent customization is shown below.
It illustrates a codelist for creating a list of current year and the next year.
(Example: If current year is 2013, it is stored in codelist in the order of “2013, 2014”.)</p>
<p><strong>Codelist class</strong></p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="nd">@Component</span><span class="o">(</span><span class="s">&quot;CL_YEAR&quot;</span><span class="o">)</span> <span class="c1">// (1)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DepYearCodeList</span> <span class="kd">extends</span> <span class="n">AbstractCodeList</span> <span class="o">{</span> <span class="c1">// (2)</span>

    <span class="nd">@Inject</span>
    <span class="n">JodaTimeDateFactory</span> <span class="n">dateFactory</span><span class="o">;</span> <span class="c1">// (3)</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="nf">asMap</span><span class="o">()</span> <span class="o">{</span>  <span class="c1">// (4)</span>
        <span class="n">DateTime</span> <span class="n">dateTime</span> <span class="o">=</span> <span class="n">dateFactory</span><span class="o">.</span><span class="na">newDateTime</span><span class="o">();</span>
        <span class="n">DateTime</span> <span class="n">nextYearDateTime</span> <span class="o">=</span> <span class="n">dateTime</span><span class="o">.</span><span class="na">plusYears</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>

        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">depYearMap</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkedHashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;();</span>

        <span class="n">String</span> <span class="n">thisYear</span> <span class="o">=</span> <span class="n">dateTime</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="s">&quot;Y&quot;</span><span class="o">);</span>
        <span class="n">String</span> <span class="n">nextYear</span> <span class="o">=</span> <span class="n">nextYearDateTime</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="s">&quot;Y&quot;</span><span class="o">);</span>
        <span class="n">depYearMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">thisYear</span><span class="o">,</span> <span class="n">thisYear</span><span class="o">);</span>
        <span class="n">depYearMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">nextYear</span><span class="o">,</span> <span class="n">nextYear</span><span class="o">);</span>

        <span class="k">return</span> <span class="n">Collections</span><span class="o">.</span><span class="na">unmodifiableMap</span><span class="o">(</span><span class="n">depYearMap</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Register the codelist as a component using <code class="docutils literal"><span class="pre">&#64;Component</span></code> annotation.</div>
<div class="line">By specifying <code class="docutils literal"><span class="pre">CL_YEAR</span></code> in Value, register the codelist as a component using the codelist intercept set in bean definition.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Inherit <code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.AbstractCodeList</span></code>.</div>
<div class="line">When creating the list of current year and next year, reloading is not necessary since it is created dynamically by calculating from system date.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.date.jodatime.JodaTimeDateFactory</span></code> creating the Date class of system date is injected.</div>
<div class="line">Current year and next year can be fetched using <code class="docutils literal"><span class="pre">JodaTimeDateFactory</span></code>.</div>
<div class="line">Class that implements <code class="docutils literal"><span class="pre">JodaTimeDateFactory</span></code> interface should be set in advance in bean definition file.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Override <code class="docutils literal"><span class="pre">asMap()</span></code> method and create the list of current year and next year.</div>
<div class="line">Implementation differs with every created codelist.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Example of jsp implementation</strong></p>
<div class="highlight-jsp"><div class="highlight"><pre><span></span><span class="nt">&lt;form:select</span> <span class="na">path=</span><span class="s">&quot;mostRecentYear&quot;</span> <span class="na">items=</span><span class="s">&quot;${CL_YEAR}&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (5) --&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">CL_YEAR</span></code> registered as component in items attribute should be specified in <code class="docutils literal"><span class="pre">${}</span></code> placeholder to fetch the corresponding codelist.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p><strong>Output HTML</strong></p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">select</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;mostRecentYear&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;mostRecentYear&quot;</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2013&quot;</span><span class="p">&gt;</span>2013<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2014&quot;</span><span class="p">&gt;</span>2014<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
</pre></div>
</div>
<p><strong>Output screen</strong></p>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/codelist_customizeCodelist.png"><img alt="customized codelist" src="../../_images/codelist_customizeCodelist.png" style="width: 10%;" /></a>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Implementation should be made thread-safe at the time of customizing the reloadable CodeList independently.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="appendix">
<h2><a class="toc-backref" href="#id45">4.8.4. Appendix</a><a class="headerlink" href="#appendix" title="Permalink to this headline">¶</a></h2>
<div class="section" id="setting-simplei18ncodelist">
<span id="aftercodelisti18n"></span><h3><a class="toc-backref" href="#id46">4.8.4.1. Setting SimpleI18nCodeList</a><a class="headerlink" href="#setting-simplei18ncodelist" title="Permalink to this headline">¶</a></h3>
<p>Apart from the settings mentioned in <a class="reference internal" href="#codelisti18n"><span class="std std-ref">How to use SimpleI18nCodeList</span></a>, SimpleI18nCodeList can be set in following 2 ways.
The respective setting methods are explained using the example of selectbox for selecting charges.</p>
<div class="section" id="set-java-util-map-key-code-value-value-label-for-each-locale-by-rows">
<h4><a class="toc-backref" href="#id47">4.8.4.1.1. Set <code class="docutils literal"><span class="pre">java.util.Map</span></code> (key = code value, value = label) for each locale by rows</a><a class="headerlink" href="#set-java-util-map-key-code-value-value-label-for-each-locale-by-rows" title="Permalink to this headline">¶</a></h4>
<p><strong>Definition of Bean definition file(xxx-codelist.xml)</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_I18N_PRICE&quot;</span>
    <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.i18n.SimpleI18nCodeList&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;rows&quot;</span><span class="nt">&gt;</span> <span class="c">&lt;!-- (1) --&gt;</span>
        <span class="nt">&lt;util:map&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;util:map&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;0&quot;</span> <span class="na">value=</span><span class="s">&quot;unlimited&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;10000&quot;</span> <span class="na">value=</span><span class="s">&quot;Less than \\10,000&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;20000&quot;</span> <span class="na">value=</span><span class="s">&quot;Less than \\20,000&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;30000&quot;</span> <span class="na">value=</span><span class="s">&quot;Less than \\30,000&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;40000&quot;</span> <span class="na">value=</span><span class="s">&quot;Less than \\40,000&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;50000&quot;</span> <span class="na">value=</span><span class="s">&quot;Less than \\50,000&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/util:map&gt;</span>
            <span class="nt">&lt;/entry&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;ja&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;util:map&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;0&quot;</span> <span class="na">value=</span><span class="s">&quot;unlimited&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;10000&quot;</span> <span class="na">value=</span><span class="s">&quot;10,000円以下&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;20000&quot;</span> <span class="na">value=</span><span class="s">&quot;20,000円以下&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;30000&quot;</span> <span class="na">value=</span><span class="s">&quot;30,000円以下&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;40000&quot;</span> <span class="na">value=</span><span class="s">&quot;40,000円以下&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;50000&quot;</span> <span class="na">value=</span><span class="s">&quot;50,000円以下&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/util:map&gt;</span>
            <span class="nt">&lt;/entry&gt;</span>
        <span class="nt">&lt;/util:map&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Set “Map of Map” for rows property. External Map key is <code class="docutils literal"><span class="pre">java.lang.Locale</span></code>.</div>
<div class="line">Internal Map key is a code value and value is a label corresponding to locale.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="set-java-util-map-key-locale-value-label-for-each-code-value-by-columns">
<h4><a class="toc-backref" href="#id48">4.8.4.1.2. Set <code class="docutils literal"><span class="pre">java.util.Map</span></code>(key = locale, value = label) for each code value by columns</a><a class="headerlink" href="#set-java-util-map-key-locale-value-label-for-each-code-value-by-columns" title="Permalink to this headline">¶</a></h4>
<p><strong>Definition of Bean definition file(xxx-codelist.xml)</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_I18N_PRICE&quot;</span>
    <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.i18n.SimpleI18nCodeList&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;columns&quot;</span><span class="nt">&gt;</span> <span class="c">&lt;!-- (1) --&gt;</span>
        <span class="nt">&lt;util:map&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;util:map&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;en&quot;</span> <span class="na">value=</span><span class="s">&quot;unlimited&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;ja&quot;</span> <span class="na">value=</span><span class="s">&quot;上限なし&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/util:map&gt;</span>
            <span class="nt">&lt;/entry&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;10000&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;util:map&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;en&quot;</span> <span class="na">value=</span><span class="s">&quot;Less than \\10,000&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;ja&quot;</span> <span class="na">value=</span><span class="s">&quot;10,000円以下&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/util:map&gt;</span>
            <span class="nt">&lt;/entry&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;20000&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;util:map&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;en&quot;</span> <span class="na">value=</span><span class="s">&quot;Less than \\20,000&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;ja&quot;</span> <span class="na">value=</span><span class="s">&quot;20,000円以下&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/util:map&gt;</span>
            <span class="nt">&lt;/entry&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;30000&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;util:map&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;en&quot;</span> <span class="na">value=</span><span class="s">&quot;Less than \\30,000&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;ja&quot;</span> <span class="na">value=</span><span class="s">&quot;30,000円以下&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/util:map&gt;</span>
            <span class="nt">&lt;/entry&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;40000&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;util:map&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;en&quot;</span> <span class="na">value=</span><span class="s">&quot;Less than \\40,000&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;ja&quot;</span> <span class="na">value=</span><span class="s">&quot;40,000円以下&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/util:map&gt;</span>
            <span class="nt">&lt;/entry&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;50000&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;util:map&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;en&quot;</span> <span class="na">value=</span><span class="s">&quot;Less than \\50,000&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;ja&quot;</span> <span class="na">value=</span><span class="s">&quot;50,000円以下&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/util:map&gt;</span>
            <span class="nt">&lt;/entry&gt;</span>
        <span class="nt">&lt;/util:map&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Set “Map of Map” for columns property. External Map key is a code value.</div>
<div class="line">Internal Map key is <code class="docutils literal"><span class="pre">java.lang.Locale</span></code> and value is a label corresponding to locale.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="variations-of-numberrangecodelist">
<span id="codelistappendixnumberrangecodelistvariation"></span><h3><a class="toc-backref" href="#id49">4.8.4.2. Variations of NumberRangeCodeList</a><a class="headerlink" href="#variations-of-numberrangecodelist" title="Permalink to this headline">¶</a></h3>
<div class="section" id="create-the-descending-numberrangecodelist">
<h4><a class="toc-backref" href="#id50">4.8.4.2.1. Create the Descending NumberRangeCodeList</a><a class="headerlink" href="#create-the-descending-numberrangecodelist" title="Permalink to this headline">¶</a></h4>
<p>Example of setting To value &lt; From value is shown below.</p>
<p><strong>Definition of Bean definition file(xxx-codelist.xml)</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_BIRTH_YEAR&quot;</span>
    <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.NumberRangeCodeList&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;from&quot;</span> <span class="na">value=</span><span class="s">&quot;2013&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (1) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;to&quot;</span> <span class="na">value=</span><span class="s">&quot;2000&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (2) --&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify the range start value. Specify a value greater than the one specified in “value” attribute of “to” property.</div>
<div class="line">As per this specification, display the values decreased in accordance with the interval in To-From range in descending order.</div>
<div class="line">Since interval is not set, default value 1 is applied.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify the range end value.</div>
<div class="line">In this example, since 2000 is specified as range end value; the value is reduced by 1 and stored in descending order from 2013 to 2000.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Example of jsp implementation</strong></p>
<div class="highlight-jsp"><div class="highlight"><pre><span></span><span class="nt">&lt;form:select</span> <span class="na">path=</span><span class="s">&quot;birthYear&quot;</span> <span class="na">items=</span><span class="s">&quot;${CL_BIRTH_YEAR}&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p><strong>Output HTML</strong></p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">select</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;birthYear&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;birthYear&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2013&quot;</span><span class="p">&gt;</span>2013<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2012&quot;</span><span class="p">&gt;</span>2012<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2011&quot;</span><span class="p">&gt;</span>2011<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2010&quot;</span><span class="p">&gt;</span>2010<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2009&quot;</span><span class="p">&gt;</span>2009<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2008&quot;</span><span class="p">&gt;</span>2008<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2007&quot;</span><span class="p">&gt;</span>2007<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2006&quot;</span><span class="p">&gt;</span>2006<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2005&quot;</span><span class="p">&gt;</span>2005<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2004&quot;</span><span class="p">&gt;</span>2004<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2003&quot;</span><span class="p">&gt;</span>2003<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2002&quot;</span><span class="p">&gt;</span>2002<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2001&quot;</span><span class="p">&gt;</span>2001<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2000&quot;</span><span class="p">&gt;</span>2000<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
</pre></div>
</div>
<p><strong>Output screen</strong></p>
<div class="figure">
<img alt="codelist numberrenge2" src="../../_images/codelist_numberrenge2.png" />
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="change-interval-of-numberrangecodelist">
<h4><a class="toc-backref" href="#id51">4.8.4.2.2. Change interval of NumberRangeCodeList</a><a class="headerlink" href="#change-interval-of-numberrangecodelist" title="Permalink to this headline">¶</a></h4>
<p>Example of setting interval value is shown below.</p>
<p><strong>Definition of Bean definition file(xxx-codelist.xml)</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_BULK_ORDER_QUANTITY_UNIT&quot;</span>
    <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.NumberRangeCodeList&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;from&quot;</span> <span class="na">value=</span><span class="s">&quot;10&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;to&quot;</span> <span class="na">value=</span><span class="s">&quot;50&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;interval&quot;</span> <span class="na">value=</span><span class="s">&quot;10&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (1) --&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify increment (decrement) value. Then, store the values obtained upon increasing (decreasing) the interval value within From-To range as codelist.</div>
<div class="line">In the above example, the values are stored in the order of <code class="docutils literal"><span class="pre">10</span></code>,<code class="docutils literal"><span class="pre">20</span></code>,<code class="docutils literal"><span class="pre">30</span></code>,<code class="docutils literal"><span class="pre">40</span></code>,<code class="docutils literal"><span class="pre">50</span></code> in the codelist.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Example of jsp implementation</strong></p>
<div class="highlight-jsp"><div class="highlight"><pre><span></span><span class="nt">&lt;form:select</span> <span class="na">path=</span><span class="s">&quot;quantity&quot;</span> <span class="na">items=</span><span class="s">&quot;${CL_BULK_ORDER_QUANTITY_UNIT}&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p><strong>Output HTML</strong></p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">select</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;quantity&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;quantity&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;10&quot;</span><span class="p">&gt;</span>10<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;20&quot;</span><span class="p">&gt;</span>20<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;30&quot;</span><span class="p">&gt;</span>30<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;40&quot;</span><span class="p">&gt;</span>40<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;50&quot;</span><span class="p">&gt;</span>50<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
</pre></div>
</div>
<p><strong>Output screen</strong></p>
<div class="figure">
<img alt="codelist numberrenge3" src="../../_images/codelist_numberrenge3.png" />
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If From-To value exceeds the specified range, then the value increased (decreased) in accordance with interval is not stored in the codelist.</p>
<p>i.e. in case of following definition,</p>
<blockquote>
<div><div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_BULK_ORDER_QUANTITY_UNIT&quot;</span>
    <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.NumberRangeCodeList&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;from&quot;</span> <span class="na">value=</span><span class="s">&quot;10&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;to&quot;</span> <span class="na">value=</span><span class="s">&quot;55&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;interval&quot;</span> <span class="na">value=</span><span class="s">&quot;10&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
</div></blockquote>
<p class="last">5 values of <code class="docutils literal"><span class="pre">10</span></code>,<code class="docutils literal"><span class="pre">20</span></code>,<code class="docutils literal"><span class="pre">30</span></code>,<code class="docutils literal"><span class="pre">40</span></code>,<code class="docutils literal"><span class="pre">50</span></code> are stored in the codelist.
The value of subsequent interval <code class="docutils literal"><span class="pre">60</span></code> and the range threshold value <code class="docutils literal"><span class="pre">55</span></code> are not stored in the codelist.</p>
</div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="FileUpload.html" title="4.9. File Upload"
             >next</a> |</li>
        <li class="right" >
          <a href="Internationalization.html" title="4.7. Internationalization"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.4.1.RELEASE documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >4. Web Application Development Features</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer">
      © Copyright 2013-2018, NTT DATA Corporation. © Copyright 2013-2018, NTT Corporation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.6.3.Theme is <a href="http://github.com/vimalkvn/solar-theme">Solar</a>
    </div>
    
    <script>
    
    $(function() {
    	var $sidebar	= $('.sphinxsidebar'),
    		$window		= $(window),
    		offset		= $sidebar.offset(),
    		topPadding	= 3,
    		$scroll		= $('#scroll');
    	
    	$window.scroll(function() {
    		if ($scroll.is(':checked')) {
				if ($window.scrollTop() > offset.top) {
					$sidebar.stop().animate({
						marginTop:$window.scrollTop() - offset.top + topPadding
					});
				} else {
					$sidebar.stop().animate({
						marginTop:0
					});
				}
			}
		});
    	
    	var $navList = $('ul:first', $sidebar);
    	$('li:first', $navList).addClass('open');
    	
    	$navList.treeview({
    		persist: "location",
    		collapsed: true,
    		unique: false
    	});
    	
	});
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-46550814-1', 'terasolunaorg.github.io');
    ga('send', 'pageview');
    </script>
  </body>
</html>