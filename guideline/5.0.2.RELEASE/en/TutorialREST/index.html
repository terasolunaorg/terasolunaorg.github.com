<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>7.1. Tutorial (Todo Application REST) &mdash; TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.0.2.RELEASE documentation</title>
    
    <link rel="stylesheet" href="../_static/solar.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '5.0.2.RELEASE',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.0.2.RELEASE documentation" href="../index.html" />
    <link rel="up" title="7. Appendix" href="../Appendix/index.html" />
    <link rel="next" title="7.2. Create a New Project from Blank Project" href="../Appendix/CreateProjectFromBlank.html" />
    <link rel="prev" title="7. Appendix" href="../Appendix/index.html" /><script src="../_static/jquery.treeview.js" type="text/javascript"></script>
<!-- <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro|Open+Sans:300italic,400italic,700italic,400,300,700' rel='stylesheet' type='text/css'> -->
<link href="../_static/solarized-dark.css" rel="stylesheet">
<link href="../_static/jquery.treeview.css" rel="stylesheet">
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../Appendix/CreateProjectFromBlank.html" title="7.2. Create a New Project from Blank Project"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../Appendix/index.html" title="7. Appendix"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.0.2.RELEASE documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../Appendix/index.html" accesskey="U">7. Appendix</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><label><input id="scroll" type="checkbox" checked> scroll sidebar</label>

  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">7.1. Tutorial (Todo Application REST)</a><ul>
<li><a class="reference internal" href="#introduction">7.1.1. Introduction</a><ul>
<li><a class="reference internal" href="#points-to-study-in-this-tutorial">7.1.1.1. Points to study in this tutorial</a></li>
<li><a class="reference internal" href="#target-readers">7.1.1.2. Target readers</a></li>
<li><a class="reference internal" href="#verification-environment">7.1.1.3. Verification environment</a></li>
</ul>
</li>
<li><a class="reference internal" href="#environment-creation">7.1.2. Environment creation</a><ul>
<li><a class="reference internal" href="#install-dhc">7.1.2.1. Install DHC</a></li>
<li><a class="reference internal" href="#project-creation">7.1.2.2. Project creation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rest-api-creation">7.1.3. REST API creation</a><ul>
<li><a class="reference internal" href="#api-specification">7.1.3.1. API specification</a><ul>
<li><a class="reference internal" href="#get-todos">7.1.3.1.1. GET Todos</a></li>
<li><a class="reference internal" href="#post-todos">7.1.3.1.2. POST Todos</a></li>
<li><a class="reference internal" href="#get-todo">7.1.3.1.3. GET Todo</a></li>
<li><a class="reference internal" href="#put-todo">7.1.3.1.4. PUT Todo</a></li>
<li><a class="reference internal" href="#delete-todo">7.1.3.1.5. DELETE Todo</a></li>
<li><a class="reference internal" href="#error-response">7.1.3.1.6. Error Response</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dispatcherservlet-for-rest-api">7.1.3.2. DispatcherServlet for REST API</a><ul>
<li><a class="reference internal" href="#modification-of-web-xml">7.1.3.2.1. Modification of web.xml</a></li>
<li><a class="reference internal" href="#creation-of-spring-mvc-rest-xml">7.1.3.2.2. Creation of spring-mvc-rest.xml</a></li>
</ul>
</li>
<li><a class="reference internal" href="#definition-of-spring-security-for-rest-api">7.1.3.3. Definition of Spring Security for REST API</a></li>
<li><a class="reference internal" href="#creation-of-rest-api-package">7.1.3.4. Creation of REST API package</a></li>
<li><a class="reference internal" href="#creation-of-resource-class">7.1.3.5. Creation of Resource class</a></li>
<li><a class="reference internal" href="#creation-of-controller-class">7.1.3.6. Creation of Controller class</a><ul>
<li><a class="reference internal" href="#implementation-of-get-todos">7.1.3.6.1. Implementation of GET Todos</a></li>
<li><a class="reference internal" href="#implementation-of-post-todos">7.1.3.6.2. Implementation of POST Todos</a></li>
<li><a class="reference internal" href="#implementation-of-get-todo">7.1.3.6.3. Implementation of GET Todo</a></li>
<li><a class="reference internal" href="#implementation-of-put-todo">7.1.3.6.4. Implementation of PUT Todo</a></li>
<li><a class="reference internal" href="#implementation-of-delete-todo">7.1.3.6.5. Implementation of DELETE Todo</a></li>
</ul>
</li>
<li><a class="reference internal" href="#implementation-of-exception-handling">7.1.3.7. Implementation of exception handling</a><ul>
<li><a class="reference internal" href="#change-domain-layer-implementation">7.1.3.7.1. Change Domain layer implementation</a></li>
<li><a class="reference internal" href="#error-message-definition">7.1.3.7.2. Error message definition</a></li>
<li><a class="reference internal" href="#create-a-package-that-contains-the-error-handling-class">7.1.3.7.3. Create a package that contains the error handling class</a></li>
<li><a class="reference internal" href="#creating-rest-api-error-handling-class">7.1.3.7.4. Creating REST API error handling class</a></li>
<li><a class="reference internal" href="#creating-javabean-for-holding-the-rest-api-error-information">7.1.3.7.5. Creating JavaBean for holding the REST API error information</a></li>
<li><a class="reference internal" href="#implementation-of-putting-error-information-to-the-http-response-body">7.1.3.7.6. Implementation of putting error information to the HTTP response BODY</a></li>
<li><a class="reference internal" href="#error-handling-of-input-errors">7.1.3.7.7. Error handling of Input errors</a></li>
<li><a class="reference internal" href="#business-exception-error-handling">7.1.3.7.8. Business exception error handling</a></li>
<li><a class="reference internal" href="#resource-not-found-exception-error-handling">7.1.3.7.9. Resource not found exception error handling</a></li>
<li><a class="reference internal" href="#system-exception-error-handling">7.1.3.7.10. System exception error handling</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#in-the-end">7.1.4. In the end...</a></li>
</ul>
</li>
</ul>


  <h4>Previous topic</h4>
  <p class="topless"><a href="../Appendix/index.html"
                        title="previous chapter">7. Appendix</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../Appendix/CreateProjectFromBlank.html"
                        title="next chapter">7.2. Create a New Project from Blank Project</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/TutorialREST/index.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="tutorial-todo-application-rest">
<h1>7.1. Tutorial (Todo Application REST)<a class="headerlink" href="#tutorial-todo-application-rest" title="Permalink to this headline">Â¶</a></h1>
<div class="contents local topic" id="index">
<p class="topic-title first">Index</p>
<ul class="simple">
<li><a class="reference internal" href="#introduction" id="id1">Introduction</a><ul>
<li><a class="reference internal" href="#points-to-study-in-this-tutorial" id="id2">Points to study in this tutorial</a></li>
<li><a class="reference internal" href="#target-readers" id="id3">Target readers</a></li>
<li><a class="reference internal" href="#verification-environment" id="id4">Verification environment</a></li>
</ul>
</li>
<li><a class="reference internal" href="#environment-creation" id="id5">Environment creation</a><ul>
<li><a class="reference internal" href="#install-dhc" id="id6">Install DHC</a></li>
<li><a class="reference internal" href="#project-creation" id="id7">Project creation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rest-api-creation" id="id8">REST API creation</a><ul>
<li><a class="reference internal" href="#api-specification" id="id9">API specification</a><ul>
<li><a class="reference internal" href="#get-todos" id="id10">GET Todos</a></li>
<li><a class="reference internal" href="#post-todos" id="id11">POST Todos</a></li>
<li><a class="reference internal" href="#get-todo" id="id12">GET Todo</a></li>
<li><a class="reference internal" href="#put-todo" id="id13">PUT Todo</a></li>
<li><a class="reference internal" href="#delete-todo" id="id14">DELETE Todo</a></li>
<li><a class="reference internal" href="#error-response" id="id15">Error Response</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dispatcherservlet-for-rest-api" id="id16">DispatcherServlet for REST API</a><ul>
<li><a class="reference internal" href="#modification-of-web-xml" id="id17">Modification of web.xml</a></li>
<li><a class="reference internal" href="#creation-of-spring-mvc-rest-xml" id="id18">Creation of spring-mvc-rest.xml</a></li>
</ul>
</li>
<li><a class="reference internal" href="#definition-of-spring-security-for-rest-api" id="id19">Definition of Spring Security for REST API</a></li>
<li><a class="reference internal" href="#creation-of-rest-api-package" id="id20">Creation of REST API package</a></li>
<li><a class="reference internal" href="#creation-of-resource-class" id="id21">Creation of Resource class</a></li>
<li><a class="reference internal" href="#creation-of-controller-class" id="id22">Creation of Controller class</a><ul>
<li><a class="reference internal" href="#implementation-of-get-todos" id="id23">Implementation of GET Todos</a></li>
<li><a class="reference internal" href="#implementation-of-post-todos" id="id24">Implementation of POST Todos</a></li>
<li><a class="reference internal" href="#implementation-of-get-todo" id="id25">Implementation of GET Todo</a></li>
<li><a class="reference internal" href="#implementation-of-put-todo" id="id26">Implementation of PUT Todo</a></li>
<li><a class="reference internal" href="#implementation-of-delete-todo" id="id27">Implementation of DELETE Todo</a></li>
</ul>
</li>
<li><a class="reference internal" href="#implementation-of-exception-handling" id="id28">Implementation of exception handling</a><ul>
<li><a class="reference internal" href="#change-domain-layer-implementation" id="id29">Change Domain layer implementation</a></li>
<li><a class="reference internal" href="#error-message-definition" id="id30">Error message definition</a></li>
<li><a class="reference internal" href="#create-a-package-that-contains-the-error-handling-class" id="id31">Create a package that contains the error handling class</a></li>
<li><a class="reference internal" href="#creating-rest-api-error-handling-class" id="id32">Creating REST API error handling class</a></li>
<li><a class="reference internal" href="#creating-javabean-for-holding-the-rest-api-error-information" id="id33">Creating JavaBean for holding the REST API error information</a></li>
<li><a class="reference internal" href="#implementation-of-putting-error-information-to-the-http-response-body" id="id34">Implementation of putting error information to the HTTP response BODY</a></li>
<li><a class="reference internal" href="#error-handling-of-input-errors" id="id35">Error handling of Input errors</a></li>
<li><a class="reference internal" href="#business-exception-error-handling" id="id36">Business exception error handling</a></li>
<li><a class="reference internal" href="#resource-not-found-exception-error-handling" id="id37">Resource not found exception error handling</a></li>
<li><a class="reference internal" href="#system-exception-error-handling" id="id38">System exception error handling</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#in-the-end" id="id39">In the end...</a></li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id1">7.1.1. Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="points-to-study-in-this-tutorial">
<h3><a class="toc-backref" href="#id2">7.1.1.1. Points to study in this tutorial</a><a class="headerlink" href="#points-to-study-in-this-tutorial" title="Permalink to this headline">Â¶</a></h3>
<ul class="simple">
<li>Basic RESTful web service development using TERASOLUNA Server Framework for Java (5.x)</li>
</ul>
</div>
<div class="section" id="target-readers">
<h3><a class="toc-backref" href="#id3">7.1.1.2. Target readers</a><a class="headerlink" href="#target-readers" title="Permalink to this headline">Â¶</a></h3>
<ul class="simple">
<li>Those who have Implemented the <a class="reference internal" href="../TutorialTodo/index.html"><em>Tutorial (Todo Application)</em></a>.</li>
</ul>
</div>
<div class="section" id="verification-environment">
<h3><a class="toc-backref" href="#id4">7.1.1.3. Verification environment</a><a class="headerlink" href="#verification-environment" title="Permalink to this headline">Â¶</a></h3>
<div class="line-block">
<div class="line">In this tutorial, operations are verified on following environment.</div>
<div class="line">In order to use the advanced features of Google Chrome, Google Chrome used as a Web Browser for REST Client.</div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Product</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>REST Client</td>
<td><a class="reference external" href="https://chrome.google.com/webstore/detail/dhc-resthttp-api-client/aejoelaoggembcahagimdiliamlcdmfm">DHC(aka Dev HTTP Client)</a> 0.7.11</td>
</tr>
<tr class="row-odd"><td>Product other than the above</td>
<td>Similar to <a class="reference internal" href="../TutorialTodo/index.html"><em>Tutorial (Todo Application)</em></a></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="environment-creation">
<h2><a class="toc-backref" href="#id5">7.1.2. Environment creation</a><a class="headerlink" href="#environment-creation" title="Permalink to this headline">Â¶</a></h2>
<p>Assumes that Java, STS, Maven, Google Chrome are already installed since the <a class="reference internal" href="../TutorialTodo/index.html"><em>Tutorial (Todo Application)</em></a> is implemented.</p>
<div class="section" id="install-dhc">
<h3><a class="toc-backref" href="#id6">7.1.2.1. Install DHC</a><a class="headerlink" href="#install-dhc" title="Permalink to this headline">Â¶</a></h3>
<p>As a REST client, install [DHC] advanced features of Google Chrome.</p>
<p>Select [Tools] -&gt; [Extensions] of Chrome browser.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/install-dev-http-client1.png"><img alt="../_images/install-dev-http-client1.png" src="../_images/install-dev-http-client1.png" style="width: 80%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Click [Get more extensions] link.</p>
<div class="figure">
<img alt="../_images/install-dev-http-client2.png" src="../_images/install-dev-http-client2.png" />
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Search by entering [dev http client] in search form.</p>
<div class="figure">
<img alt="../_images/install-dev-http-client3.png" src="../_images/install-dev-http-client3.png" />
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Click the [+ FREE] button of Dev HTTP Client.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/install-dev-http-client4.png"><img alt="../_images/install-dev-http-client4.png" src="../_images/install-dev-http-client4.png" style="width: 80%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Click [Add] button.</p>
<div class="figure">
<img alt="../_images/install-dev-http-client5.png" src="../_images/install-dev-http-client5.png" />
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>When you open the application list (Open by specifying [chrome://apps/] in your browser address bar) of Chrome, DHC has been added.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/install-dev-http-client6.png"><img alt="../_images/install-dev-http-client6.png" src="../_images/install-dev-http-client6.png" style="width: 40%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">Click the DHC.</div>
<div class="line">If the following screen appears, the installation is completed.</div>
<div class="line">This screen can also be opened by entering the [chrome-extension://aejoelaoggembcahagimdiliamlcdmfm/dhc.html] in the address bar of the browser.</div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../_images/install-dev-http-client7.png"><img alt="../_images/install-dev-http-client7.png" src="../_images/install-dev-http-client7.png" style="width: 80%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="project-creation">
<h3><a class="toc-backref" href="#id7">7.1.2.2. Project creation</a><a class="headerlink" href="#project-creation" title="Permalink to this headline">Â¶</a></h3>
<p>In this tutorial,
the RESTful Web Services are created for [<a class="reference internal" href="../TutorialTodo/index.html"><em>Tutorial (Todo Application)</em></a>].</p>
<p>Therefore, if [<a class="reference internal" href="../TutorialTodo/index.html"><em>Tutorial (Todo Application)</em></a>] project is not exists,
re-create project by executing [<a class="reference internal" href="../TutorialTodo/index.html"><em>Tutorial (Todo Application)</em></a>].</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If project is re-created by executing [<a class="reference internal" href="../TutorialTodo/index.html"><em>Tutorial (Todo Application)</em></a>],
it is possible to proceed further this tutorial by performing re-creation till the domain layer creation.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="rest-api-creation">
<h2><a class="toc-backref" href="#id8">7.1.3. REST API creation</a><a class="headerlink" href="#rest-api-creation" title="Permalink to this headline">Â¶</a></h2>
<p>In this tutorial, creating REST API for publishing the data on Web which are managed in the todo table (here onwards called as [Todo Resources]).</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="10%" />
<col width="30%" />
<col width="15%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><div class="first last line-block">
<div class="line">API name</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">HTTP</div>
<div class="line">method</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">Path</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">Status</div>
<div class="line">code</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">Description</div>
</div>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">GET Todos</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">GET</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">/api/v1/todos</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">200</div>
<div class="line">(OK)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Fetch all records of Todo Resource.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">POST Todos</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">POST</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">/api/v1/todos</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">201</div>
<div class="line">(Created)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Create new Todo Resource.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">GET Todo</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">GET</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">/api/v1/todos/{todoId}</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">200</div>
<div class="line">(OK)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Fetch one record of Todo Resource.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">PUT Todo</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">PUT</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">/api/v1/todos/{todoId}</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">200</div>
<div class="line">(OK)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Update Todo Resource in completed status</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">DELETE Todo</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">DELETE</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">/api/v1/todos/{todoId}</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">204</div>
<div class="line">(No Content)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Delete Todo Resource.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>The <code class="docutils literal"><span class="pre">{todoId}</span></code> included in path is called as path variable and can deal with any changeable value.
The <code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/v1/todos/123</span></code> and <code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/v1/todos/456</span></code> can be handle with same API using the path variable.</p>
<p class="last">In this tutorial, We are dealing with ID (Todo ID) as the path variable in order to uniquely identifying the Todo.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="api-specification">
<h3><a class="toc-backref" href="#id9">7.1.3.1. API specification</a><a class="headerlink" href="#api-specification" title="Permalink to this headline">Â¶</a></h3>
<div class="line-block">
<div class="line">Indicated the REST API Interface specifications using specific example of the HTTP requests and responses in this tutorial.</div>
<div class="line">HTTP headers which are not essential have been excluded from the example.</div>
</div>
<div class="section" id="get-todos">
<h4><a class="toc-backref" href="#id10">7.1.3.1.1. GET Todos</a><a class="headerlink" href="#get-todos" title="Permalink to this headline">Â¶</a></h4>
<p><strong>[Request]</strong></p>
<div class="highlight-bash"><div class="highlight"><pre>&gt; GET /todo/api/v1/todos HTTP/1.1
</pre></div>
</div>
<p><strong>[Response]</strong></p>
<p>Return list of created Todo Resource in JSON format.</p>
<div class="highlight-bash"><div class="highlight"><pre>&lt; HTTP/1.1 <span class="m">200</span> OK
&lt; Content-Type: application/json<span class="p">;</span><span class="nv">charset</span><span class="o">=</span>UTF-8
&lt;
<span class="o">[{</span><span class="s2">&quot;todoId&quot;</span>:<span class="s2">&quot;9aef3ee3-30d4-4a7c-be4a-bc184ca1d558&quot;</span>,<span class="s2">&quot;todoTitle&quot;</span>:<span class="s2">&quot;Hello World!&quot;</span>,<span class="s2">&quot;finished&quot;</span>:false,<span class="s2">&quot;createdAt&quot;</span>:<span class="s2">&quot;2014-02-25T02:21:48.493+0000&quot;</span><span class="o">}]</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="post-todos">
<h4><a class="toc-backref" href="#id11">7.1.3.1.2. POST Todos</a><a class="headerlink" href="#post-todos" title="Permalink to this headline">Â¶</a></h4>
<p><strong>[Request]</strong></p>
<p>Specify newly creation Todo Resource content (Title) in JSON format.</p>
<div class="highlight-bash"><div class="highlight"><pre>&gt; POST /todo/api/v1/todos HTTP/1.1
&gt; Content-Type: application/json
&gt; Content-Length: 29
&gt;
<span class="o">{</span><span class="s2">&quot;todoTitle&quot;</span>: <span class="s2">&quot;Study Spring&quot;</span><span class="o">}</span>
</pre></div>
</div>
<p><strong>[Response]</strong></p>
<p>Return created Todo Resource in JSON format.</p>
<div class="highlight-bash"><div class="highlight"><pre>&lt; HTTP/1.1 <span class="m">201</span> Created
&lt; Content-Type: application/json<span class="p">;</span><span class="nv">charset</span><span class="o">=</span>UTF-8
&lt;
<span class="o">{</span><span class="s2">&quot;todoId&quot;</span>:<span class="s2">&quot;d6101d61-b22c-48ee-9110-e106af6a1404&quot;</span>,<span class="s2">&quot;todoTitle&quot;</span>:<span class="s2">&quot;Study Spring&quot;</span>,<span class="s2">&quot;finished&quot;</span>:false,<span class="s2">&quot;createdAt&quot;</span>:<span class="s2">&quot;2014-02-25T04:05:58.752+0000&quot;</span><span class="o">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="get-todo">
<h4><a class="toc-backref" href="#id12">7.1.3.1.3. GET Todo</a><a class="headerlink" href="#get-todo" title="Permalink to this headline">Â¶</a></h4>
<p><strong>[Request]</strong></p>
<div class="line-block">
<div class="line">Specify ID of the Todo Resource in [<code class="docutils literal"><span class="pre">todoId</span></code>] path variable that you want to fetch.</div>
<div class="line">In below example, <code class="docutils literal"><span class="pre">9aef3ee3-30d4-4a7c-be4a-bc184ca1d558</span></code> is specified in [<code class="docutils literal"><span class="pre">todoId</span></code>] path variable.</div>
</div>
<div class="highlight-bash"><div class="highlight"><pre>&gt; GET /todo/api/v1/todos/9aef3ee3-30d4-4a7c-be4a-bc184ca1d558 HTTP/1.1
</pre></div>
</div>
<p><strong>[Response]</strong></p>
<p>Return Todo Resource in JSON format that matches with the [<code class="docutils literal"><span class="pre">todoId</span></code>] path variable.</p>
<div class="highlight-bash"><div class="highlight"><pre>&lt; HTTP/1.1 <span class="m">200</span> OK
&lt; Content-Type: application/json<span class="p">;</span><span class="nv">charset</span><span class="o">=</span>UTF-8
&lt;
<span class="o">{</span><span class="s2">&quot;todoId&quot;</span>:<span class="s2">&quot;9aef3ee3-30d4-4a7c-be4a-bc184ca1d558&quot;</span>,<span class="s2">&quot;todoTitle&quot;</span>:<span class="s2">&quot;Hello World!&quot;</span>,<span class="s2">&quot;finished&quot;</span>:false,<span class="s2">&quot;createdAt&quot;</span>:<span class="s2">&quot;2014-02-25T02:21:48.493+0000&quot;</span><span class="o">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="put-todo">
<h4><a class="toc-backref" href="#id13">7.1.3.1.4. PUT Todo</a><a class="headerlink" href="#put-todo" title="Permalink to this headline">Â¶</a></h4>
<p><strong>[Request]</strong></p>
<div class="line-block">
<div class="line">Specify ID of the Todo Resource in [<code class="docutils literal"><span class="pre">todoId</span></code>] path variable that you want to update.</div>
<div class="line">In the PUT Todo, interface specification does not receive the request BODY because Todo Resource is only updating into completion state.</div>
</div>
<div class="highlight-bash"><div class="highlight"><pre>&gt; PUT /todo/api/v1/todos/9aef3ee3-30d4-4a7c-be4a-bc184ca1d558 HTTP/1.1
</pre></div>
</div>
<p><strong>[Response]</strong></p>
<p>Return Todo Resource in JSON format that matches with the [<code class="docutils literal"><span class="pre">todoId</span></code>] path variable after updating in completed status (<code class="docutils literal"><span class="pre">true</span></code> of <code class="docutils literal"><span class="pre">finished</span></code> field).</p>
<div class="highlight-bash"><div class="highlight"><pre>&lt; HTTP/1.1 <span class="m">200</span> OK
&lt; Content-Type: application/json<span class="p">;</span><span class="nv">charset</span><span class="o">=</span>UTF-8
&lt;
<span class="o">{</span><span class="s2">&quot;todoId&quot;</span>:<span class="s2">&quot;9aef3ee3-30d4-4a7c-be4a-bc184ca1d558&quot;</span>,<span class="s2">&quot;todoTitle&quot;</span>:<span class="s2">&quot;Hello World!&quot;</span>,<span class="s2">&quot;finished&quot;</span>:true,<span class="s2">&quot;createdAt&quot;</span>:<span class="s2">&quot;2014-02-25T02:21:48.493+0000&quot;</span><span class="o">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="delete-todo">
<h4><a class="toc-backref" href="#id14">7.1.3.1.5. DELETE Todo</a><a class="headerlink" href="#delete-todo" title="Permalink to this headline">Â¶</a></h4>
<p><strong>[Request]</strong></p>
<p>Specify ID of the Todo Resource in [<code class="docutils literal"><span class="pre">todoId</span></code>] path variable that you want to delete.</p>
<div class="highlight-bash"><div class="highlight"><pre>&gt; DELETE /todo/api/v1/todos/9aef3ee3-30d4-4a7c-be4a-bc184ca1d558 HTTP/1.1
</pre></div>
</div>
<p><strong>[Response]</strong></p>
<p>In the DELETE Todo, since the Todo Resource is deleted and resource that can return is no longer exists, interface specification does not return the response BODY.</p>
<div class="highlight-bash"><div class="highlight"><pre>&lt; HTTP/1.1 <span class="m">204</span> No Content
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="error-response">
<h4><a class="toc-backref" href="#id15">7.1.3.1.6. Error Response</a><a class="headerlink" href="#error-response" title="Permalink to this headline">Â¶</a></h4>
<div class="line-block">
<div class="line">Return error in JSON format in case of any error occurs in REST API.</div>
<div class="line">The response specification of typical errors are described below.</div>
<div class="line">Error patterns other than the below are also exists but description in the tutorial are omitted.</div>
</div>
<p>In the <a class="reference internal" href="../TutorialTodo/index.html"><em>Tutorial (Todo Application)</em></a>, error messages are hardcoded in the program but in this tutorial, it is modified such a way that the error messages are retrieved from the property file based on error code.</p>
<p><strong>[Response specification at the time of input check error]</strong></p>
<div class="highlight-bash"><div class="highlight"><pre>&lt; HTTP/1.1 <span class="m">400</span> Bad Request
&lt; Content-Type: application/json<span class="p">;</span><span class="nv">charset</span><span class="o">=</span>UTF-8
&lt;
<span class="o">{</span><span class="s2">&quot;code&quot;</span>:<span class="s2">&quot;E400&quot;</span>,<span class="s2">&quot;message&quot;</span>:<span class="s2">&quot;[E400] The requested Todo contains invalid values.&quot;</span>,<span class="s2">&quot;details&quot;</span>:<span class="o">[{</span><span class="s2">&quot;code&quot;</span>:<span class="s2">&quot;NotNull&quot;</span>,<span class="s2">&quot;message&quot;</span>:<span class="s2">&quot;todoTitle may not be null.&quot;</span>,target:<span class="s2">&quot;todoTitle&quot;</span><span class="o">}]}</span>
</pre></div>
</div>
<p><strong>[Response specification at the time of business error]</strong></p>
<div class="highlight-bash"><div class="highlight"><pre>&lt; HTTP/1.1 <span class="m">409</span> Conflict
&lt; Content-Type: application/json<span class="p">;</span><span class="nv">charset</span><span class="o">=</span>UTF-8
&lt;
<span class="o">{</span><span class="s2">&quot;code&quot;</span>:<span class="s2">&quot;E002&quot;</span>,<span class="s2">&quot;message&quot;</span>:<span class="s2">&quot;[E002] The requested Todo is already finished. (id=353fb5db-151a-4696-9b4a-b958358a5ab3)&quot;</span><span class="o">}</span>
</pre></div>
</div>
<p><strong>[Response specification at the time of resources undetected]</strong></p>
<div class="highlight-bash"><div class="highlight"><pre>&lt; HTTP/1.1 <span class="m">404</span> Not Found
&lt; Content-Type: application/json<span class="p">;</span><span class="nv">charset</span><span class="o">=</span>UTF-8
&lt;
<span class="o">{</span><span class="s2">&quot;code&quot;</span>:<span class="s2">&quot;E404&quot;</span>,<span class="s2">&quot;message&quot;</span>:<span class="s2">&quot;[E404] The requested Todo is not found. (id=353fb5db-151a-4696-9b4a-b958358a5ab2)&quot;</span><span class="o">}</span>
</pre></div>
</div>
<p><strong>[Response specification at the time of system error]</strong></p>
<div class="highlight-bash"><div class="highlight"><pre>&lt; HTTP/1.1 <span class="m">500</span> Internal Server Error
&lt; Content-Type: application/json<span class="p">;</span><span class="nv">charset</span><span class="o">=</span>UTF-8
&lt;
<span class="o">{</span><span class="s2">&quot;code&quot;</span>:<span class="s2">&quot;E500&quot;</span>,<span class="s2">&quot;message&quot;</span>:<span class="s2">&quot;[E500] System error occurred.&quot;</span><span class="o">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="dispatcherservlet-for-rest-api">
<h3><a class="toc-backref" href="#id16">7.1.3.2. DispatcherServlet for REST API</a><a class="headerlink" href="#dispatcherservlet-for-rest-api" title="Permalink to this headline">Â¶</a></h3>
<p>First, add the definition of <code class="docutils literal"><span class="pre">DispatcherServlet</span></code> for processing the REST API request.</p>
<div class="section" id="modification-of-web-xml">
<h4><a class="toc-backref" href="#id17">7.1.3.2.1. Modification of web.xml</a><a class="headerlink" href="#modification-of-web-xml" title="Permalink to this headline">Â¶</a></h4>
<div class="line-block">
<div class="line">Add configuration pertaining to REST API.</div>
<div class="line"><code class="docutils literal"><span class="pre">src/main/webapp/WEB-INF/web.xml</span></code></div>
</div>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;web-app</span> <span class="na">xmlns=</span><span class="s">&quot;http://java.sun.com/xml/ns/javaee&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;</span>
    <span class="na">version=</span><span class="s">&quot;3.0&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;listener&gt;</span>
        <span class="nt">&lt;listener-class&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="nt">&lt;/listener-class&gt;</span>
    <span class="nt">&lt;/listener&gt;</span>
    <span class="nt">&lt;listener&gt;</span>
        <span class="nt">&lt;listener-class&gt;</span>org.terasoluna.gfw.web.logging.HttpSessionEventLoggingListener<span class="nt">&lt;/listener-class&gt;</span>
    <span class="nt">&lt;/listener&gt;</span>
    <span class="nt">&lt;context-param&gt;</span>
        <span class="nt">&lt;param-name&gt;</span>contextConfigLocation<span class="nt">&lt;/param-name&gt;</span>
        <span class="c">&lt;!-- Root ApplicationContext --&gt;</span>
        <span class="nt">&lt;param-value&gt;</span>
            classpath*:META-INF/spring/applicationContext.xml
            classpath*:META-INF/spring/spring-security.xml
        <span class="nt">&lt;/param-value&gt;</span>
    <span class="nt">&lt;/context-param&gt;</span>

    <span class="nt">&lt;filter&gt;</span>
        <span class="nt">&lt;filter-name&gt;</span>MDCClearFilter<span class="nt">&lt;/filter-name&gt;</span>
        <span class="nt">&lt;filter-class&gt;</span>org.terasoluna.gfw.web.logging.mdc.MDCClearFilter<span class="nt">&lt;/filter-class&gt;</span>
    <span class="nt">&lt;/filter&gt;</span>
    <span class="nt">&lt;filter-mapping&gt;</span>
        <span class="nt">&lt;filter-name&gt;</span>MDCClearFilter<span class="nt">&lt;/filter-name&gt;</span>
        <span class="nt">&lt;url-pattern&gt;</span>/*<span class="nt">&lt;/url-pattern&gt;</span>
    <span class="nt">&lt;/filter-mapping&gt;</span>

    <span class="nt">&lt;filter&gt;</span>
        <span class="nt">&lt;filter-name&gt;</span>exceptionLoggingFilter<span class="nt">&lt;/filter-name&gt;</span>
        <span class="nt">&lt;filter-class&gt;</span>org.springframework.web.filter.DelegatingFilterProxy<span class="nt">&lt;/filter-class&gt;</span>
    <span class="nt">&lt;/filter&gt;</span>
    <span class="nt">&lt;filter-mapping&gt;</span>
        <span class="nt">&lt;filter-name&gt;</span>exceptionLoggingFilter<span class="nt">&lt;/filter-name&gt;</span>
        <span class="nt">&lt;url-pattern&gt;</span>/*<span class="nt">&lt;/url-pattern&gt;</span>
    <span class="nt">&lt;/filter-mapping&gt;</span>

    <span class="nt">&lt;filter&gt;</span>
        <span class="nt">&lt;filter-name&gt;</span>XTrackMDCPutFilter<span class="nt">&lt;/filter-name&gt;</span>
        <span class="nt">&lt;filter-class&gt;</span>org.terasoluna.gfw.web.logging.mdc.XTrackMDCPutFilter<span class="nt">&lt;/filter-class&gt;</span>
    <span class="nt">&lt;/filter&gt;</span>
    <span class="nt">&lt;filter-mapping&gt;</span>
        <span class="nt">&lt;filter-name&gt;</span>XTrackMDCPutFilter<span class="nt">&lt;/filter-name&gt;</span>
        <span class="nt">&lt;url-pattern&gt;</span>/*<span class="nt">&lt;/url-pattern&gt;</span>
    <span class="nt">&lt;/filter-mapping&gt;</span>

    <span class="nt">&lt;filter&gt;</span>
        <span class="nt">&lt;filter-name&gt;</span>CharacterEncodingFilter<span class="nt">&lt;/filter-name&gt;</span>
        <span class="nt">&lt;filter-class&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="nt">&lt;/filter-class&gt;</span>
        <span class="nt">&lt;init-param&gt;</span>
            <span class="nt">&lt;param-name&gt;</span>encoding<span class="nt">&lt;/param-name&gt;</span>
            <span class="nt">&lt;param-value&gt;</span>UTF-8<span class="nt">&lt;/param-value&gt;</span>
        <span class="nt">&lt;/init-param&gt;</span>
        <span class="nt">&lt;init-param&gt;</span>
            <span class="nt">&lt;param-name&gt;</span>forceEncoding<span class="nt">&lt;/param-name&gt;</span>
            <span class="nt">&lt;param-value&gt;</span>true<span class="nt">&lt;/param-value&gt;</span>
        <span class="nt">&lt;/init-param&gt;</span>
    <span class="nt">&lt;/filter&gt;</span>
    <span class="nt">&lt;filter-mapping&gt;</span>
        <span class="nt">&lt;filter-name&gt;</span>CharacterEncodingFilter<span class="nt">&lt;/filter-name&gt;</span>
        <span class="nt">&lt;url-pattern&gt;</span>/*<span class="nt">&lt;/url-pattern&gt;</span>
    <span class="nt">&lt;/filter-mapping&gt;</span>

    <span class="nt">&lt;filter&gt;</span>
        <span class="nt">&lt;filter-name&gt;</span>springSecurityFilterChain<span class="nt">&lt;/filter-name&gt;</span>
        <span class="nt">&lt;filter-class&gt;</span>org.springframework.web.filter.DelegatingFilterProxy<span class="nt">&lt;/filter-class&gt;</span>
    <span class="nt">&lt;/filter&gt;</span>

    <span class="nt">&lt;filter-mapping&gt;</span>
        <span class="nt">&lt;filter-name&gt;</span>springSecurityFilterChain<span class="nt">&lt;/filter-name&gt;</span>
        <span class="nt">&lt;url-pattern&gt;</span>/*<span class="nt">&lt;/url-pattern&gt;</span>
    <span class="nt">&lt;/filter-mapping&gt;</span>

<span class="hll">    <span class="c">&lt;!-- (1) --&gt;</span>
</span><span class="hll">    <span class="nt">&lt;servlet&gt;</span>
</span><span class="hll">        <span class="nt">&lt;servlet-name&gt;</span>restApiServlet<span class="nt">&lt;/servlet-name&gt;</span>
</span><span class="hll">        <span class="nt">&lt;servlet-class&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="nt">&lt;/servlet-class&gt;</span>
</span><span class="hll">        <span class="nt">&lt;init-param&gt;</span>
</span><span class="hll">            <span class="nt">&lt;param-name&gt;</span>contextConfigLocation<span class="nt">&lt;/param-name&gt;</span>
</span><span class="hll">            <span class="c">&lt;!-- ApplicationContext for Spring MVC (REST) --&gt;</span>
</span><span class="hll">            <span class="nt">&lt;param-value&gt;</span>classpath*:META-INF/spring/spring-mvc-rest.xml<span class="nt">&lt;/param-value&gt;</span>
</span><span class="hll">        <span class="nt">&lt;/init-param&gt;</span>
</span><span class="hll">        <span class="nt">&lt;load-on-startup&gt;</span>1<span class="nt">&lt;/load-on-startup&gt;</span>
</span><span class="hll">    <span class="nt">&lt;/servlet&gt;</span>
</span><span class="hll">
</span><span class="hll">    <span class="c">&lt;!-- (2) --&gt;</span>
</span><span class="hll">    <span class="nt">&lt;servlet-mapping&gt;</span>
</span><span class="hll">        <span class="nt">&lt;servlet-name&gt;</span>restApiServlet<span class="nt">&lt;/servlet-name&gt;</span>
</span><span class="hll">        <span class="nt">&lt;url-pattern&gt;</span>/api/v1/*<span class="nt">&lt;/url-pattern&gt;</span>
</span><span class="hll">    <span class="nt">&lt;/servlet-mapping&gt;</span>
</span>
    <span class="nt">&lt;servlet&gt;</span>
        <span class="nt">&lt;servlet-name&gt;</span>appServlet<span class="nt">&lt;/servlet-name&gt;</span>
        <span class="nt">&lt;servlet-class&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="nt">&lt;/servlet-class&gt;</span>
        <span class="nt">&lt;init-param&gt;</span>
            <span class="nt">&lt;param-name&gt;</span>contextConfigLocation<span class="nt">&lt;/param-name&gt;</span>
            <span class="c">&lt;!-- ApplicationContext for Spring MVC --&gt;</span>
            <span class="nt">&lt;param-value&gt;</span>classpath*:META-INF/spring/spring-mvc.xml<span class="nt">&lt;/param-value&gt;</span>
        <span class="nt">&lt;/init-param&gt;</span>
        <span class="nt">&lt;load-on-startup&gt;</span>1<span class="nt">&lt;/load-on-startup&gt;</span>
    <span class="nt">&lt;/servlet&gt;</span>

    <span class="nt">&lt;servlet-mapping&gt;</span>
        <span class="nt">&lt;servlet-name&gt;</span>appServlet<span class="nt">&lt;/servlet-name&gt;</span>
        <span class="nt">&lt;url-pattern&gt;</span>/<span class="nt">&lt;/url-pattern&gt;</span>
    <span class="nt">&lt;/servlet-mapping&gt;</span>

    <span class="nt">&lt;jsp-config&gt;</span>
        <span class="nt">&lt;jsp-property-group&gt;</span>
            <span class="nt">&lt;url-pattern&gt;</span>*.jsp<span class="nt">&lt;/url-pattern&gt;</span>
            <span class="nt">&lt;el-ignored&gt;</span>false<span class="nt">&lt;/el-ignored&gt;</span>
            <span class="nt">&lt;page-encoding&gt;</span>UTF-8<span class="nt">&lt;/page-encoding&gt;</span>
            <span class="nt">&lt;scripting-invalid&gt;</span>false<span class="nt">&lt;/scripting-invalid&gt;</span>
            <span class="nt">&lt;include-prelude&gt;</span>/WEB-INF/views/common/include.jsp<span class="nt">&lt;/include-prelude&gt;</span>
        <span class="nt">&lt;/jsp-property-group&gt;</span>
    <span class="nt">&lt;/jsp-config&gt;</span>

    <span class="nt">&lt;error-page&gt;</span>
        <span class="nt">&lt;error-code&gt;</span>500<span class="nt">&lt;/error-code&gt;</span>
        <span class="nt">&lt;location&gt;</span>/WEB-INF/views/common/error/systemError.jsp<span class="nt">&lt;/location&gt;</span>
    <span class="nt">&lt;/error-page&gt;</span>
    <span class="nt">&lt;error-page&gt;</span>
        <span class="nt">&lt;error-code&gt;</span>404<span class="nt">&lt;/error-code&gt;</span>
        <span class="nt">&lt;location&gt;</span>/WEB-INF/views/common/error/resourceNotFoundError.jsp<span class="nt">&lt;/location&gt;</span>
    <span class="nt">&lt;/error-page&gt;</span>
    <span class="nt">&lt;error-page&gt;</span>
        <span class="nt">&lt;exception-type&gt;</span>java.lang.Exception<span class="nt">&lt;/exception-type&gt;</span>
        <span class="nt">&lt;location&gt;</span>/WEB-INF/views/common/error/unhandledSystemError.html<span class="nt">&lt;/location&gt;</span>
    <span class="nt">&lt;/error-page&gt;</span>

    <span class="nt">&lt;session-config&gt;</span>
        <span class="c">&lt;!-- 30min --&gt;</span>
        <span class="nt">&lt;session-timeout&gt;</span>30<span class="nt">&lt;/session-timeout&gt;</span>
    <span class="nt">&lt;/session-config&gt;</span>

<span class="nt">&lt;/web-app&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify the SpringMVC configuration file for REST at the initialization parameter [<code class="docutils literal"><span class="pre">contextConfigLocation</span></code>].</div>
<div class="line">In this tutorial, [<code class="file docutils literal"><span class="pre">META-INF/spring/spring-mvc-rest.xml</span></code>] is specified located at class path.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify the URL pattern that maps to the <code class="docutils literal"><span class="pre">DispatcherServlet</span></code> for REST API at <code class="docutils literal"><span class="pre">&lt;url-pattern&gt;</span></code> element.</div>
<div class="line">In this tutorial, if it starts from <code class="docutils literal"><span class="pre">/api/v1/</span></code>, request is considered as a REST API request and mapped with the <code class="docutils literal"><span class="pre">DispatcherServlet</span></code> for REST API.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="creation-of-spring-mvc-rest-xml">
<h4><a class="toc-backref" href="#id18">7.1.3.2.2. Creation of spring-mvc-rest.xml</a><a class="headerlink" href="#creation-of-spring-mvc-rest-xml" title="Permalink to this headline">Â¶</a></h4>
<div class="line-block">
<div class="line">Spring MVC configuration file for REST is created by copying the <code class="file docutils literal"><span class="pre">src/main/resources/META-INF/spring/spring-mvc.xml</span></code>file.</div>
<div class="line">The definition of SpringMVC configuration for REST file will be as follows.</div>
</div>
<div class="figure">
<img alt="../_images/add-spring-mvc-rest.png" src="../_images/add-spring-mvc-rest.png" />
</div>
<p><code class="docutils literal"><span class="pre">src/main/resources/META-INF/spring/spring-mvc-rest.xml</span></code></p>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.springframework.org/schema/beans&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="na">xmlns:context=</span><span class="s">&quot;http://www.springframework.org/schema/context&quot;</span>
    <span class="na">xmlns:mvc=</span><span class="s">&quot;http://www.springframework.org/schema/mvc&quot;</span> <span class="na">xmlns:util=</span><span class="s">&quot;http://www.springframework.org/schema/util&quot;</span>
    <span class="na">xmlns:aop=</span><span class="s">&quot;http://www.springframework.org/schema/aop&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd</span>
<span class="s">        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span>
<span class="s">        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd</span>
<span class="s">        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd</span>
<span class="s">        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;context:property-placeholder</span>
        <span class="na">location=</span><span class="s">&quot;classpath*:/META-INF/spring/*.properties&quot;</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;mvc:annotation-driven&gt;</span>
        <span class="nt">&lt;mvc:argument-resolvers&gt;</span>
            <span class="nt">&lt;bean</span>
                <span class="na">class=</span><span class="s">&quot;org.springframework.data.web.PageableHandlerMethodArgumentResolver&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;bean</span>
                <span class="na">class=</span><span class="s">&quot;org.springframework.security.web.bind.support.AuthenticationPrincipalArgumentResolver&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/mvc:argument-resolvers&gt;</span>
<span class="hll">        <span class="nt">&lt;mvc:message-converters</span> <span class="na">register-defaults=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
</span><span class="hll">            <span class="c">&lt;!-- (1) --&gt;</span>
</span><span class="hll">            <span class="nt">&lt;bean</span>
</span><span class="hll">                <span class="na">class=</span><span class="s">&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;</span><span class="nt">&gt;</span>
</span><span class="hll">                <span class="c">&lt;!-- (2) --&gt;</span>
</span><span class="hll">                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;objectMapper&quot;</span><span class="nt">&gt;</span>
</span><span class="hll">                    <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">&quot;com.fasterxml.jackson.databind.ObjectMapper&quot;</span><span class="nt">&gt;</span>
</span><span class="hll">                        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;dateFormat&quot;</span><span class="nt">&gt;</span>
</span><span class="hll">                            <span class="c">&lt;!-- (3) --&gt;</span>
</span><span class="hll">                            <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">&quot;com.fasterxml.jackson.databind.util.StdDateFormat&quot;</span><span class="nt">/&gt;</span>
</span><span class="hll">                        <span class="nt">&lt;/property&gt;</span>
</span><span class="hll">                    <span class="nt">&lt;/bean&gt;</span>
</span><span class="hll">                <span class="nt">&lt;/property&gt;</span>
</span><span class="hll">            <span class="nt">&lt;/bean&gt;</span>
</span><span class="hll">        <span class="nt">&lt;/mvc:message-converters&gt;</span>
</span>    <span class="nt">&lt;/mvc:annotation-driven&gt;</span>

    <span class="nt">&lt;mvc:default-servlet-handler</span> <span class="nt">/&gt;</span>

<span class="hll">    <span class="nt">&lt;context:component-scan</span> <span class="na">base-package=</span><span class="s">&quot;todo.api&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (3) --&gt;</span>
</span>
    <span class="nt">&lt;mvc:interceptors&gt;</span>
        <span class="nt">&lt;mvc:interceptor&gt;</span>
            <span class="nt">&lt;mvc:mapping</span> <span class="na">path=</span><span class="s">&quot;/**&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;mvc:exclude-mapping</span> <span class="na">path=</span><span class="s">&quot;/resources/**&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;mvc:exclude-mapping</span> <span class="na">path=</span><span class="s">&quot;/**/*.html&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;bean</span>
                <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.web.logging.TraceLoggingInterceptor&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/mvc:interceptor&gt;</span>
        <span class="c">&lt;!--  REMOVE THIS LINE IF YOU USE JPA</span>
<span class="c">        &lt;mvc:interceptor&gt;</span>
<span class="c">            &lt;mvc:mapping path=&quot;/**&quot; /&gt;</span>
<span class="c">            &lt;mvc:exclude-mapping path=&quot;/resources/**&quot; /&gt;</span>
<span class="c">            &lt;mvc:exclude-mapping path=&quot;/**/*.html&quot; /&gt;</span>
<span class="c">            &lt;bean</span>
<span class="c">                class=&quot;org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor&quot; /&gt;</span>
<span class="c">        &lt;/mvc:interceptor&gt;</span>
<span class="c">            REMOVE THIS LINE IF YOU USE JPA  --&gt;</span>
    <span class="nt">&lt;/mvc:interceptors&gt;</span>

    <span class="c">&lt;!-- Setting AOP. --&gt;</span>
    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;handlerExceptionResolverLoggingInterceptor&quot;</span>
        <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.web.exception.HandlerExceptionResolverLoggingInterceptor&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;exceptionLogger&quot;</span> <span class="na">ref=</span><span class="s">&quot;exceptionLogger&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>
    <span class="nt">&lt;aop:config&gt;</span>
        <span class="nt">&lt;aop:advisor</span> <span class="na">advice-ref=</span><span class="s">&quot;handlerExceptionResolverLoggingInterceptor&quot;</span>
            <span class="na">pointcut=</span><span class="s">&quot;execution(* org.springframework.web.servlet.HandlerExceptionResolver.resolveException(..))&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/aop:config&gt;</span>

<span class="nt">&lt;/beans&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><p class="first">Set the class(<code class="docutils literal"><span class="pre">org.springframework.http.converter.HttpMessageConverter</span></code>) to serialize/de-serialize the JavaBean dealing with arguments and return values of the Controller at <code class="docutils literal"><span class="pre">&lt;mvc:message-converters&gt;</span></code>.</p>
<p class="last">Multiple <code class="docutils literal"><span class="pre">HttpMessageConverter</span></code> can be configured but, since only JSON is used in this tutorial only <code class="docutils literal"><span class="pre">MappingJackson2HttpMessageConverter</span></code> is specified.</p>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><p class="first">Specify the <code class="docutils literal"><span class="pre">ObjectMapper</span></code>(Component for conversion of [JSON &lt;-&gt; JavaBean]) that is provided by Jackson into the <code class="docutils literal"><span class="pre">objectMapper</span></code> property of the <code class="docutils literal"><span class="pre">MappingJackson2HttpMessageConverter</span></code>.</p>
<p class="last">In this tutorial, Data format customized <code class="docutils literal"><span class="pre">ObjectMapper</span></code> is specified.
<code class="docutils literal"><span class="pre">objectMapper</span></code>property can be omitted if customization is not required.</p>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><p class="first">Specify format of the Date field into <code class="docutils literal"><span class="pre">dateFormat</span></code> property of <code class="docutils literal"><span class="pre">ObjectMapper</span></code>.</p>
<p class="last">In this tutorial, ISO-8601 format used while serializing <code class="docutils literal"><span class="pre">java.util.Date</span></code> object.
If you want to use ISO-8601 format while serializing <code class="docutils literal"><span class="pre">Date</span></code> object, it can be implemented by configuring the <code class="docutils literal"><span class="pre">com.fasterxml.jackson.databind.util.StdDateFormat</span></code>.</p>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><p class="first">Scan the components under the package of the REST API</p>
<p class="last">In this tutorial, the package of REST API is <code class="docutils literal"><span class="pre">todo.api</span></code>.
Although the Controllers for the screen transition had been stored under <code class="docutils literal"><span class="pre">app</span></code> package, Controllers for REST API are recommended to store under <code class="docutils literal"><span class="pre">api</span></code> package.</p>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="definition-of-spring-security-for-rest-api">
<h3><a class="toc-backref" href="#id19">7.1.3.3. Definition of Spring Security for REST API</a><a class="headerlink" href="#definition-of-spring-security-for-rest-api" title="Permalink to this headline">Â¶</a></h3>
<div class="line-block">
<div class="line">Disabled the CSRF protection in REST API created in this tutorial.</div>
<div class="line">CSRF protection is required even in Web application of the REST API. However, the purpose of this tutorial is not CSRF measures hence ignored the explanation.</div>
</div>
<div class="line-block">
<div class="line">If you disable the CSRF protection, the use of session is not required.</div>
<div class="line">Therefore, in this tutorial, adopted an architecture that does not use the session(stateless architecture) and disable the CSRF measures.</div>
</div>
<div class="line-block">
<div class="line">The use of session and CSRF measures can be avoided by adding the following settings.</div>
<div class="line"><code class="docutils literal"><span class="pre">src/main/resources/META-INF/spring/spring-security.xml</span></code></div>
</div>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.springframework.org/schema/beans&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="na">xmlns:sec=</span><span class="s">&quot;http://www.springframework.org/schema/security&quot;</span>
    <span class="na">xmlns:context=</span><span class="s">&quot;http://www.springframework.org/schema/context&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security.xsd</span>
<span class="s">        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span>
<span class="s">        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;sec:http</span> <span class="na">pattern=</span><span class="s">&quot;/resources/**&quot;</span> <span class="na">security=</span><span class="s">&quot;none&quot;</span><span class="nt">/&gt;</span>

<span class="hll">    <span class="c">&lt;!-- (1) --&gt;</span>
</span><span class="hll">    <span class="nt">&lt;sec:http</span>
</span><span class="hll">        <span class="na">pattern=</span><span class="s">&quot;/api/v1/**&quot;</span>
</span><span class="hll">        <span class="na">auto-config=</span><span class="s">&quot;true&quot;</span>
</span><span class="hll">        <span class="na">use-expressions=</span><span class="s">&quot;true&quot;</span>
</span><span class="hll">        <span class="na">create-session=</span><span class="s">&quot;stateless&quot;</span><span class="nt">&gt;</span>
</span><span class="hll">        <span class="nt">&lt;sec:headers</span> <span class="nt">/&gt;</span>
</span><span class="hll">    <span class="nt">&lt;/sec:http&gt;</span>
</span>
    <span class="nt">&lt;sec:http</span> <span class="na">auto-config=</span><span class="s">&quot;true&quot;</span> <span class="na">use-expressions=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;sec:headers&gt;</span>
            <span class="nt">&lt;sec:cache-control</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;sec:content-type-options</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;sec:hsts</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;sec:frame-options</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;sec:xss-protection</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/sec:headers&gt;</span>
        <span class="nt">&lt;sec:csrf</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;sec:access-denied-handler</span> <span class="na">ref=</span><span class="s">&quot;accessDeniedHandler&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;sec:custom-filter</span> <span class="na">ref=</span><span class="s">&quot;userIdMDCPutFilter&quot;</span> <span class="na">after=</span><span class="s">&quot;ANONYMOUS_FILTER&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;sec:session-management</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/sec:http&gt;</span>

    <span class="nt">&lt;sec:authentication-manager&gt;&lt;/sec:authentication-manager&gt;</span>

    <span class="c">&lt;!-- Change View for CSRF or AccessDenied --&gt;</span>
    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;accessDeniedHandler&quot;</span>
        <span class="na">class=</span><span class="s">&quot;org.springframework.security.web.access.DelegatingAccessDeniedHandler&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;constructor-arg</span> <span class="na">index=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;map&gt;</span>
                <span class="nt">&lt;entry</span>
                    <span class="na">key=</span><span class="s">&quot;org.springframework.security.web.csrf.InvalidCsrfTokenException&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;bean</span>
                        <span class="na">class=</span><span class="s">&quot;org.springframework.security.web.access.AccessDeniedHandlerImpl&quot;</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;errorPage&quot;</span>
                            <span class="na">value=</span><span class="s">&quot;/WEB-INF/views/common/error/invalidCsrfTokenError.jsp&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;/bean&gt;</span>
                <span class="nt">&lt;/entry&gt;</span>
                <span class="nt">&lt;entry</span>
                    <span class="na">key=</span><span class="s">&quot;org.springframework.security.web.csrf.MissingCsrfTokenException&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;bean</span>
                        <span class="na">class=</span><span class="s">&quot;org.springframework.security.web.access.AccessDeniedHandlerImpl&quot;</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;errorPage&quot;</span>
                            <span class="na">value=</span><span class="s">&quot;/WEB-INF/views/common/error/missingCsrfTokenError.jsp&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;/bean&gt;</span>
                <span class="nt">&lt;/entry&gt;</span>
            <span class="nt">&lt;/map&gt;</span>
        <span class="nt">&lt;/constructor-arg&gt;</span>
        <span class="nt">&lt;constructor-arg</span> <span class="na">index=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;bean</span>
                <span class="na">class=</span><span class="s">&quot;org.springframework.security.web.access.AccessDeniedHandlerImpl&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;errorPage&quot;</span>
                    <span class="na">value=</span><span class="s">&quot;/WEB-INF/views/common/error/accessDeniedError.jsp&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/bean&gt;</span>
        <span class="nt">&lt;/constructor-arg&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>

    <span class="c">&lt;!-- Put UserID into MDC --&gt;</span>
    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;userIdMDCPutFilter&quot;</span> <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.security.web.logging.UserIdMDCPutFilter&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;/beans&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Add the definition of Spring Security for REST API.</div>
<div class="line">Specify the URL pattern of the REST API request path at <code class="docutils literal"><span class="pre">pattern</span></code> attribute of the <code class="docutils literal"><span class="pre">&lt;sec:http&gt;</span></code> element.</div>
<div class="line">In this tutorial, request path starts with <code class="docutils literal"><span class="pre">/api/v1/</span></code> is considered as a REST API request.</div>
<div class="line">Furthermore, session is no longer used in the processing of Spring Security by specifying <code class="docutils literal"><span class="pre">stateless</span></code> at <code class="docutils literal"><span class="pre">create-session</span></code> attribute.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="creation-of-rest-api-package">
<h3><a class="toc-backref" href="#id20">7.1.3.4. Creation of REST API package</a><a class="headerlink" href="#creation-of-rest-api-package" title="Permalink to this headline">Â¶</a></h3>
<p>Create a package that stores the REST API classes.</p>
<div class="line-block">
<div class="line">The name of the root package is <code class="docutils literal"><span class="pre">api</span></code> that contains the REST API classes and recommended to create a package of each resource (lowercase resource name) under it.</div>
<div class="line">Since the  name of the resource is Todo in this tutorial, the <code class="docutils literal"><span class="pre">todo.api.todo</span></code> package is created.</div>
</div>
<div class="figure">
<img alt="../_images/make-package-for-rest.png" src="../_images/make-package-for-rest.png" />
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Usually following three types of classes are stored in the created package.
The following naming rules are recommended for the classes.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">[Resource</span> <span class="pre">name]Resource</span></code></li>
<li><code class="docutils literal"><span class="pre">[Resource</span> <span class="pre">name]RestController</span></code></li>
<li><code class="docutils literal"><span class="pre">[Resource</span> <span class="pre">name]Helper</span></code> (if required)</li>
</ul>
<p>Since name of the resource is Todo in this tutorial,</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">TodoResource</span></code></li>
<li><code class="docutils literal"><span class="pre">TodoRestController</span></code></li>
</ul>
<p>is created</p>
<p class="last">The <code class="docutils literal"><span class="pre">TodoRestHelper</span></code> is not created in this tutorial.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="creation-of-resource-class">
<h3><a class="toc-backref" href="#id21">7.1.3.5. Creation of Resource class</a><a class="headerlink" href="#creation-of-resource-class" title="Permalink to this headline">Â¶</a></h3>
<div class="line-block">
<div class="line">Create <code class="docutils literal"><span class="pre">TodoResource</span></code> class for implementing Todo Resource.</div>
<div class="line">In this guide line, Java Bean that represent the JSON(or XML) for input and output of the REST API is called as <strong>Resource class</strong>.</div>
</div>
<p><code class="docutils literal"><span class="pre">src/main/java/todo/api/todo/TodoResource.java</span></code></p>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">package</span> <span class="nn">todo.api.todo</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.Serializable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.validation.constraints.NotNull</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.validation.constraints.Size</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TodoResource</span> <span class="kd">implements</span> <span class="n">Serializable</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">todoId</span><span class="o">;</span>

    <span class="nd">@NotNull</span>
    <span class="nd">@Size</span><span class="o">(</span><span class="n">min</span> <span class="o">=</span> <span class="mi">1</span><span class="o">,</span> <span class="n">max</span> <span class="o">=</span> <span class="mi">30</span><span class="o">)</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">todoTitle</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">finished</span><span class="o">;</span>

    <span class="kd">private</span> <span class="n">Date</span> <span class="n">createdAt</span><span class="o">;</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getTodoId</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">todoId</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setTodoId</span><span class="o">(</span><span class="n">String</span> <span class="n">todoId</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">todoId</span> <span class="o">=</span> <span class="n">todoId</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getTodoTitle</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">todoTitle</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setTodoTitle</span><span class="o">(</span><span class="n">String</span> <span class="n">todoTitle</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">todoTitle</span> <span class="o">=</span> <span class="n">todoTitle</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isFinished</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">finished</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setFinished</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">finished</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">finished</span> <span class="o">=</span> <span class="n">finished</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">Date</span> <span class="nf">getCreatedAt</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">createdAt</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setCreatedAt</span><span class="o">(</span><span class="n">Date</span> <span class="n">createdAt</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">createdAt</span> <span class="o">=</span> <span class="n">createdAt</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The reason for creating a Resource class in spite of the existence of the DomainObject class (<code class="docutils literal"><span class="pre">Todo</span></code> class in this tutorial),
business process is not consistent with the interface to be used in the input and output of the client.</p>
<p>If it is used wrongly, application layer will be impacted to the domain layer and also decrease the maintainability.
It is recommended to perform the data conversion using BeanMapper such as Dozer by creating DomainObject and Resource class separately.</p>
<p>The role of the Resource class is similar to the Form class but eventually it is differing like
Form class represent the <code class="docutils literal"><span class="pre">&lt;form&gt;</span></code> tag of HTML in JavaBean and Resource class is the input and output of the REST API in JavaBean.</p>
<p class="last">However, it is a JavaBean having annotation of the Bean Validation and
the Controller class is approximately the same as the Form class because stored in the same package.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="creation-of-controller-class">
<h3><a class="toc-backref" href="#id22">7.1.3.6. Creation of Controller class</a><a class="headerlink" href="#creation-of-controller-class" title="Permalink to this headline">Â¶</a></h3>
<p>Create a <code class="docutils literal"><span class="pre">TodoRestController</span></code> class that provides a REST API of <code class="docutils literal"><span class="pre">TodoResource</span></code>.</p>
<p><code class="docutils literal"><span class="pre">src/main/java/todo/api/todo/TodoRestController.java</span></code></p>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">package</span> <span class="nn">todo.api.todo</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RestController</span><span class="o">;</span>

<span class="nd">@RestController</span> <span class="c1">// (1)</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&quot;todos&quot;</span><span class="o">)</span> <span class="c1">// (2)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TodoRestController</span> <span class="o">{</span>

<span class="o">}</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify the <code class="docutils literal"><span class="pre">&#64;RestController</span></code> annotation.</div>
<div class="line">Refer to the <a class="reference internal" href="../ArchitectureInDetail/REST.html#resthowtousecontrollerclass"><span>Creation of RestController class</span></a> for the details of <code class="docutils literal"><span class="pre">&#64;RestController</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify the resource path.</div>
<div class="line">Since <code class="docutils literal"><span class="pre">/api/v1/</span></code> is defined in web.xml, it is mapped with the <code class="docutils literal"><span class="pre">/&lt;contextPath&gt;/api/v1/todos</span></code> path by perform this setting.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="implementation-of-get-todos">
<h4><a class="toc-backref" href="#id23">7.1.3.6.1. Implementation of GET Todos</a><a class="headerlink" href="#implementation-of-get-todos" title="Permalink to this headline">Â¶</a></h4>
<p>Implement the processing of API(GET Todos) into <code class="docutils literal"><span class="pre">getTodos</span></code> method of <code class="docutils literal"><span class="pre">TodoRestController</span></code> that fetches all records of created Todo Resource.</p>
<p><code class="docutils literal"><span class="pre">src/main/java/todo/api/todo/TodoRestController.java</span></code></p>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">package</span> <span class="nn">todo.api.todo</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Collection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.inject.Inject</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.dozer.Mapper</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.http.HttpStatus</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMethod</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.ResponseStatus</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RestController</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">todo.domain.model.Todo</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">todo.domain.service.todo.TodoService</span><span class="o">;</span>

<span class="nd">@RestController</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&quot;todos&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TodoRestController</span> <span class="o">{</span>

<span class="hll">    <span class="nd">@Inject</span>
</span><span class="hll">    <span class="n">TodoService</span> <span class="n">todoService</span><span class="o">;</span>
</span><span class="hll">    <span class="nd">@Inject</span>
</span><span class="hll">    <span class="n">Mapper</span> <span class="n">beanMapper</span><span class="o">;</span>
</span><span class="hll">
</span><span class="hll">    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span> <span class="c1">// (1)</span>
</span><span class="hll">    <span class="nd">@ResponseStatus</span><span class="o">(</span><span class="n">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">)</span> <span class="c1">// (2)</span>
</span><span class="hll">    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">TodoResource</span><span class="o">&gt;</span> <span class="nf">getTodos</span><span class="o">()</span> <span class="o">{</span>
</span><span class="hll">        <span class="n">Collection</span><span class="o">&lt;</span><span class="n">Todo</span><span class="o">&gt;</span> <span class="n">todos</span> <span class="o">=</span> <span class="n">todoService</span><span class="o">.</span><span class="na">findAll</span><span class="o">();</span>
</span><span class="hll">        <span class="n">List</span><span class="o">&lt;</span><span class="n">TodoResource</span><span class="o">&gt;</span> <span class="n">todoResources</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
</span><span class="hll">        <span class="k">for</span> <span class="o">(</span><span class="n">Todo</span> <span class="n">todo</span> <span class="o">:</span> <span class="n">todos</span><span class="o">)</span> <span class="o">{</span>
</span><span class="hll">            <span class="n">todoResources</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">beanMapper</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">todo</span><span class="o">,</span> <span class="n">TodoResource</span><span class="o">.</span><span class="na">class</span><span class="o">));</span> <span class="c1">// (3)</span>
</span><span class="hll">        <span class="o">}</span>
</span><span class="hll">        <span class="k">return</span> <span class="n">todoResources</span><span class="o">;</span> <span class="c1">// (4)</span>
</span><span class="hll">    <span class="o">}</span>
</span>
<span class="o">}</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Set the <code class="docutils literal"><span class="pre">RequestMethod.GET</span></code> to <code class="docutils literal"><span class="pre">method</span></code> attribute for handling the GET request.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify <code class="docutils literal"><span class="pre">&#64;ResponseStatus</span></code> annotation to the HTTP status code for response.</div>
<div class="line">To set &#8220;200 OK&#8221; as a HTTP status, set the <code class="docutils literal"><span class="pre">HttpStatus.OK</span></code> to the <code class="docutils literal"><span class="pre">value</span></code> attribute.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Converting <code class="docutils literal"><span class="pre">Todo</span></code> object returned from <code class="docutils literal"><span class="pre">findAll</span></code> method of <code class="docutils literal"><span class="pre">TodoService</span></code> into <code class="docutils literal"><span class="pre">TodoResource</span></code> object type that represent JSON response.</div>
<div class="line">It is convenient to use the <code class="docutils literal"><span class="pre">org.dozer.Mapper</span></code> interface of Dozer for converting <code class="docutils literal"><span class="pre">Todo</span></code> and <code class="docutils literal"><span class="pre">TodoResource</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">By returning the <code class="docutils literal"><span class="pre">List&lt;TodoResource&gt;</span></code> object, it is serialized into JSON by <code class="docutils literal"><span class="pre">MappingJackson2HttpMessageConverter</span></code> defined in <code class="docutils literal"><span class="pre">spring-mvc-rest.xml</span></code>.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Check the operation of the implemented API by booting Application Server.</p>
<div class="line-block">
<div class="line">Access the REST API(Get Todos).</div>
<div class="line">Open the DHC, enter <code class="docutils literal"><span class="pre">&quot;localhost:8080/todo/api/v1/todos&quot;</span></code> in the URL, specify GET in method and click the &#8220;Send&#8221; button.</div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../_images/get-todos1.png"><img alt="../_images/get-todos1.png" src="../_images/get-todos1.png" style="width: 100%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">Displays JSON execution results in [BODY] of the [RESPONSE] as follows.</div>
<div class="line">Since data is not registered at present, an empty array <code class="docutils literal"><span class="pre">[]</span></code> is returned.</div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../_images/get-todos2.png"><img alt="../_images/get-todos2.png" src="../_images/get-todos2.png" style="width: 100%;" /></a>
</div>
<p>Since the Spring Security setting has been changed to not use the session therefore want to focus on the point that <code class="docutils literal"><span class="pre">&quot;Set-Cookie:</span> <span class="pre">JSESSIONID=xxxx&quot;</span></code> is not exists in the [RESPONSE] [HEADERS].</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="implementation-of-post-todos">
<h4><a class="toc-backref" href="#id24">7.1.3.6.2. Implementation of POST Todos</a><a class="headerlink" href="#implementation-of-post-todos" title="Permalink to this headline">Â¶</a></h4>
<p>Implement the processing of API(GET Todos) into <code class="docutils literal"><span class="pre">postTodos</span></code> method of <code class="docutils literal"><span class="pre">TodoRestController</span></code> that create new Todo Resource.</p>
<p><code class="docutils literal"><span class="pre">src/main/java/todo/api/todo/TodoRestController.java</span></code></p>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">package</span> <span class="nn">todo.api.todo</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Collection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.inject.Inject</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.dozer.Mapper</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.http.HttpStatus</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.validation.annotation.Validated</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestBody</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMethod</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.ResponseStatus</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RestController</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">todo.domain.model.Todo</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">todo.domain.service.todo.TodoService</span><span class="o">;</span>

<span class="nd">@RestController</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&quot;todos&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TodoRestController</span> <span class="o">{</span>

    <span class="nd">@Inject</span>
    <span class="n">TodoService</span> <span class="n">todoService</span><span class="o">;</span>
    <span class="nd">@Inject</span>
    <span class="n">Mapper</span> <span class="n">beanMapper</span><span class="o">;</span>

    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
    <span class="nd">@ResponseStatus</span><span class="o">(</span><span class="n">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">TodoResource</span><span class="o">&gt;</span> <span class="nf">getTodos</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">Collection</span><span class="o">&lt;</span><span class="n">Todo</span><span class="o">&gt;</span> <span class="n">todos</span> <span class="o">=</span> <span class="n">todoService</span><span class="o">.</span><span class="na">findAll</span><span class="o">();</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">TodoResource</span><span class="o">&gt;</span> <span class="n">todoResources</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">Todo</span> <span class="n">todo</span> <span class="o">:</span> <span class="n">todos</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">todoResources</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">beanMapper</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">todo</span><span class="o">,</span> <span class="n">TodoResource</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">todoResources</span><span class="o">;</span>
    <span class="o">}</span>

<span class="hll">    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">POST</span><span class="o">)</span> <span class="c1">// (1)</span>
</span><span class="hll">    <span class="nd">@ResponseStatus</span><span class="o">(</span><span class="n">HttpStatus</span><span class="o">.</span><span class="na">CREATED</span><span class="o">)</span> <span class="c1">// (2)</span>
</span><span class="hll">    <span class="kd">public</span> <span class="n">TodoResource</span> <span class="nf">postTodos</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="nd">@Validated</span> <span class="n">TodoResource</span> <span class="n">todoResource</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// (3)</span>
</span><span class="hll">        <span class="n">Todo</span> <span class="n">createdTodo</span> <span class="o">=</span> <span class="n">todoService</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">beanMapper</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">todoResource</span><span class="o">,</span> <span class="n">Todo</span><span class="o">.</span><span class="na">class</span><span class="o">));</span> <span class="c1">// (4)</span>
</span><span class="hll">        <span class="n">TodoResource</span> <span class="n">createdTodoResponse</span> <span class="o">=</span> <span class="n">beanMapper</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">createdTodo</span><span class="o">,</span> <span class="n">TodoResource</span><span class="o">.</span><span class="na">class</span><span class="o">);</span> <span class="c1">// (5)</span>
</span><span class="hll">        <span class="k">return</span> <span class="n">createdTodoResponse</span><span class="o">;</span> <span class="c1">// (6)</span>
</span><span class="hll">    <span class="o">}</span>
</span>
<span class="o">}</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Set the <code class="docutils literal"><span class="pre">RequestMethod.POST</span></code> to <code class="docutils literal"><span class="pre">method</span></code> attribute for handling the POST request.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify <code class="docutils literal"><span class="pre">&#64;ResponseStatus</span></code> annotation to the HTTP status code for response.</div>
<div class="line">To set &#8220;201 Created&#8221; as a HTTP status, set the <code class="docutils literal"><span class="pre">HttpStatus.CREATED</span></code> to the <code class="docutils literal"><span class="pre">value</span></code> attribute.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">In order to map the HTTP request Body(JSON) with JavaBean, grant <code class="docutils literal"><span class="pre">&#64;RequestBody</span></code> annotation to the mapping targeted <code class="docutils literal"><span class="pre">TodoResource</span></code> class.</div>
<div class="line">Furthermore, grant <code class="docutils literal"><span class="pre">&#64;Validated</span></code> annotation for input check. It is necessary to handle exception separately.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Create new Todo resource by executing <code class="docutils literal"><span class="pre">create</span></code> method of <code class="docutils literal"><span class="pre">TodoService</span></code> after converting <code class="docutils literal"><span class="pre">TodoResource</span></code> into <code class="docutils literal"><span class="pre">Todo</span></code> class.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Converting <code class="docutils literal"><span class="pre">Todo</span></code> object created by <code class="docutils literal"><span class="pre">create</span></code> method of <code class="docutils literal"><span class="pre">TodoService</span></code> into <code class="docutils literal"><span class="pre">TodoResource</span></code> type that represent JSON response.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(6)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">By returning the <code class="docutils literal"><span class="pre">TodoResource</span></code> object, it is serialized into JSON by <code class="docutils literal"><span class="pre">MappingJackson2HttpMessageConverter</span></code> defined in <code class="docutils literal"><span class="pre">spring-mvc-rest.xml</span></code>.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">Check the operation of the implemented API using DHC.</div>
<div class="line">Open the DHC, enter <code class="docutils literal"><span class="pre">&quot;localhost:8080/todo/api/v1/todos&quot;</span></code> in the URL and specify POST in method.</div>
<div class="line">Enter the following JSON into [BODY] of the [REQUEST].</div>
</div>
<div class="highlight-json"><div class="highlight"><pre><span class="p">{</span>
  <span class="nt">&quot;todoTitle&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello World!&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Furthermore, Add HTTP header by [+] button of [REQUEST] [HEADERS] and click &#8220;Send&#8221; button after setting [<code class="docutils literal"><span class="pre">application/json</span></code>] in the [<code class="docutils literal"><span class="pre">Content-Type</span></code>].</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/post-todos1.png"><img alt="../_images/post-todos1.png" src="../_images/post-todos1.png" style="width: 100%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>HTTP status returned &#8220;201 Created&#8221; and JSON of the newly created Todo resource displays in [Body] of [RESPONSE] part.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/post-todos2.png"><img alt="../_images/post-todos2.png" src="../_images/post-todos2.png" style="width: 100%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>If GET Todos gets executed now, newly created Todo Resource returns as an array.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/get-todos3.png"><img alt="../_images/get-todos3.png" src="../_images/get-todos3.png" style="width: 100%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="implementation-of-get-todo">
<h4><a class="toc-backref" href="#id25">7.1.3.6.3. Implementation of GET Todo</a><a class="headerlink" href="#implementation-of-get-todo" title="Permalink to this headline">Â¶</a></h4>
<p>Since method (findOne) for retrieving single item is not created in <code class="docutils literal"><span class="pre">TodoService</span></code> of the <a class="reference internal" href="../TutorialTodo/index.html"><em>Tutorial (Todo Application)</em></a>,
add the following highlighted parts in <code class="docutils literal"><span class="pre">TodoService</span></code> and <code class="docutils literal"><span class="pre">TodoServiceImpl</span></code>.</p>
<div class="line-block">
<div class="line">Add the definition of <code class="docutils literal"><span class="pre">findOne</span></code> method.</div>
<div class="line"><code class="docutils literal"><span class="pre">src/main/java/todo/domain/service/todo/TodoService.java</span></code></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">package</span> <span class="nn">todo.domain.service.todo</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Collection</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">todo.domain.model.Todo</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">TodoService</span> <span class="o">{</span>
    <span class="n">Collection</span><span class="o">&lt;</span><span class="n">Todo</span><span class="o">&gt;</span> <span class="nf">findAll</span><span class="o">();</span>

<span class="hll">    <span class="n">Todo</span> <span class="nf">findOne</span><span class="o">(</span><span class="n">String</span> <span class="n">todoId</span><span class="o">);</span>
</span>
    <span class="n">Todo</span> <span class="nf">create</span><span class="o">(</span><span class="n">Todo</span> <span class="n">todo</span><span class="o">);</span>

    <span class="n">Todo</span> <span class="nf">finish</span><span class="o">(</span><span class="n">String</span> <span class="n">todoId</span><span class="o">);</span>

    <span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="n">String</span> <span class="n">todoId</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">Set a read-only transaction that is initiated at the time of calling <code class="docutils literal"><span class="pre">findOne</span></code> method.</div>
<div class="line"><code class="docutils literal"><span class="pre">src/main/java/todo/domain/service/todo/TodoServiceImpl.java</span></code></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">package</span> <span class="nn">todo.domain.service.todo</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Collection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.UUID</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.inject.Inject</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Service</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.transaction.annotation.Transactional</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.terasoluna.gfw.common.exception.BusinessException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.terasoluna.gfw.common.exception.ResourceNotFoundException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.terasoluna.gfw.common.message.ResultMessage</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.terasoluna.gfw.common.message.ResultMessages</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">todo.domain.model.Todo</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">todo.domain.repository.todo.TodoRepository</span><span class="o">;</span>

<span class="nd">@Service</span>
<span class="nd">@Transactional</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TodoServiceImpl</span> <span class="kd">implements</span> <span class="n">TodoService</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">MAX_UNFINISHED_COUNT</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span>

    <span class="nd">@Inject</span>
    <span class="n">TodoRepository</span> <span class="n">todoRepository</span><span class="o">;</span>

    <span class="nd">@Override</span>
<span class="hll">    <span class="nd">@Transactional</span><span class="o">(</span><span class="n">readOnly</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
</span>    <span class="kd">public</span> <span class="n">Todo</span> <span class="nf">findOne</span><span class="o">(</span><span class="n">String</span> <span class="n">todoId</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Todo</span> <span class="n">todo</span> <span class="o">=</span> <span class="n">todoRepository</span><span class="o">.</span><span class="na">findOne</span><span class="o">(</span><span class="n">todoId</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">todo</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">ResultMessages</span> <span class="n">messages</span> <span class="o">=</span> <span class="n">ResultMessages</span><span class="o">.</span><span class="na">error</span><span class="o">();</span>
            <span class="n">messages</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">ResultMessage</span>
                    <span class="o">.</span><span class="na">fromText</span><span class="o">(</span><span class="s">&quot;[E404] The requested Todo is not found. (id=&quot;</span>
                            <span class="o">+</span> <span class="n">todoId</span> <span class="o">+</span> <span class="s">&quot;)&quot;</span><span class="o">));</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">ResourceNotFoundException</span><span class="o">(</span><span class="n">messages</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">todo</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="nd">@Transactional</span><span class="o">(</span><span class="n">readOnly</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">Collection</span><span class="o">&lt;</span><span class="n">Todo</span><span class="o">&gt;</span> <span class="nf">findAll</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">todoRepository</span><span class="o">.</span><span class="na">findAll</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Todo</span> <span class="nf">create</span><span class="o">(</span><span class="n">Todo</span> <span class="n">todo</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">long</span> <span class="n">unfinishedCount</span> <span class="o">=</span> <span class="n">todoRepository</span><span class="o">.</span><span class="na">countByFinished</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">unfinishedCount</span> <span class="o">&gt;=</span> <span class="n">MAX_UNFINISHED_COUNT</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">ResultMessages</span> <span class="n">messages</span> <span class="o">=</span> <span class="n">ResultMessages</span><span class="o">.</span><span class="na">error</span><span class="o">();</span>
            <span class="n">messages</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">ResultMessage</span>
                    <span class="o">.</span><span class="na">fromText</span><span class="o">(</span><span class="s">&quot;[E001] The count of un-finished Todo must not be over &quot;</span>
                            <span class="o">+</span> <span class="n">MAX_UNFINISHED_COUNT</span> <span class="o">+</span> <span class="s">&quot;.&quot;</span><span class="o">));</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">BusinessException</span><span class="o">(</span><span class="n">messages</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="n">String</span> <span class="n">todoId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">randomUUID</span><span class="o">().</span><span class="na">toString</span><span class="o">();</span>
        <span class="n">Date</span> <span class="n">createdAt</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Date</span><span class="o">();</span>

        <span class="n">todo</span><span class="o">.</span><span class="na">setTodoId</span><span class="o">(</span><span class="n">todoId</span><span class="o">);</span>
        <span class="n">todo</span><span class="o">.</span><span class="na">setCreatedAt</span><span class="o">(</span><span class="n">createdAt</span><span class="o">);</span>
        <span class="n">todo</span><span class="o">.</span><span class="na">setFinished</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>

        <span class="n">todoRepository</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">todo</span><span class="o">);</span>
        <span class="cm">/* REMOVE THIS LINE IF YOU USE JPA</span>
<span class="cm">            todoRepository.save(todo);</span>
<span class="cm">           REMOVE THIS LINE IF YOU USE JPA */</span>

        <span class="k">return</span> <span class="n">todo</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Todo</span> <span class="nf">finish</span><span class="o">(</span><span class="n">String</span> <span class="n">todoId</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Todo</span> <span class="n">todo</span> <span class="o">=</span> <span class="n">findOne</span><span class="o">(</span><span class="n">todoId</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">todo</span><span class="o">.</span><span class="na">isFinished</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">ResultMessages</span> <span class="n">messages</span> <span class="o">=</span> <span class="n">ResultMessages</span><span class="o">.</span><span class="na">error</span><span class="o">();</span>
            <span class="n">messages</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">ResultMessage</span>
                    <span class="o">.</span><span class="na">fromText</span><span class="o">(</span><span class="s">&quot;[E002] The requested Todo is already finished. (id=&quot;</span>
                            <span class="o">+</span> <span class="n">todoId</span> <span class="o">+</span> <span class="s">&quot;)&quot;</span><span class="o">));</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">BusinessException</span><span class="o">(</span><span class="n">messages</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">todo</span><span class="o">.</span><span class="na">setFinished</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
        <span class="n">todoRepository</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="n">todo</span><span class="o">);</span>
        <span class="cm">/* REMOVE THIS LINE IF YOU USE JPA</span>
<span class="cm">            todoRepository.save(todo);</span>
<span class="cm">           REMOVE THIS LINE IF YOU USE JPA */</span>
        <span class="k">return</span> <span class="n">todo</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="n">String</span> <span class="n">todoId</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Todo</span> <span class="n">todo</span> <span class="o">=</span> <span class="n">findOne</span><span class="o">(</span><span class="n">todoId</span><span class="o">);</span>
        <span class="n">todoRepository</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">todo</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">Implement the processing of retrieving single Todo Resource API(GET Todo) into <code class="docutils literal"><span class="pre">getTodo</span></code> method of <code class="docutils literal"><span class="pre">TodoRestController</span></code> .</div>
<div class="line"><code class="docutils literal"><span class="pre">src/main/java/todo/api/todo/TodoRestController.java</span></code></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">package</span> <span class="nn">todo.api.todo</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Collection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.inject.Inject</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.dozer.Mapper</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.http.HttpStatus</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.validation.annotation.Validated</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.PathVariable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestBody</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMethod</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.ResponseStatus</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RestController</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">todo.domain.model.Todo</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">todo.domain.service.todo.TodoService</span><span class="o">;</span>

<span class="nd">@RestController</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&quot;todos&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TodoRestController</span> <span class="o">{</span>

    <span class="nd">@Inject</span>
    <span class="n">TodoService</span> <span class="n">todoService</span><span class="o">;</span>
    <span class="nd">@Inject</span>
    <span class="n">Mapper</span> <span class="n">beanMapper</span><span class="o">;</span>

    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
    <span class="nd">@ResponseStatus</span><span class="o">(</span><span class="n">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">TodoResource</span><span class="o">&gt;</span> <span class="nf">getTodos</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">Collection</span><span class="o">&lt;</span><span class="n">Todo</span><span class="o">&gt;</span> <span class="n">todos</span> <span class="o">=</span> <span class="n">todoService</span><span class="o">.</span><span class="na">findAll</span><span class="o">();</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">TodoResource</span><span class="o">&gt;</span> <span class="n">todoResources</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">Todo</span> <span class="n">todo</span> <span class="o">:</span> <span class="n">todos</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">todoResources</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">beanMapper</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">todo</span><span class="o">,</span> <span class="n">TodoResource</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">todoResources</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">POST</span><span class="o">)</span>
    <span class="nd">@ResponseStatus</span><span class="o">(</span><span class="n">HttpStatus</span><span class="o">.</span><span class="na">CREATED</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">TodoResource</span> <span class="nf">postTodos</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="nd">@Validated</span> <span class="n">TodoResource</span> <span class="n">todoResource</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Todo</span> <span class="n">createdTodo</span> <span class="o">=</span> <span class="n">todoService</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">beanMapper</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">todoResource</span><span class="o">,</span> <span class="n">Todo</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
        <span class="n">TodoResource</span> <span class="n">createdTodoResponse</span> <span class="o">=</span> <span class="n">beanMapper</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">createdTodo</span><span class="o">,</span> <span class="n">TodoResource</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">createdTodoResponse</span><span class="o">;</span>
    <span class="o">}</span>

<span class="hll">    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span><span class="o">=</span><span class="s">&quot;{todoId}&quot;</span><span class="o">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span> <span class="c1">// (1)</span>
</span><span class="hll">    <span class="nd">@ResponseStatus</span><span class="o">(</span><span class="n">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">)</span>
</span><span class="hll">    <span class="kd">public</span> <span class="n">TodoResource</span> <span class="nf">getTodo</span><span class="o">(</span><span class="nd">@PathVariable</span><span class="o">(</span><span class="s">&quot;todoId&quot;</span><span class="o">)</span> <span class="n">String</span> <span class="n">todoId</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// (2)</span>
</span><span class="hll">        <span class="n">Todo</span> <span class="n">todo</span> <span class="o">=</span> <span class="n">todoService</span><span class="o">.</span><span class="na">findOne</span><span class="o">(</span><span class="n">todoId</span><span class="o">);</span> <span class="c1">// (3)</span>
</span><span class="hll">        <span class="n">TodoResource</span> <span class="n">todoResource</span> <span class="o">=</span> <span class="n">beanMapper</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">todo</span><span class="o">,</span> <span class="n">TodoResource</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span><span class="hll">        <span class="k">return</span> <span class="n">todoResource</span><span class="o">;</span>
</span><span class="hll">    <span class="o">}</span>
</span>
<span class="o">}</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">In order to get the <code class="docutils literal"><span class="pre">todoId</span></code> from path, specify the path variable in the <code class="docutils literal"><span class="pre">value</span></code> attribute of the <code class="docutils literal"><span class="pre">&#64;RequestMapping</span></code> annotation.</div>
<div class="line">Set the <code class="docutils literal"><span class="pre">RequestMethod.GET</span></code> to <code class="docutils literal"><span class="pre">method</span></code> attribute for handling the GET request.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify the path variable name to retrieve <code class="docutils literal"><span class="pre">todoId</span></code> in the <code class="docutils literal"><span class="pre">value</span></code> attribute of the <code class="docutils literal"><span class="pre">&#64;PathVariable</span></code> annotation.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">You can use the <code class="docutils literal"><span class="pre">todoId</span></code> obtained from path variable to get one Todo resource.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">Check the operation of the implemented API using DHC.</div>
<div class="line">Open the DHC, enter <code class="docutils literal"><span class="pre">&quot;localhost:8080/todo/api/v1/todos/{todoId}&quot;</span></code> in the URL and specify GET in method.</div>
<div class="line">Since it is necessary to enter the actual ID at <code class="docutils literal"><span class="pre">{todoId}</span></code>, run the POST Todos or GET Todos to get actual ID, copy &amp; paste the <code class="docutils literal"><span class="pre">todoId</span></code> from the Response, and click the &#8220;Send&#8221; button.</div>
</div>
<p>HTTP status returned &#8220;200 OK&#8221; and JSON of the indicated Todo resource displays in [Body] of [RESPONSE] part.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/get-todo1.png"><img alt="../_images/get-todo1.png" src="../_images/get-todo1.png" style="width: 100%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="implementation-of-put-todo">
<h4><a class="toc-backref" href="#id26">7.1.3.6.4. Implementation of PUT Todo</a><a class="headerlink" href="#implementation-of-put-todo" title="Permalink to this headline">Â¶</a></h4>
<p>Implement the processing of API(PUT Todo) into <code class="docutils literal"><span class="pre">putTodo</span></code> method of <code class="docutils literal"><span class="pre">TodoRestController</span></code> that updates(updating into completed status) one record of Todo Resource.</p>
<p><code class="docutils literal"><span class="pre">src/main/java/todo/api/todo/TodoRestController.java</span></code></p>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">package</span> <span class="nn">todo.api.todo</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Collection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.inject.Inject</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.dozer.Mapper</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.http.HttpStatus</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.validation.annotation.Validated</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.PathVariable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestBody</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMethod</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.ResponseStatus</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RestController</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">todo.domain.model.Todo</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">todo.domain.service.todo.TodoService</span><span class="o">;</span>

<span class="nd">@RestController</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&quot;todos&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TodoRestController</span> <span class="o">{</span>

    <span class="nd">@Inject</span>
    <span class="n">TodoService</span> <span class="n">todoService</span><span class="o">;</span>
    <span class="nd">@Inject</span>
    <span class="n">Mapper</span> <span class="n">beanMapper</span><span class="o">;</span>

    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
    <span class="nd">@ResponseStatus</span><span class="o">(</span><span class="n">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">TodoResource</span><span class="o">&gt;</span> <span class="nf">getTodos</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">Collection</span><span class="o">&lt;</span><span class="n">Todo</span><span class="o">&gt;</span> <span class="n">todos</span> <span class="o">=</span> <span class="n">todoService</span><span class="o">.</span><span class="na">findAll</span><span class="o">();</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">TodoResource</span><span class="o">&gt;</span> <span class="n">todoResources</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">Todo</span> <span class="n">todo</span> <span class="o">:</span> <span class="n">todos</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">todoResources</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">beanMapper</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">todo</span><span class="o">,</span> <span class="n">TodoResource</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">todoResources</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">POST</span><span class="o">)</span>
    <span class="nd">@ResponseStatus</span><span class="o">(</span><span class="n">HttpStatus</span><span class="o">.</span><span class="na">CREATED</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">TodoResource</span> <span class="nf">postTodos</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="nd">@Validated</span> <span class="n">TodoResource</span> <span class="n">todoResource</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Todo</span> <span class="n">createdTodo</span> <span class="o">=</span> <span class="n">todoService</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">beanMapper</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">todoResource</span><span class="o">,</span> <span class="n">Todo</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
        <span class="n">TodoResource</span> <span class="n">createdTodoResponse</span> <span class="o">=</span> <span class="n">beanMapper</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">createdTodo</span><span class="o">,</span> <span class="n">TodoResource</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">createdTodoResponse</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span><span class="o">=</span><span class="s">&quot;{todoId}&quot;</span><span class="o">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
    <span class="nd">@ResponseStatus</span><span class="o">(</span><span class="n">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">TodoResource</span> <span class="nf">getTodo</span><span class="o">(</span><span class="nd">@PathVariable</span><span class="o">(</span><span class="s">&quot;todoId&quot;</span><span class="o">)</span> <span class="n">String</span> <span class="n">todoId</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Todo</span> <span class="n">todo</span> <span class="o">=</span> <span class="n">todoService</span><span class="o">.</span><span class="na">findOne</span><span class="o">(</span><span class="n">todoId</span><span class="o">);</span>
        <span class="n">TodoResource</span> <span class="n">todoResource</span> <span class="o">=</span> <span class="n">beanMapper</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">todo</span><span class="o">,</span> <span class="n">TodoResource</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">todoResource</span><span class="o">;</span>
    <span class="o">}</span>

<span class="hll">    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span><span class="o">=</span><span class="s">&quot;{todoId}&quot;</span><span class="o">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">PUT</span><span class="o">)</span> <span class="c1">// (1)</span>
</span><span class="hll">    <span class="nd">@ResponseStatus</span><span class="o">(</span><span class="n">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">)</span>
</span><span class="hll">    <span class="kd">public</span> <span class="n">TodoResource</span> <span class="nf">putTodo</span><span class="o">(</span><span class="nd">@PathVariable</span><span class="o">(</span><span class="s">&quot;todoId&quot;</span><span class="o">)</span> <span class="n">String</span> <span class="n">todoId</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// (2)</span>
</span><span class="hll">        <span class="n">Todo</span> <span class="n">finishedTodo</span> <span class="o">=</span> <span class="n">todoService</span><span class="o">.</span><span class="na">finish</span><span class="o">(</span><span class="n">todoId</span><span class="o">);</span> <span class="c1">// (3)</span>
</span><span class="hll">        <span class="n">TodoResource</span> <span class="n">finishedTodoResource</span> <span class="o">=</span> <span class="n">beanMapper</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">finishedTodo</span><span class="o">,</span> <span class="n">TodoResource</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span><span class="hll">        <span class="k">return</span> <span class="n">finishedTodoResource</span><span class="o">;</span>
</span><span class="hll">    <span class="o">}</span>
</span>
<span class="o">}</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">In order to get the <code class="docutils literal"><span class="pre">todoId</span></code> from path, specify the path variable in the <code class="docutils literal"><span class="pre">value</span></code> attribute of the <code class="docutils literal"><span class="pre">&#64;RequestMapping</span></code>annotation.</div>
<div class="line">Set the <code class="docutils literal"><span class="pre">RequestMethod.PUT</span></code> to <code class="docutils literal"><span class="pre">method</span></code> attribute for handling the PUT request.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify the path variable name to retrieve <code class="docutils literal"><span class="pre">todoId</span></code> in the <code class="docutils literal"><span class="pre">value</span></code> attribute of the <code class="docutils literal"><span class="pre">&#64;PathVariable</span></code> annotation.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">You can use the <code class="docutils literal"><span class="pre">todoId</span></code> obtained from path variable to update the Todo resource in completed status.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">Check the operation of the implemented API using DHC.</div>
<div class="line">Open the DHC, enter <code class="docutils literal"><span class="pre">&quot;localhost:8080/todo/api/v1/todos/{todoId}&quot;</span></code> in the URL and specify PUT in method.</div>
<div class="line">Since it is necessary to enter the actual ID at <code class="docutils literal"><span class="pre">{todoId}</span></code>, run the POST Todos or GET Todos to get actual ID, copy &amp; paste the <code class="docutils literal"><span class="pre">todoId</span></code> from the Response, and click the &#8220;Send&#8221; button.</div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../_images/put-todo1.png"><img alt="../_images/put-todo1.png" src="../_images/put-todo1.png" style="width: 100%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">HTTP status returned &#8220;200 OK&#8221; and JSON of the modified Todo resource displays in [Body] of [RESPONSE] part.</div>
<div class="line"><code class="docutils literal"><span class="pre">finished</span></code> is updated to <code class="docutils literal"><span class="pre">true</span></code>.</div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../_images/put-todo2.png"><img alt="../_images/put-todo2.png" src="../_images/put-todo2.png" style="width: 100%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="implementation-of-delete-todo">
<h4><a class="toc-backref" href="#id27">7.1.3.6.5. Implementation of DELETE Todo</a><a class="headerlink" href="#implementation-of-delete-todo" title="Permalink to this headline">Â¶</a></h4>
<p>Lastly, implement the processing of API(DELETE Todo) into <code class="docutils literal"><span class="pre">deleteTodo</span></code> method of <code class="docutils literal"><span class="pre">TodoRestController</span></code> that delete one record of Todo Resource.</p>
<p><code class="docutils literal"><span class="pre">src/main/java/todo/api/todo/TodoRestController.java</span></code></p>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">package</span> <span class="nn">todo.api.todo</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Collection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.inject.Inject</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.dozer.Mapper</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.http.HttpStatus</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.validation.annotation.Validated</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.PathVariable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestBody</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMethod</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.ResponseStatus</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RestController</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">todo.domain.model.Todo</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">todo.domain.service.todo.TodoService</span><span class="o">;</span>

<span class="nd">@RestController</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&quot;todos&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TodoRestController</span> <span class="o">{</span>

    <span class="nd">@Inject</span>
    <span class="n">TodoService</span> <span class="n">todoService</span><span class="o">;</span>
    <span class="nd">@Inject</span>
    <span class="n">Mapper</span> <span class="n">beanMapper</span><span class="o">;</span>

    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
    <span class="nd">@ResponseStatus</span><span class="o">(</span><span class="n">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">TodoResource</span><span class="o">&gt;</span> <span class="nf">getTodos</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">Collection</span><span class="o">&lt;</span><span class="n">Todo</span><span class="o">&gt;</span> <span class="n">todos</span> <span class="o">=</span> <span class="n">todoService</span><span class="o">.</span><span class="na">findAll</span><span class="o">();</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">TodoResource</span><span class="o">&gt;</span> <span class="n">todoResources</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">Todo</span> <span class="n">todo</span> <span class="o">:</span> <span class="n">todos</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">todoResources</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">beanMapper</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">todo</span><span class="o">,</span> <span class="n">TodoResource</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">todoResources</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">POST</span><span class="o">)</span>
    <span class="nd">@ResponseStatus</span><span class="o">(</span><span class="n">HttpStatus</span><span class="o">.</span><span class="na">CREATED</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">TodoResource</span> <span class="nf">postTodos</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="nd">@Validated</span> <span class="n">TodoResource</span> <span class="n">todoResource</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Todo</span> <span class="n">createdTodo</span> <span class="o">=</span> <span class="n">todoService</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">beanMapper</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">todoResource</span><span class="o">,</span> <span class="n">Todo</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
        <span class="n">TodoResource</span> <span class="n">createdTodoResponse</span> <span class="o">=</span> <span class="n">beanMapper</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">createdTodo</span><span class="o">,</span> <span class="n">TodoResource</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">createdTodoResponse</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span><span class="o">=</span><span class="s">&quot;{todoId}&quot;</span><span class="o">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
    <span class="nd">@ResponseStatus</span><span class="o">(</span><span class="n">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">TodoResource</span> <span class="nf">getTodo</span><span class="o">(</span><span class="nd">@PathVariable</span><span class="o">(</span><span class="s">&quot;todoId&quot;</span><span class="o">)</span> <span class="n">String</span> <span class="n">todoId</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Todo</span> <span class="n">todo</span> <span class="o">=</span> <span class="n">todoService</span><span class="o">.</span><span class="na">findOne</span><span class="o">(</span><span class="n">todoId</span><span class="o">);</span>
        <span class="n">TodoResource</span> <span class="n">todoResource</span> <span class="o">=</span> <span class="n">beanMapper</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">todo</span><span class="o">,</span> <span class="n">TodoResource</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">todoResource</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span><span class="o">=</span><span class="s">&quot;{todoId}&quot;</span><span class="o">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">PUT</span><span class="o">)</span>
    <span class="nd">@ResponseStatus</span><span class="o">(</span><span class="n">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">TodoResource</span> <span class="nf">putTodo</span><span class="o">(</span><span class="nd">@PathVariable</span><span class="o">(</span><span class="s">&quot;todoId&quot;</span><span class="o">)</span> <span class="n">String</span> <span class="n">todoId</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Todo</span> <span class="n">finishedTodo</span> <span class="o">=</span> <span class="n">todoService</span><span class="o">.</span><span class="na">finish</span><span class="o">(</span><span class="n">todoId</span><span class="o">);</span>
        <span class="n">TodoResource</span> <span class="n">finishedTodoResource</span> <span class="o">=</span> <span class="n">beanMapper</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">finishedTodo</span><span class="o">,</span> <span class="n">TodoResource</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">finishedTodoResource</span><span class="o">;</span>
    <span class="o">}</span>

<span class="hll">    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span><span class="o">=</span><span class="s">&quot;{todoId}&quot;</span><span class="o">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">DELETE</span><span class="o">)</span> <span class="c1">// (1)</span>
</span><span class="hll">    <span class="nd">@ResponseStatus</span><span class="o">(</span><span class="n">HttpStatus</span><span class="o">.</span><span class="na">NO_CONTENT</span><span class="o">)</span> <span class="c1">// (2)</span>
</span><span class="hll">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">deleteTodo</span><span class="o">(</span><span class="nd">@PathVariable</span><span class="o">(</span><span class="s">&quot;todoId&quot;</span><span class="o">)</span> <span class="n">String</span> <span class="n">todoId</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// (3)</span>
</span><span class="hll">        <span class="n">todoService</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">todoId</span><span class="o">);</span> <span class="c1">// (4)</span>
</span><span class="hll">    <span class="o">}</span>
</span>
<span class="o">}</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">In order to get the <code class="docutils literal"><span class="pre">todoId</span></code> from path, specify the path variable in the <code class="docutils literal"><span class="pre">value</span></code> attribute of the <code class="docutils literal"><span class="pre">&#64;RequestMapping</span></code> annotation.</div>
<div class="line">Set the <code class="docutils literal"><span class="pre">RequestMethod.DELETE</span></code> to <code class="docutils literal"><span class="pre">method</span></code> attribute for handling the DELETE request.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify <code class="docutils literal"><span class="pre">&#64;ResponseStatus</span></code> annotation to the HTTP status code for response.</div>
<div class="line">To set &#8220;204 No Content&#8221; as a HTTP status, set the <code class="docutils literal"><span class="pre">HttpStatus.NO_CONTENT</span></code> to the <code class="docutils literal"><span class="pre">value</span></code> attribute.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">The type of return value is a <code class="docutils literal"><span class="pre">void</span></code> because there is no content to be returned in the case of DELETE.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">You can use the <code class="docutils literal"><span class="pre">todoId</span></code> obtained from path variable to delete the Todo resource.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">Check the operation of the implemented API using DHC.</div>
<div class="line">Open the DHC, enter <code class="docutils literal"><span class="pre">&quot;localhost:8080/todo/api/v1/todos/{todoId}&quot;</span></code> in the URL and specify DELETE in method.</div>
<div class="line">Since it is necessary to enter the actual ID at <code class="docutils literal"><span class="pre">{todoId}</span></code>, run the POST Todos or GET Todos to get actual ID, copy &amp; paste the <code class="docutils literal"><span class="pre">todoId</span></code> from the Response, and click the &#8220;Send&#8221; button.</div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../_images/delete-todo1.png"><img alt="../_images/delete-todo1.png" src="../_images/delete-todo1.png" style="width: 100%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>HTTP status returned &#8220;204 No Content&#8221; and [Body] of [RESPONSE] is empty.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/delete-todo2.png"><img alt="../_images/delete-todo2.png" src="../_images/delete-todo2.png" style="width: 100%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">Open the DHC, enter <code class="docutils literal"><span class="pre">&quot;localhost:8080/todo/api/v1/todos&quot;</span></code> in the URL and click the &#8220;Send&#8221; button by specify GET in method.</div>
<div class="line">you can confirm that the Todo resource has been removed.</div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../_images/delete-todo3.png"><img alt="../_images/delete-todo3.png" src="../_images/delete-todo3.png" style="width: 100%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="implementation-of-exception-handling">
<h3><a class="toc-backref" href="#id28">7.1.3.7. Implementation of exception handling</a><a class="headerlink" href="#implementation-of-exception-handling" title="Permalink to this headline">Â¶</a></h3>
<div class="line-block">
<div class="line">In this tutorial, for easy understanding, the implementation of exception handling made a simpler than that are recommended in this guideline.</div>
<div class="line"><strong>It is strongly recommended that the actual exception handling should be handled in a way described</strong> in the <a class="reference internal" href="../ArchitectureInDetail/REST.html"><em>RESTful Web Service</em></a>.</div>
</div>
<div class="section" id="change-domain-layer-implementation">
<h4><a class="toc-backref" href="#id29">7.1.3.7.1. Change Domain layer implementation</a><a class="headerlink" href="#change-domain-layer-implementation" title="Permalink to this headline">Â¶</a></h4>
<div class="line-block">
<div class="line">In this tutorial, the error messages are retrieved from the property file based on error code.</div>
<div class="line">Therefore, modify the implementation of the Service class as follows which is created at <a class="reference internal" href="../TutorialTodo/index.html"><em>Tutorial (Todo Application)</em></a> before implementing the exception handling.</div>
</div>
<div class="line-block">
<div class="line">Specify the error code instead of hard-coded error message.</div>
<div class="line"><code class="docutils literal"><span class="pre">src/main/java/todo/domain/service/todo/TodoServiceImpl.java</span></code></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">package</span> <span class="nn">todo.domain.service.todo</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Collection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.UUID</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.inject.Inject</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Service</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.transaction.annotation.Transactional</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.terasoluna.gfw.common.exception.BusinessException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.terasoluna.gfw.common.exception.ResourceNotFoundException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.terasoluna.gfw.common.message.ResultMessages</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">todo.domain.model.Todo</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">todo.domain.repository.todo.TodoRepository</span><span class="o">;</span>

<span class="nd">@Service</span>
<span class="nd">@Transactional</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TodoServiceImpl</span> <span class="kd">implements</span> <span class="n">TodoService</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">MAX_UNFINISHED_COUNT</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span>

    <span class="nd">@Inject</span>
    <span class="n">TodoRepository</span> <span class="n">todoRepository</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="nd">@Transactional</span><span class="o">(</span><span class="n">readOnly</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">Todo</span> <span class="nf">findOne</span><span class="o">(</span><span class="n">String</span> <span class="n">todoId</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Todo</span> <span class="n">todo</span> <span class="o">=</span> <span class="n">todoRepository</span><span class="o">.</span><span class="na">findOne</span><span class="o">(</span><span class="n">todoId</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">todo</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">ResultMessages</span> <span class="n">messages</span> <span class="o">=</span> <span class="n">ResultMessages</span><span class="o">.</span><span class="na">error</span><span class="o">();</span>
<span class="hll">            <span class="n">messages</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;E404&quot;</span><span class="o">,</span> <span class="n">todoId</span><span class="o">);</span>
</span>            <span class="k">throw</span> <span class="k">new</span> <span class="n">ResourceNotFoundException</span><span class="o">(</span><span class="n">messages</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">todo</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="nd">@Transactional</span><span class="o">(</span><span class="n">readOnly</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">Collection</span><span class="o">&lt;</span><span class="n">Todo</span><span class="o">&gt;</span> <span class="nf">findAll</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">todoRepository</span><span class="o">.</span><span class="na">findAll</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Todo</span> <span class="nf">create</span><span class="o">(</span><span class="n">Todo</span> <span class="n">todo</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">long</span> <span class="n">unfinishedCount</span> <span class="o">=</span> <span class="n">todoRepository</span><span class="o">.</span><span class="na">countByFinished</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">unfinishedCount</span> <span class="o">&gt;=</span> <span class="n">MAX_UNFINISHED_COUNT</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">ResultMessages</span> <span class="n">messages</span> <span class="o">=</span> <span class="n">ResultMessages</span><span class="o">.</span><span class="na">error</span><span class="o">();</span>
<span class="hll">            <span class="n">messages</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;E001&quot;</span><span class="o">,</span> <span class="n">MAX_UNFINISHED_COUNT</span><span class="o">);</span>
</span>            <span class="k">throw</span> <span class="k">new</span> <span class="n">BusinessException</span><span class="o">(</span><span class="n">messages</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="n">String</span> <span class="n">todoId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">randomUUID</span><span class="o">().</span><span class="na">toString</span><span class="o">();</span>
        <span class="n">Date</span> <span class="n">createdAt</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Date</span><span class="o">();</span>

        <span class="n">todo</span><span class="o">.</span><span class="na">setTodoId</span><span class="o">(</span><span class="n">todoId</span><span class="o">);</span>
        <span class="n">todo</span><span class="o">.</span><span class="na">setCreatedAt</span><span class="o">(</span><span class="n">createdAt</span><span class="o">);</span>
        <span class="n">todo</span><span class="o">.</span><span class="na">setFinished</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>

        <span class="n">todoRepository</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">todo</span><span class="o">);</span>
        <span class="cm">/* REMOVE THIS LINE IF YOU USE JPA</span>
<span class="cm">            todoRepository.save(todo);</span>
<span class="cm">           REMOVE THIS LINE IF YOU USE JPA */</span>

        <span class="k">return</span> <span class="n">todo</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Todo</span> <span class="nf">finish</span><span class="o">(</span><span class="n">String</span> <span class="n">todoId</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Todo</span> <span class="n">todo</span> <span class="o">=</span> <span class="n">findOne</span><span class="o">(</span><span class="n">todoId</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">todo</span><span class="o">.</span><span class="na">isFinished</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">ResultMessages</span> <span class="n">messages</span> <span class="o">=</span> <span class="n">ResultMessages</span><span class="o">.</span><span class="na">error</span><span class="o">();</span>
<span class="hll">            <span class="n">messages</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;E002&quot;</span><span class="o">,</span> <span class="n">todoId</span><span class="o">);</span>
</span>            <span class="k">throw</span> <span class="k">new</span> <span class="n">BusinessException</span><span class="o">(</span><span class="n">messages</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">todo</span><span class="o">.</span><span class="na">setFinished</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
        <span class="n">todoRepository</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="n">todo</span><span class="o">);</span>
        <span class="cm">/* REMOVE THIS LINE IF YOU USE JPA</span>
<span class="cm">            todoRepository.save(todo);</span>
<span class="cm">           REMOVE THIS LINE IF YOU USE JPA */</span>
        <span class="k">return</span> <span class="n">todo</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="n">String</span> <span class="n">todoId</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Todo</span> <span class="n">todo</span> <span class="o">=</span> <span class="n">findOne</span><span class="o">(</span><span class="n">todoId</span><span class="o">);</span>
        <span class="n">todoRepository</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">todo</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="error-message-definition">
<h4><a class="toc-backref" href="#id30">7.1.3.7.2. Error message definition</a><a class="headerlink" href="#error-message-definition" title="Permalink to this headline">Â¶</a></h4>
<div class="line-block">
<div class="line">In this tutorial, the error messages are retrieved from the property file based on error code.</div>
<div class="line">Therefore, define the error code corresponding to the error messages in the message property file before implementing the exception handling.</div>
</div>
<p>Define the error code corresponding to the error messages of the processing result in the message property file.</p>
<div class="figure">
<img alt="../_images/application-messages.png" src="../_images/application-messages.png" />
</div>
<p><code class="docutils literal"><span class="pre">src/main/resources/i18n/application-messages.properties</span></code></p>
<div class="highlight-properties"><div class="highlight"><pre><span class="na">e.xx.fw.5001</span> <span class="o">=</span> <span class="s">Resource not found.</span>

<span class="na">e.xx.fw.7001</span> <span class="o">=</span> <span class="s">Illegal screen flow detected!</span>
<span class="na">e.xx.fw.7002</span> <span class="o">=</span> <span class="s">CSRF attack detected!</span>
<span class="na">e.xx.fw.7003</span> <span class="o">=</span> <span class="s">Access Denied detected!</span>
<span class="na">e.xx.fw.7004</span> <span class="o">=</span> <span class="s">Missing CSRF detected!</span>

<span class="na">e.xx.fw.8001</span> <span class="o">=</span> <span class="s">Business error occurred!</span>

<span class="na">e.xx.fw.9001</span> <span class="o">=</span> <span class="s">System error occurred!</span>
<span class="na">e.xx.fw.9002</span> <span class="o">=</span> <span class="s">Data Access error!</span>

<span class="c"># typemismatch</span>
<span class="na">typeMismatch</span><span class="o">=</span><span class="s">&quot;{0}&quot; is invalid.</span>
<span class="na">typeMismatch.int</span><span class="o">=</span><span class="s">&quot;{0}&quot; must be an integer.</span>
<span class="na">typeMismatch.double</span><span class="o">=</span><span class="s">&quot;{0}&quot; must be a double.</span>
<span class="na">typeMismatch.float</span><span class="o">=</span><span class="s">&quot;{0}&quot; must be a float.</span>
<span class="na">typeMismatch.long</span><span class="o">=</span><span class="s">&quot;{0}&quot; must be a long.</span>
<span class="na">typeMismatch.short</span><span class="o">=</span><span class="s">&quot;{0}&quot; must be a short.</span>
<span class="na">typeMismatch.boolean</span><span class="o">=</span><span class="s">&quot;{0}&quot; must be a boolean.</span>
<span class="na">typeMismatch.java.lang.Integer</span><span class="o">=</span><span class="s">&quot;{0}&quot; must be an integer.</span>
<span class="na">typeMismatch.java.lang.Double</span><span class="o">=</span><span class="s">&quot;{0}&quot; must be a double.</span>
<span class="na">typeMismatch.java.lang.Float</span><span class="o">=</span><span class="s">&quot;{0}&quot; must be a float.</span>
<span class="na">typeMismatch.java.lang.Long</span><span class="o">=</span><span class="s">&quot;{0}&quot; must be a long.</span>
<span class="na">typeMismatch.java.lang.Short</span><span class="o">=</span><span class="s">&quot;{0}&quot; must be a short.</span>
<span class="na">typeMismatch.java.lang.Boolean</span><span class="o">=</span><span class="s">&quot;{0}&quot; is not a boolean.</span>
<span class="na">typeMismatch.java.util.Date</span><span class="o">=</span><span class="s">&quot;{0}&quot; is not a date.</span>
<span class="na">typeMismatch.java.lang.Enum</span><span class="o">=</span><span class="s">&quot;{0}&quot; is not a valid value.</span>

<span class="hll"><span class="c"># For this tutorial</span>
</span><span class="hll"><span class="na">E001</span> <span class="o">=</span> <span class="s">[E001] The count of un-finished Todo must not be over {0}.</span>
</span><span class="hll"><span class="na">E002</span> <span class="o">=</span> <span class="s">[E002] The requested Todo is already finished. (id={0})</span>
</span><span class="hll"><span class="na">E400</span> <span class="o">=</span> <span class="s">[E400] The requested Todo contains invalid values.</span>
</span><span class="hll"><span class="na">E404</span> <span class="o">=</span> <span class="s">[E404] The requested Todo is not found. (id={0})</span>
</span><span class="hll"><span class="na">E500</span> <span class="o">=</span> <span class="s">[E500] System error occurred.</span>
</span><span class="hll"><span class="na">E999</span> <span class="o">=</span> <span class="s">[E999] Error occurred. Caused by : {0}</span>
</span></pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">Define the error messages corresponding to input check error codes, in Bean Validation message properties file.</div>
</div>
<div class="line-block">
<div class="line">Change the default message definition because the default message does not include the item name in the message</div>
<div class="line">In this tutorial, only define the message corresponding to the rules (<code class="docutils literal"><span class="pre">&#64;NotNull</span></code> and <code class="docutils literal"><span class="pre">&#64;Size</span></code>) that are used in <code class="docutils literal"><span class="pre">TodoResource</span></code> class.</div>
</div>
<div class="figure">
<img alt="../_images/validation-messages.png" src="../_images/validation-messages.png" />
</div>
<p><code class="docutils literal"><span class="pre">src/main/resources/ValidationMessages.properties</span></code></p>
<div class="highlight-properties"><div class="highlight"><pre><span class="na">javax.validation.constraints.NotNull.message</span> <span class="o">=</span> <span class="s">{0} may not be null.</span>
<span class="na">javax.validation.constraints.Size.message</span>    <span class="o">=</span> <span class="s">{0} size must be between {min} and {max}.</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="create-a-package-that-contains-the-error-handling-class">
<h4><a class="toc-backref" href="#id31">7.1.3.7.3. Create a package that contains the error handling class</a><a class="headerlink" href="#create-a-package-that-contains-the-error-handling-class" title="Permalink to this headline">Â¶</a></h4>
<div class="line-block">
<div class="line">Create a package for storing the error handling classes.</div>
<div class="line">In this tutorial, creating a package for storing the <code class="docutils literal"><span class="pre">todo.api.common.error</span></code> error handling class.</div>
</div>
<div class="figure">
<img alt="../_images/exception-package.png" src="../_images/exception-package.png" />
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="creating-rest-api-error-handling-class">
<h4><a class="toc-backref" href="#id32">7.1.3.7.4. Creating REST API error handling class</a><a class="headerlink" href="#creating-rest-api-error-handling-class" title="Permalink to this headline">Â¶</a></h4>
<div class="line-block">
<div class="line">The REST API error handling class is created by inheriting the <code class="docutils literal"><span class="pre">org.springframework.web.servlet.mvc.method.annotation.ResponseEntityExceptionHandler</span></code> provided by Spring MVC, adding the <code class="docutils literal"><span class="pre">&#64;ControllerAdvice</span></code> annotation, and recommended to add <code class="docutils literal"><span class="pre">(annotations</span> <span class="pre">=</span> <span class="pre">RestController.class)</span></code> attribute in order to restrict to the REST API processing.</div>
<div class="line">Below created the <code class="docutils literal"><span class="pre">todo.api.common.error.RestGlobalExceptionHandler</span></code> class inherited from the <code class="docutils literal"><span class="pre">ResponseEntityExceptionHandler</span></code>.</div>
</div>
<div class="figure">
<img alt="../_images/exception-handlingclass.png" src="../_images/exception-handlingclass.png" />
</div>
<p><code class="docutils literal"><span class="pre">src/main/java/todo/api/common/error/RestGlobalExceptionHandler.java</span></code></p>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">package</span> <span class="nn">todo.api.common.error</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.ControllerAdvice</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.servlet.mvc.method.annotation.ResponseEntityExceptionHandler</span><span class="o">;</span>

<span class="nd">@ControllerAdvice</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RestGlobalExceptionHandler</span> <span class="kd">extends</span> <span class="n">ResponseEntityExceptionHandler</span> <span class="o">{</span>

<span class="o">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="creating-javabean-for-holding-the-rest-api-error-information">
<h4><a class="toc-backref" href="#id33">7.1.3.7.5. Creating JavaBean for holding the REST API error information</a><a class="headerlink" href="#creating-javabean-for-holding-the-rest-api-error-information" title="Permalink to this headline">Â¶</a></h4>
<div class="line-block">
<div class="line">Create <code class="docutils literal"><span class="pre">ApiError</span></code> class under the <code class="docutils literal"><span class="pre">todo.api.common.error</span></code> package for holding the error information generated by the REST API.</div>
<div class="line"><code class="docutils literal"><span class="pre">ApiError</span></code> class converted into JSON and return to client.</div>
</div>
<div class="figure">
<img alt="../_images/exception-apierror.png" src="../_images/exception-apierror.png" />
</div>
<p><code class="docutils literal"><span class="pre">src/main/java/todo/api/common/error/ApiError.java</span></code></p>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">package</span> <span class="nn">todo.api.common.error</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.Serializable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.fasterxml.jackson.annotation.JsonInclude</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ApiError</span> <span class="kd">implements</span> <span class="n">Serializable</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">code</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">message</span><span class="o">;</span>

    <span class="nd">@JsonInclude</span><span class="o">(</span><span class="n">JsonInclude</span><span class="o">.</span><span class="na">Include</span><span class="o">.</span><span class="na">NON_EMPTY</span><span class="o">)</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">target</span><span class="o">;</span>

    <span class="nd">@JsonInclude</span><span class="o">(</span><span class="n">JsonInclude</span><span class="o">.</span><span class="na">Include</span><span class="o">.</span><span class="na">NON_EMPTY</span><span class="o">)</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">ApiError</span><span class="o">&gt;</span> <span class="n">details</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>

    <span class="kd">public</span> <span class="nf">ApiError</span><span class="o">(</span><span class="n">String</span> <span class="n">code</span><span class="o">,</span> <span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">(</span><span class="n">code</span><span class="o">,</span> <span class="n">message</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nf">ApiError</span><span class="o">(</span><span class="n">String</span> <span class="n">code</span><span class="o">,</span> <span class="n">String</span> <span class="n">message</span><span class="o">,</span> <span class="n">String</span> <span class="n">target</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">code</span> <span class="o">=</span> <span class="n">code</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">message</span> <span class="o">=</span> <span class="n">message</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">target</span> <span class="o">=</span> <span class="n">target</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getCode</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">code</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getMessage</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">message</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getTarget</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">target</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">ApiError</span><span class="o">&gt;</span> <span class="nf">getDetails</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">details</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addDetail</span><span class="o">(</span><span class="n">ApiError</span> <span class="n">detail</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">details</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">detail</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="implementation-of-putting-error-information-to-the-http-response-body">
<h4><a class="toc-backref" href="#id34">7.1.3.7.6. Implementation of putting error information to the HTTP response BODY</a><a class="headerlink" href="#implementation-of-putting-error-information-to-the-http-response-body" title="Permalink to this headline">Â¶</a></h4>
<p>By default <code class="docutils literal"><span class="pre">ResponseEntityExceptionHandler</span></code> configures only HTTP status (400 or 500 etc) but not configures the HTTP response BODY.
Therefore, output the BODY by overidding the <code class="docutils literal"><span class="pre">handleExceptionInternal</span></code> method as follows.</p>
<p><code class="docutils literal"><span class="pre">src/main/java/todo/api/common/error/RestGlobalExceptionHandler.java</span></code></p>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">package</span> <span class="nn">todo.api.common.error</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.inject.Inject</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.context.MessageSource</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.http.HttpHeaders</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.http.HttpStatus</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.http.ResponseEntity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.ControllerAdvice</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.context.request.WebRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.servlet.mvc.method.annotation.ResponseEntityExceptionHandler</span><span class="o">;</span>

<span class="nd">@ControllerAdvice</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RestGlobalExceptionHandler</span> <span class="kd">extends</span> <span class="n">ResponseEntityExceptionHandler</span> <span class="o">{</span>

<span class="hll">    <span class="nd">@Inject</span>
</span><span class="hll">    <span class="n">MessageSource</span> <span class="n">messageSource</span><span class="o">;</span>
</span>
<span class="hll">    <span class="nd">@Override</span>
</span><span class="hll">    <span class="kd">protected</span> <span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="nf">handleExceptionInternal</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">,</span>
</span><span class="hll">            <span class="n">Object</span> <span class="n">body</span><span class="o">,</span> <span class="n">HttpHeaders</span> <span class="n">headers</span><span class="o">,</span> <span class="n">HttpStatus</span> <span class="n">status</span><span class="o">,</span>
</span><span class="hll">            <span class="n">WebRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
</span><span class="hll">        <span class="n">Object</span> <span class="n">responseBody</span> <span class="o">=</span> <span class="n">body</span><span class="o">;</span>
</span><span class="hll">        <span class="k">if</span> <span class="o">(</span><span class="n">body</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class="hll">            <span class="n">responseBody</span> <span class="o">=</span> <span class="n">createApiError</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="s">&quot;E999&quot;</span><span class="o">,</span> <span class="n">ex</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
</span><span class="hll">        <span class="o">}</span>
</span><span class="hll">        <span class="k">return</span> <span class="n">ResponseEntity</span><span class="o">.</span><span class="na">status</span><span class="o">(</span><span class="n">status</span><span class="o">).</span><span class="na">headers</span><span class="o">(</span><span class="n">headers</span><span class="o">).</span><span class="na">body</span><span class="o">(</span><span class="n">responseBody</span><span class="o">);</span>
</span><span class="hll">    <span class="o">}</span>
</span>
<span class="hll">    <span class="kd">private</span> <span class="n">ApiError</span> <span class="nf">createApiError</span><span class="o">(</span><span class="n">WebRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">String</span> <span class="n">errorCode</span><span class="o">,</span>
</span><span class="hll">            <span class="n">Object</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span><span class="hll">        <span class="k">return</span> <span class="k">new</span> <span class="n">ApiError</span><span class="o">(</span><span class="n">errorCode</span><span class="o">,</span> <span class="n">messageSource</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(</span><span class="n">errorCode</span><span class="o">,</span>
</span><span class="hll">                <span class="n">args</span><span class="o">,</span> <span class="n">request</span><span class="o">.</span><span class="na">getLocale</span><span class="o">()));</span>
</span><span class="hll">    <span class="o">}</span>
</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">By performing the above implementation, the error information is logged in to HTTP response BODY which was handled by the <code class="docutils literal"><span class="pre">ResponseEntityExceptionHandler</span></code> .</div>
<div class="line">About the exception handled by <code class="docutils literal"><span class="pre">ResponseEntityExceptionHandler</span></code> , refer <a class="reference internal" href="../ArchitectureInDetail/ExceptionHandling.html#exception-handling-appendix-defaulthandlerexceptionresolver-label"><span>HTTP response code set by DefaultHandlerExceptionResolver</span></a>.</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">Check the operation of the implemented error handling using DHC.</div>
<div class="line">Open the DHC, enter <code class="docutils literal"><span class="pre">&quot;localhost:8080/todo/api/v1/todos&quot;</span></code> in the URL and click the &#8220;Send&#8221; button after specifying PUT in method.</div>
</div>
<p>HTTP status returned &#8220;405 Method Not Allowed&#8221; and the JSON error information displays in [Body] of [RESPONSE] part.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/exception-genericerror.png"><img alt="../_images/exception-genericerror.png" src="../_images/exception-genericerror.png" style="width: 100%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="error-handling-of-input-errors">
<h4><a class="toc-backref" href="#id35">7.1.3.7.7. Error handling of Input errors</a><a class="headerlink" href="#error-handling-of-input-errors" title="Permalink to this headline">Â¶</a></h4>
<p>Type of input errors as follows.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">org.springframework.web.bind.MethodArgumentNotValidException</span></code></li>
<li><code class="docutils literal"><span class="pre">org.springframework.validation.BindException</span></code></li>
<li><code class="docutils literal"><span class="pre">org.springframework.http.converter.HttpMessageNotReadableException</span></code></li>
<li><code class="docutils literal"><span class="pre">org.springframework.beans.TypeMismatchException</span></code></li>
</ul>
<div class="line-block">
<div class="line">In this tutorial, implementing the <code class="docutils literal"><span class="pre">MethodArgumentNotValidException</span></code> error handling.</div>
<div class="line">The <code class="docutils literal"><span class="pre">MethodArgumentNotValidException</span></code> is an exception that occurs if there is any input error in the data stored in HTTP request BODY.</div>
</div>
<p><code class="docutils literal"><span class="pre">src/main/java/todo/api/common/error/RestGlobalExceptionHandler.java</span></code></p>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">package</span> <span class="nn">todo.api.common.error</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.inject.Inject</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.context.MessageSource</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.support.DefaultMessageSourceResolvable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.http.HttpHeaders</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.http.HttpStatus</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.http.ResponseEntity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.validation.FieldError</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.validation.ObjectError</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.MethodArgumentNotValidException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.ControllerAdvice</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.context.request.WebRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.servlet.mvc.method.annotation.ResponseEntityExceptionHandler</span><span class="o">;</span>

<span class="nd">@ControllerAdvice</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RestGlobalExceptionHandler</span> <span class="kd">extends</span> <span class="n">ResponseEntityExceptionHandler</span> <span class="o">{</span>

    <span class="nd">@Inject</span>
    <span class="n">MessageSource</span> <span class="n">messageSource</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="nf">handleExceptionInternal</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">,</span>
            <span class="n">Object</span> <span class="n">body</span><span class="o">,</span> <span class="n">HttpHeaders</span> <span class="n">headers</span><span class="o">,</span> <span class="n">HttpStatus</span> <span class="n">status</span><span class="o">,</span>
            <span class="n">WebRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Object</span> <span class="n">responseBody</span> <span class="o">=</span> <span class="n">body</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">body</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">responseBody</span> <span class="o">=</span> <span class="n">createApiError</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="s">&quot;E999&quot;</span><span class="o">,</span> <span class="n">ex</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">ResponseEntity</span><span class="o">.</span><span class="na">status</span><span class="o">(</span><span class="n">status</span><span class="o">).</span><span class="na">headers</span><span class="o">(</span><span class="n">headers</span><span class="o">).</span><span class="na">body</span><span class="o">(</span><span class="n">responseBody</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">ApiError</span> <span class="nf">createApiError</span><span class="o">(</span><span class="n">WebRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">String</span> <span class="n">errorCode</span><span class="o">,</span>
            <span class="n">Object</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">ApiError</span><span class="o">(</span><span class="n">errorCode</span><span class="o">,</span> <span class="n">messageSource</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(</span><span class="n">errorCode</span><span class="o">,</span>
                <span class="n">args</span><span class="o">,</span> <span class="n">request</span><span class="o">.</span><span class="na">getLocale</span><span class="o">()));</span>
    <span class="o">}</span>

<span class="hll">    <span class="nd">@Override</span>
</span><span class="hll">    <span class="kd">protected</span> <span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="nf">handleMethodArgumentNotValid</span><span class="o">(</span>
</span><span class="hll">            <span class="n">MethodArgumentNotValidException</span> <span class="n">ex</span><span class="o">,</span> <span class="n">HttpHeaders</span> <span class="n">headers</span><span class="o">,</span>
</span><span class="hll">            <span class="n">HttpStatus</span> <span class="n">status</span><span class="o">,</span> <span class="n">WebRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
</span><span class="hll">        <span class="n">ApiError</span> <span class="n">apiError</span> <span class="o">=</span> <span class="n">createApiError</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="s">&quot;E400&quot;</span><span class="o">);</span>
</span><span class="hll">        <span class="k">for</span> <span class="o">(</span><span class="n">FieldError</span> <span class="n">fieldError</span> <span class="o">:</span> <span class="n">ex</span><span class="o">.</span><span class="na">getBindingResult</span><span class="o">().</span><span class="na">getFieldErrors</span><span class="o">())</span> <span class="o">{</span>
</span><span class="hll">            <span class="n">apiError</span><span class="o">.</span><span class="na">addDetail</span><span class="o">(</span><span class="n">createApiError</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">fieldError</span><span class="o">,</span> <span class="n">fieldError</span>
</span><span class="hll">                    <span class="o">.</span><span class="na">getField</span><span class="o">()));</span>
</span><span class="hll">        <span class="o">}</span>
</span><span class="hll">        <span class="k">for</span> <span class="o">(</span><span class="n">ObjectError</span> <span class="n">objectError</span> <span class="o">:</span> <span class="n">ex</span><span class="o">.</span><span class="na">getBindingResult</span><span class="o">().</span><span class="na">getGlobalErrors</span><span class="o">())</span> <span class="o">{</span>
</span><span class="hll">            <span class="n">apiError</span><span class="o">.</span><span class="na">addDetail</span><span class="o">(</span><span class="n">createApiError</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">objectError</span><span class="o">,</span> <span class="n">objectError</span>
</span><span class="hll">                    <span class="o">.</span><span class="na">getObjectName</span><span class="o">()));</span>
</span><span class="hll">        <span class="o">}</span>
</span><span class="hll">        <span class="k">return</span> <span class="n">handleExceptionInternal</span><span class="o">(</span><span class="n">ex</span><span class="o">,</span> <span class="n">apiError</span><span class="o">,</span> <span class="n">headers</span><span class="o">,</span> <span class="n">status</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
</span><span class="hll">    <span class="o">}</span>
</span>
<span class="hll">    <span class="kd">private</span> <span class="n">ApiError</span> <span class="nf">createApiError</span><span class="o">(</span><span class="n">WebRequest</span> <span class="n">request</span><span class="o">,</span>
</span><span class="hll">            <span class="n">DefaultMessageSourceResolvable</span> <span class="n">messageSourceResolvable</span><span class="o">,</span>
</span><span class="hll">            <span class="n">String</span> <span class="n">target</span><span class="o">)</span> <span class="o">{</span>
</span><span class="hll">        <span class="k">return</span> <span class="k">new</span> <span class="n">ApiError</span><span class="o">(</span><span class="n">messageSourceResolvable</span><span class="o">.</span><span class="na">getCode</span><span class="o">(),</span> <span class="n">messageSource</span>
</span><span class="hll">                <span class="o">.</span><span class="na">getMessage</span><span class="o">(</span><span class="n">messageSourceResolvable</span><span class="o">,</span> <span class="n">request</span><span class="o">.</span><span class="na">getLocale</span><span class="o">()),</span> <span class="n">target</span><span class="o">);</span>
</span><span class="hll">    <span class="o">}</span>
</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">Check the operation of the implemented error handling using DHC.</div>
<div class="line">Open the DHC, enter <code class="docutils literal"><span class="pre">&quot;localhost:8080/todo/api/v1/todos&quot;</span></code> in the URL and specify POST in method.</div>
<div class="line">Enter below JSON in [BODY] of the [REQUEST].</div>
</div>
<div class="highlight-json"><div class="highlight"><pre><span class="p">{</span>
  <span class="nt">&quot;todoTitle&quot;</span><span class="p">:</span> <span class="kc">null</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Furthermore, Add HTTP header by [+] button of [REQUEST] [HEADERS] and click &#8220;Send&#8221; button after setting [<code class="docutils literal"><span class="pre">application/json</span></code>] in the [<code class="docutils literal"><span class="pre">Content-Type</span></code>].</p>
<div class="line-block">
<div class="line">HTTP status returned &#8220;400 Bad Request&#8221; and JSON error information displays in [Body] of [RESPONSE] part.</div>
<div class="line">Since <code class="docutils literal"><span class="pre">todoTitle</span></code> is required field, required error occurred.</div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../_images/exception-inputerror.png"><img alt="../_images/exception-inputerror.png" src="../_images/exception-inputerror.png" style="width: 100%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="business-exception-error-handling">
<h4><a class="toc-backref" href="#id36">7.1.3.7.8. Business exception error handling</a><a class="headerlink" href="#business-exception-error-handling" title="Permalink to this headline">Â¶</a></h4>
<p>Handling a business exception by adding <code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.exception.BusinessException</span></code> method in the <code class="docutils literal"><span class="pre">RestGlobalExceptionHandler</span></code> .</p>
<p>Set &#8220;409 Conflict&#8221; in HTTP status if business exception occurred.</p>
<p><code class="docutils literal"><span class="pre">src/main/java/todo/api/common/error/RestGlobalExceptionHandler.java</span></code></p>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">package</span> <span class="nn">todo.api.common.error</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.inject.Inject</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.context.MessageSource</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.support.DefaultMessageSourceResolvable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.http.HttpHeaders</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.http.HttpStatus</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.http.ResponseEntity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.validation.FieldError</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.validation.ObjectError</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.MethodArgumentNotValidException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.ControllerAdvice</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.ExceptionHandler</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.context.request.WebRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.servlet.mvc.method.annotation.ResponseEntityExceptionHandler</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.terasoluna.gfw.common.exception.BusinessException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.terasoluna.gfw.common.exception.ResultMessagesNotificationException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.terasoluna.gfw.common.message.ResultMessage</span><span class="o">;</span>

<span class="nd">@ControllerAdvice</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RestGlobalExceptionHandler</span> <span class="kd">extends</span> <span class="n">ResponseEntityExceptionHandler</span> <span class="o">{</span>

    <span class="nd">@Inject</span>
    <span class="n">MessageSource</span> <span class="n">messageSource</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="nf">handleExceptionInternal</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">,</span>
            <span class="n">Object</span> <span class="n">body</span><span class="o">,</span> <span class="n">HttpHeaders</span> <span class="n">headers</span><span class="o">,</span> <span class="n">HttpStatus</span> <span class="n">status</span><span class="o">,</span>
            <span class="n">WebRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Object</span> <span class="n">responseBody</span> <span class="o">=</span> <span class="n">body</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">body</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">responseBody</span> <span class="o">=</span> <span class="n">createApiError</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="s">&quot;E999&quot;</span><span class="o">,</span> <span class="n">ex</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">ResponseEntity</span><span class="o">.</span><span class="na">status</span><span class="o">(</span><span class="n">status</span><span class="o">).</span><span class="na">headers</span><span class="o">(</span><span class="n">headers</span><span class="o">).</span><span class="na">body</span><span class="o">(</span><span class="n">responseBody</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">ApiError</span> <span class="nf">createApiError</span><span class="o">(</span><span class="n">WebRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">String</span> <span class="n">errorCode</span><span class="o">,</span>
            <span class="n">Object</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">ApiError</span><span class="o">(</span><span class="n">errorCode</span><span class="o">,</span> <span class="n">messageSource</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(</span><span class="n">errorCode</span><span class="o">,</span>
                <span class="n">args</span><span class="o">,</span> <span class="n">request</span><span class="o">.</span><span class="na">getLocale</span><span class="o">()));</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="nf">handleMethodArgumentNotValid</span><span class="o">(</span>
            <span class="n">MethodArgumentNotValidException</span> <span class="n">ex</span><span class="o">,</span> <span class="n">HttpHeaders</span> <span class="n">headers</span><span class="o">,</span>
            <span class="n">HttpStatus</span> <span class="n">status</span><span class="o">,</span> <span class="n">WebRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">ApiError</span> <span class="n">apiError</span> <span class="o">=</span> <span class="n">createApiError</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="s">&quot;E400&quot;</span><span class="o">);</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">FieldError</span> <span class="n">fieldError</span> <span class="o">:</span> <span class="n">ex</span><span class="o">.</span><span class="na">getBindingResult</span><span class="o">().</span><span class="na">getFieldErrors</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">apiError</span><span class="o">.</span><span class="na">addDetail</span><span class="o">(</span><span class="n">createApiError</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">fieldError</span><span class="o">,</span> <span class="n">fieldError</span>
                    <span class="o">.</span><span class="na">getField</span><span class="o">()));</span>
        <span class="o">}</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">ObjectError</span> <span class="n">objectError</span> <span class="o">:</span> <span class="n">ex</span><span class="o">.</span><span class="na">getBindingResult</span><span class="o">().</span><span class="na">getGlobalErrors</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">apiError</span><span class="o">.</span><span class="na">addDetail</span><span class="o">(</span><span class="n">createApiError</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">objectError</span><span class="o">,</span> <span class="n">objectError</span>
                    <span class="o">.</span><span class="na">getObjectName</span><span class="o">()));</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">handleExceptionInternal</span><span class="o">(</span><span class="n">ex</span><span class="o">,</span> <span class="n">apiError</span><span class="o">,</span> <span class="n">headers</span><span class="o">,</span> <span class="n">status</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">ApiError</span> <span class="nf">createApiError</span><span class="o">(</span><span class="n">WebRequest</span> <span class="n">request</span><span class="o">,</span>
            <span class="n">DefaultMessageSourceResolvable</span> <span class="n">messageSourceResolvable</span><span class="o">,</span>
            <span class="n">String</span> <span class="n">target</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">ApiError</span><span class="o">(</span><span class="n">messageSourceResolvable</span><span class="o">.</span><span class="na">getCode</span><span class="o">(),</span> <span class="n">messageSource</span>
                <span class="o">.</span><span class="na">getMessage</span><span class="o">(</span><span class="n">messageSourceResolvable</span><span class="o">,</span> <span class="n">request</span><span class="o">.</span><span class="na">getLocale</span><span class="o">()),</span> <span class="n">target</span><span class="o">);</span>
    <span class="o">}</span>

<span class="hll">    <span class="nd">@ExceptionHandler</span><span class="o">(</span><span class="n">BusinessException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
</span><span class="hll">    <span class="kd">public</span> <span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="nf">handleBusinessException</span><span class="o">(</span><span class="n">BusinessException</span> <span class="n">ex</span><span class="o">,</span>
</span><span class="hll">            <span class="n">WebRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
</span><span class="hll">        <span class="k">return</span> <span class="n">handleResultMessagesNotificationException</span><span class="o">(</span><span class="n">ex</span><span class="o">,</span> <span class="k">new</span> <span class="n">HttpHeaders</span><span class="o">(),</span>
</span><span class="hll">                <span class="n">HttpStatus</span><span class="o">.</span><span class="na">CONFLICT</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
</span><span class="hll">    <span class="o">}</span>
</span>
<span class="hll">    <span class="kd">private</span> <span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="nf">handleResultMessagesNotificationException</span><span class="o">(</span>
</span><span class="hll">            <span class="n">ResultMessagesNotificationException</span> <span class="n">ex</span><span class="o">,</span> <span class="n">HttpHeaders</span> <span class="n">headers</span><span class="o">,</span>
</span><span class="hll">            <span class="n">HttpStatus</span> <span class="n">status</span><span class="o">,</span> <span class="n">WebRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
</span><span class="hll">        <span class="n">ResultMessage</span> <span class="n">message</span> <span class="o">=</span> <span class="n">ex</span><span class="o">.</span><span class="na">getResultMessages</span><span class="o">().</span><span class="na">iterator</span><span class="o">().</span><span class="na">next</span><span class="o">();</span>
</span><span class="hll">        <span class="n">ApiError</span> <span class="n">apiError</span> <span class="o">=</span> <span class="n">createApiError</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">message</span><span class="o">.</span><span class="na">getCode</span><span class="o">(),</span> <span class="n">message</span>
</span><span class="hll">                <span class="o">.</span><span class="na">getArgs</span><span class="o">());</span>
</span><span class="hll">        <span class="k">return</span> <span class="n">handleExceptionInternal</span><span class="o">(</span><span class="n">ex</span><span class="o">,</span> <span class="n">apiError</span><span class="o">,</span> <span class="n">headers</span><span class="o">,</span> <span class="n">status</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
</span><span class="hll">    <span class="o">}</span>
</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">Check the operation of the implemented error handling using DHC.</div>
<div class="line">Open the DHC, enter <code class="docutils literal"><span class="pre">&quot;localhost:8080/todo/api/v1/todos/{todoId}&quot;</span></code> in the URL and specify PUT in method.</div>
<div class="line">Since it is necessary to enter the actual ID at <code class="docutils literal"><span class="pre">{todoId}</span></code>, run the POST Todos or GET Todos to get actual ID, copy &amp; paste the <code class="docutils literal"><span class="pre">todoId</span></code> from the Response, and click the &#8220;Send&#8221; button twice.</div>
<div class="line">Specify un-completed <code class="docutils literal"><span class="pre">todoId</span></code> of the Todos.</div>
</div>
<p>HTTP status returned &#8220;409 Conflict&#8221; as a response of the 2nd request and JSON error information displays in [Body] of [RESPONSE] part.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/exception-businesserror.png"><img alt="../_images/exception-businesserror.png" src="../_images/exception-businesserror.png" style="width: 100%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="resource-not-found-exception-error-handling">
<h4><a class="toc-backref" href="#id37">7.1.3.7.9. Resource not found exception error handling</a><a class="headerlink" href="#resource-not-found-exception-error-handling" title="Permalink to this headline">Â¶</a></h4>
<p>Resource not found exception handles by adding <code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.exception.ResourceNotFoundException</span></code> method in the <code class="docutils literal"><span class="pre">RestGlobalExceptionHandler</span></code>.</p>
<p>Set &#8220;404 NotFound&#8221; in HTTP status if Resource not found exception occurred.</p>
<p><code class="docutils literal"><span class="pre">src/main/java/todo/api/common/error/RestGlobalExceptionHandler.java</span></code></p>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">package</span> <span class="nn">todo.api.common.error</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.inject.Inject</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.context.MessageSource</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.support.DefaultMessageSourceResolvable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.http.HttpHeaders</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.http.HttpStatus</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.http.ResponseEntity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.validation.FieldError</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.validation.ObjectError</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.MethodArgumentNotValidException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.ControllerAdvice</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.ExceptionHandler</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.context.request.WebRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.servlet.mvc.method.annotation.ResponseEntityExceptionHandler</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.terasoluna.gfw.common.exception.BusinessException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.terasoluna.gfw.common.exception.ResourceNotFoundException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.terasoluna.gfw.common.exception.ResultMessagesNotificationException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.terasoluna.gfw.common.message.ResultMessage</span><span class="o">;</span>

<span class="nd">@ControllerAdvice</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RestGlobalExceptionHandler</span> <span class="kd">extends</span> <span class="n">ResponseEntityExceptionHandler</span> <span class="o">{</span>

    <span class="nd">@Inject</span>
    <span class="n">MessageSource</span> <span class="n">messageSource</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="nf">handleExceptionInternal</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">,</span>
            <span class="n">Object</span> <span class="n">body</span><span class="o">,</span> <span class="n">HttpHeaders</span> <span class="n">headers</span><span class="o">,</span> <span class="n">HttpStatus</span> <span class="n">status</span><span class="o">,</span>
            <span class="n">WebRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Object</span> <span class="n">responseBody</span> <span class="o">=</span> <span class="n">body</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">body</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">responseBody</span> <span class="o">=</span> <span class="n">createApiError</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="s">&quot;E999&quot;</span><span class="o">,</span> <span class="n">ex</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">ResponseEntity</span><span class="o">.</span><span class="na">status</span><span class="o">(</span><span class="n">status</span><span class="o">).</span><span class="na">headers</span><span class="o">(</span><span class="n">headers</span><span class="o">).</span><span class="na">body</span><span class="o">(</span><span class="n">responseBody</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">ApiError</span> <span class="nf">createApiError</span><span class="o">(</span><span class="n">WebRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">String</span> <span class="n">errorCode</span><span class="o">,</span>
            <span class="n">Object</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">ApiError</span><span class="o">(</span><span class="n">errorCode</span><span class="o">,</span> <span class="n">messageSource</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(</span><span class="n">errorCode</span><span class="o">,</span>
                <span class="n">args</span><span class="o">,</span> <span class="n">request</span><span class="o">.</span><span class="na">getLocale</span><span class="o">()));</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="nf">handleMethodArgumentNotValid</span><span class="o">(</span>
            <span class="n">MethodArgumentNotValidException</span> <span class="n">ex</span><span class="o">,</span> <span class="n">HttpHeaders</span> <span class="n">headers</span><span class="o">,</span>
            <span class="n">HttpStatus</span> <span class="n">status</span><span class="o">,</span> <span class="n">WebRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">ApiError</span> <span class="n">apiError</span> <span class="o">=</span> <span class="n">createApiError</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="s">&quot;E400&quot;</span><span class="o">);</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">FieldError</span> <span class="n">fieldError</span> <span class="o">:</span> <span class="n">ex</span><span class="o">.</span><span class="na">getBindingResult</span><span class="o">().</span><span class="na">getFieldErrors</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">apiError</span><span class="o">.</span><span class="na">addDetail</span><span class="o">(</span><span class="n">createApiError</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">fieldError</span><span class="o">,</span> <span class="n">fieldError</span>
                    <span class="o">.</span><span class="na">getField</span><span class="o">()));</span>
        <span class="o">}</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">ObjectError</span> <span class="n">objectError</span> <span class="o">:</span> <span class="n">ex</span><span class="o">.</span><span class="na">getBindingResult</span><span class="o">().</span><span class="na">getGlobalErrors</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">apiError</span><span class="o">.</span><span class="na">addDetail</span><span class="o">(</span><span class="n">createApiError</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">objectError</span><span class="o">,</span> <span class="n">objectError</span>
                    <span class="o">.</span><span class="na">getObjectName</span><span class="o">()));</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">handleExceptionInternal</span><span class="o">(</span><span class="n">ex</span><span class="o">,</span> <span class="n">apiError</span><span class="o">,</span> <span class="n">headers</span><span class="o">,</span> <span class="n">status</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">ApiError</span> <span class="nf">createApiError</span><span class="o">(</span><span class="n">WebRequest</span> <span class="n">request</span><span class="o">,</span>
            <span class="n">DefaultMessageSourceResolvable</span> <span class="n">messageSourceResolvable</span><span class="o">,</span>
            <span class="n">String</span> <span class="n">target</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">ApiError</span><span class="o">(</span><span class="n">messageSourceResolvable</span><span class="o">.</span><span class="na">getCode</span><span class="o">(),</span> <span class="n">messageSource</span>
                <span class="o">.</span><span class="na">getMessage</span><span class="o">(</span><span class="n">messageSourceResolvable</span><span class="o">,</span> <span class="n">request</span><span class="o">.</span><span class="na">getLocale</span><span class="o">()),</span> <span class="n">target</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@ExceptionHandler</span><span class="o">(</span><span class="n">BusinessException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="nf">handleBusinessException</span><span class="o">(</span><span class="n">BusinessException</span> <span class="n">ex</span><span class="o">,</span>
            <span class="n">WebRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">handleResultMessagesNotificationException</span><span class="o">(</span><span class="n">ex</span><span class="o">,</span> <span class="k">new</span> <span class="n">HttpHeaders</span><span class="o">(),</span>
                <span class="n">HttpStatus</span><span class="o">.</span><span class="na">CONFLICT</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="nf">handleResultMessagesNotificationException</span><span class="o">(</span>
            <span class="n">ResultMessagesNotificationException</span> <span class="n">ex</span><span class="o">,</span> <span class="n">HttpHeaders</span> <span class="n">headers</span><span class="o">,</span>
            <span class="n">HttpStatus</span> <span class="n">status</span><span class="o">,</span> <span class="n">WebRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">ResultMessage</span> <span class="n">message</span> <span class="o">=</span> <span class="n">ex</span><span class="o">.</span><span class="na">getResultMessages</span><span class="o">().</span><span class="na">iterator</span><span class="o">().</span><span class="na">next</span><span class="o">();</span>
        <span class="n">ApiError</span> <span class="n">apiError</span> <span class="o">=</span> <span class="n">createApiError</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">message</span><span class="o">.</span><span class="na">getCode</span><span class="o">(),</span> <span class="n">message</span>
                <span class="o">.</span><span class="na">getArgs</span><span class="o">());</span>
        <span class="k">return</span> <span class="n">handleExceptionInternal</span><span class="o">(</span><span class="n">ex</span><span class="o">,</span> <span class="n">apiError</span><span class="o">,</span> <span class="n">headers</span><span class="o">,</span> <span class="n">status</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="o">}</span>

<span class="hll">    <span class="nd">@ExceptionHandler</span><span class="o">(</span><span class="n">ResourceNotFoundException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
</span><span class="hll">    <span class="kd">public</span> <span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="nf">handleResourceNotFoundException</span><span class="o">(</span>
</span><span class="hll">            <span class="n">ResourceNotFoundException</span> <span class="n">ex</span><span class="o">,</span> <span class="n">WebRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
</span><span class="hll">        <span class="k">return</span> <span class="n">handleResultMessagesNotificationException</span><span class="o">(</span><span class="n">ex</span><span class="o">,</span> <span class="k">new</span> <span class="n">HttpHeaders</span><span class="o">(),</span>
</span><span class="hll">                <span class="n">HttpStatus</span><span class="o">.</span><span class="na">NOT_FOUND</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
</span><span class="hll">    <span class="o">}</span>
</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">Check the operation of the implemented error handling using DHC.</div>
<div class="line">Open the DHC, enter <code class="docutils literal"><span class="pre">&quot;localhost:8080/todo/api/v1/todos/{todoId}&quot;</span></code> in the URL and specify GET in method.</div>
<div class="line">Specifying the ID that does not exist in {todoId} portion and click &#8220;Send&#8221; button.</div>
</div>
<p>HTTP status returned &#8220;404 Not Found&#8221; and JSON error information displays in [Body] of [RESPONSE] part.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/exception-notfound.png"><img alt="../_images/exception-notfound.png" src="../_images/exception-notfound.png" style="width: 100%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="system-exception-error-handling">
<h4><a class="toc-backref" href="#id38">7.1.3.7.10. System exception error handling</a><a class="headerlink" href="#system-exception-error-handling" title="Permalink to this headline">Â¶</a></h4>
<p>Lastly, System exception handles by adding <code class="docutils literal"><span class="pre">java.lang.Exception</span></code> method in the <code class="docutils literal"><span class="pre">RestGlobalExceptionHandler</span></code>.</p>
<p>Set &#8220;500 InternalServerError&#8221; in HTTP status if System exception occurred.</p>
<p><code class="docutils literal"><span class="pre">src/main/java/todo/api/common/error/RestGlobalExceptionHandler.java</span></code></p>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">package</span> <span class="nn">todo.api.common.error</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.inject.Inject</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.context.MessageSource</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.support.DefaultMessageSourceResolvable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.http.HttpHeaders</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.http.HttpStatus</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.http.ResponseEntity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.validation.FieldError</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.validation.ObjectError</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.MethodArgumentNotValidException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.ControllerAdvice</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.ExceptionHandler</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.context.request.WebRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.servlet.mvc.method.annotation.ResponseEntityExceptionHandler</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.terasoluna.gfw.common.exception.BusinessException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.terasoluna.gfw.common.exception.ResourceNotFoundException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.terasoluna.gfw.common.exception.ResultMessagesNotificationException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.terasoluna.gfw.common.message.ResultMessage</span><span class="o">;</span>

<span class="nd">@ControllerAdvice</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RestGlobalExceptionHandler</span> <span class="kd">extends</span> <span class="n">ResponseEntityExceptionHandler</span> <span class="o">{</span>

    <span class="nd">@Inject</span>
    <span class="n">MessageSource</span> <span class="n">messageSource</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="nf">handleExceptionInternal</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">,</span>
            <span class="n">Object</span> <span class="n">body</span><span class="o">,</span> <span class="n">HttpHeaders</span> <span class="n">headers</span><span class="o">,</span> <span class="n">HttpStatus</span> <span class="n">status</span><span class="o">,</span>
            <span class="n">WebRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Object</span> <span class="n">responseBody</span> <span class="o">=</span> <span class="n">body</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">body</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">responseBody</span> <span class="o">=</span> <span class="n">createApiError</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="s">&quot;E999&quot;</span><span class="o">,</span> <span class="n">ex</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">ResponseEntity</span><span class="o">.</span><span class="na">status</span><span class="o">(</span><span class="n">status</span><span class="o">).</span><span class="na">headers</span><span class="o">(</span><span class="n">headers</span><span class="o">).</span><span class="na">body</span><span class="o">(</span><span class="n">responseBody</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">ApiError</span> <span class="nf">createApiError</span><span class="o">(</span><span class="n">WebRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">String</span> <span class="n">errorCode</span><span class="o">,</span>
            <span class="n">Object</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">ApiError</span><span class="o">(</span><span class="n">errorCode</span><span class="o">,</span> <span class="n">messageSource</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(</span><span class="n">errorCode</span><span class="o">,</span>
                <span class="n">args</span><span class="o">,</span> <span class="n">request</span><span class="o">.</span><span class="na">getLocale</span><span class="o">()));</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="nf">handleMethodArgumentNotValid</span><span class="o">(</span>
            <span class="n">MethodArgumentNotValidException</span> <span class="n">ex</span><span class="o">,</span> <span class="n">HttpHeaders</span> <span class="n">headers</span><span class="o">,</span>
            <span class="n">HttpStatus</span> <span class="n">status</span><span class="o">,</span> <span class="n">WebRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">ApiError</span> <span class="n">apiError</span> <span class="o">=</span> <span class="n">createApiError</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="s">&quot;E400&quot;</span><span class="o">);</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">FieldError</span> <span class="n">fieldError</span> <span class="o">:</span> <span class="n">ex</span><span class="o">.</span><span class="na">getBindingResult</span><span class="o">().</span><span class="na">getFieldErrors</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">apiError</span><span class="o">.</span><span class="na">addDetail</span><span class="o">(</span><span class="n">createApiError</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">fieldError</span><span class="o">,</span> <span class="n">fieldError</span>
                    <span class="o">.</span><span class="na">getField</span><span class="o">()));</span>
        <span class="o">}</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">ObjectError</span> <span class="n">objectError</span> <span class="o">:</span> <span class="n">ex</span><span class="o">.</span><span class="na">getBindingResult</span><span class="o">().</span><span class="na">getGlobalErrors</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">apiError</span><span class="o">.</span><span class="na">addDetail</span><span class="o">(</span><span class="n">createApiError</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">objectError</span><span class="o">,</span> <span class="n">objectError</span>
                    <span class="o">.</span><span class="na">getObjectName</span><span class="o">()));</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">handleExceptionInternal</span><span class="o">(</span><span class="n">ex</span><span class="o">,</span> <span class="n">apiError</span><span class="o">,</span> <span class="n">headers</span><span class="o">,</span> <span class="n">status</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">ApiError</span> <span class="nf">createApiError</span><span class="o">(</span><span class="n">WebRequest</span> <span class="n">request</span><span class="o">,</span>
            <span class="n">DefaultMessageSourceResolvable</span> <span class="n">messageSourceResolvable</span><span class="o">,</span>
            <span class="n">String</span> <span class="n">target</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">ApiError</span><span class="o">(</span><span class="n">messageSourceResolvable</span><span class="o">.</span><span class="na">getCode</span><span class="o">(),</span> <span class="n">messageSource</span>
                <span class="o">.</span><span class="na">getMessage</span><span class="o">(</span><span class="n">messageSourceResolvable</span><span class="o">,</span> <span class="n">request</span><span class="o">.</span><span class="na">getLocale</span><span class="o">()),</span> <span class="n">target</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@ExceptionHandler</span><span class="o">(</span><span class="n">BusinessException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="nf">handleBusinessException</span><span class="o">(</span><span class="n">BusinessException</span> <span class="n">ex</span><span class="o">,</span>
            <span class="n">WebRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">handleResultMessagesNotificationException</span><span class="o">(</span><span class="n">ex</span><span class="o">,</span> <span class="k">new</span> <span class="n">HttpHeaders</span><span class="o">(),</span>
                <span class="n">HttpStatus</span><span class="o">.</span><span class="na">CONFLICT</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="nf">handleResultMessagesNotificationException</span><span class="o">(</span>
            <span class="n">ResultMessagesNotificationException</span> <span class="n">ex</span><span class="o">,</span> <span class="n">HttpHeaders</span> <span class="n">headers</span><span class="o">,</span>
            <span class="n">HttpStatus</span> <span class="n">status</span><span class="o">,</span> <span class="n">WebRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">ResultMessage</span> <span class="n">message</span> <span class="o">=</span> <span class="n">ex</span><span class="o">.</span><span class="na">getResultMessages</span><span class="o">().</span><span class="na">iterator</span><span class="o">().</span><span class="na">next</span><span class="o">();</span>
        <span class="n">ApiError</span> <span class="n">apiError</span> <span class="o">=</span> <span class="n">createApiError</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">message</span><span class="o">.</span><span class="na">getCode</span><span class="o">(),</span> <span class="n">message</span>
                <span class="o">.</span><span class="na">getArgs</span><span class="o">());</span>
        <span class="k">return</span> <span class="n">handleExceptionInternal</span><span class="o">(</span><span class="n">ex</span><span class="o">,</span> <span class="n">apiError</span><span class="o">,</span> <span class="n">headers</span><span class="o">,</span> <span class="n">status</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@ExceptionHandler</span><span class="o">(</span><span class="n">ResourceNotFoundException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="nf">handleResourceNotFoundException</span><span class="o">(</span>
            <span class="n">ResourceNotFoundException</span> <span class="n">ex</span><span class="o">,</span> <span class="n">WebRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">handleResultMessagesNotificationException</span><span class="o">(</span><span class="n">ex</span><span class="o">,</span> <span class="k">new</span> <span class="n">HttpHeaders</span><span class="o">(),</span>
                <span class="n">HttpStatus</span><span class="o">.</span><span class="na">NOT_FOUND</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
    <span class="o">}</span>

<span class="hll">    <span class="nd">@ExceptionHandler</span><span class="o">(</span><span class="n">Exception</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
</span><span class="hll">    <span class="kd">public</span> <span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="nf">handleSystemError</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">,</span>
</span><span class="hll">            <span class="n">WebRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
</span><span class="hll">        <span class="n">ApiError</span> <span class="n">apiError</span> <span class="o">=</span> <span class="n">createApiError</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="s">&quot;E500&quot;</span><span class="o">);</span>
</span><span class="hll">        <span class="k">return</span> <span class="n">handleExceptionInternal</span><span class="o">(</span><span class="n">ex</span><span class="o">,</span> <span class="n">apiError</span><span class="o">,</span> <span class="k">new</span> <span class="n">HttpHeaders</span><span class="o">(),</span>
</span><span class="hll">                <span class="n">HttpStatus</span><span class="o">.</span><span class="na">INTERNAL_SERVER_ERROR</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
</span><span class="hll">    <span class="o">}</span>
</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">Check the operation of the implemented error handling using DHC.</div>
<div class="line">In order to generate a system error, boot the application in the state of Database tables are not created.</div>
</div>
<p><code class="docutils literal"><span class="pre">src/main/resources/META-INF/spring/todo-infra.properties</span></code></p>
<div class="highlight-properties"><div class="highlight"><pre><span class="na">database</span><span class="o">=</span><span class="s">H2</span>
<span class="c">#database.url=jdbc:h2:mem:todo;DB_CLOSE_DELAY=-1;INIT=create table if not exists todo(todo_id varchar(36) primary key, todo_title varchar(30), finished boolean, created_at timestamp)</span>
<span class="hll"><span class="na">database.url</span><span class="o">=</span><span class="s">jdbc:h2:mem:todo;DB_CLOSE_DELAY=-1</span>
</span><span class="na">database.username</span><span class="o">=</span><span class="s">sa</span>
<span class="na">database.password</span><span class="o">=</span>
<span class="na">database.driverClassName</span><span class="o">=</span><span class="s">org.h2.Driver</span>
<span class="c"># connection pool</span>
<span class="na">cp.maxActive</span><span class="o">=</span><span class="s">96</span>
<span class="na">cp.maxIdle</span><span class="o">=</span><span class="s">16</span>
<span class="na">cp.minIdle</span><span class="o">=</span><span class="s">0</span>
<span class="na">cp.maxWait</span><span class="o">=</span><span class="s">60000</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Open the DHC, enter <code class="docutils literal"><span class="pre">&quot;localhost:8080/todo/api/v1/todos/&quot;</span></code> in the URL and click the &#8220;Send&#8221; button after specifying GET in method.</p>
<p>HTTP status returned &#8220;500 Internal Server Error&#8221; and JSON error information displays in [Body] of [RESPONSE] part.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/exception-systemerror.png"><img alt="../_images/exception-systemerror.png" src="../_images/exception-systemerror.png" style="width: 100%;" /></a>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>In case of system error occurred, it is recommended to set a simple error message from which cause of error can not be identified while error message returning to the client.
When you set the error message from which cause of error is identified, there is a possibility to exposes the vulnerability of the system to the client and may cause security issues.</p>
<p>It is good to flush the cause of an error into error analysis log.
The default setting of Blank project has been outputting the log by <code class="docutils literal"><span class="pre">ExceptionLogger</span></code> provided in the common library therefore setting and implementation for outputting the log is not required.</p>
<p>The log output by <code class="docutils literal"><span class="pre">ExceptionLogger</span></code> is as follows.</p>
<p>The cause of the system error can be understood that the Todo table is not exist.</p>
<blockquote class="last">
<div><div class="highlight-console"><div class="highlight"><pre><span class="go">date:2015-01-19 02:08:47        thread:tomcat-http--4   X-Track:aadf5822205d423c95a6531f2f76036f        level:ERROR     logger:o.t.gfw.common.exception.ExceptionLogger         message:[e.xx.fw.9002]</span>
<span class="hll"><span class="gp">#</span><span class="c">## Error querying database.  Cause: org.h2.jdbc.JdbcSQLException: Table &quot;TODO&quot; not found; SQL statement:</span>
</span><span class="go">SELECT</span>
<span class="go">            todo_id,</span>
<span class="go">            todo_title,</span>
<span class="go">            finished,</span>
<span class="go">            created_at</span>
<span class="go">        FROM</span>
<span class="go">            todo [42102-182]</span>
<span class="gp">#</span><span class="c">## The error may exist in todo/domain/repository/todo/TodoRepository.xml</span>
<span class="gp">#</span><span class="c">## The error may involve todo.domain.repository.todo.TodoRepository.findAll</span>
<span class="gp">#</span><span class="c">## The error occurred while executing a query</span>

<span class="go">... (omitted)</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
</div>
<div class="section" id="in-the-end">
<h2><a class="toc-backref" href="#id39">7.1.4. In the end...</a><a class="headerlink" href="#in-the-end" title="Permalink to this headline">Â¶</a></h2>
<p>In this tutorial, following contents have been learnt.</p>
<ul class="simple">
<li>How to develop basic RESTful Web service by TERASOLUNA Server Framework for Java (5.x)</li>
<li>Implementation of Controller class that offers REST API(GET, POST, PUT, DELETE)</li>
<li>Cross conversion method of JavaBean and JSON</li>
<li>Error message definition method</li>
<li>Method of handling a variety of exception with Spring MVC</li>
</ul>
<p>Here, explained how to implement the basic RESTful Web Services.
To learn more about the architecture and design guidelines etc, Refer [<a class="reference internal" href="../ArchitectureInDetail/REST.html"><em>RESTful Web Service</em></a>].</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../Appendix/CreateProjectFromBlank.html" title="7.2. Create a New Project from Blank Project"
             >next</a> |</li>
        <li class="right" >
          <a href="../Appendix/index.html" title="7. Appendix"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.0.2.RELEASE documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../Appendix/index.html" >7. Appendix</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013-2016, NTT DATA.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.4.Theme by <a href="http://github.com/vkvn">vkvn</a>
    </div>
    
    <script>
    
    $(function() {
    	var $sidebar	= $('.sphinxsidebar'),
    		$window		= $(window),
    		offset		= $sidebar.offset(),
    		topPadding	= 3,
    		$scroll		= $('#scroll');
    	
    	$window.scroll(function() {
    		if ($scroll.is(':checked')) {
				if ($window.scrollTop() > offset.top) {
					$sidebar.stop().animate({
						marginTop:$window.scrollTop() - offset.top + topPadding
					});
				} else {
					$sidebar.stop().animate({
						marginTop:0
					});
				}
			}
		});
    	
    	var $navList = $('ul:first', $sidebar);
    	$('li:first', $navList).addClass('open');
    	
    	$navList.treeview({
    		persist: "location",
    		collapsed: true,
    		unique: false
    	});
    	
	});
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-46550814-1', 'terasolunaorg.github.io');
    ga('send', 'pageview');
    </script>
  </body>
</html>