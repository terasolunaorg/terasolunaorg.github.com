<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>5.24.1. Bean Mapping (Dozer) &#8212; TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.1.1.RELEASE documentation</title>
    <link rel="stylesheet" href="../../_static/solar.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '5.1.1.RELEASE',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="5.24.2. Date operations (JSR-310 Date and Time API)" href="DateAndTime.html" />
    <link rel="prev" title="5.24. Utilities" href="index.html" /><script async src="https://www.googletagmanager.com/gtag/js?id=G-847V2Q99G8"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date()); gtag('config', 'G-847V2Q99G8');
</script>
<script src="../../_static/jquery.treeview.js" type="text/javascript"></script>
<!-- <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro|Open+Sans:300italic,400italic,700italic,400,300,700' rel='stylesheet' type='text/css'> -->
<link href="../../_static/solarized-dark.css" rel="stylesheet">
<link href="../../_static/jquery.treeview.css" rel="stylesheet">
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="DateAndTime.html" title="5.24.2. Date operations (JSR-310 Date and Time API)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="5.24. Utilities"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.1.1.RELEASE documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >5. Architecture in Detail - TERASOLUNA Server Framework for Java (5.x)</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">5.24. Utilities</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><label><input id="scroll" type="checkbox" checked> scroll sidebar</label>

  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">5.24.1. Bean Mapping (Dozer)</a><ul>
<li><a class="reference internal" href="#overview">5.24.1.1. Overview</a></li>
<li><a class="reference internal" href="#how-to-use">5.24.1.2. How to use</a><ul>
<li><a class="reference internal" href="#bean-definition-for-using-dozer">5.24.1.2.1. Bean definition for using Dozer</a></li>
<li><a class="reference internal" href="#mapping-when-the-field-name-and-the-type-between-beans-is-same">5.24.1.2.2. Mapping when the field name and the type between Beans is same</a></li>
<li><a class="reference internal" href="#mapping-when-the-field-name-is-the-same-and-type-between-beans-is-different">5.24.1.2.3. Mapping when the field name is the same and type between Beans is different</a></li>
<li><a class="reference internal" href="#mapping-when-the-field-name-between-beans-is-different">5.24.1.2.4. Mapping when the field name between Beans is different</a></li>
<li><a class="reference internal" href="#one-way-two-way-mapping">5.24.1.2.5. One-way/Two-way mapping</a></li>
<li><a class="reference internal" href="#mapping-of-nested-fields">5.24.1.2.6. Mapping of nested fields</a></li>
<li><a class="reference internal" href="#collection-mapping">5.24.1.2.7. Collection mapping</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-extend">5.24.1.3. How to extend</a><ul>
<li><a class="reference internal" href="#creating-custom-convertor">5.24.1.3.1. Creating custom convertor</a></li>
</ul>
</li>
<li><a class="reference internal" href="#appendix">5.24.1.4. Appendix</a><ul>
<li><a class="reference internal" href="#field-exclusion-settings-field-exclude">5.24.1.4.1. Field exclusion settings (field-exclude)</a></li>
<li><a class="reference internal" href="#specifying-mapping-map-id">5.24.1.4.2. Specifying mapping (map-id)</a></li>
<li><a class="reference internal" href="#settings-to-exclude-null-empty-field-of-copy-source-map-null-map-empty">5.24.1.4.3. Settings to exclude null/empty field of copy source (map-null, map-empty)</a></li>
<li><a class="reference internal" href="#mapping-from-string-to-date-time-object">5.24.1.4.4. Mapping from string to date/time object</a></li>
<li><a class="reference internal" href="#mapping-error">5.24.1.4.5. Mapping error</a></li>
</ul>
</li>
</ul>
</li>
</ul>


  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">5.24. Utilities</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="DateAndTime.html"
                        title="next chapter">5.24.2. Date operations (JSR-310 Date and Time API)</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/ArchitectureInDetail/Utilities/Dozer.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="bean-mapping-dozer">
<h1>5.24.1. Bean Mapping (Dozer)<a class="headerlink" href="#bean-mapping-dozer" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#overview" id="id1">Overview</a></li>
<li><a class="reference internal" href="#how-to-use" id="id2">How to use</a><ul>
<li><a class="reference internal" href="#bean-definition-for-using-dozer" id="id3">Bean definition for using Dozer</a></li>
<li><a class="reference internal" href="#mapping-when-the-field-name-and-the-type-between-beans-is-same" id="id4">Mapping when the field name and the type between Beans is same</a></li>
<li><a class="reference internal" href="#mapping-when-the-field-name-is-the-same-and-type-between-beans-is-different" id="id5">Mapping when the field name is the same and type between Beans is different</a></li>
<li><a class="reference internal" href="#mapping-when-the-field-name-between-beans-is-different" id="id6">Mapping when the field name between Beans is different</a></li>
<li><a class="reference internal" href="#one-way-two-way-mapping" id="id7">One-way/Two-way mapping</a></li>
<li><a class="reference internal" href="#mapping-of-nested-fields" id="id8">Mapping of nested fields</a></li>
<li><a class="reference internal" href="#collection-mapping" id="id9">Collection mapping</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-extend" id="id10">How to extend</a><ul>
<li><a class="reference internal" href="#creating-custom-convertor" id="id11">Creating custom convertor</a></li>
</ul>
</li>
<li><a class="reference internal" href="#appendix" id="id12">Appendix</a><ul>
<li><a class="reference internal" href="#field-exclusion-settings-field-exclude" id="id13">Field exclusion settings (field-exclude)</a></li>
<li><a class="reference internal" href="#specifying-mapping-map-id" id="id14">Specifying mapping (map-id)</a></li>
<li><a class="reference internal" href="#settings-to-exclude-null-empty-field-of-copy-source-map-null-map-empty" id="id15">Settings to exclude null/empty field of copy source (map-null, map-empty)</a></li>
<li><a class="reference internal" href="#mapping-from-string-to-date-time-object" id="id16">Mapping from string to date/time object</a></li>
<li><a class="reference internal" href="#mapping-error" id="id17">Mapping error</a></li>
</ul>
</li>
</ul>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#id1">5.24.1.1. Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Bean mapping is a process to copy the field values of one Bean to another Bean.</p>
<div class="line-block">
<div class="line">There are many cases where bean mapping is necessary while passing the data between different layers of the application (application layer and domain layer).</div>
</div>
<div class="line-block">
<div class="line">For example, <code class="docutils literal"><span class="pre">AccountForm</span></code> object of application layer is converted to <code class="docutils literal"><span class="pre">Account</span></code> object of domain layer.</div>
<div class="line">Since the domain layer should not depend on the application layer, AccountForm object cannot be used as it is in the domain layer.</div>
<div class="line">Hence, <code class="docutils literal"><span class="pre">AccountForm</span></code> object is Bean mapped to <code class="docutils literal"><span class="pre">Account</span></code> object and <code class="docutils literal"><span class="pre">Account</span></code> object is used in the domain layer.</div>
<div class="line">Thus, linear dependency relation can be maintained between application layer and domain layer.</div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/beanmapping-overview.png"><img alt="../../_images/beanmapping-overview.png" src="../../_images/beanmapping-overview.png" style="width: 80%;" /></a>
</div>
<div class="line-block">
<div class="line">These objects can be mapped by calling getter/setter of Bean and passing the data.</div>
<div class="line">However, since a complex process results in deterioration of the program readability, in this guideline, it is recommended to use <a class="reference external" href="http://dozer.sourceforge.net">Dozer</a>  a Bean mapping library available in OSS.</div>
</div>
<div class="line-block">
<div class="line">By using Dozer, different types of copies for copy source class and copy destination class and copy of nested Beans can be easily performed as shown in the following figure.</div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/dozer-functionality-overview.png"><img alt="../../_images/dozer-functionality-overview.png" src="../../_images/dozer-functionality-overview.png" style="width: 75%;" /></a>
</div>
<p>Code examples with/without using Dozer are given below.</p>
<ul>
<li><p class="first">Example of a complex process that results in the program readability deterioration</p>
<blockquote>
<div><div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">userService</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="n">userId</span><span class="p">);</span>

<span class="n">XxxOutput</span> <span class="n">output</span> <span class="o">=</span> <span class="k">new</span> <span class="n">XxxOutput</span><span class="p">();</span>

<span class="n">output</span><span class="p">.</span><span class="na">setUserId</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">getUserId</span><span class="p">());</span>
<span class="n">output</span><span class="p">.</span><span class="na">setFirstName</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">getFirstName</span><span class="p">());</span>
<span class="n">output</span><span class="p">.</span><span class="na">setLastName</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">getLastName</span><span class="p">());</span>
<span class="n">output</span><span class="p">.</span><span class="na">setTitle</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">getTitle</span><span class="p">());</span>
<span class="n">output</span><span class="p">.</span><span class="na">setBirthDay</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">getBirthDay</span><span class="p">());</span>
<span class="n">output</span><span class="p">.</span><span class="na">setGender</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">getGender</span><span class="p">());</span>
<span class="n">output</span><span class="p">.</span><span class="na">setStatus</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">getStatus</span><span class="p">());</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Example when Dozer is used</p>
<blockquote>
<div><div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">userService</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="n">userId</span><span class="p">);</span>

<span class="n">XxxOutput</span> <span class="n">output</span> <span class="o">=</span> <span class="n">beanMapper</span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">XxxOutput</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<p>How to use Dozer is explained below.</p>
</div>
<div class="section" id="how-to-use">
<h2><a class="toc-backref" href="#id2">5.24.1.2. How to use</a><a class="headerlink" href="#how-to-use" title="Permalink to this headline">¶</a></h2>
<p>Dozer is a mapping function library of JavaBean.
Values are copied recursively (nested structure) from conversion source Bean to conversion destination Bean.</p>
<div class="section" id="bean-definition-for-using-dozer">
<span id="bean-mapper-definition"></span><h3><a class="toc-backref" href="#id3">5.24.1.2.1. Bean definition for using Dozer</a><a class="headerlink" href="#bean-definition-for-using-dozer" title="Permalink to this headline">¶</a></h3>
<p>Create an instance of <code class="docutils literal"><span class="pre">org.dozer.Mapper</span></code> when Dozer is to be used independently as follows.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Mapper</span> <span class="n">mapper</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DozerBeanMapper</span><span class="p">();</span>
</pre></div>
</div>
<p>Creating instance of Mapper each time deteriorates efficiency,
hence <code class="docutils literal"><span class="pre">org.dozer.spring.DozerBeanMapperFactoryBean</span></code> provided by Dozer should be used.</p>
<p>Define <code class="docutils literal"><span class="pre">org.dozer.spring.DozerBeanMapperFactoryBean</span></code>, a Factory class that creates Mapper in Bean definition file (applicationContext.xml).</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">&quot;org.dozer.spring.DozerBeanMapperFactoryBean&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;mappingFiles&quot;</span>
        <span class="na">value=</span><span class="s">&quot;classpath*:/META-INF/dozer/**/*-mapping.xml&quot;</span> <span class="nt">/&gt;</span><span class="c">&lt;!-- (1) --&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify mapping definition XML files in mappingFiles.</div>
<div class="line"><code class="docutils literal"><span class="pre">org.dozer.spring.DozerBeanMapperFactoryBean</span></code> maintains <code class="docutils literal"><span class="pre">org.dozer.Mapper</span></code> as an interface. Therefore, specify <code class="docutils literal"><span class="pre">Mapper</span></code> for <code class="docutils literal"><span class="pre">&#64;Inject</span></code>.</div>
<div class="line">In this example, all the (any value)-mapping.xmls in any folder of /META-INF/dozer under the class path</div>
<div class="line">are read. The contents of these XML files are explained later.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><code class="docutils literal"><span class="pre">Mapper</span></code> should be injected in the class to perform Bean mapping.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="nd">@Inject</span>
<span class="n">Mapper</span> <span class="n">beanMapper</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="mapping-when-the-field-name-and-the-type-between-beans-is-same">
<span id="beanconverter-basic-mapping-label"></span><h3><a class="toc-backref" href="#id4">5.24.1.2.2. Mapping when the field name and the type between Beans is same</a><a class="headerlink" href="#mapping-when-the-field-name-and-the-type-between-beans-is-same" title="Permalink to this headline">¶</a></h3>
<p>Dozer can perform mapping by default without creating mapping definition XML file if the field name between the Beans is same.</p>
<p>Bean definition of conversion source</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Source</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="p">;</span>
    <span class="c1">// omitted setter/getter</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Bean definition of conversion destination</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Destination</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="p">;</span>
    <span class="c1">// omitted setter/getter</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Perform Bean mapping using <code class="docutils literal"><span class="pre">map</span></code> method of <code class="docutils literal"><span class="pre">Mapper</span></code> as given below.
After executing the method given below, a new Destination object is created and each field value of source is copied to the created Destination object.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Source</span> <span class="n">source</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Source</span><span class="p">();</span>
<span class="n">source</span><span class="p">.</span><span class="na">setId</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="n">source</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&quot;SourceName&quot;</span><span class="p">);</span>
<span class="n">Destination</span> <span class="n">destination</span> <span class="o">=</span> <span class="n">beanMapper</span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">Destination</span><span class="p">.</span><span class="na">class</span><span class="p">);</span> <span class="c1">// (1)</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">destination</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">destination</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Pass the object to be copied as the first argument and the Bean class where it is to be copied as the second argument.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>The output of the above code is as given below. The value of object to be copied is set in the created object.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">1</span>
<span class="go">SourceName</span>
</pre></div>
</div>
<p>To copy the field of <code class="docutils literal"><span class="pre">source</span></code> object to already existing <code class="docutils literal"><span class="pre">destination</span></code> object, perform the following</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Source</span> <span class="n">source</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Source</span><span class="p">();</span>
<span class="n">source</span><span class="p">.</span><span class="na">setId</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="n">source</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&quot;SourceName&quot;</span><span class="p">);</span>
<span class="n">Destination</span> <span class="n">destination</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Destination</span><span class="p">();</span>
<span class="n">destination</span><span class="p">.</span><span class="na">setId</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="n">destination</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&quot;DestinationName&quot;</span><span class="p">);</span>
<span class="n">beanMapper</span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">destination</span><span class="p">);</span> <span class="c1">// (1)</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">destination</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">destination</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Pass the object to be copied as the first argument and the object where it is to be copied as the second argument.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>The output of the above code is as given below. The value of object to be copied is reflected in the destination where it is to be copied.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">1</span>
<span class="go">SourceName</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The value that does not exist in <code class="docutils literal"><span class="pre">Source</span></code> class does not change before and after copying to the field of <code class="docutils literal"><span class="pre">Destination</span></code> class.</p>
<p>Bean definition of conversion source</p>
<blockquote>
<div><div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Source</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="p">;</span>
    <span class="c1">// omitted setter/getter</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Bean definition of conversion destination</p>
<blockquote>
<div><div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Destination</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">title</span><span class="p">;</span>
    <span class="c1">// omitted setter/getter</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Example of Mapping</p>
<blockquote>
<div><div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Source</span> <span class="n">source</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Source</span><span class="p">();</span>
<span class="n">source</span><span class="p">.</span><span class="na">setId</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="n">source</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&quot;SourceName&quot;</span><span class="p">);</span>
<span class="n">Destination</span> <span class="n">destination</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Destination</span><span class="p">();</span>
<span class="n">destination</span><span class="p">.</span><span class="na">setId</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="n">destination</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&quot;DestinationName&quot;</span><span class="p">);</span>
<span class="n">destination</span><span class="p">.</span><span class="na">setTitle</span><span class="p">(</span><span class="s">&quot;DestinationTitle&quot;</span><span class="p">);</span>
<span class="n">beanMapper</span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">destination</span><span class="p">);</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">destination</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">destination</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">destination</span><span class="p">.</span><span class="na">getTitle</span><span class="p">());</span>
</pre></div>
</div>
</div></blockquote>
<p>The output of the above code is as given below. Since there is no <code class="docutils literal"><span class="pre">title</span></code> field in the <code class="docutils literal"><span class="pre">Source</span></code> class,
the value of <code class="docutils literal"><span class="pre">title</span></code> field of <code class="docutils literal"><span class="pre">Destination</span></code> object remains the same as the field value before copying.</p>
<blockquote class="last">
<div><div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">1</span>
<span class="go">SourceName</span>
<span class="go">DestinationTitle</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="mapping-when-the-field-name-is-the-same-and-type-between-beans-is-different">
<span id="beanconverter-difference-type-mapping-label"></span><h3><a class="toc-backref" href="#id5">5.24.1.2.3. Mapping when the field name is the same and type between Beans is different</a><a class="headerlink" href="#mapping-when-the-field-name-is-the-same-and-type-between-beans-is-different" title="Permalink to this headline">¶</a></h3>
<p>When field type of Bean is different in copy source and copy destination,
mapping of the type where type conversion is supported can be done automatically.</p>
<p>The conversion given below is an example where it is possible to convert without a mapping definition XML file.</p>
<p>Example: String -&gt; BigDecimal</p>
<p>Bean definition of conversion source</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Source</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">amount</span><span class="p">;</span>
    <span class="c1">// omitted setter/getter</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Bean definition of conversion destination</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Destination</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="n">BigDecimal</span> <span class="n">amount</span><span class="p">;</span>
    <span class="c1">// omitted setter/getter</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Example of Mapping</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Source</span> <span class="n">source</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Source</span><span class="p">();</span>
<span class="n">source</span><span class="p">.</span><span class="na">setAmount</span><span class="p">(</span><span class="s">&quot;123.45&quot;</span><span class="p">);</span>
<span class="n">Destination</span> <span class="n">destination</span> <span class="o">=</span> <span class="n">beanMapper</span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">Destination</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">destination</span><span class="p">.</span><span class="na">getAmount</span><span class="p">());</span>
</pre></div>
</div>
<p>The output of the above code is as given below. The value can be copied even when the type is different.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">123.45</span>
</pre></div>
</div>
<p>Refer to <a class="reference external" href="http://dozer.sourceforge.net/documentation/simpleproperty.html">Manual</a> for the supported type conversions.</p>
</div>
<div class="section" id="mapping-when-the-field-name-between-beans-is-different">
<span id="beanconverter-difference-item-xml-mapping-label"></span><h3><a class="toc-backref" href="#id6">5.24.1.2.4. Mapping when the field name between Beans is different</a><a class="headerlink" href="#mapping-when-the-field-name-between-beans-is-different" title="Permalink to this headline">¶</a></h3>
<p>When field name of copy source is different from the copy destination, creating mapping definition XML file
and defining the field for Bean mapping enables conversion.</p>
<p>Bean definition of conversion source</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Source</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="p">;</span>
    <span class="c1">// omitted setter/getter</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Bean definition of conversion destination</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Destination</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">destinationId</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">destinationName</span><span class="p">;</span>
    <span class="c1">// omitted setter/getter</span>
<span class="p">}</span>
</pre></div>
</div>
<p>To define <a class="reference internal" href="#bean-mapper-definition"><span class="std std-ref">Bean definition for using Dozer</span></a>,
create mapping definition XML file called (any value)-mapping.xml in the src/main/resources/META-INF/dozer folder.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;mappings</span> <span class="na">xmlns=</span><span class="s">&quot;http://dozer.sourceforge.net&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://dozer.sourceforge.net</span>
<span class="s">          http://dozer.sourceforge.net/schema/beanmapping.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;mapping&gt;</span>
      <span class="nt">&lt;class-a&gt;</span>com.xx.xx.Source<span class="nt">&lt;/class-a&gt;</span><span class="c">&lt;!-- (1) --&gt;</span>
      <span class="nt">&lt;class-b&gt;</span>com.xx.xx.Destination<span class="nt">&lt;/class-b&gt;</span><span class="c">&lt;!-- (2) --&gt;</span>
      <span class="nt">&lt;field&gt;</span>
        <span class="nt">&lt;a&gt;</span>id<span class="nt">&lt;/a&gt;</span><span class="c">&lt;!-- (3) --&gt;</span>
        <span class="nt">&lt;b&gt;</span>destinationId<span class="nt">&lt;/b&gt;</span><span class="c">&lt;!-- (4) --&gt;</span>
      <span class="nt">&lt;/field&gt;</span>
      <span class="nt">&lt;field&gt;</span>
        <span class="nt">&lt;a&gt;</span>name<span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;b&gt;</span>destinationName<span class="nt">&lt;/b&gt;</span>
      <span class="nt">&lt;/field&gt;</span>
    <span class="nt">&lt;/mapping&gt;</span>

<span class="nt">&lt;/mappings&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify fully qualified class name (FQCN) of copy source Bean in <code class="docutils literal"><span class="pre">&lt;class-a&gt;</span></code> tag.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify fully qualified class name (FQCN) of copy destination Bean in <code class="docutils literal"><span class="pre">&lt;class-b&gt;</span></code> tag.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify field name for mapping of copy source Bean in <code class="docutils literal"><span class="pre">&lt;a&gt;</span></code> tag of <code class="docutils literal"><span class="pre">&lt;field&gt;</span></code> tag.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify field name for mapping of copy destination Bean corresponding to (3) in <code class="docutils literal"><span class="pre">&lt;b&gt;</span></code> tag of <code class="docutils literal"><span class="pre">&lt;field&gt;</span></code> tag.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Example of Mapping</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Source</span> <span class="n">source</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Source</span><span class="p">();</span>
<span class="n">source</span><span class="p">.</span><span class="na">setId</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="n">source</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&quot;SourceName&quot;</span><span class="p">);</span>
<span class="n">Destination</span> <span class="n">destination</span> <span class="o">=</span> <span class="n">beanMapper</span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">Destination</span><span class="p">.</span><span class="na">class</span><span class="p">);</span> <span class="c1">// (1)</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">destination</span><span class="p">.</span><span class="na">getDestinationId</span><span class="p">());</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">destination</span><span class="p">.</span><span class="na">getDestinationName</span><span class="p">());</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Pass object to be copied as the first argument and the Bean class where it is to be copied as the second argument. (no difference with basic mapping.)</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>The output of the above code is as given below.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">1</span>
<span class="go">SourceName</span>
</pre></div>
</div>
<p>Mapping definition XML file existing under META-INF/dozer of class path is read in <code class="docutils literal"><span class="pre">mappingFiles</span></code> property in accordance with the setting of <a class="reference internal" href="#bean-mapper-definition"><span class="std std-ref">Bean definition for using Dozer</span></a>.
File name should be (any value)-mapping.xml.
The settings are applied if mapping between <code class="docutils literal"><span class="pre">Source</span></code> class and <code class="docutils literal"><span class="pre">Destination</span></code> class is defined in any file.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is recommended to create a mapping definition XML file in each Controller and name the file as -mapping.xml (value obtained by removing Controller from Controller name).
For example, mapping definition XML file of TodoController is created in src/main/resources/META-INF/dozer/todo-mapping.xml.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="one-way-two-way-mapping">
<h3><a class="toc-backref" href="#id7">5.24.1.2.5. One-way/Two-way mapping</a><a class="headerlink" href="#one-way-two-way-mapping" title="Permalink to this headline">¶</a></h3>
<p id="beanconverter-one-two-way-mapping-label">The mapping defined in mapping XML is two-way mapping by default.
In the above example, mapping is done from <code class="docutils literal"><span class="pre">Source</span></code> object to <code class="docutils literal"><span class="pre">Destination</span></code> object however,
mapping can also be done from <code class="docutils literal"><span class="pre">Destination</span></code> object to <code class="docutils literal"><span class="pre">Source</span></code> object.</p>
<p>To specify only one-way mapping, set <code class="docutils literal"><span class="pre">&quot;one-way&quot;</span></code> in the <code class="docutils literal"><span class="pre">type</span></code> attribute of <code class="docutils literal"><span class="pre">&lt;mapping&gt;</span></code> tag in the mapping field definition.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;mappings</span> <span class="na">xmlns=</span><span class="s">&quot;http://dozer.sourceforge.net&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://dozer.sourceforge.net</span>
<span class="s">          http://dozer.sourceforge.net/schema/beanmapping.xsd&quot;</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- omitted --&gt;</span>
        <span class="nt">&lt;mapping</span> <span class="na">type=</span><span class="s">&quot;one-way&quot;</span><span class="nt">&gt;</span>
              <span class="nt">&lt;class-a&gt;</span>com.xx.xx.Source<span class="nt">&lt;/class-a&gt;</span>
              <span class="nt">&lt;class-b&gt;</span>com.xx.xx.Destination<span class="nt">&lt;/class-b&gt;</span>
                <span class="nt">&lt;field&gt;</span>
                  <span class="nt">&lt;a&gt;</span>id<span class="nt">&lt;/a&gt;</span>
                  <span class="nt">&lt;b&gt;</span>destinationId<span class="nt">&lt;/b&gt;</span>
                <span class="nt">&lt;/field&gt;</span>
                <span class="nt">&lt;field&gt;</span>
                  <span class="nt">&lt;a&gt;</span>name<span class="nt">&lt;/a&gt;</span>
                  <span class="nt">&lt;b&gt;</span>destinationName<span class="nt">&lt;/b&gt;</span>
                <span class="nt">&lt;/field&gt;</span>
        <span class="nt">&lt;/mapping&gt;</span>
        <span class="c">&lt;!-- omitted --&gt;</span>
<span class="nt">&lt;/mappings&gt;</span>
</pre></div>
</div>
<p>Bean definition of conversion source</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Source</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="p">;</span>
    <span class="c1">// omitted setter/getter</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Bean definition of conversion destination</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Destination</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">destinationId</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">destinationName</span><span class="p">;</span>
    <span class="c1">// omitted setter/getter</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Example of Mapping</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Source</span> <span class="n">source</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Source</span><span class="p">();</span>
<span class="n">source</span><span class="p">.</span><span class="na">setId</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="n">source</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&quot;SourceName&quot;</span><span class="p">);</span>
<span class="n">Destination</span> <span class="n">destination</span> <span class="o">=</span> <span class="n">beanMapper</span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">Destination</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">destination</span><span class="p">.</span><span class="na">getDestinationId</span><span class="p">());</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">destination</span><span class="p">.</span><span class="na">getDestinationName</span><span class="p">());</span>
</pre></div>
</div>
<p>The output of the above code is as given below.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">1</span>
<span class="go">SourceName</span>
</pre></div>
</div>
<p>If one-way is specified, an error does not occur even if the mapping is done in the reverse direction. The copy process is ignored.
This is because <code class="docutils literal"><span class="pre">Source</span></code> field corresponding to <code class="docutils literal"><span class="pre">Destination</span></code> field does not exist if mapping is not defined.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Destination</span> <span class="n">destination</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Destination</span><span class="p">();</span>
<span class="n">destination</span><span class="p">.</span><span class="na">setDestinationId</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="n">destination</span><span class="p">.</span><span class="na">setDestinationName</span><span class="p">(</span><span class="s">&quot;DestinationName&quot;</span><span class="p">);</span>

<span class="n">Source</span> <span class="n">source</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Source</span><span class="p">();</span>
<span class="n">source</span><span class="p">.</span><span class="na">setId</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="n">source</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&quot;SourceName&quot;</span><span class="p">);</span>

<span class="n">beanMapper</span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">destination</span><span class="p">,</span> <span class="n">source</span><span class="p">);</span>

<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">source</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">source</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span>
</pre></div>
</div>
<p>The output of the above code is as given below.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">1</span>
<span class="go">SourceName</span>
</pre></div>
</div>
</div>
<div class="section" id="mapping-of-nested-fields">
<span id="beanconverter-custom-converter-label"></span><h3><a class="toc-backref" href="#id8">5.24.1.2.6. Mapping of nested fields</a><a class="headerlink" href="#mapping-of-nested-fields" title="Permalink to this headline">¶</a></h3>
<p>It is possible to map the field of Bean to be copied to the field with Nested attributes of the Bean where it is to be copied.
(In Dozer terminology, it is called <a class="reference external" href="http://dozer.sourceforge.net/documentation/deepmapping.html">Deep Mapping</a> .)</p>
<p>Bean definition of conversion source</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">EmployeeForm</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">deptId</span><span class="p">;</span>
    <span class="c1">// omitted setter/getter</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Bean definition of conversion destination</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Employee</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="n">Integer</span> <span class="n">id</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">Department</span> <span class="n">department</span><span class="p">;</span>
    <span class="c1">// omitted setter/getter</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Department</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">deptId</span><span class="p">;</span>
    <span class="c1">// omitted setter/getter and other fields</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Example: Define as below to map the <code class="docutils literal"><span class="pre">deptId</span></code> with <code class="docutils literal"><span class="pre">EmployeeForm</span></code> object to <code class="docutils literal"><span class="pre">deptId</span></code> of <code class="docutils literal"><span class="pre">Department</span></code>with <code class="docutils literal"><span class="pre">Employee</span></code> object.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;mappings</span> <span class="na">xmlns=</span><span class="s">&quot;http://dozer.sourceforge.net&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://dozer.sourceforge.net</span>
<span class="s">          http://dozer.sourceforge.net/schema/beanmapping.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- omitted --&gt;</span>
    <span class="nt">&lt;mapping</span> <span class="na">map-empty-string=</span><span class="s">&quot;false&quot;</span> <span class="na">map-null=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;class-a&gt;</span>com.xx.aa.EmployeeForm<span class="nt">&lt;/class-a&gt;</span>
        <span class="nt">&lt;class-b&gt;</span>com.xx.bb.Employee<span class="nt">&lt;/class-b&gt;</span>
        <span class="nt">&lt;field&gt;</span>
              <span class="nt">&lt;a&gt;</span>deptId<span class="nt">&lt;/a&gt;</span>
              <span class="nt">&lt;b&gt;</span>department.deptId<span class="nt">&lt;/b&gt;</span><span class="c">&lt;!-- (1) --&gt;</span>
        <span class="nt">&lt;/field&gt;</span>
    <span class="nt">&lt;/mapping&gt;</span>
    <span class="c">&lt;!-- omitted --&gt;</span>
<span class="nt">&lt;/mappings&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify the field of <code class="docutils literal"><span class="pre">Employee</span></code> object for <code class="docutils literal"><span class="pre">deptId</span></code> of <code class="docutils literal"><span class="pre">Employee</span></code> form.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Example of Mapping</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">EmployeeForm</span> <span class="n">source</span> <span class="o">=</span> <span class="k">new</span> <span class="n">EmployeeForm</span><span class="p">();</span>
<span class="n">source</span><span class="p">.</span><span class="na">setId</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="n">source</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&quot;John&quot;</span><span class="p">);</span>
<span class="n">source</span><span class="p">.</span><span class="na">setDeptId</span><span class="p">(</span><span class="s">&quot;D01&quot;</span><span class="p">);</span>

<span class="n">Employee</span> <span class="n">destination</span> <span class="o">=</span> <span class="n">beanMapper</span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">Employee</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">destination</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">destination</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">destination</span><span class="p">.</span><span class="na">getDepartment</span><span class="p">().</span><span class="na">getDeptId</span><span class="p">());</span>
</pre></div>
</div>
<p>The output of the above code is as given below.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">1</span>
<span class="go">John</span>
<span class="go">D01</span>
</pre></div>
</div>
<p>In the above case, a new instance of <code class="docutils literal"><span class="pre">Employee</span></code>, a class of conversion destination is created.
The newly created <code class="docutils literal"><span class="pre">Department</span></code> instance is set in the <code class="docutils literal"><span class="pre">department</span></code> field of <code class="docutils literal"><span class="pre">Employee</span></code> and
<code class="docutils literal"><span class="pre">deptId</span></code> of the <code class="docutils literal"><span class="pre">EmployeeForm</span></code> is copied.</p>
<p>When the <code class="docutils literal"><span class="pre">Department</span></code> object is already set in the <code class="docutils literal"><span class="pre">department</span></code> field of <code class="docutils literal"><span class="pre">Employee</span></code>,
a new instance is not created but the <code class="docutils literal"><span class="pre">deptId</span></code> of <code class="docutils literal"><span class="pre">EmployeeForm</span></code> is copied
to the <code class="docutils literal"><span class="pre">deptId</span></code> field of the existing <code class="docutils literal"><span class="pre">Department</span></code> object.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">EmployeeForm</span> <span class="n">source</span> <span class="o">=</span> <span class="k">new</span> <span class="n">EmployeeForm</span><span class="p">();</span>
<span class="n">source</span><span class="p">.</span><span class="na">setId</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="n">source</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&quot;John&quot;</span><span class="p">);</span>
<span class="n">source</span><span class="p">.</span><span class="na">setDeptId</span><span class="p">(</span><span class="s">&quot;D01&quot;</span><span class="p">);</span>

<span class="n">Employee</span> <span class="n">destination</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Employee</span><span class="p">();</span>
<span class="n">Department</span> <span class="n">department</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Department</span><span class="p">();</span>
<span class="n">destination</span><span class="p">.</span><span class="na">setDepartment</span><span class="p">(</span><span class="n">department</span><span class="p">);</span>

<span class="n">beanMapper</span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">destination</span><span class="p">);</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">department</span><span class="p">.</span><span class="na">getDeptId</span><span class="p">());</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">destination</span><span class="p">.</span><span class="na">getDepartment</span><span class="p">()</span> <span class="o">==</span> <span class="n">department</span><span class="p">);</span>
</pre></div>
</div>
<p>The output of the above code is as given below.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">D01</span>
<span class="go">true</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="collection-mapping">
<h3><a class="toc-backref" href="#id9">5.24.1.2.7. Collection mapping</a><a class="headerlink" href="#collection-mapping" title="Permalink to this headline">¶</a></h3>
<p>Dozer supports two-way auto-mapping of the following Collection types.
When field name is same, mapping definition XML file is not required.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">java.util.List</span></code> &lt;=&gt; <code class="docutils literal"><span class="pre">java.util.List</span></code></li>
<li><code class="docutils literal"><span class="pre">java.util.List</span></code> &lt;=&gt; Array</li>
<li>Array &lt;=&gt; Array</li>
<li><code class="docutils literal"><span class="pre">java.util.Set</span></code> &lt;=&gt; <code class="docutils literal"><span class="pre">java.util.Set</span></code></li>
<li><code class="docutils literal"><span class="pre">java.util.Set</span></code> &lt;=&gt; Array</li>
<li><code class="docutils literal"><span class="pre">java.util.Set</span></code> &lt;=&gt; <code class="docutils literal"><span class="pre">java.util.List</span></code></li>
</ul>
<p>Bean mapping with a collection of the following classes is considered.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.example.dozer</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Email</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">email</span><span class="p">;</span>

    <span class="kd">public</span> <span class="nf">Email</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="nf">Email</span><span class="p">(</span><span class="n">String</span> <span class="n">email</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="na">email</span> <span class="o">=</span> <span class="n">email</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getEmail</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">email</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setEmail</span><span class="p">(</span><span class="n">String</span> <span class="n">email</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="na">email</span> <span class="o">=</span> <span class="n">email</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">email</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// generated by Eclipse</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">hashCode</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">final</span> <span class="kt">int</span> <span class="n">prime</span> <span class="o">=</span> <span class="mi">31</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">prime</span> <span class="o">*</span> <span class="n">result</span> <span class="o">+</span> <span class="p">((</span><span class="n">email</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="o">?</span> <span class="mi">0</span> <span class="p">:</span> <span class="n">email</span><span class="p">.</span><span class="na">hashCode</span><span class="p">());</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// generated by Eclipse</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="p">(</span><span class="n">Object</span> <span class="n">obj</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span> <span class="o">==</span> <span class="n">obj</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">obj</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">getClass</span><span class="p">()</span> <span class="o">!=</span> <span class="n">obj</span><span class="p">.</span><span class="na">getClass</span><span class="p">())</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="n">Email</span> <span class="n">other</span> <span class="o">=</span> <span class="p">(</span><span class="n">Email</span><span class="p">)</span> <span class="n">obj</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">email</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="na">email</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">email</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="na">email</span><span class="p">))</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Conversion source Bean</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.example.dozer</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AccountForm</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Email</span><span class="o">&gt;</span> <span class="n">emails</span><span class="p">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setEmails</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Email</span><span class="o">&gt;</span> <span class="n">emails</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="na">emails</span> <span class="o">=</span> <span class="n">emails</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Email</span><span class="o">&gt;</span> <span class="nf">getEmails</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">emails</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Conversion destination Bean</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.example.dozer</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Account</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Email</span><span class="o">&gt;</span> <span class="n">emails</span><span class="p">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setEmails</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Email</span><span class="o">&gt;</span> <span class="n">emails</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="na">emails</span> <span class="o">=</span> <span class="n">emails</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Email</span><span class="o">&gt;</span> <span class="nf">getEmails</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">emails</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Example of Mapping</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">AccountForm</span> <span class="n">accountForm</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AccountForm</span><span class="p">();</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Email</span><span class="o">&gt;</span> <span class="n">emailsSrc</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Email</span><span class="o">&gt;</span><span class="p">();</span>

<span class="n">emailsSrc</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span> <span class="n">Email</span><span class="p">(</span><span class="s">&quot;a@example.com&quot;</span><span class="p">));</span>
<span class="n">emailsSrc</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span> <span class="n">Email</span><span class="p">(</span><span class="s">&quot;b@example.com&quot;</span><span class="p">));</span>
<span class="n">emailsSrc</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span> <span class="n">Email</span><span class="p">(</span><span class="s">&quot;c@example.com&quot;</span><span class="p">));</span>

<span class="n">accountForm</span><span class="p">.</span><span class="na">setEmails</span><span class="p">(</span><span class="n">emailsSrc</span><span class="p">);</span>

<span class="n">Account</span> <span class="n">account</span> <span class="o">=</span> <span class="n">beanMapper</span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">accountForm</span><span class="p">,</span> <span class="n">Account</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>

<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">account</span><span class="p">.</span><span class="na">getEmails</span><span class="p">());</span>
</pre></div>
</div>
<p>The output of the above code is as given below.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">[a@example.com, b@example.com, c@example.com]</span>
</pre></div>
</div>
<p>There is no particular change in the explanation given so far.</p>
<p>As shown in the example below, <strong>it is necessary to exercise caution when the element is already added to the Collection field of copy destination Bean.</strong></p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">AccountForm</span> <span class="n">accountForm</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AccountForm</span><span class="p">();</span>
<span class="n">Account</span> <span class="n">account</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Account</span><span class="p">();</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Email</span><span class="o">&gt;</span> <span class="n">emailsSrc</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Email</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Email</span><span class="o">&gt;</span> <span class="n">emailsDest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Email</span><span class="o">&gt;</span><span class="p">();</span>

<span class="n">emailsSrc</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span> <span class="n">Email</span><span class="p">(</span><span class="s">&quot;a@example.com&quot;</span><span class="p">));</span>
<span class="n">emailsSrc</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span> <span class="n">Email</span><span class="p">(</span><span class="s">&quot;b@example.com&quot;</span><span class="p">));</span>
<span class="n">emailsSrc</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span> <span class="n">Email</span><span class="p">(</span><span class="s">&quot;c@example.com&quot;</span><span class="p">));</span>

<span class="n">emailsDest</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span> <span class="n">Email</span><span class="p">(</span><span class="s">&quot;a@example.com&quot;</span><span class="p">));</span>
<span class="n">emailsDest</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span> <span class="n">Email</span><span class="p">(</span><span class="s">&quot;d@example.com&quot;</span><span class="p">));</span>
<span class="n">emailsDest</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span> <span class="n">Email</span><span class="p">(</span><span class="s">&quot;e@example.com&quot;</span><span class="p">));</span>

<span class="n">accountForm</span><span class="p">.</span><span class="na">setEmails</span><span class="p">(</span><span class="n">emailsSrc</span><span class="p">);</span>
<span class="n">account</span><span class="p">.</span><span class="na">setEmails</span><span class="p">(</span><span class="n">emailsDest</span><span class="p">);</span>

<span class="n">beanMapper</span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">accountForm</span><span class="p">,</span> <span class="n">account</span><span class="p">);</span>

<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">account</span><span class="p">.</span><span class="na">getEmails</span><span class="p">());</span>
</pre></div>
</div>
<p>The output of the above code is as given below.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">[a@example.com, d@example.com, e@example.com, a@example.com, b@example.com, c@example.com]</span>
</pre></div>
</div>
<p>All the elements of Collection of copy source Bean are added to the Collection of copy destination Bean.
Two <code class="docutils literal"><span class="pre">Email</span></code> objects with <code class="docutils literal"><span class="pre">a&#64;exmample.com</span></code> are  “Equal”, but are added easily.</p>
<p>(“Equal” here signifies <code class="docutils literal"><span class="pre">true</span></code> when compared by <code class="docutils literal"><span class="pre">Email.equals</span></code> and has the same value as <code class="docutils literal"><span class="pre">Email.hashCode</span></code>.)</p>
<p>The above behavior is called as <strong>cumulative</strong> in Dozer terminology and is a default behavior at the time of Collection mapping.</p>
<p>This behavior can be changed in mapping definition XML file.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;mappings</span> <span class="na">xmlns=</span><span class="s">&quot;http://dozer.sourceforge.net&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://dozer.sourceforge.net</span>
<span class="s">          http://dozer.sourceforge.net/schema/beanmapping.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- omitted --&gt;</span>
    <span class="nt">&lt;mapping&gt;</span>
        <span class="nt">&lt;class-a&gt;</span>com.example.dozer.AccountForm<span class="nt">&lt;/class-a&gt;</span>
        <span class="nt">&lt;class-b&gt;</span>com.example.dozer.Account<span class="nt">&lt;/class-b&gt;</span>
<span class="hll">        <span class="nt">&lt;field</span> <span class="na">relationship-type=</span><span class="s">&quot;non-cumulative&quot;</span><span class="nt">&gt;</span><span class="c">&lt;!-- (1) --&gt;</span>
</span>            <span class="nt">&lt;a&gt;</span>emails<span class="nt">&lt;/a&gt;</span>
            <span class="nt">&lt;b&gt;</span>emails<span class="nt">&lt;/b&gt;</span>
        <span class="nt">&lt;/field&gt;</span>
    <span class="nt">&lt;/mapping&gt;</span>
    <span class="c">&lt;!-- omitted --&gt;</span>
<span class="nt">&lt;/mappings&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify <code class="docutils literal"><span class="pre">non-cumulative</span></code> in  <code class="docutils literal"><span class="pre">relationship-type</span></code> attribute of <code class="docutils literal"><span class="pre">&lt;field&gt;</span></code> tag. Default value is <code class="docutils literal"><span class="pre">cumulative</span></code>.</div>
<div class="line"><br /></div>
<div class="line">To specify <code class="docutils literal"><span class="pre">non-cumulative</span></code> in all the fields of Bean to be mapped, specify <code class="docutils literal"><span class="pre">non-cumulative</span></code> in the <code class="docutils literal"><span class="pre">relationship-type</span></code> attribute of <code class="docutils literal"><span class="pre">&lt;mapping&gt;</span></code> tag.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>The output of the above code is as given below based on this setting.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">[a@example.com, d@example.com, e@example.com, b@example.com, c@example.com]</span>
</pre></div>
</div>
<p>Duplication of equivalent objects is eliminated.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>It is necessary to exercise caution for updating conversion source object with conversion destination object.
In the above example, <code class="docutils literal"><span class="pre">a&#64;exmample.com</span></code> of <code class="docutils literal"><span class="pre">AccountForm</span></code> is stored in the copy destination.</p>
<blockquote class="last">
<div><div class="figure">
<a class="reference internal image-reference" href="../../_images/dozer_noncumulativeupdate.png"><img alt="noncumulative update using dozer" src="../../_images/dozer_noncumulativeupdate.png" style="width: 60%;" /></a>
</div>
</div></blockquote>
</div>
<p>It can be implemented using the mapping definition XML file settings even to remove the fields existing only in the copy destination collection.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;mappings</span> <span class="na">xmlns=</span><span class="s">&quot;http://dozer.sourceforge.net&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://dozer.sourceforge.net</span>
<span class="s">          http://dozer.sourceforge.net/schema/beanmapping.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- omitted --&gt;</span>
    <span class="nt">&lt;mapping&gt;</span>
        <span class="nt">&lt;class-a&gt;</span>com.example.dozer.AccountForm<span class="nt">&lt;/class-a&gt;</span>
        <span class="nt">&lt;class-b&gt;</span>com.example.dozer.Account<span class="nt">&lt;/class-b&gt;</span>
<span class="hll">        <span class="nt">&lt;field</span> <span class="na">relationship-type=</span><span class="s">&quot;non-cumulative&quot;</span> <span class="na">remove-orphans=</span><span class="s">&quot;true&quot;</span> <span class="nt">&gt;</span><span class="c">&lt;!-- (1) --&gt;</span>
</span>            <span class="nt">&lt;a&gt;</span>emails<span class="nt">&lt;/a&gt;</span>
            <span class="nt">&lt;b&gt;</span>emails<span class="nt">&lt;/b&gt;</span>
        <span class="nt">&lt;/field&gt;</span>
    <span class="nt">&lt;/mapping&gt;</span>
    <span class="c">&lt;!-- omitted --&gt;</span>
<span class="nt">&lt;/mappings&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Set <code class="docutils literal"><span class="pre">true</span></code> in the <code class="docutils literal"><span class="pre">remove-orphans</span></code> attribute of <code class="docutils literal"><span class="pre">&lt;field&gt;</span></code> tag. Default value is <code class="docutils literal"><span class="pre">false</span></code>.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>The output of the above code is as given below based on this setting.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">[a@example.com, b@example.com, c@example.com]</span>
</pre></div>
</div>
<p>Only the objects to be copied are reflected in the collection where they are to be copied.</p>
<p>The same result is obtained even with the settings given below.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;mappings</span> <span class="na">xmlns=</span><span class="s">&quot;http://dozer.sourceforge.net&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://dozer.sourceforge.net</span>
<span class="s">          http://dozer.sourceforge.net/schema/beanmapping.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- omitted --&gt;</span>
    <span class="nt">&lt;mapping&gt;</span>
        <span class="nt">&lt;class-a&gt;</span>com.example.dozer.AccountForm<span class="nt">&lt;/class-a&gt;</span>
        <span class="nt">&lt;class-b&gt;</span>com.example.dozer.Account<span class="nt">&lt;/class-b&gt;</span>
<span class="hll">        <span class="nt">&lt;field</span> <span class="na">copy-by-reference=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span><span class="c">&lt;!-- (1) --&gt;</span>
</span>            <span class="nt">&lt;a&gt;</span>emails<span class="nt">&lt;/a&gt;</span>
            <span class="nt">&lt;b&gt;</span>emails<span class="nt">&lt;/b&gt;</span>
        <span class="nt">&lt;/field&gt;</span>
    <span class="nt">&lt;/mapping&gt;</span>
    <span class="c">&lt;!-- omitted --&gt;</span>
<span class="nt">&lt;/mappings&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Set <code class="docutils literal"><span class="pre">true</span></code> in the <code class="docutils literal"><span class="pre">copy-by-reference</span></code> attribute of <code class="docutils literal"><span class="pre">&lt;field&gt;</span></code> tag. Default value is <code class="docutils literal"><span class="pre">false</span></code>.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>The behavior explained so far is given in the figure.</p>
<ul>
<li><p class="first">Default behavior (cumulative)</p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../../_images/dozer-collection-cumulative.png"><img alt="../../_images/dozer-collection-cumulative.png" src="../../_images/dozer-collection-cumulative.png" style="width: 60%;" /></a>
</div>
</div></blockquote>
</li>
<li><p class="first">non-cumulative</p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../../_images/dozer-collection-non-cumulative.png"><img alt="../../_images/dozer-collection-non-cumulative.png" src="../../_images/dozer-collection-non-cumulative.png" style="width: 60%;" /></a>
</div>
</div></blockquote>
</li>
<li><p class="first">non-cumulative and remove-orphans=true</p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../../_images/dozer-collection-non-cumulative-and-orphan-remove.png"><img alt="../../_images/dozer-collection-non-cumulative-and-orphan-remove.png" src="../../_images/dozer-collection-non-cumulative-and-orphan-remove.png" style="width: 60%;" /></a>
</div>
<p>copy-by-reference is also of this pattern.</p>
</div></blockquote>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The difference in “non-cumulative and remove-orphans=true” pattern and “copy-by-reference” pattern is whether the container of Collection after Bean conversion is copy destination or copy source.</p>
<p>In case of “non-cumulative and remove-orphans=true” pattern, the container of Collection after Bean conversion is copy destination whereas in case of “copy-by-reference” , the container is copy source.
It is explained in the figure given below.</p>
<ul>
<li><p class="first">non-cumulative and remove-orphans=true</p>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/dozer-differrence1.png"><img alt="../../_images/dozer-differrence1.png" src="../../_images/dozer-differrence1.png" style="width: 50%;" /></a>
</div>
</li>
<li><p class="first">copy-by-reference</p>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/dozer-differrence2.png"><img alt="../../_images/dozer-differrence2.png" src="../../_images/dozer-differrence2.png" style="width: 50%;" /></a>
</div>
</li>
</ul>
<p class="last"><strong>It is necessary to exercise caution when the copy destination has one-to many and many-to-many relationship in the entity of JPA (Hibernate)</strong>. An unexpected issue may occur when copy destination entity is under EntityManager control.
For example, an SQL of DELETE ALL + INSERT ALL may be issued when the container of collection is changed and an SQL to UPDATE (DELETE or INSERT when the number of elements differ) the changes may be issued when copied with “non-cumulative and remove-orphans=true”.
Any pattern can be used depending on the requirements.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>When the Bean to be mapped has <code class="docutils literal"><span class="pre">String</span></code> collection, a <a class="reference external" href="http://sourceforge.net/p/dozer/bugs/382/">bug wherein the behavior is not as expected</a> is generated.</p>
<blockquote>
<div><div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">StringListSrc</span> <span class="n">src</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringListSrc</span><span class="p">;</span>
<span class="n">StringListDest</span> <span class="n">dest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringListDest</span><span class="p">();</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">stringsSrc</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">stringsDest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">();</span>

<span class="n">stringsSrc</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">);</span>
<span class="n">stringsSrc</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;b&quot;</span><span class="p">);</span>
<span class="n">stringsSrc</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;c&quot;</span><span class="p">);</span>

<span class="n">stringsDest</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">);</span>
<span class="n">stringsDest</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;d&quot;</span><span class="p">);</span>
<span class="n">stringsDest</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;e&quot;</span><span class="p">);</span>

<span class="n">src</span><span class="p">.</span><span class="na">setStrings</span><span class="p">(</span><span class="n">stringsSrc</span><span class="p">);</span>
<span class="n">dest</span><span class="p">.</span><span class="na">setStrings</span><span class="p">(</span><span class="n">stringsDest</span><span class="p">);</span>

<span class="n">beanMapper</span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dest</span><span class="p">);</span>

<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">dest</span><span class="p">.</span><span class="na">getStrings</span><span class="p">());</span>
</pre></div>
</div>
</div></blockquote>
<p>If code given above is executed in the non-cumulative and remove-orphans=true settings, following is expected to be output.</p>
<blockquote>
<div><div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">[a, b, c]</span>
</pre></div>
</div>
</div></blockquote>
<p>However, following is output.</p>
<blockquote>
<div><div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">[b, c]</span>
</pre></div>
</div>
</div></blockquote>
<p>and <strong>duplicate String is removed</strong>.</p>
<p>When the code is executed in the copy-by-reference=”true” settings, following is output.</p>
<blockquote class="last">
<div><div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">[a, b, c]</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">In Dozer, the mapping can be performed even between the lists which do not use Generics. At this time, data type of the object included in conversion source and conversion destination can be specified as HINT.
Refer to <a class="reference external" href="http://dozer.sourceforge.net/documentation/collectionandarraymapping.html">Dozer Official Manual -Collection and Array Mapping(Using Hints for Collection Mapping)-</a> for details.</p>
</div>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p>It is checked that the mapping between Beans that uses Collection&lt;T&gt; fails.</p>
<p>Example :</p>
<blockquote class="last">
<div><blockquote>
<div><div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ListNestedBean</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">{</span>
   <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">nest</span><span class="p">;</span>
   <span class="c1">// omitted other declarations</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Execution result :</p>
<blockquote>
<div><div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">java.lang.ClassCastException: sun.reflect.generics.reflectiveObjects.TypeVariableImpl cannot be cast to java.lang.Class</span>
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
</div>
</div>
</div>
<div class="section" id="how-to-extend">
<h2><a class="toc-backref" href="#id10">5.24.1.3. How to extend</a><a class="headerlink" href="#how-to-extend" title="Permalink to this headline">¶</a></h2>
<div class="section" id="creating-custom-convertor">
<h3><a class="toc-backref" href="#id11">5.24.1.3.1. Creating custom convertor</a><a class="headerlink" href="#creating-custom-convertor" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">Mapping of the data type not supported by Dozer can be performed through a custom converter.</div>
</div>
<ul class="simple">
<li>Example : <code class="docutils literal"><span class="pre">java.lang.String</span></code> &lt;=&gt; <code class="docutils literal"><span class="pre">org.joda.time.DateTime</span></code></li>
</ul>
<div class="line-block">
<div class="line">Custom converter is a class that implements <code class="docutils literal"><span class="pre">org.dozer.CustomConverter</span></code> provided by Dozer.</div>
<div class="line">Custom converter can be specified in the following 3 patterns.</div>
</div>
<ul class="simple">
<li>Global Configuration</li>
<li>Class level</li>
<li>Field level</li>
</ul>
<p>Global Configuration is recommended to perform conversion using the same logic in the entire application.</p>
<p>It is convenient to inherit <code class="docutils literal"><span class="pre">org.dozer.DozerConverter</span></code> to implement a custom converter.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.example.yourproject.common.bean.converter</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.dozer.DozerConverter</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.joda.time.DateTime</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.joda.time.format.DateTimeFormat</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.joda.time.format.DateTimeFormatter</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.util.StringUtils</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">StringToJodaDateTimeConverter</span> <span class="kd">extends</span>
                                          <span class="n">DozerConverter</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">DateTime</span><span class="o">&gt;</span> <span class="p">{</span> <span class="c1">// (1)</span>
    <span class="kd">public</span> <span class="nf">StringToJodaDateTimeConverter</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">super</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">,</span> <span class="n">DateTime</span><span class="p">.</span><span class="na">class</span><span class="p">);</span> <span class="c1">// (2)</span>
    <span class="p">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">DateTime</span> <span class="nf">convertTo</span><span class="p">(</span><span class="n">String</span> <span class="n">source</span><span class="p">,</span> <span class="n">DateTime</span> <span class="n">destination</span><span class="p">)</span> <span class="p">{</span><span class="c1">// (3)</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">StringUtils</span><span class="p">.</span><span class="na">hasLength</span><span class="p">(</span><span class="n">source</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">DateTimeFormatter</span> <span class="n">formatter</span> <span class="o">=</span> <span class="n">DateTimeFormat</span>
                <span class="p">.</span><span class="na">forPattern</span><span class="p">(</span><span class="s">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="p">);</span>
        <span class="n">DateTime</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">formatter</span><span class="p">.</span><span class="na">parseDateTime</span><span class="p">(</span><span class="n">source</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">dt</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">convertFrom</span><span class="p">(</span><span class="n">DateTime</span> <span class="n">source</span><span class="p">,</span> <span class="n">String</span> <span class="n">destination</span><span class="p">)</span> <span class="p">{</span><span class="c1">// (4)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">source</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">source</span><span class="p">.</span><span class="na">toString</span><span class="p">(</span><span class="s">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Inherit <code class="docutils literal"><span class="pre">org.dozer.DozerConverter</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Set 2 target classes in the constructor.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Describe the logic to convert from <code class="docutils literal"><span class="pre">String</span></code> to <code class="docutils literal"><span class="pre">DateTime</span></code>. In this example, Locale is used by default.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Describe the logic to convert from <code class="docutils literal"><span class="pre">DateTime</span></code> to <code class="docutils literal"><span class="pre">String</span></code>. In this example, Locale is used by default.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>The created custom converter should be defined for mapping.</p>
<p>dozer-configration-mapping.xml</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;mappings</span> <span class="na">xmlns=</span><span class="s">&quot;http://dozer.sourceforge.net&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://dozer.sourceforge.net</span>
<span class="s">          http://dozer.sourceforge.net/schema/beanmapping.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;configuration&gt;</span>
        <span class="nt">&lt;custom-converters&gt;</span><span class="c">&lt;!-- (1) --&gt;</span>
            <span class="c">&lt;!-- these are always bi-directional --&gt;</span>
            <span class="nt">&lt;converter</span>
                <span class="na">type=</span><span class="s">&quot;com.example.yourproject.common.bean.converter.StringToJodaDateTimeConverter&quot;</span><span class="nt">&gt;</span><span class="c">&lt;!-- (2) --&gt;</span>
                <span class="nt">&lt;class-a&gt;</span>java.lang.String<span class="nt">&lt;/class-a&gt;</span><span class="c">&lt;!-- (3) --&gt;</span>
                <span class="nt">&lt;class-b&gt;</span>org.joda.time.DateTime<span class="nt">&lt;/class-b&gt;</span><span class="c">&lt;!-- (4) --&gt;</span>
            <span class="nt">&lt;/converter&gt;</span>
        <span class="nt">&lt;/custom-converters&gt;</span>
    <span class="nt">&lt;/configuration&gt;</span>
    <span class="c">&lt;!-- omitted --&gt;</span>
<span class="nt">&lt;/mappings&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define <code class="docutils literal"><span class="pre">custom-converters</span></code> to which all the custom converters belong.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define converter for performing individual conversion. Specify fully qualified class name (FQCN) of implementation class in the converter type.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Fully qualified class name (FQCN) of conversion source Bean</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Fully qualified class name (FQCN) of conversion destination Bean</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>When <code class="docutils literal"><span class="pre">java.lang.String</span></code> &lt;=&gt; <code class="docutils literal"><span class="pre">org.joda.time.DateTime</span></code> conversion needs to be performed in the entire application by using the mapping given above, the mapping is performed by calling custom converter instead of standard mapping.</p>
<p>Example :</p>
<p>Bean definition of conversion source</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Source</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">date</span><span class="p">;</span>
    <span class="c1">// omitted setter/getter</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Bean definition of conversion destination</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Destination</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">DateTime</span> <span class="n">date</span><span class="p">;</span>
    <span class="c1">// omitted setter/getter</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Mapping (two-way)</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Source</span> <span class="n">source</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Source</span><span class="p">();</span>
<span class="n">source</span><span class="p">.</span><span class="na">setId</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="n">source</span><span class="p">.</span><span class="na">setDate</span><span class="p">(</span><span class="s">&quot;2012-08-10 23:12:12&quot;</span><span class="p">);</span>

<span class="n">DateTimeFormatter</span> <span class="n">formatter</span> <span class="o">=</span> <span class="n">DateTimeFormat</span><span class="p">.</span><span class="na">forPattern</span><span class="p">(</span><span class="s">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="p">);</span>
<span class="n">DateTime</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">formatter</span><span class="p">.</span><span class="na">parseDateTime</span><span class="p">(</span><span class="n">source</span><span class="p">.</span><span class="na">getDate</span><span class="p">());</span>

<span class="c1">// Source to Destination Bean Mapping (String to org.joda.time.DateTime)</span>
<span class="n">Destination</span> <span class="n">destination</span> <span class="o">=</span> <span class="n">dozerBeanMapper</span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">Destination</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="n">assertThat</span><span class="p">(</span><span class="n">destination</span><span class="p">.</span><span class="na">getId</span><span class="p">(),</span> <span class="n">is</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>
<span class="n">assertThat</span><span class="p">(</span><span class="n">destination</span><span class="p">.</span><span class="na">getDate</span><span class="p">(),</span><span class="n">is</span><span class="p">(</span><span class="n">dt</span><span class="p">));</span>

<span class="c1">// Destination to Source Bean Mapping (org.joda.time.DateTime to String)</span>
<span class="n">dozerBeanMapper</span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">destination</span><span class="p">,</span> <span class="n">source</span><span class="p">);</span>

<span class="n">assertThat</span><span class="p">(</span><span class="n">source</span><span class="p">.</span><span class="na">getId</span><span class="p">(),</span> <span class="n">is</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>
<span class="n">assertThat</span><span class="p">(</span><span class="n">source</span><span class="p">.</span><span class="na">getDate</span><span class="p">(),</span><span class="n">is</span><span class="p">(</span><span class="s">&quot;2012-08-10 23:12:12&quot;</span><span class="p">));</span>
</pre></div>
</div>
<p>Refer to <a class="reference external" href="http://dozer.sourceforge.net/documentation/customconverter.html">Dozer Official Manual -Custom Converters-</a> for the details of custom converter.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The conversion from <code class="docutils literal"><span class="pre">String</span></code> to the standard date/time object such as <code class="docutils literal"><span class="pre">java.utl.Date</span></code> is explained in “<a class="reference internal" href="#beanconverter-string-and-datetime"><span class="std std-ref">Mapping from string to date/time object</span></a>”.</p>
</div>
</div>
</div>
<div class="section" id="appendix">
<h2><a class="toc-backref" href="#id12">5.24.1.4. Appendix</a><a class="headerlink" href="#appendix" title="Permalink to this headline">¶</a></h2>
<p>The options that can be specified in the mapping definition XML file are explained.</p>
<p>All options can be confirmed in <a class="reference external" href="http://dozer.sourceforge.net/documentation/mappings.html">Dozer Official Manual -Custom Mappings Via Dozer XML Files-</a>.</p>
<div class="section" id="field-exclusion-settings-field-exclude">
<span id="fieldexclude"></span><h3><a class="toc-backref" href="#id13">5.24.1.4.1. Field exclusion settings (field-exclude)</a><a class="headerlink" href="#field-exclusion-settings-field-exclude" title="Permalink to this headline">¶</a></h3>
<p>The fields that are not to be copied can be excluded at the time of Bean conversion.</p>
<p>Bean conversion is as given below.</p>
<p>Bean definition of conversion source</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Source</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">title</span><span class="p">;</span>
    <span class="c1">// omitted setter/getter</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Bean definition of copy destination</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Destination</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">title</span><span class="p">;</span>
    <span class="c1">// omitted setter/getter</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Define as follows to exclude any field of copy source Bean from mapping.</p>
<p>Carry out the settings of field exclusion in the mapping definition XML file as given below.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;mappings</span> <span class="na">xmlns=</span><span class="s">&quot;http://dozer.sourceforge.net&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://dozer.sourceforge.net</span>
<span class="s">          http://dozer.sourceforge.net/schema/beanmapping.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- omitted --&gt;</span>
    <span class="nt">&lt;mapping&gt;</span>
        <span class="nt">&lt;class-a&gt;</span>com.xx.xx.Source<span class="nt">&lt;/class-a&gt;</span>
        <span class="nt">&lt;class-b&gt;</span>com.xx.xx.Destination<span class="nt">&lt;/class-b&gt;</span>
        <span class="nt">&lt;field-exclude&gt;</span><span class="c">&lt;!-- (1) --&gt;</span>
            <span class="nt">&lt;a&gt;</span>title<span class="nt">&lt;/a&gt;</span>
            <span class="nt">&lt;b&gt;</span>title<span class="nt">&lt;/b&gt;</span>
        <span class="nt">&lt;/field-exclude&gt;</span>
    <span class="nt">&lt;/mapping&gt;</span>
    <span class="c">&lt;!-- omitted --&gt;</span>
<span class="nt">&lt;/mappings&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Set the field you want to exclude in the &lt;field-exclude&gt; element. In this example, if map method is executed after specification, the title value of destination is not overwritten while copying Destination object from Source object.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Source</span> <span class="n">source</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Source</span><span class="p">();</span>
<span class="n">source</span><span class="p">.</span><span class="na">setId</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="n">source</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&quot;SourceName&quot;</span><span class="p">);</span>
<span class="n">source</span><span class="p">.</span><span class="na">setTitle</span><span class="p">(</span><span class="s">&quot;SourceTitle&quot;</span><span class="p">);</span>

<span class="n">Destination</span> <span class="n">destination</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Destination</span><span class="p">();</span>
<span class="n">destination</span><span class="p">.</span><span class="na">setId</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="n">destination</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&quot;DestinationName&quot;</span><span class="p">);</span>
<span class="n">destination</span><span class="p">.</span><span class="na">setTitle</span><span class="p">(</span><span class="s">&quot;DestinationTitle&quot;</span><span class="p">);</span>
<span class="n">beanMapper</span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">destination</span><span class="p">);</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">destination</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">destination</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">destination</span><span class="p">.</span><span class="na">getTitle</span><span class="p">());</span>
</pre></div>
</div>
<p>The output of the above code is as given below.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">1</span>
<span class="go">SourceName</span>
<span class="go">DestinationTitle</span>
</pre></div>
</div>
<p>The title value of destination after mapping is same as in the previous state.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="specifying-mapping-map-id">
<h3><a class="toc-backref" href="#id14">5.24.1.4.2. Specifying mapping (map-id)</a><a class="headerlink" href="#specifying-mapping-map-id" title="Permalink to this headline">¶</a></h3>
<p>The mapping indicated in <a class="reference internal" href="#fieldexclude"><span class="std std-ref">Field exclusion settings (field-exclude)</span></a> is applied while performing Bean conversion in the entire application.
To specify the applicable range of mapping, define map-id as given below.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;mappings</span> <span class="na">xmlns=</span><span class="s">&quot;http://dozer.sourceforge.net&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://dozer.sourceforge.net</span>
<span class="s">          http://dozer.sourceforge.net/schema/beanmapping.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- omitted --&gt;</span>
    <span class="nt">&lt;mapping</span> <span class="na">map-id=</span><span class="s">&quot;mapidTitleFieldExclude&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;class-a&gt;</span>com.xx.xx.Source<span class="nt">&lt;/class-a&gt;</span>
        <span class="nt">&lt;class-b&gt;</span>com.xx.xx.Destination<span class="nt">&lt;/class-b&gt;</span>
        <span class="nt">&lt;field-exclude&gt;</span>
            <span class="nt">&lt;a&gt;</span>title<span class="nt">&lt;/a&gt;</span>
            <span class="nt">&lt;b&gt;</span>title<span class="nt">&lt;/b&gt;</span>
        <span class="nt">&lt;/field-exclude&gt;</span>
    <span class="nt">&lt;/mapping&gt;</span>
    <span class="c">&lt;!-- omitted --&gt;</span>
<span class="nt">&lt;/mappings&gt;</span>
</pre></div>
</div>
<p>When the above settings are carried out, title can be excluded from copying by passing map-id (mapidTitleFieldExclude) to <code class="docutils literal"><span class="pre">map</span></code> method.
When map-id is not specified, all the fields are copied without applying the settings.</p>
<p>The example of passing map-id to <code class="docutils literal"><span class="pre">map</span></code> method is shown below.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Source</span> <span class="n">source</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Source</span><span class="p">();</span>
<span class="n">source</span><span class="p">.</span><span class="na">setId</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="n">source</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&quot;SourceName&quot;</span><span class="p">);</span>
<span class="n">source</span><span class="p">.</span><span class="na">setTitle</span><span class="p">(</span><span class="s">&quot;SourceTitle&quot;</span><span class="p">);</span>

<span class="n">Destination</span> <span class="n">destination1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Destination</span><span class="p">();</span>
<span class="n">destination1</span><span class="p">.</span><span class="na">setId</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="n">destination1</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&quot;DestinationName&quot;</span><span class="p">);</span>
<span class="n">destination1</span><span class="p">.</span><span class="na">setTitle</span><span class="p">(</span><span class="s">&quot;DestinationTitle&quot;</span><span class="p">);</span>
<span class="n">beanMapper</span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">destination1</span><span class="p">);</span> <span class="c1">// (1)</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">destination1</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">destination1</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">destination1</span><span class="p">.</span><span class="na">getTitle</span><span class="p">());</span>

<span class="n">Destination</span> <span class="n">destination2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Destination</span><span class="p">();</span>
<span class="n">destination2</span><span class="p">.</span><span class="na">setId</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="n">destination2</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&quot;DestinationName&quot;</span><span class="p">);</span>
<span class="n">destination2</span><span class="p">.</span><span class="na">setTitle</span><span class="p">(</span><span class="s">&quot;DestinationTitle&quot;</span><span class="p">);</span>
<span class="n">beanMapper</span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">destination2</span><span class="p">,</span> <span class="s">&quot;mapidTitleFieldExclude&quot;</span><span class="p">);</span> <span class="c1">// (2)</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">destination2</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">destination2</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">destination2</span><span class="p">.</span><span class="na">getTitle</span><span class="p">());</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Normal mapping.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Pass map-id as the third argument and apply the specific mapping rules.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>The output of the above code is as given below.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">1</span>
<span class="go">SourceName</span>
<span class="go">SourceTitle</span>

<span class="go">1</span>
<span class="go">SourceName</span>
<span class="go">DestinationTitle</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">map-id can be specified not only by mapping items but also by defining the field.
Refer to <a class="reference external" href="http://dozer.sourceforge.net/documentation/contextmapping.html">Dozer Official Manual -Context Based Mapping-</a> for details.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The same form object can be used for both creating new/updating the existing Web applications.
Form object is copied (mapped) to domain object, however a field may exist where the object is not to be copied depending on the operations.
In this case, use <code class="docutils literal"><span class="pre">&lt;field-exclude&gt;</span></code>.</p>
<ul class="simple">
<li>Example: userId is included in the New form whereas it is not included in the Update form.</li>
</ul>
<p class="last">In this case, null is set in the userId at the time of update if the same form object is used. If form object is copied as it is by
fetching copy destination object from DB, userId of copy destination becomes null. In order to avoid this,
provide map-id for update and carry out the settings to exclude field of userId at the time of update.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="settings-to-exclude-null-empty-field-of-copy-source-map-null-map-empty">
<h3><a class="toc-backref" href="#id15">5.24.1.4.3. Settings to exclude null/empty field of copy source (map-null, map-empty)</a><a class="headerlink" href="#settings-to-exclude-null-empty-field-of-copy-source-map-null-map-empty" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">null</span></code> or empty field of copy source Bean can be excluded from mapping.
Set in the mapping definition XML file as given below.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;mappings</span> <span class="na">xmlns=</span><span class="s">&quot;http://dozer.sourceforge.net&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://dozer.sourceforge.net</span>
<span class="s">          http://dozer.sourceforge.net/schema/beanmapping.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- omitted --&gt;</span>
    <span class="nt">&lt;mapping</span> <span class="na">map-null=</span><span class="s">&quot;false&quot;</span> <span class="na">map-empty-string=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span><span class="c">&lt;!-- (1) --&gt;</span>
        <span class="nt">&lt;class-a&gt;</span>com.xx.xx.Source<span class="nt">&lt;/class-a&gt;</span>
        <span class="nt">&lt;class-b&gt;</span>com.xx.xx.Destination<span class="nt">&lt;/class-b&gt;</span>
    <span class="nt">&lt;/mapping&gt;</span>
    <span class="c">&lt;!-- omitted --&gt;</span>
<span class="nt">&lt;/mappings&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">To exclude the <code class="docutils literal"><span class="pre">null</span></code> field of copy source Bean from mapping, set <code class="docutils literal"><span class="pre">false</span></code> in the <code class="docutils literal"><span class="pre">map-null</span></code> attribute. Default value is <code class="docutils literal"><span class="pre">true</span></code>.</div>
<div class="line">To exclude the empty field of copy source Bean from mapping, set <code class="docutils literal"><span class="pre">false</span></code> in the <code class="docutils literal"><span class="pre">map-empty-string</span></code> attribute. Default value is <code class="docutils literal"><span class="pre">true</span></code>.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Bean definition of conversion source</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Source</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">title</span><span class="p">;</span>
    <span class="c1">// omitted setter/getter</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Bean definition of conversion destination</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Destination</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">title</span><span class="p">;</span>
    <span class="c1">// omitted setter/getter</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Mapping example</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Source</span> <span class="n">source</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Source</span><span class="p">();</span>
<span class="n">source</span><span class="p">.</span><span class="na">setId</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="n">source</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
<span class="n">source</span><span class="p">.</span><span class="na">setTitle</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">);</span>

<span class="n">Destination</span> <span class="n">destination</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Destination</span><span class="p">();</span>
<span class="n">destination</span><span class="p">.</span><span class="na">setId</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="n">destination</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&quot;DestinationName&quot;</span><span class="p">);</span>
<span class="n">destination</span><span class="p">.</span><span class="na">setTitle</span><span class="p">(</span><span class="s">&quot;DestinationTitle&quot;</span><span class="p">);</span>
<span class="n">beanMapper</span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">destination</span><span class="p">);</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">destination</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">destination</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">destination</span><span class="p">.</span><span class="na">getTitle</span><span class="p">());</span>
</pre></div>
</div>
<p>The output of the above code is as given below.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">1</span>
<span class="go">DestinationName</span>
<span class="go">DestinationTitle</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">name</span></code> and <code class="docutils literal"><span class="pre">title</span></code> field of copy source Bean are <code class="docutils literal"><span class="pre">null</span></code> or empty, and are excluded from mapping.</p>
</div>
<div class="section" id="mapping-from-string-to-date-time-object">
<span id="beanconverter-string-and-datetime"></span><h3><a class="toc-backref" href="#id16">5.24.1.4.4. Mapping from string to date/time object</a><a class="headerlink" href="#mapping-from-string-to-date-time-object" title="Permalink to this headline">¶</a></h3>
<p>The copy source string field can be mapped to the copy destination date/time field.</p>
<p>Following 6 types of conversions are supported.</p>
<p>Date/time</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">java.lang.String</span></code> &lt;=&gt; <code class="docutils literal"><span class="pre">java.util.Date</span></code></li>
<li><code class="docutils literal"><span class="pre">java.lang.String</span></code> &lt;=&gt; <code class="docutils literal"><span class="pre">java.util.Calendar</span></code></li>
<li><code class="docutils literal"><span class="pre">java.lang.String</span></code> &lt;=&gt; <code class="docutils literal"><span class="pre">java.util.GregorianCalendar</span></code></li>
<li><code class="docutils literal"><span class="pre">java.lang.String</span></code> &lt;=&gt; <code class="docutils literal"><span class="pre">java.sql.Timestamp</span></code></li>
</ul>
<p>Date only</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">java.lang.String</span></code> &lt;=&gt; <code class="docutils literal"><span class="pre">java.sql.Date</span></code></li>
</ul>
<p>Time only</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">java.lang.String</span></code> &lt;=&gt; <code class="docutils literal"><span class="pre">java.sql.Time</span></code></li>
</ul>
<div class="line-block">
<div class="line">Perform date/time conversion as follows.</div>
<div class="line">For example, the conversion to <code class="docutils literal"><span class="pre">java.util.Date</span></code> is explained.</div>
<div class="line">Conversions for <code class="docutils literal"><span class="pre">java.util.Calendar</span></code>,<code class="docutils literal"><span class="pre">java.util.GregorianCalendar</span></code>,<code class="docutils literal"><span class="pre">java.sql.Timestamp</span></code> can also be performed by the same method.</div>
</div>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;mappings</span> <span class="na">xmlns=</span><span class="s">&quot;http://dozer.sourceforge.net&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://dozer.sourceforge.net</span>
<span class="s">          http://dozer.sourceforge.net/schema/beanmapping.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- omitted --&gt;</span>
    <span class="nt">&lt;mapping&gt;</span>
        <span class="nt">&lt;class-a&gt;</span>com.xx.xx.Source<span class="nt">&lt;/class-a&gt;</span>
        <span class="nt">&lt;class-b&gt;</span>com.xx.xx.Destination<span class="nt">&lt;/class-b&gt;</span>
        <span class="nt">&lt;field&gt;</span>
            <span class="nt">&lt;a</span> <span class="na">date-format=</span><span class="s">&quot;yyyy-MM-dd HH:mm:ss:SS&quot;</span><span class="nt">&gt;</span>date<span class="nt">&lt;/a&gt;</span><span class="c">&lt;!-- (1) --&gt;</span>
            <span class="nt">&lt;b&gt;</span>date<span class="nt">&lt;/b&gt;</span>
        <span class="nt">&lt;/field&gt;</span>
    <span class="nt">&lt;/mapping&gt;</span>
    <span class="c">&lt;!-- omitted --&gt;</span>
<span class="nt">&lt;/mappings&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify field name and date format of copy source.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Bean definition of conversion source</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Source</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">date</span><span class="p">;</span>
    <span class="c1">// omitted setter/getter</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Bean definition of conversion destination</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Destination</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="n">Date</span> <span class="n">date</span><span class="p">;</span>
    <span class="c1">// omitted setter/getter</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Mapping</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Source</span> <span class="n">source</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Source</span><span class="p">();</span>
<span class="n">source</span><span class="p">.</span><span class="na">setDate</span><span class="p">(</span><span class="s">&quot;2013-10-10 11:11:11.111&quot;</span><span class="p">);</span>
<span class="n">Destination</span> <span class="n">destination</span> <span class="o">=</span> <span class="n">beanMapper</span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">Destination</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="k">assert</span><span class="p">(</span><span class="n">destination</span><span class="p">.</span><span class="na">getDate</span><span class="p">().</span><span class="na">equals</span><span class="p">(</span><span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="p">(</span><span class="s">&quot;yyyy-MM-dd HH:mm:ss.SSS&quot;</span><span class="p">).</span><span class="na">parse</span><span class="p">(</span><span class="s">&quot;2013-10-10 11:11:11.111&quot;</span><span class="p">)));</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">There are many cases where it is preferable to set a common date format in the project rather than setting an individual date for each mapping definition.</div>
<div class="line">In such a case, it is recommended to set in the Global configuration file of Dozer.</div>
<div class="line">The date format set in the mapping of the entire application is applied.</div>
</div>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;mappings</span> <span class="na">xmlns=</span><span class="s">&quot;http://dozer.sourceforge.net&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://dozer.sourceforge.net</span>
<span class="s">          http://dozer.sourceforge.net/schema/beanmapping.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- omitted --&gt;</span>
    <span class="nt">&lt;configuration&gt;</span>
        <span class="nt">&lt;date-format&gt;</span>yyyy-MM-dd HH:mm:ss.SSS<span class="nt">&lt;/date-format&gt;</span>
        <span class="c">&lt;!-- omitted other configuration --&gt;</span>
    <span class="nt">&lt;/configuration&gt;</span>
    <span class="c">&lt;!-- omitted --&gt;</span>
<span class="nt">&lt;/mappings&gt;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">There are no restrictions for the file name however, src/main/resources/META-INF/dozer/dozer-configration-mapping.xml is recommended.</div>
<div class="line">Global Configuration that impacts the entire application in this configuration file can be used within the scope of settings for dozer-configration-mapping.xml.</div>
</div>
<p>Refer to the <a class="reference external" href="http://dozer.sourceforge.net/documentation/globalConfiguration.html">Dozer Official Manual -Global Configuration-</a> for the details of items that can be configured.</p>
</div>
<div class="section" id="mapping-error">
<h3><a class="toc-backref" href="#id17">5.24.1.4.5. Mapping error</a><a class="headerlink" href="#mapping-error" title="Permalink to this headline">¶</a></h3>
<p>If mapping process fails during mapping, <code class="docutils literal"><span class="pre">org.dozer.MappingException</span></code> (runtime exception) is thrown.</p>
<p>The typical examples of <code class="docutils literal"><span class="pre">MappingException</span></code> being thrown are given below.</p>
<ul class="simple">
<li>map-id that does not exist in the <code class="docutils literal"><span class="pre">map</span></code> method is passed.</li>
<li>map-id existing in <code class="docutils literal"><span class="pre">map</span></code> method is passed however, the source/target type passed to map process differs from the definition specified in map-id.</li>
<li>When conversion is not supported by Dozer and custom converter for conversion does not exist as well.</li>
</ul>
<p>Since these are normal program bugs, the sections called by <code class="docutils literal"><span class="pre">map</span></code> method should be modified appropriately.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="DateAndTime.html" title="5.24.2. Date operations (JSR-310 Date and Time API)"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="5.24. Utilities"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.1.1.RELEASE documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >5. Architecture in Detail - TERASOLUNA Server Framework for Java (5.x)</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >5.24. Utilities</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013-2016, NTT DATA.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.6.3.Theme by <a href="http://github.com/vkvn">vkvn</a>
    </div>
    
    <script>
    
    $(function() {
    	var $sidebar	= $('.sphinxsidebar'),
    		$window		= $(window),
    		offset		= $sidebar.offset(),
    		topPadding	= 3,
    		$scroll		= $('#scroll');
    	
    	$window.scroll(function() {
    		if ($scroll.is(':checked')) {
				if ($window.scrollTop() > offset.top) {
					$sidebar.stop().animate({
						marginTop:$window.scrollTop() - offset.top + topPadding
					});
				} else {
					$sidebar.stop().animate({
						marginTop:0
					});
				}
			}
		});
    	
    	var $navList = $('ul:first', $sidebar);
    	$('li:first', $navList).addClass('open');
    	
    	$navList.treeview({
    		persist: "location",
    		collapsed: true,
    		unique: false
    	});
    	
	});
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-46550814-1', 'terasolunaorg.github.io');
    ga('send', 'pageview');
    </script>
  </body>
</html>