<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>5.18. SOAP Web Service (Server/Client) &#8212; TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.1.1.RELEASE documentation</title>
    <link rel="stylesheet" href="../_static/solar.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '5.1.1.RELEASE',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5.19. File Upload" href="FileUpload.html" />
    <link rel="prev" title="5.17. REST Client (HTTP Client)" href="RestClient.html" /><script async src="https://www.googletagmanager.com/gtag/js?id=G-847V2Q99G8"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date()); gtag('config', 'G-847V2Q99G8');
</script>
<script src="../_static/jquery.treeview.js" type="text/javascript"></script>
<!-- <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro|Open+Sans:300italic,400italic,700italic,400,300,700' rel='stylesheet' type='text/css'> -->
<link href="../_static/solarized-dark.css" rel="stylesheet">
<link href="../_static/jquery.treeview.css" rel="stylesheet">
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="FileUpload.html" title="5.19. File Upload"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="RestClient.html" title="5.17. REST Client (HTTP Client)"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.1.1.RELEASE documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">5. Architecture in Detail - TERASOLUNA Server Framework for Java (5.x)</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><label><input id="scroll" type="checkbox" checked> scroll sidebar</label>

  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">5.18. SOAP Web Service (Server/Client)</a><ul>
<li><a class="reference internal" href="#overview">5.18.1. Overview</a><ul>
<li><a class="reference internal" href="#soap">5.18.1.1. SOAP</a></li>
<li><a class="reference internal" href="#jax-ws">5.18.1.2. JAX-WS</a></li>
<li><a class="reference internal" href="#jax-ws-linkage-function-of-spring-framework">5.18.1.3. JAX-WS linkage function of Spring Framework</a></li>
<li><a class="reference internal" href="#development-of-web-service-using-jax-ws">5.18.1.4. Development of Web service using JAX-WS</a><ul>
<li><a class="reference internal" href="#configuration-of-web-service-module-which-uses-jax-ws">5.18.1.4.1. Configuration of Web service module which uses JAX-WS</a></li>
</ul>
</li>
<li><a class="reference internal" href="#url-to-be-published-as-web-service">5.18.1.5. URL to be published as Web service</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-use">5.18.2. How to use</a><ul>
<li><a class="reference internal" href="#how-to-create-soap-server">5.18.2.1. How to create SOAP server</a><ul>
<li><a class="reference internal" href="#project-configuration">5.18.2.1.1. Project configuration</a></li>
<li><a class="reference internal" href="#application-configuration">5.18.2.1.2. Application configuration</a></li>
<li><a class="reference internal" href="#web-service-implementation">5.18.2.1.3. Web service implementation</a></li>
<li><a class="reference internal" href="#input-check-implementation">5.18.2.1.4. Input check implementation</a></li>
<li><a class="reference internal" href="#security-measures">5.18.2.1.5. Security measures</a></li>
<li><a class="reference internal" href="#implementation-of-exception-handling">5.18.2.1.6. Implementation of exception handling</a></li>
<li><a class="reference internal" href="#how-to-handle-large-binary-data-using-mtom">5.18.2.1.7. How to handle large binary data using MTOM</a></li>
</ul>
</li>
<li><a class="reference internal" href="#creation-of-client">5.18.2.2. Creation of client</a><ul>
<li><a class="reference internal" href="#id1">5.18.2.2.1. Project configuration</a></li>
<li><a class="reference internal" href="#implementation-of-web-service-client">5.18.2.2.2. Implementation of Web service client</a></li>
<li><a class="reference internal" href="#id2">5.18.2.2.3. Security measures</a></li>
<li><a class="reference internal" href="#implementing-exception-handling">5.18.2.2.4. Implementing exception handling</a></li>
<li><a class="reference internal" href="#timeout-configuration">5.18.2.2.5. Timeout configuration</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#appendix">5.18.3. Appendix</a><ul>
<li><a class="reference internal" href="#project-configuration-is-changed-for-soap-server">5.18.3.1. Project configuration is changed for SOAP server.</a><ul>
<li><a class="reference internal" href="#changing-existing-project">5.18.3.1.1. Changing existing project</a></li>
<li><a class="reference internal" href="#creating-model-project">5.18.3.1.2. Creating model project</a></li>
<li><a class="reference internal" href="#creating-webservice-project">5.18.3.1.3. Creating webservice project</a></li>
</ul>
</li>
<li><a class="reference internal" href="#package-configuration-of-soap-server">5.18.3.2. Package configuration of SOAP server</a><ul>
<li><a class="reference internal" href="#server-projectname-domain">5.18.3.2.1. [server projectName]-domain</a></li>
<li><a class="reference internal" href="#server-projectname-web">5.18.3.2.2. [server projectName]-web</a></li>
<li><a class="reference internal" href="#server-projectname-env">5.18.3.2.3. [server projectName]-env</a></li>
<li><a class="reference internal" href="#server-projectname-model">5.18.3.2.4. [server projectName]-model</a></li>
<li><a class="reference internal" href="#server-projectname-webservice">5.18.3.2.5. [server projectName]-webservice</a></li>
</ul>
</li>
<li><a class="reference internal" href="#package-configuration-of-client">5.18.3.3. Package configuration of client</a><ul>
<li><a class="reference internal" href="#client-projectname-domain">5.18.3.3.1. [client projectName]-domain</a></li>
<li><a class="reference internal" href="#client-projectname-web">5.18.3.3.2. [client projectName]-web</a></li>
<li><a class="reference internal" href="#client-projectname-env">5.18.3.3.3. [client projectName]-env</a></li>
</ul>
</li>
<li><a class="reference internal" href="#wsimport">5.18.3.4. wsimport</a><ul>
<li><a class="reference internal" href="#using-wsimport">5.18.3.4.1. Using wsimport</a></li>
<li><a class="reference internal" href="#how-to-use-wsimport">5.18.3.4.2. How to use wsimport</a></li>
</ul>
</li>
<li><a class="reference internal" href="#web-service-development-on-tomcat">5.18.3.5. Web service development on Tomcat</a><ul>
<li><a class="reference internal" href="#configuration-while-using-cxfservlet">5.18.3.5.1. Configuration while using CXFServlet</a></li>
<li><a class="reference internal" href="#configuration-required-in-pojo-method">5.18.3.5.2. Configuration required in POJO method</a></li>
<li><a class="reference internal" href="#configuration-required-for-the-method-that-inherits-springbeanautowiringsupport">5.18.3.5.3. Configuration required for the method that inherits SpringBeanAutowiringSupport</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


  <h4>Previous topic</h4>
  <p class="topless"><a href="RestClient.html"
                        title="previous chapter">5.17. REST Client (HTTP Client)</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="FileUpload.html"
                        title="next chapter">5.19. File Upload</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/ArchitectureInDetail/SOAP.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="soap-web-service-server-client">
<h1>5.18. SOAP Web Service (Server/Client)<a class="headerlink" href="#soap-web-service-server-client" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="index">
<p class="topic-title">Index</p>
<ul class="simple">
<li><a class="reference internal" href="#overview" id="id3">Overview</a><ul>
<li><a class="reference internal" href="#soap" id="id4">SOAP</a></li>
<li><a class="reference internal" href="#jax-ws" id="id5">JAX-WS</a></li>
<li><a class="reference internal" href="#jax-ws-linkage-function-of-spring-framework" id="id6">JAX-WS linkage function of Spring Framework</a></li>
<li><a class="reference internal" href="#development-of-web-service-using-jax-ws" id="id7">Development of Web service using JAX-WS</a><ul>
<li><a class="reference internal" href="#configuration-of-web-service-module-which-uses-jax-ws" id="id8">Configuration of Web service module which uses JAX-WS</a></li>
</ul>
</li>
<li><a class="reference internal" href="#url-to-be-published-as-web-service" id="id9">URL to be published as Web service</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-use" id="id10">How to use</a><ul>
<li><a class="reference internal" href="#how-to-create-soap-server" id="id11">How to create SOAP server</a><ul>
<li><a class="reference internal" href="#project-configuration" id="id12">Project configuration</a></li>
<li><a class="reference internal" href="#application-configuration" id="id13">Application configuration</a></li>
<li><a class="reference internal" href="#web-service-implementation" id="id14">Web service implementation</a></li>
<li><a class="reference internal" href="#input-check-implementation" id="id15">Input check implementation</a></li>
<li><a class="reference internal" href="#security-measures" id="id16">Security measures</a></li>
<li><a class="reference internal" href="#implementation-of-exception-handling" id="id17">Implementation of exception handling</a></li>
<li><a class="reference internal" href="#how-to-handle-large-binary-data-using-mtom" id="id18">How to handle large binary data using MTOM</a></li>
</ul>
</li>
<li><a class="reference internal" href="#creation-of-client" id="id19">Creation of client</a><ul>
<li><a class="reference internal" href="#id1" id="id20">Project configuration</a></li>
<li><a class="reference internal" href="#implementation-of-web-service-client" id="id21">Implementation of Web service client</a></li>
<li><a class="reference internal" href="#id2" id="id22">Security measures</a></li>
<li><a class="reference internal" href="#implementing-exception-handling" id="id23">Implementing exception handling</a></li>
<li><a class="reference internal" href="#timeout-configuration" id="id24">Timeout configuration</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#appendix" id="id25">Appendix</a><ul>
<li><a class="reference internal" href="#project-configuration-is-changed-for-soap-server" id="id26">Project configuration is changed for SOAP server.</a><ul>
<li><a class="reference internal" href="#changing-existing-project" id="id27">Changing existing project</a></li>
<li><a class="reference internal" href="#creating-model-project" id="id28">Creating model project</a></li>
<li><a class="reference internal" href="#creating-webservice-project" id="id29">Creating webservice project</a></li>
</ul>
</li>
<li><a class="reference internal" href="#package-configuration-of-soap-server" id="id30">Package configuration of SOAP server</a><ul>
<li><a class="reference internal" href="#server-projectname-domain" id="id31">[server projectName]-domain</a></li>
<li><a class="reference internal" href="#server-projectname-web" id="id32">[server projectName]-web</a></li>
<li><a class="reference internal" href="#server-projectname-env" id="id33">[server projectName]-env</a></li>
<li><a class="reference internal" href="#server-projectname-model" id="id34">[server projectName]-model</a></li>
<li><a class="reference internal" href="#server-projectname-webservice" id="id35">[server projectName]-webservice</a></li>
</ul>
</li>
<li><a class="reference internal" href="#package-configuration-of-client" id="id36">Package configuration of client</a><ul>
<li><a class="reference internal" href="#client-projectname-domain" id="id37">[client projectName]-domain</a></li>
<li><a class="reference internal" href="#client-projectname-web" id="id38">[client projectName]-web</a></li>
<li><a class="reference internal" href="#client-projectname-env" id="id39">[client projectName]-env</a></li>
</ul>
</li>
<li><a class="reference internal" href="#wsimport" id="id40">wsimport</a><ul>
<li><a class="reference internal" href="#using-wsimport" id="id41">Using wsimport</a></li>
<li><a class="reference internal" href="#how-to-use-wsimport" id="id42">How to use wsimport</a></li>
</ul>
</li>
<li><a class="reference internal" href="#web-service-development-on-tomcat" id="id43">Web service development on Tomcat</a><ul>
<li><a class="reference internal" href="#configuration-while-using-cxfservlet" id="id44">Configuration while using CXFServlet</a></li>
<li><a class="reference internal" href="#configuration-required-in-pojo-method" id="id45">Configuration required in POJO method</a></li>
<li><a class="reference internal" href="#configuration-required-for-the-method-that-inherits-springbeanautowiringsupport" id="id46">Configuration required for the method that inherits SpringBeanAutowiringSupport</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="overview">
<span id="soapoverview"></span><h2><a class="toc-backref" href="#id3">5.18.1. Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This chapter explains fundamental concepts of SOAP Web Service and development of both SOAP server and client which use JAX-WS.</p>
<p>For basic idea of how to implement, refer</p>
<ul>
<li><div class="first line-block">
<div class="line">“<a class="reference internal" href="#soaphowtouse"><span class="std std-ref">How to use</span></a>”</div>
<div class="line">It explains application configuration and how to implement API for SOAP Web Service which use JAX-WS.</div>
</div>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="soap">
<span id="soapoverviewaboutsoapwebservice"></span><h3><a class="toc-backref" href="#id4">5.18.1.1. SOAP</a><a class="headerlink" href="#soap" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">SOAP is a protocol which sends/receives XML messages between computer networks.</div>
<div class="line">Originally, it was an abbreviation of “<strong>S</strong>imple <strong>O</strong>bject <strong>A</strong>ccess <strong>P</strong>rotocol”.</div>
<div class="line">However, now “SOAP” is not considered as an abbreviation and declared as a proper noun by W3C.</div>
<div class="line">Specifications of SOAP1.1 and SOAP1.2 are defined by W3C.</div>
<div class="line">For details, refer <a class="reference external" href="http://www.w3.org/TR/soap/">W3C -SOAP Specifications-</a>.</div>
</div>
<div class="line-block">
<div class="line">How to use SOAP Web Service with the configuration given in following figure is explained in this guideline.</div>
<div class="line">However, SOAP Web Service can also be used with a configuration different from the configuration given below. (Example: when a client is a batch etc)</div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../_images/SOAPServerAndClient.png"><img alt="Server and Client for SOAP" src="../_images/SOAPServerAndClient.png" style="width: 100%;" /></a>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">A Web application which communicates with another SOAP server is assumed as a client.</div>
<div class="line">Although it is referred as a client, precautions must be taken since it is envisaged as a Web application.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">SOAP server publishes a Web service and performs a process by receiving XML through SOAP Web Service from client. Operations like accessing database etc and performing business process are assumed.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">In SOAP Web Service, information is exchanged by using XML.</div>
<div class="line">Here, both SOAP server and client are assumed to be in Java, however, communication is possible in other platforms as well without any issues.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="jax-ws">
<span id="soapoverviewjaxws"></span><h3><a class="toc-backref" href="#id5">5.18.1.2. JAX-WS</a><a class="headerlink" href="#jax-ws" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">JAX-WS is an abbreviation of “<strong>J</strong>ava <strong>A</strong>PI for <strong>X</strong>ML-Based <strong>W</strong>eb <strong>S</strong>ervices” and is a Java standard API for handling Web service using SOAP etc.</div>
<div class="line">Using JAX-WS,  Java object can be sent by converting the same to XML in conformance with SOAP specifications.</div>
<div class="line">Therefore, although information is exchanged in SOAP Web Service using XML, the user can handle the data without being aware of XML structure.</div>
<div class="line">Main Java EE servers like Oracle WebLogic Server or JBoss Enterprise Application Platform use JAX-WS implementation on server side and can easily publish Web service by using the function without adding a specific library.</div>
<div class="line">However, since Tomcat does not implement JAX-WS, a separate JAX-WS implementation library must be added while using Tomcat.</div>
<div class="line">For details, refer “<a class="reference internal" href="#soapappendixtomcatwebservice"><span class="std std-ref">Web service development on Tomcat</span></a>”.</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="jax-ws-linkage-function-of-spring-framework">
<span id="soapoverviewjaxwsspring"></span><h3><a class="toc-backref" href="#id6">5.18.1.3. JAX-WS linkage function of Spring Framework</a><a class="headerlink" href="#jax-ws-linkage-function-of-spring-framework" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">Spring Framework supports JAX-WS linkage function and implementation can be easily done for both SOAP server and client using this function.</div>
<div class="line">Overview of the recommended access flow using this function is given below. Here, it is assumed that the Web application acting as a SOAP client (Fig. on the left) access SOAP server (fig. on the right).</div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../_images/SOAPProcessFlow.png"><img alt="Server and Client Projects for SOAP" src="../_images/SOAPProcessFlow.png" style="width: 80%;" /></a>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">[Client] Controller calls the Service.</div>
<div class="line">No specific changes are observed during normal calling.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">[Client] Service calls WebService interface offered by SOAP server side.</div>
<div class="line">In the Fig., Service calls the WebService interface, however, WebService interface can also be called directly from Controller if required.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">[Client] If WebService interface is called, Proxy Object is called as an entity.</div>
<div class="line">The Proxy Object is an implementation class of WebService interface generated in <code class="docutils literal"><span class="pre">org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean</span></code>.</div>
<div class="line">The implementation class is injected in the Service, Service can carry out the process using SOAP Web Service only by calling WebService interface method.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first line-block">
<div class="line">ProxyObject calls WebService interface of SOAP server.</div>
<div class="line">Values are exchanged between SOAP server and client by using Domain Object.</div>
</div>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Strictly speaking, SOAP server and client communicate using XML.
Although Domain Object and XML are mutually converted using JAXB during sending and receiving, SOAP Web Service creator can carry out development without being aware of XML.</p>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">[Server] If WebService interface gets called, WebService implementation class is called as an entity.</div>
<div class="line">A WebService implementation class is provided as an implementation class of WebService interface in SOAP server.</div>
<div class="line">The WebService implementation class can inject the Bean of Spring DI container by <code class="docutils literal"><span class="pre">&#64;Inject</span></code> etc., by inheriting <code class="docutils literal"><span class="pre">org.springframework.web.context.support.SpringBeanAutowiringSupport</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(6)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">[Server] Call Service for carrying out business process in WebService implementation class.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(7)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">[Server] Run business process by using Repository etc in Service.</div>
<div class="line">No specific changes are observed during normal calling.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Although a document driven Spring Web Service which develops a Web service is provided in the Spring, it is not addressed in this guideline.
For details, refer <a class="reference external" href="http://projects.spring.io/spring-ws/">Spring Web Services</a>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For details of JAX-WS implementation in Spring, refer <a class="reference external" href="http://docs.spring.io/spring/docs/4.2.4.RELEASE/spring-framework-reference/html/remoting.html#remoting-web-services">Spring Framework Reference Documentation -Remoting and web services using Spring(Web services)-</a>.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="development-of-web-service-using-jax-ws">
<span id="soapoverviewaboutrestfulwebservicedevelopment"></span><h3><a class="toc-backref" href="#id7">5.18.1.4. Development of Web service using JAX-WS</a><a class="headerlink" href="#development-of-web-service-using-jax-ws" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">It is recommended to develop Web service in TERASOLUNA Server Framework for Java (5.x) using JAX-WS implementation of AP server and Spring function.</div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>Deploying to AP server</strong></p>
<p class="last">SOAP Web Service can be implemented for SOAP server or client by deploying a WAR file created by a web project in the blank project, to AP server, similar to a normal Web application.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="configuration-of-web-service-module-which-uses-jax-ws">
<h4><a class="toc-backref" href="#id8">5.18.1.4.1. Configuration of Web service module which uses JAX-WS</a><a class="headerlink" href="#configuration-of-web-service-module-which-uses-jax-ws" title="Permalink to this headline">¶</a></h4>
<p>When Web service using JAX-WS is to be created, it is recommended to separately add two projects given below besides the existing blank project.</p>
<ul class="simple">
<li>model project</li>
<li>webservice project</li>
</ul>
<div class="line-block">
<div class="line">model project stores Domain Object used in argument and return value of Web service.</div>
<div class="line">webservice project stores an interface which calls the Web service.</div>
<div class="line">Both the projects store only the classes that must be distributed from SOAP server to client.</div>
<div class="line">It is recommended to use another project to clearly identify the scope of distribution.</div>
</div>
<p>In this guideline, following configuration is used in the multi-projects.</p>
<p>Although client is again assumed to be a Web application, the basic idea for calling from desktop application or command line interface remains the same.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/SOAPClientAndServerProjects.png"><img alt="Server and Client Projects for SOAP" src="../_images/SOAPClientAndServerProjects.png" style="width: 80%;" /></a>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Add model project and webservice project offered by SOAP server to a conventional multi-project while creating a client.</div>
<div class="line">Here, it is assumed that both the server and the client are developed together.</div>
<div class="line">The project details are explained in “<a class="reference internal" href="#soaphowtousewebapplicationconstruction"><span class="std std-ref">How to create SOAP server</span></a>”.</div>
<div class="line">Refer “<a class="reference internal" href="#soapappendixaddproject"><span class="std std-ref">Project configuration is changed for SOAP server.</span></a>” for how to add.</div>
<div class="line"><br /></div>
<div class="line">When server and client are not developed separately, and model project and webservice project are not provided, or SOAP server is created in other than Java, Domain Object of model project and Web service interface in webservice project must be created on their own.</div>
<div class="line">Domain Object and Web service interface can be easily created from WSDL by using wsimport.</div>
<div class="line">For details, refer “<a class="reference internal" href="#soapappendixwsimport"><span class="std std-ref">wsimport</span></a>”.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Add a model project and webservice project besides a conventional multi-project while creating a SOAP server.</div>
<div class="line">Publish these two projects to the client.</div>
<div class="line">It is assumed that the model and webservice projects of the client are added in the Maven dependencies.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">As a result, project is configured as below.</div>
<div class="line">SOAP server project configuration is as given below.</div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../_images/SOAPServerPackageExplorer.png"><img alt="Package explorer for SOAP server projects" src="../_images/SOAPServerPackageExplorer.png" style="width: 50%;" /></a>
</div>
<p>Client project configuration is as given below.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/SOAPClientPackageExplorer.png"><img alt="Package explorer for SOAP client projects" src="../_images/SOAPClientPackageExplorer.png" style="width: 42%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="url-to-be-published-as-web-service">
<h3><a class="toc-backref" href="#id9">5.18.1.5. URL to be published as Web service</a><a class="headerlink" href="#url-to-be-published-as-web-service" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">If SOAP Web Service is created, definition of Web service interface called WSDL（<strong>W</strong>eb <strong>S</strong>ervices <strong>D</strong>escription <strong>L</strong>anguage） is published and the client then implements SOAP Web Service based on the definition.</div>
<div class="line">For WSDL details, refer <a class="reference external" href="http://www.w3.org/TR/wsdl">W3C -Web Services Description Language (WSDL)-</a>.</div>
</div>
<div class="line-block">
<div class="line">Access URL, method name, argument and return value for Web service implementation are defined in WSDL.</div>
<div class="line">If SOAP Web Service is created as per this guideline, WSDL is published under following URL.</div>
<div class="line">The URL must be specified at the client side.</div>
</div>
<ul class="simple">
<li><cite>http://AAA.BBB.CCC.DDD:XXXX/ Context route/Web service name?wsdl</cite></li>
</ul>
<p>End point address defined in WSDL consists of following URL..</p>
<ul class="simple">
<li><cite>http://AAA.BBB.CCC.DDD:XXXX/ Context route/Web service name</cite></li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In the guideline, it is assumed that a WAR file is used for deploying a web project of multi-project configuration in AP server. In this case, [server projectName]-web basically acts as a context route. However, it must be noted that route changes depending on AP server.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In this guideline, since it is assumed that SOAP server and client are together published as a Web application, WSDL URL is specified in the client. The client can also be created by providing WSDL as a file instead of URL.
For details, refer <a class="reference internal" href="#soaphowtousewebserviceclient"><span class="std std-ref">Implementation of Web service client</span></a>.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>In this guideline, AP server  (library to be used in case of Tomcat) is configured to change mapping of context route and access by following URL.</p>
<ul class="simple">
<li><cite>http://AAA.BBB.CCC.DDD:XXXX/[server projectName]-web/ws/TodoWebService?wsdl</cite></li>
</ul>
<p>How to map Web service in URL which is not under context route differs according to AP server.
Refer following for details.</p>
<blockquote class="last">
<div><table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="50%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">AP server name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Apache Tomcat</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><a class="reference internal" href="#soapappendixtomcatwebservice"><span class="std std-ref">Web service development on Tomcat</span></a></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Oracle WebLogic Server</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">TBD</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">JBoss Enterprise Application Platform</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">TBD</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="how-to-use">
<span id="soaphowtouse"></span><h2><a class="toc-backref" href="#id10">5.18.2. How to use</a><a class="headerlink" href="#how-to-use" title="Permalink to this headline">¶</a></h2>
<p>This section specifically explains how to create SOAP Web Service.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="how-to-create-soap-server">
<span id="soaphowtousewebapplicationconstruction"></span><h3><a class="toc-backref" href="#id11">5.18.2.1. How to create SOAP server</a><a class="headerlink" href="#how-to-create-soap-server" title="Permalink to this headline">¶</a></h3>
<div class="section" id="project-configuration">
<h4><a class="toc-backref" href="#id12">5.18.2.1.1. Project configuration</a><a class="headerlink" href="#project-configuration" title="Permalink to this headline">¶</a></h4>
<p><strong>Dependency for each project</strong></p>
<div class="line-block">
<div class="line">model project and webservice project are added as described in “<a class="reference internal" href="#soapoverviewaboutrestfulwebservicedevelopment"><span class="std std-ref">Development of Web service using JAX-WS</span></a>”.</div>
<div class="line">Refer “<a class="reference internal" href="#soapappendixaddproject"><span class="std std-ref">Project configuration is changed for SOAP server.</span></a>” for how to add.</div>
<div class="line">Also note that a dependency must be added to an existing project accordingly.</div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../_images/SOAPServerProjects.png"><img alt="Server Projects for SOAP" src="../_images/SOAPServerProjects.png" style="width: 80%;" /></a>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="30%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Project Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">web project</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Deploy a Web service implementation class.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">domain project</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Deploy Service which is called from WebService implementation class.</div>
<div class="line">Repository etc are same as used in the conventional project.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">webservice project</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Deploy interface of WebService to be published here.</div>
<div class="line">Client runs Web service using this interface.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">model project</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Deploy only the class that is used in SOAP Web Service from the classes that belong to the domain layer.</div>
<div class="line">Input value and return results from the client use the class in the project.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="application-configuration">
<h4><a class="toc-backref" href="#id13">5.18.2.1.2. Application configuration</a><a class="headerlink" href="#application-configuration" title="Permalink to this headline">¶</a></h4>
<p><strong>Default configuration while publishing Web service</strong></p>
<div class="line-block">
<div class="line">When Tomcat is to be used as AP server, “<a class="reference internal" href="#soapappendixtomcatwebservice"><span class="std std-ref">Web service development on Tomcat</span></a>” must be implemented.</div>
<div class="line">Besides, since the method to publish Web service is different according to AP server, refer manual of each AP server for details.</div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>AP server manual is explained below as the reference material.
It must be always checked that appropriate version of the manual is being referred.</p>
<p>Oracle WebLogic Server 12.2.1: <a class="reference external" href="https://docs.oracle.com/middleware/1221/wls/WSOVR/weblogic-web-service-stand.htm#WSOVR137">Oracle(R) Fusion Middleware Understanding WebLogic Web Services for Oracle WebLogic Server  Features and Standards Supported by WebLogic Web Services</a></p>
<p class="last">JBoss Enterprise Application Platform 6.4: <a class="reference external" href="https://access.redhat.com/documentation/en-US/JBoss_Enterprise_Application_Platform/6.4/html/Development_Guide/chap-JAX-WS_Web_Services.html">DEVELOPMENT GUIDE JAX-WS WEB SERVICES</a></p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Configuration of component scan of package</strong></p>
<p><code class="docutils literal"><span class="pre">[server</span> <span class="pre">projectName]-ws.xml</span></code> is created for scanning the component to be used by Web service, component scan is defined and injection in the Web service is enabled.</p>
<p><em>[server projectName]-web/src/main/resources/META-INF/spring/[server projectName]-ws.xml</em></p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.springframework.org/schema/beans&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xmlns:context=</span><span class="s">&quot;http://www.springframework.org/schema/context&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;</span>
<span class="s">         http://www.springframework.org/schema/beans</span>
<span class="s">         http://www.springframework.org/schema/beans/spring-beans.xsd</span>
<span class="s">         http://www.springframework.org/schema/context</span>
<span class="s">         http://www.springframework.org/schema/context/spring-context.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- (1) --&gt;</span>
    <span class="nt">&lt;context:component-scan</span> <span class="na">base-package=</span><span class="s">&quot;com.example.ws&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/beans&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify a package wherein the component to be used in Web service is stored.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><em>[server projectName]-web/src/main/webapp/WEB-INF/web.xml</em></p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;context-param&gt;</span>
    <span class="nt">&lt;param-name&gt;</span>contextConfigLocation<span class="nt">&lt;/param-name&gt;</span>
    <span class="c">&lt;!-- Root ApplicationContext --&gt;</span>
    <span class="c">&lt;!-- (1) --&gt;</span>
    <span class="nt">&lt;param-value&gt;</span>
        classpath*:META-INF/spring/applicationContext.xml
        classpath*:META-INF/spring/spring-security.xml
<span class="hll">        classpath*:META-INF/spring/[server projectName]-ws.xml
</span>    <span class="nt">&lt;/param-value&gt;</span>
<span class="nt">&lt;/context-param&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Add <code class="docutils literal"><span class="pre">[server</span> <span class="pre">projectName]-ws.xml</span></code> to reading target while generating a route <code class="docutils literal"><span class="pre">ApplicationContext</span></code>.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Definition for input check</strong></p>
<div class="line-block">
<div class="line">Following definition is added to input check for using method validation.</div>
<div class="line">For input check details, refer <a class="reference internal" href="#soaphowtouseservervalidation"><span class="std std-ref">Input check implementation</span></a>.</div>
</div>
<p><em>[server projectName]-web/src/main/resources/META-INF/spring/applicationContext.xml</em></p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">&quot;org.springframework.validation.beanvalidation.MethodValidationPostProcessor&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;validator&quot;</span> <span class="na">ref=</span><span class="s">&quot;validator&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;validator&quot;</span> <span class="na">class=</span><span class="s">&quot;org.springframework.validation.beanvalidation.LocalValidatorFactoryBean&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="web-service-implementation">
<span id="soaphowtousewebserviceimpl"></span><h4><a class="toc-backref" href="#id14">5.18.2.1.3. Web service implementation</a><a class="headerlink" href="#web-service-implementation" title="Permalink to this headline">¶</a></h4>
<p>Following are created.</p>
<ul class="simple">
<li>Creating Domain Object</li>
<li>Creating WebService interface</li>
<li>Creating WebService implementation class</li>
</ul>
<div class="figure">
<a class="reference internal image-reference" href="../_images/SOAPServerClass.png"><img alt="Server Projects for SOAP" src="../_images/SOAPServerClass.png" style="width: 80%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Creating Domain Object</strong></p>
<div class="line-block">
<div class="line">Domain Object used in the argument and return value of Web service is created in model project.</div>
<div class="line">It is not specifically different from general JavaBean which implements <code class="docutils literal"><span class="pre">java.io.Serializable</span></code> interface.</div>
</div>
<p><em>[server projectName]-model/src/main/java/com/example/domain/model/Todo.java</em></p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.example.domain.model</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.io.Serializable</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Todo</span> <span class="kd">implements</span> <span class="n">Serializable</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">todoId</span><span class="p">;</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">title</span><span class="p">;</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">description</span><span class="p">;</span>

    <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">finished</span><span class="p">;</span>

    <span class="kd">private</span> <span class="n">Date</span> <span class="n">createdAt</span><span class="p">;</span>

    <span class="c1">// omitted setter and getter</span>

<span class="p">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Creating WebService interface</strong></p>
<p>An interface to call Web service is created in webservice project.</p>
<p><em>[server projectName]-webservice/src/main/java/com/example/ws/todo/TodoWebService.java</em></p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.example.ws.todo</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">javax.jws.WebMethod</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.jws.WebParam</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.jws.WebResult</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.jws.WebService</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.example.domain.model.Todo</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.example.ws.webfault.WebFaultException</span><span class="p">;</span>

<span class="nd">@WebService</span><span class="p">(</span><span class="n">targetNamespace</span> <span class="o">=</span> <span class="s">&quot;http://example.com/todo&quot;</span><span class="p">)</span> <span class="c1">// (1)</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">TodoWebService</span> <span class="p">{</span>

    <span class="nd">@WebMethod</span> <span class="c1">// (2)</span>
    <span class="nd">@WebResult</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;todo&quot;</span><span class="p">)</span> <span class="c1">// (3)</span>
    <span class="n">Todo</span> <span class="nf">getTodo</span><span class="p">(</span><span class="nd">@WebParam</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;todoId&quot;</span><span class="p">)</span> <span class="cm">/* (4) */</span> <span class="n">String</span> <span class="n">todoId</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">WebFaultException</span><span class="p">;</span>

<span class="p">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first line-block">
<div class="line">WebService interface is declared by applying <code class="docutils literal"><span class="pre">&#64;WebService</span></code>.</div>
<div class="line">Although namespace is defined in the <code class="docutils literal"><span class="pre">targetNamespace</span></code> attribute, it is recommended to match it with the package name of the Web service used for creating it.</div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Value of <code class="docutils literal"><span class="pre">targetNamespace</span></code> attribute should be unique. Therefore, it must be changed while diverting the source in the guideline.</p>
</div>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Value of <code class="docutils literal"><span class="pre">targetNamespace</span></code> attribute is defined in WSDL. Namespace of the Web service is determined and is used for unique identification.</p>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Apply <code class="docutils literal"><span class="pre">&#64;WebMethod</span></code> to the method which is published as a Web service method.</div>
<div class="line">Method can be published on WSDL and used externally by applying this annotation.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Apply <code class="docutils literal"><span class="pre">&#64;WebResult</span></code> to return value and specify name in <code class="docutils literal"><span class="pre">name</span></code> attribute. It is not required in the absence of a return value.</div>
<div class="line">It is published as a return value on WSDL by applying this annotation.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Apply <code class="docutils literal"><span class="pre">&#64;WebParam</span></code> in the argument and specify name in <code class="docutils literal"><span class="pre">name</span></code> attribute.</div>
<div class="line">Argument is published on WSDL and defined as a parameter required for external calling, by applying this annotation.</div>
<div class="line">For details of <code class="docutils literal"><span class="pre">WebFaultException</span></code>, refer “<a class="reference internal" href="#soaphowtouseexceptionhandler"><span class="std std-ref">Implementing exception handling</span></a>”.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>How to apply package name and namespace</strong></p>
<p>When the package name is in the following format</p>
<blockquote>
<div><ul class="simple">
<li>[Domain].[Application name (System name)].ws.[Used case name]</li>
</ul>
</div></blockquote>
<p>In this guideline, it is recommended to use namespace as given below..</p>
<blockquote class="last">
<div><ul class="simple">
<li><a class="reference external" href="http://">http://</a> [Domain]/[Application name (System name)]</li>
</ul>
</div></blockquote>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>Relation between namespace and package name</strong></p>
<p>When com.example is used as a domain and todo is used as an application name, Namespace is linked with Java package as below.</p>
<blockquote class="last">
<div><div class="figure">
<a class="reference internal image-reference" href="../_images/SOAPURL.png"><img alt="Server and Client Projects for SOAP" src="../_images/SOAPURL.png" style="width: 50%;" /></a>
</div>
<p>Although it is not specified, naming of Namespace and package is summarised in <a class="reference external" href="https://access.redhat.com/documentation/en-US/Red_Hat_JBoss_Fuse/6.0/html/Developing_Applications_Using_JAX-WS/files/JAXWSDataNamespaceMapping.html">XML Namespace Mapping(Red Hat JBoss Fuse)</a>.</p>
</div></blockquote>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Creating WebService implementation class</strong></p>
<p>Create an implementation class of WebService interface in web project.</p>
<p><em>[server projectName]-web/src/main/java/com/example/ws/todo/TodoWebServiceImpl.java</em></p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.example.ws.todo</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">javax.inject.Inject</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.jws.HandlerChain</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.jws.WebService</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.xml.ws.BindingType</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.xml.ws.soap.SOAPBinding</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.web.context.support.SpringBeanAutowiringSupport</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.example.domain.model.Todo</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.example.domain.service.TodoService</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.example.ws.webfault.WebFaultException</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.example.ws.exception.WsExceptionHandler</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.example.ws.todo.TodoWebService</span><span class="p">;</span>


<span class="nd">@WebService</span><span class="p">(</span>
        <span class="n">portName</span> <span class="o">=</span> <span class="s">&quot;TodoWebPort&quot;</span><span class="p">,</span>
        <span class="n">serviceName</span> <span class="o">=</span> <span class="s">&quot;TodoWebService&quot;</span><span class="p">,</span>
        <span class="n">targetNamespace</span> <span class="o">=</span> <span class="s">&quot;http://example.com/todo&quot;</span><span class="p">,</span>
        <span class="n">endpointInterface</span> <span class="o">=</span> <span class="s">&quot;com.example.ws.todo.TodoWebService&quot;</span><span class="p">)</span> <span class="c1">// (1)</span>
<span class="nd">@BindingType</span><span class="p">(</span><span class="n">SOAPBinding</span><span class="p">.</span><span class="na">SOAP12HTTP_BINDING</span><span class="p">)</span> <span class="c1">// (2)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TodoWebServiceImpl</span> <span class="kd">extends</span> <span class="n">SpringBeanAutowiringSupport</span> <span class="kd">implements</span> <span class="n">TodoWebService</span> <span class="p">{</span> <span class="c1">// (3)</span>

    <span class="nd">@Inject</span> <span class="c1">// (4)</span>
    <span class="n">TodoService</span> <span class="n">todoService</span><span class="p">;</span>

    <span class="nd">@Override</span> <span class="c1">// (5)</span>
    <span class="kd">public</span> <span class="n">Todo</span> <span class="nf">getTodo</span><span class="p">(</span><span class="n">String</span> <span class="n">todoId</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">WebFaultException</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">todoService</span><span class="p">.</span><span class="na">getTodo</span><span class="p">(</span><span class="n">todoId</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first line-block">
<div class="line">WebService implementation class is declared by applying <code class="docutils literal"><span class="pre">&#64;WebService</span></code>.</div>
<div class="line"><code class="docutils literal"><span class="pre">portName</span></code> attribute is published as a port name on WSDL.</div>
<div class="line"><code class="docutils literal"><span class="pre">serviceName</span></code> attribute is published as a service name on WSDL.</div>
<div class="line"><code class="docutils literal"><span class="pre">targetNamespace</span></code> attribute is a namespace used on WSDL.</div>
<div class="line"><code class="docutils literal"><span class="pre">endpointInterface</span></code> attribute defines an interface name of Web service  implemented by this class.</div>
</div>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal"><span class="pre">portName</span></code> attribute, <code class="docutils literal"><span class="pre">serviceName</span></code> attribute and <code class="docutils literal"><span class="pre">endpointInterface</span></code> attribute should not be set in <code class="docutils literal"><span class="pre">TodoWebService</span></code> interface as <code class="docutils literal"><span class="pre">&#64;WebService</span></code> attribute. This is because the interface corresponds to <code class="docutils literal"><span class="pre">portType</span></code> element on WSDL and is not the element for describing Web service details.</p>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify binding method by applying <code class="docutils literal"><span class="pre">&#64;BindingType</span></code>.</div>
<div class="line">When <code class="docutils literal"><span class="pre">SOAPBinding.SOAP12HTTP_BINDING</span></code> is defined, it acts as a binding in SOAP1.2.</div>
<div class="line">If annotation is not applied, binding in SOAP1.1 is used.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Implement <code class="docutils literal"><span class="pre">TodoWebService</span></code> interface created earlier.</div>
<div class="line">Enable DI for Spring Bean by inheriting <code class="docutils literal"><span class="pre">org.springframework.web.context.support.SpringBeanAutowiringSupport</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Inject Service.</div>
<div class="line">Same as while calling the service in normal Controller.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Run business process by calling Service.</div>
<div class="line">Same as while calling the service in normal Controller.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is recommended to summarise Web service related class under ws package. This is to differentiate it from application layer class which is placed under app package.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="input-check-implementation">
<span id="soaphowtouseservervalidation"></span><h4><a class="toc-backref" href="#id15">5.18.2.1.4. Input check implementation</a><a class="headerlink" href="#input-check-implementation" title="Permalink to this headline">¶</a></h4>
<div class="line-block">
<div class="line">A method validation provided by Spring is used in the input check of parameters sent by SOAP Web Service.</div>
<div class="line">For the details of method validation, refer <a class="reference internal" href="Validation.html#methodvalidationonspringframeworkhowtouseapplytarget"><span class="std std-ref">How to define for the method for Method Validation target</span></a>.</div>
<div class="line">Input check details are defined in Service interface as given below.</div>
</div>
<p><em>[server projectName]-domain/src/main/java/com/example/domain/service/todo/TodoService.java</em></p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.example.domain.service.todo</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">javax.validation.Valid</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.validation.constraints.NotNull</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.validation.groups.Default</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.validation.annotation.Validated</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.example.domain.model.Todo</span><span class="p">;</span>

<span class="nd">@Validated</span> <span class="c1">// (1)</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">TodoService</span> <span class="p">{</span>

    <span class="n">Todo</span> <span class="nf">getTodo</span><span class="p">(</span><span class="nd">@NotNull</span> <span class="n">String</span> <span class="n">todoId</span><span class="p">);</span> <span class="c1">// (2)</span>

    <span class="n">Todo</span> <span class="nf">createTodo</span><span class="p">(</span><span class="nd">@Valid</span> <span class="n">Todo</span> <span class="n">todo</span><span class="p">);</span> <span class="c1">// (3)</span>

    <span class="nd">@Validated</span><span class="p">({</span> <span class="n">Default</span><span class="p">.</span><span class="na">class</span><span class="p">,</span> <span class="n">Todo</span><span class="p">.</span><span class="na">Update</span><span class="p">.</span><span class="na">class</span> <span class="p">})</span> <span class="c1">// (4)</span>
    <span class="n">Todo</span> <span class="nf">updateTodo</span><span class="p">(</span><span class="nd">@Valid</span> <span class="n">Todo</span> <span class="n">todo</span><span class="p">);</span>

<span class="p">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Implementation class of this interface is declared as a target for input check by applying <code class="docutils literal"><span class="pre">&#64;Validated</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Apply annotation to argument itself while checking the argument.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Apply <code class="docutils literal"><span class="pre">&#64;Valid</span></code> in the argument while carrying out input check of JavaBean.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Input check can also be carried out by specifying <code class="docutils literal"><span class="pre">&#64;Validated</span></code> in the group and narrowing down the specific conditions.</div>
<div class="line">Group details are explained in the JavaBean described next.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><em>[server projectName]-model/src/main/java/com/example/domain/model/Todo.java</em></p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.example.domain.model</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">javax.validation.constraints.NotNull</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.validation.constraints.Null</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.io.Serializable</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="p">;</span>

<span class="c1">// (1)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Todo</span> <span class="kd">implements</span> <span class="n">Serializable</span> <span class="p">{</span>

    <span class="c1">// (2)</span>
    <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Create</span> <span class="p">{</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Update</span> <span class="p">{</span>
    <span class="p">}</span>

    <span class="nd">@Null</span><span class="p">(</span><span class="n">groups</span> <span class="o">=</span> <span class="n">Create</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
    <span class="nd">@NotNull</span><span class="p">(</span><span class="n">groups</span> <span class="o">=</span> <span class="n">Update</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">todoId</span><span class="p">;</span>

    <span class="nd">@NotNull</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">title</span><span class="p">;</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">description</span><span class="p">;</span>

    <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">finished</span><span class="p">;</span>

    <span class="nd">@Null</span><span class="p">(</span><span class="n">groups</span> <span class="o">=</span> <span class="n">Create</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
    <span class="kd">private</span> <span class="n">Date</span> <span class="n">createdAt</span><span class="p">;</span>

    <span class="c1">// omitted setter and getter</span>
<span class="p">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define JavaBean input check in the Bean Validation.</div>
<div class="line">For details, refer “<a class="reference internal" href="Validation.html"><span class="doc">Input Validation</span></a>”.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define an interface used for grouping of validation.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="security-measures">
<h4><a class="toc-backref" href="#id16">5.18.2.1.5. Security measures</a><a class="headerlink" href="#security-measures" title="Permalink to this headline">¶</a></h4>
<p><strong>Authentication process</strong></p>
<div class="line-block">
<div class="line">How to carry out Basic authentication in Spring Security and how to authorize in Service are introduced in the guideline as the methods of authentication and authorization for SOAP.</div>
<div class="line">WS-Security is not addressed.</div>
<div class="line">For details of how to use, refer “<a class="reference internal" href="../Security/Authentication.html"><span class="doc">Authentication</span></a>” and “<a class="reference internal" href="../Security/Authorization.html"><span class="doc">Authorization</span></a>”.</div>
</div>
<p>A configuration example of Spring Security carrying out Basic authentication for SOAP Web Service is shown below.</p>
<p><em>[server projectName]-web/src/main/resources/META-INF/spring/spring-security.xml</em></p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;sec:http</span> <span class="na">pattern=</span><span class="s">&quot;/ws/**&quot;</span>
          <span class="na">create-session=</span><span class="s">&quot;stateless&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;sec:csrf</span> <span class="na">disabled=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;sec:http-basic</span> <span class="nt">/&gt;</span>  <span class="c">&lt;!-- (1) --&gt;</span>
<span class="nt">&lt;/sec:http&gt;</span>

<span class="c">&lt;!-- (2) --&gt;</span>
<span class="nt">&lt;sec:authentication-manager&gt;</span>
   <span class="nt">&lt;sec:authentication-provider</span>
       <span class="na">user-service-ref=</span><span class="s">&quot;sampleUserDetailsService&quot;</span><span class="nt">&gt;</span>
       <span class="nt">&lt;sec:password-encoder</span> <span class="na">ref=</span><span class="s">&quot;passwordEncoder&quot;</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;/sec:authentication-provider&gt;</span>
<span class="nt">&lt;/sec:authentication-manager&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Basic authentication can be carried out if <code class="docutils literal"><span class="pre">sec:http-basic</span></code> tag is described.</div>
<div class="line">Authentication is carried out only for the Web service execution by using <code class="docutils literal"><span class="pre">pattern</span></code> attribute.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define authentication method by using <code class="docutils literal"><span class="pre">authentication-provider</span></code>.</div>
<div class="line">Actual authentication and fetching user information must be implemented by creating <code class="docutils literal"><span class="pre">UserDetailsService</span></code>.</div>
<div class="line">For details, refer “<a class="reference internal" href="../Security/Authentication.html"><span class="doc">Authentication</span></a>”.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Authorization process</strong></p>
<div class="line-block">
<div class="line">Authorization is carried out by applying annotation for each Service.</div>
<div class="line">For details, refer access authorization of “<a class="reference internal" href="../Security/Authorization.html"><span class="doc">Authorization</span></a>(method)”.</div>
</div>
<p><em>[server projectName]-web/src/main/resources/META-INF/spring/spring-security.xml</em></p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;sec:global-method-security</span> <span class="na">pre-post-annotations=</span><span class="s">&quot;enabled&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (1) --&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify <code class="docutils literal"><span class="pre">pre-post-annotations</span></code> attribute of <code class="docutils literal"><span class="pre">&lt;sec:global-method-security&gt;</span></code> element in <code class="docutils literal"><span class="pre">enabled</span></code>.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><em>[server projectName]-domain/src/main/java/com/example/domain/service/todo/TodoServiceImpl.java</em></p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TodoServiceImpl</span> <span class="kd">implements</span> <span class="n">TodoService</span> <span class="p">{</span>

    <span class="c1">// omitted</span>

    <span class="c1">// (1)</span>
    <span class="nd">@PreAuthorize</span><span class="p">(</span><span class="s">&quot;isAuthenticated()&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Todo</span><span class="o">&gt;</span> <span class="nf">getTodos</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// omitted</span>
    <span class="p">}</span>

    <span class="nd">@PreAuthorize</span><span class="p">(</span><span class="s">&quot;hasRole(&#39;ROLE_ADMIN&#39;)&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="n">Todo</span> <span class="nf">createTodo</span><span class="p">(</span><span class="n">Todo</span> <span class="n">todo</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// omitted</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify <code class="docutils literal"><span class="pre">org.springframework.security.access.prepost.PreAuthorize</span></code> annotation in the method which carries out authorization.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>CSRF measures</strong></p>
<div class="line-block">
<div class="line">SOAP Web Service should be used in the stateless communication without using a session.</div>
<div class="line">Therefore, a configuration method wherein CSRF measures using the session are not employed is explained below.</div>
<div class="line">For details of CSRF, refer “<a class="reference internal" href="../Security/CSRF.html"><span class="doc">CSRF Countermeasures</span></a>”.</div>
<div class="line">CSRF measures are enabled in the default configuration of Blank project.</div>
<div class="line">Therefore, CSRF measures processing is disabled for SOAP Web Service request by adding following configuration.</div>
</div>
<p><em>[server projectName]-web/src/main/resources/META-INF/spring/spring-security.xml</em></p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="c">&lt;!-- (1) --&gt;</span>
<span class="nt">&lt;sec:http</span> <span class="na">pattern=</span><span class="s">&quot;/ws/**&quot;</span>
    <span class="na">create-session=</span><span class="s">&quot;stateless&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;sec:http-basic</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;sec:csrf</span> <span class="na">disabled=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/sec:http&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Add definition of Spring Security for SOAP Web Service.</div>
<div class="line">Specify URL pattern of request path for SOAP Web Service in <code class="docutils literal"><span class="pre">pattern</span></code> attribute of <code class="docutils literal"><span class="pre">&lt;sec:http&gt;</span></code> element.</div>
<div class="line">In this code example, request path starting at <code class="docutils literal"><span class="pre">/ws/</span></code> acts as a request path for SOAP Web Service.</div>
<div class="line">Further, the session can no longer be used in Spring Security process by making  <code class="docutils literal"><span class="pre">create-session</span></code> attribute <code class="docutils literal"><span class="pre">stateless</span></code>.</div>
<div class="line"><br /></div>
<div class="line">Set <code class="docutils literal"><span class="pre">disabled</span></code> attribute of <code class="docutils literal"><span class="pre">&lt;sec:csrf&gt;</span></code> element to <code class="docutils literal"><span class="pre">true</span></code> for disabling CSRF measures.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="implementation-of-exception-handling">
<h4><a class="toc-backref" href="#id17">5.18.2.1.6. Implementation of exception handling</a><a class="headerlink" href="#implementation-of-exception-handling" title="Permalink to this headline">¶</a></h4>
<div class="line-block">
<div class="line">An exclusive exception class must be thrown for communicating with the client when an exception occurs in SOAP server.</div>
<div class="line">Implementation is described below.</div>
</div>
<p><strong>Exception occurred in SOAP server</strong></p>
<p>Exception occurred at SOAP server can determine the notification message to the client by using class (SOAPFault) which implements exception described henceforth.</p>
<p>Basically the class given below is created.</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="30%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Class Name</th>
<th class="head">Overview</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">ErrorBean</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">A class which retains code and message of occurred exception.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">WebFaultType</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Enum type used to determine the type of exception.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">WebFaultBean</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">A class which retains <code class="docutils literal"><span class="pre">ErrorBean</span></code> and <code class="docutils literal"><span class="pre">WebFaultType</span></code>. Multiple exception information can be retained by retaining <code class="docutils literal"><span class="pre">ErrorBean</span></code> in <code class="docutils literal"><span class="pre">List</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">WebFaultException</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Exception class which retains <code class="docutils literal"><span class="pre">WebFaultBean</span></code>.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>These exceptions are placed on [server projectName]-webservice since these are shared by SOAP server and client.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><em>[server projectName]-webservice/src/main/java/com/example/ws/webfault/ErrorBean.java</em></p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.example.ws.webfault</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ErrorBean</span> <span class="p">{</span> <span class="c1">// (1)</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">code</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">message</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">path</span><span class="p">;</span>

    <span class="c1">// omitted setter and getter</span>
<span class="p">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Create a class which retains exception messages etc.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><em>[server projectName]-webservice/src/main/java/com/example/ws/webfault/WebFaultType.java</em></p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.example.ws.webfault</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">enum</span> <span class="n">WebFaultType</span> <span class="p">{</span> <span class="c1">// (2)</span>
    <span class="n">AccessDeniedFault</span><span class="p">,</span>
    <span class="n">BusinessFault</span><span class="p">,</span>
    <span class="n">ResourceNotFoundFault</span><span class="p">,</span>
    <span class="n">ValidationFault</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define an enum type used to identify type of exception.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><em>[server projectName]-webservice/src/main/java/com/example/ws/webfault/WebFaultBean.java</em></p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.example.ws.webfault</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WebFaultBean</span> <span class="p">{</span> <span class="c1">// (3)</span>

    <span class="kd">private</span> <span class="n">WebFaultType</span> <span class="n">type</span><span class="p">;</span>

    <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">ErrorBean</span><span class="o">&gt;</span> <span class="n">errors</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">ErrorBean</span><span class="o">&gt;</span><span class="p">();</span>

    <span class="kd">public</span> <span class="nf">WebFaultBean</span><span class="p">(</span><span class="n">WebFaultType</span> <span class="n">type</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="na">type</span> <span class="o">=</span> <span class="n">type</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addError</span><span class="p">(</span><span class="n">String</span> <span class="n">code</span><span class="p">,</span> <span class="n">String</span> <span class="n">message</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">addError</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addError</span><span class="p">(</span><span class="n">String</span> <span class="n">code</span><span class="p">,</span> <span class="n">String</span> <span class="n">message</span><span class="p">,</span> <span class="n">String</span> <span class="n">path</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">errors</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span> <span class="n">ErrorBean</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">path</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="c1">// omitted setter and getter</span>
<span class="p">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Create a class which retains <code class="docutils literal"><span class="pre">ErrorBean</span></code> and <code class="docutils literal"><span class="pre">WebFaultType</span></code>.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><em>[server projectName]-webservice/src/main/java/com/example/ws/webfault/WebFaultException.java</em></p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.example.ws.webfault</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">javax.xml.ws.WebFault</span><span class="p">;</span>

<span class="nd">@WebFault</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;WebFault&quot;</span><span class="p">,</span> <span class="n">targetNamespace</span> <span class="o">=</span> <span class="s">&quot;http://example.com/todo&quot;</span><span class="p">)</span> <span class="c1">// (1)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WebFaultException</span> <span class="kd">extends</span> <span class="n">Exception</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="n">WebFaultBean</span> <span class="n">faultInfo</span><span class="p">;</span> <span class="c1">// (2)</span>

    <span class="kd">public</span> <span class="nf">WebFaultException</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="nf">WebFaultException</span><span class="p">(</span><span class="n">String</span> <span class="n">message</span><span class="p">,</span> <span class="n">WebFaultBean</span> <span class="n">faultInfo</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">super</span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="na">faultInfo</span> <span class="o">=</span> <span class="n">faultInfo</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="nf">WebFaultException</span><span class="p">(</span><span class="n">String</span> <span class="n">message</span><span class="p">,</span> <span class="n">WebFaultBean</span> <span class="n">faultInfo</span><span class="p">,</span> <span class="n">Throwable</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">super</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">e</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="na">faultInfo</span> <span class="o">=</span> <span class="n">faultInfo</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">ErrorBean</span><span class="o">&gt;</span> <span class="nf">getErrors</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">faultInfo</span><span class="p">.</span><span class="na">getErrors</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="n">WebFaultType</span> <span class="nf">getType</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">faultInfo</span><span class="p">.</span><span class="na">getType</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="c1">// omitted setter and getter</span>
<span class="p">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Declare SOAPFault by applying <code class="docutils literal"><span class="pre">&#64;WebFault</span></code> to Exception inheritance class.</div>
<div class="line">Specify <code class="docutils literal"><span class="pre">name</span></code> attribute of SOAPFault sent to client in <code class="docutils literal"><span class="pre">name</span></code> attribute.</div>
<div class="line">Specify namespace to be used in <code class="docutils literal"><span class="pre">targetNamespace</span></code> attribute. It must be same as in Web service.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first line-block">
<div class="line">It consists of constructor and method below, as shown in code example besides retaining the faultInfo in the field.</div>
</div>
<ul class="last simple">
<li>Constructor wherein message string and faultInfo are considered as arguments</li>
<li>Constructor wherein message string, faultInfo and cause exception are considered as arguments</li>
<li>getFaultInfo method</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>Reason of inheriting Exception in WebFaultException instead of RuntimeException</strong></p>
<p class="last">If parent class of <code class="docutils literal"><span class="pre">WebFaultException</span></code> is set to <code class="docutils literal"><span class="pre">RuntimeException</span></code>, exception process can be further simplified. However, parent class should not be set to <code class="docutils literal"><span class="pre">RuntimeException</span></code>. it is also declared that it cannot be defined in <a class="reference external" href="https://jcp.org/en/jsr/detail?id=224">JSR 224: JavaTM API for XML-Based Web Services</a> as well. Although, it depends on JAS-WS implementation of AP server during an actual attempt, exception class （<code class="docutils literal"><span class="pre">WebFaultException</span></code>) wherein <code class="docutils literal"><span class="pre">&#64;WebFault</span></code> is applied in the client cannot be fetched resulting in inability to fetch error types and message. Inheriting <code class="docutils literal"><span class="pre">Exception</span></code>also results in non-implementation of exception process using AOP.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p><strong>Constructor and field of WebFaultException</strong></p>
<p class="last">A setter corresponding to each field and default constructor is mandatory in <code class="docutils literal"><span class="pre">WebFaultException</span></code>. This is an internal process of client and is used while creating <code class="docutils literal"><span class="pre">WebFaultException</span></code>. Therefore, it is also not possible to consider each field as final.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">This <code class="docutils literal"><span class="pre">WebFaultException</span></code> is inherited, and types to be communicated to the client and child class are created.</div>
<div class="line">For example, child classes are created as given below.</div>
</div>
<ul class="simple">
<li>Business error exception</li>
<li>Input error exception</li>
<li>Resource not detected exception</li>
<li>Exclusive error exception</li>
<li>Authorization exception</li>
<li>System error exception</li>
</ul>
<p>Following is an example of business error exception.</p>
<p><em>[server projectName]-webservice/src/main/java/com/example/ws/webfault/BusinessFaultException.java</em></p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.example.ws.webfault</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">javax.xml.ws.WebFault</span><span class="p">;</span>

<span class="nd">@WebFault</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;BusinessFault&quot;</span><span class="p">,</span> <span class="n">targetNamespace</span> <span class="o">=</span> <span class="s">&quot;http://example.com/todo&quot;</span><span class="p">)</span> <span class="c1">// (1)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BusinessFaultException</span> <span class="kd">extends</span> <span class="n">WebFaultException</span> <span class="p">{</span>

    <span class="kd">public</span> <span class="nf">BusinessFaultException</span><span class="p">(</span><span class="n">String</span> <span class="n">message</span><span class="p">,</span> <span class="n">WebFaultBean</span> <span class="n">faultInfo</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">super</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">faultInfo</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="nf">BusinessFaultException</span><span class="p">(</span><span class="n">String</span> <span class="n">message</span><span class="p">,</span> <span class="n">WebFaultBean</span> <span class="n">faultInfo</span><span class="p">,</span> <span class="n">Throwable</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">super</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">faultInfo</span><span class="p">,</span> <span class="n">e</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Inherit <code class="docutils literal"><span class="pre">WebFaultException</span></code> and create only constructor.</div>
<div class="line">Field and other methods are not required to be described since parent class method is used.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Exception handler which wraps exceptions that have occurred by SOAPFault</strong></p>
<p>Exception handler class is created for wrapping the run-time exceptions which occur in Service by SOAPFault.
This guideline adopts a policy wherein WebService implementation class converts and throws exceptions using this handler.</p>
<p>Exception thrown from Service assumes the following. It should be added when required.</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="60%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Exception name</th>
<th class="head">Details</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">org.springframework.security.access.AccessDeniedException</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Exception at the time of authorization error</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">javax.validation.ConstraintViolationException</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Exception at the time of input check error</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.exception.ResourceNotFoundException</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Exception when resource is not detected</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.exception.BusinessException</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Business exception</div>
</div>
</td>
</tr>
</tbody>
</table>
<p><em>[server projectName]-web/src/main/java/com/example/ws/exception/WsExceptionHandler.java</em></p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.example.ws.exception</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.Iterator</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.util.Locale</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.util.Set</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">javax.inject.Inject</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.validation.ConstraintViolation</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.validation.ConstraintViolationException</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.validation.Path</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.context.MessageSource</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.security.access.AccessDeniedException</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Component</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.terasoluna.gfw.common.exception.BusinessException</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.terasoluna.gfw.common.exception.ExceptionCodeResolver</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.terasoluna.gfw.common.exception.ExceptionLogger</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.terasoluna.gfw.common.exception.ResourceNotFoundException</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.terasoluna.gfw.common.exception.SystemException</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.terasoluna.gfw.common.message.ResultMessage</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.terasoluna.gfw.common.message.ResultMessages</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.example.ws.webfault.WebFaultBean</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.example.ws.webfault.WebFaultException</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.example.ws.webfault.WebFaultType</span><span class="p">;</span>

<span class="nd">@Component</span>  <span class="c1">// (1)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WsExceptionHandler</span> <span class="p">{</span>

    <span class="nd">@Inject</span>
    <span class="n">MessageSource</span> <span class="n">messageSource</span><span class="p">;</span> <span class="c1">// (2)</span>

    <span class="nd">@Inject</span>
    <span class="n">ExceptionCodeResolver</span> <span class="n">exceptionCodeResolver</span><span class="p">;</span> <span class="c1">// (3)</span>

    <span class="nd">@Inject</span>
    <span class="n">ExceptionLogger</span> <span class="n">exceptionLogger</span><span class="p">;</span> <span class="c1">// (4)</span>

    <span class="c1">// (5)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">translateException</span><span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">WebFaultException</span> <span class="p">{</span>
        <span class="n">loggingException</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
        <span class="n">WebFaultBean</span> <span class="n">faultInfo</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">e</span> <span class="k">instanceof</span> <span class="n">AccessDeniedException</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">faultInfo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">WebFaultBean</span><span class="p">(</span><span class="n">WebFaultType</span><span class="p">.</span><span class="na">AccessDeniedFault</span><span class="p">);</span>
            <span class="n">faultInfo</span><span class="p">.</span><span class="na">addError</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="na">getClass</span><span class="p">().</span><span class="na">getName</span><span class="p">(),</span> <span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">e</span> <span class="k">instanceof</span> <span class="n">ConstraintViolationException</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">faultInfo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">WebFaultBean</span><span class="p">(</span><span class="n">WebFaultType</span><span class="p">.</span><span class="na">ValidationFault</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="na">addErrors</span><span class="p">(</span><span class="n">faultInfo</span><span class="p">,</span> <span class="p">((</span><span class="n">ConstraintViolationException</span><span class="p">)</span> <span class="n">e</span><span class="p">).</span><span class="na">getConstraintViolations</span><span class="p">());</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">e</span> <span class="k">instanceof</span> <span class="n">ResourceNotFoundException</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">faultInfo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">WebFaultBean</span><span class="p">(</span><span class="n">WebFaultType</span><span class="p">.</span><span class="na">ResourceNotFoundFault</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="na">addErrors</span><span class="p">(</span><span class="n">faultInfo</span><span class="p">,</span> <span class="p">((</span><span class="n">ResourceNotFoundException</span><span class="p">)</span> <span class="n">e</span><span class="p">).</span><span class="na">getResultMessages</span><span class="p">());</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">e</span> <span class="k">instanceof</span> <span class="n">BusinessException</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">faultInfo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">WebFaultBean</span><span class="p">(</span><span class="n">WebFaultType</span><span class="p">.</span><span class="na">BusinessFault</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="na">addErrors</span><span class="p">(</span><span class="n">faultInfo</span><span class="p">,</span> <span class="p">((</span><span class="n">BusinessException</span><span class="p">)</span> <span class="n">e</span><span class="p">).</span><span class="na">getResultMessages</span><span class="p">());</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="c1">// not translate.</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">SystemException</span><span class="p">(</span><span class="s">&quot;e.ex.fw.9001&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">throw</span> <span class="k">new</span> <span class="n">WebFaultException</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">(),</span> <span class="n">faultInfo</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="na">getCause</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">loggingException</span><span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">exceptionLogger</span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">addErrors</span><span class="p">(</span><span class="n">WebFaultBean</span> <span class="n">faultInfo</span><span class="p">,</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">ConstraintViolation</span><span class="o">&lt;?&gt;&gt;</span> <span class="n">constraintViolations</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">ConstraintViolation</span><span class="o">&lt;?&gt;</span> <span class="n">v</span> <span class="p">:</span> <span class="n">constraintViolations</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">Path</span><span class="p">.</span><span class="na">Node</span><span class="o">&gt;</span> <span class="n">pathIt</span> <span class="o">=</span> <span class="n">v</span><span class="p">.</span><span class="na">getPropertyPath</span><span class="p">().</span><span class="na">iterator</span><span class="p">();</span>
            <span class="n">pathIt</span><span class="p">.</span><span class="na">next</span><span class="p">();</span> <span class="c1">// method name node (skip)</span>
            <span class="n">Path</span><span class="p">.</span><span class="na">Node</span> <span class="n">methodArgumentNameNode</span> <span class="o">=</span> <span class="n">pathIt</span><span class="p">.</span><span class="na">next</span><span class="p">();</span>
            <span class="n">faultInfo</span><span class="p">.</span><span class="na">addError</span><span class="p">(</span>
                <span class="n">v</span><span class="p">.</span><span class="na">getConstraintDescriptor</span><span class="p">().</span><span class="na">getAnnotation</span><span class="p">().</span><span class="na">annotationType</span><span class="p">().</span><span class="na">getSimpleName</span><span class="p">(),</span>
                <span class="n">v</span><span class="p">.</span><span class="na">getMessage</span><span class="p">(),</span>
                <span class="n">pathIt</span><span class="p">.</span><span class="na">hasNext</span><span class="p">()</span> <span class="o">?</span> <span class="n">pathIt</span><span class="p">.</span><span class="na">next</span><span class="p">().</span><span class="na">toString</span><span class="p">()</span> <span class="p">:</span> <span class="n">methodArgumentNameNode</span><span class="p">.</span><span class="na">toString</span><span class="p">());</span>
        <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">addErrors</span><span class="p">(</span><span class="n">WebFaultBean</span> <span class="n">faultInfo</span><span class="p">,</span> <span class="n">ResultMessages</span> <span class="n">resultMessages</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">Locale</span> <span class="n">locale</span> <span class="o">=</span> <span class="n">Locale</span><span class="p">.</span><span class="na">getDefault</span><span class="p">();</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">ResultMessage</span> <span class="n">message</span> <span class="p">:</span> <span class="n">resultMessages</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">faultInfo</span><span class="p">.</span><span class="na">addError</span><span class="p">(</span>
                <span class="n">message</span><span class="p">.</span><span class="na">getCode</span><span class="p">(),</span>
                <span class="n">messageSource</span><span class="p">.</span><span class="na">getMessage</span><span class="p">(</span><span class="n">message</span><span class="p">.</span><span class="na">getCode</span><span class="p">(),</span> <span class="n">message</span><span class="p">.</span><span class="na">getArgs</span><span class="p">(),</span> <span class="n">message</span><span class="p">.</span><span class="na">getText</span><span class="p">(),</span> <span class="n">locale</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Apply <code class="docutils literal"><span class="pre">&#64;Component</span></code> for managing the class in DI container.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Use <code class="docutils literal"><span class="pre">MessageSource</span></code> to fetch the message to be output.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Use <code class="docutils literal"><span class="pre">ExceptionCodeResolverMessageSource</span></code> provided by common library and map exception types and exception codes.</div>
<div class="line">For details, refer “<a class="reference internal" href="ExceptionHandling.html"><span class="doc">Exception Handling</span></a>”.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Use <code class="docutils literal"><span class="pre">ExceptionLogger</span></code> provided by common library and output exception information in the exception.</div>
<div class="line">For details, refer “<a class="reference internal" href="ExceptionHandling.html"><span class="doc">Exception Handling</span></a>”.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Each exception occurring in Service is wrapped in <code class="docutils literal"><span class="pre">SOAPFault</span></code>.</div>
<div class="line">Refer table at the beginning for exception mapping.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>Other exception handling</strong></p>
<p class="last">In case of other exceptions (else part of <code class="docutils literal"><span class="pre">translateException</span></code> method described above), detailed exception details are not notified to the client and only <code class="docutils literal"><span class="pre">com.sun.xml.internal.ws.fault.ServerSOAPFaultException</span></code> is thrown.Exception can also be wrapped like other exceptions and notified to the client side.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Exception occurred in the Service is wrapped in Web service by calling exception handler</strong></p>
<p>Exception handler is called in Web service class. Example is given below.</p>
<p><em>[server projectName]-web/src/main/java/com/example/ws/todo/TodoWebServiceImpl.java</em></p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="nd">@WebService</span><span class="p">(</span>
        <span class="n">portName</span> <span class="o">=</span> <span class="s">&quot;TodoWebPort&quot;</span><span class="p">,</span>
        <span class="n">serviceName</span> <span class="o">=</span> <span class="s">&quot;TodoWebService&quot;</span><span class="p">,</span>
        <span class="n">targetNamespace</span> <span class="o">=</span> <span class="s">&quot;http://example.com/todo&quot;</span><span class="p">,</span>
        <span class="n">endpointInterface</span> <span class="o">=</span> <span class="s">&quot;com.example.ws.todo.TodoWebService&quot;</span><span class="p">)</span>
<span class="nd">@BindingType</span><span class="p">(</span><span class="n">SOAPBinding</span><span class="p">.</span><span class="na">SOAP12HTTP_BINDING</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TodoWebServiceImpl</span> <span class="kd">extends</span> <span class="n">SpringBeanAutowiringSupport</span> <span class="kd">implements</span> <span class="n">TodoWebService</span> <span class="p">{</span>
    <span class="nd">@Inject</span>
    <span class="n">TodoService</span> <span class="n">todoService</span><span class="p">;</span>
    <span class="nd">@Inject</span>
    <span class="n">WsExceptionHandler</span> <span class="n">handler</span><span class="p">;</span> <span class="c1">// (1)</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Todo</span> <span class="nf">getTodo</span><span class="p">(</span><span class="n">String</span> <span class="n">todoId</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">WebFaultException</span> <span class="cm">/* (2) */</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">todoService</span><span class="p">.</span><span class="na">getTodo</span><span class="p">(</span><span class="n">todoId</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">RuntimeException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">handler</span><span class="p">.</span><span class="na">translateException</span><span class="p">(</span><span class="n">e</span><span class="p">);</span> <span class="c1">// (3)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Inject exception handler.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Apply throws clause since the exception is thrown after wrapping in <code class="docutils literal"><span class="pre">WebFaultException</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">In case of run-time exception, delegate the process to exception handler class.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="how-to-handle-large-binary-data-using-mtom">
<h4><a class="toc-backref" href="#id18">5.18.2.1.7. How to handle large binary data using MTOM</a><a class="headerlink" href="#how-to-handle-large-binary-data-using-mtom" title="Permalink to this headline">¶</a></h4>
<div class="line-block">
<div class="line">Sending and receiving process can be carried out in SOAP by mapping Byte array while handling binary data.</div>
<div class="line">However, while handling binary data of large volume, issues like memory exhaustion are likely to occur.</div>
<div class="line">Accordingly, binary data can be handled as attached file in the optimised state by carrying out implementation in compliance with MTOM（Message Transmission Optimization Mechanism).</div>
<div class="line">For detailed definition, refer <a class="reference external" href="http://www.w3.org/TR/soap12-mtom/">W3C -SOAP Message Transmission Optimization Mechanism-</a>.</div>
<div class="line">The method is described below.</div>
</div>
<p><em>[server projectName]-webservice/src/main/java/com/example/ws/todo/TodoWebService.java</em></p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.example.ws.todo</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">javax.activation.DataHandler</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.jws.WebMethod</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.jws.WebParam</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.jws.WebResult</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.jws.WebService</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.xml.bind.annotation.XmlMimeType</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.example.domain.model.Todo</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.example.ws.webfault.WebFaultException</span><span class="p">;</span>

<span class="nd">@WebService</span><span class="p">(</span><span class="n">targetNamespace</span> <span class="o">=</span> <span class="s">&quot;http://example.com/todo&quot;</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">TodoWebService</span> <span class="p">{</span>

    <span class="c1">// omitted</span>

    <span class="nd">@WebMethod</span>
    <span class="kt">void</span> <span class="nf">uploadFile</span><span class="p">(</span><span class="nd">@XmlMimeType</span><span class="p">(</span><span class="s">&quot;application/octet-stream&quot;</span><span class="p">)</span> <span class="cm">/* (1) */</span> <span class="n">DataHandler</span> <span class="n">dataHandler</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">WebFaultException</span><span class="p">;</span>

<span class="p">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Apply <code class="docutils literal"><span class="pre">&#64;XmlMimeType</span></code> for <code class="docutils literal"><span class="pre">javax.activation.DataHandler</span></code> which processes binary data.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><em>[server projectName]-web/src/main/java/com/example/ws/todo/TodoWebServiceImpl.java</em></p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.example.ws.todo</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStream</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">javax.activation.DataHandler</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.inject.Inject</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.jws.HandlerChain</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.jws.WebService</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.xml.ws.BindingType</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.xml.ws.soap.MTOM</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.xml.ws.soap.SOAPBinding</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.web.context.support.SpringBeanAutowiringSupport</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.terasoluna.gfw.common.exception.SystemException</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.example.domain.model.Todo</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.example.domain.service.TodoService</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.example.ws.webfault.WebFaultException</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.example.ws.exception.WsExceptionHandler</span><span class="p">;</span>

<span class="c1">// (1)</span>
<span class="nd">@MTOM</span>
<span class="nd">@WebService</span><span class="p">(</span>
        <span class="n">portName</span> <span class="o">=</span> <span class="s">&quot;TodoWebPort&quot;</span><span class="p">,</span>
        <span class="n">serviceName</span> <span class="o">=</span> <span class="s">&quot;TodoWebService&quot;</span><span class="p">,</span>
        <span class="n">targetNamespace</span> <span class="o">=</span> <span class="s">&quot;http://example.com/todo&quot;</span><span class="p">,</span>
        <span class="n">endpointInterface</span> <span class="o">=</span> <span class="s">&quot;com.example.ws.todo.TodoWebService&quot;</span><span class="p">)</span>
<span class="nd">@BindingType</span><span class="p">(</span><span class="n">SOAPBinding</span><span class="p">.</span><span class="na">SOAP12HTTP_BINDING</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TodoWebServiceImpl</span> <span class="kd">extends</span> <span class="n">SpringBeanAutowiringSupport</span> <span class="kd">implements</span> <span class="n">TodoWebService</span> <span class="p">{</span>

    <span class="nd">@Inject</span>
    <span class="n">TodoService</span> <span class="n">todoService</span><span class="p">;</span>

    <span class="c1">// omitted</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">uploadFile</span><span class="p">(</span><span class="n">DataHandler</span> <span class="n">dataHandler</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">WebFaultException</span> <span class="p">{</span>

        <span class="k">try</span> <span class="p">(</span><span class="n">InputStream</span> <span class="n">inputStream</span> <span class="o">=</span> <span class="n">dataHandler</span><span class="p">.</span><span class="na">getInputStream</span><span class="p">()){</span> <span class="c1">// (2)</span>
            <span class="n">todoService</span><span class="p">.</span><span class="na">uploadFile</span><span class="p">(</span><span class="n">inputStream</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">handler</span><span class="p">.</span><span class="na">translateException</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Apply <code class="docutils literal"><span class="pre">&#64;MTOM</span></code> and declare the use of implementation in compliance with MTOM.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Fetch <code class="docutils literal"><span class="pre">java.io.InputStream</span></code> from <code class="docutils literal"><span class="pre">javax.activation.DataHandler</span></code> and handle the file.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="creation-of-client">
<h3><a class="toc-backref" href="#id19">5.18.2.2. Creation of client</a><a class="headerlink" href="#creation-of-client" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id1">
<h4><a class="toc-backref" href="#id20">5.18.2.2.1. Project configuration</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>As described in “<a class="reference internal" href="#soapoverviewaboutrestfulwebservicedevelopment"><span class="std std-ref">Development of Web service using JAX-WS</span></a>”, model project and webservice project are assumed to be received by SOAP server.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/SOAPClientProjects.png"><img alt="Client Projects for SOAP" src="../_images/SOAPClientProjects.png" style="width: 80%;" /></a>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="30%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Project name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">web project</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Create Controller.</div>
<div class="line">No specific change in the Controller during normal screen transition.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">domain project</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Call Web service by using WebService interface which is provided in webservice project from Service class.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">webservice project</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Configure data same as SOAP server.</div>
<div class="line">Client uses this interface to implement Web service.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">model project</div>
<div class="line">Configure data same as SOAP server.</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Use class in the project for input value and return results passed to SOAP server.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">env project</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define a proxy class which implements WebService interface used while communicating with SOAP server.</div>
<div class="line">Since proxy class definition is often environment dependent, it is defined in env project.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="implementation-of-web-service-client">
<span id="soaphowtousewebserviceclient"></span><h4><a class="toc-backref" href="#id21">5.18.2.2.2. Implementation of Web service client</a><a class="headerlink" href="#implementation-of-web-service-client" title="Permalink to this headline">¶</a></h4>
<p>Implement class as below.</p>
<ul class="simple">
<li>Define a proxy class which implements WebService interface</li>
<li>Call Web service from Service class through WebService interface.</li>
</ul>
<div class="figure">
<a class="reference internal image-reference" href="../_images/SOAPClientClass.png"><img alt="Server Projects for SOAP" src="../_images/SOAPClientClass.png" style="width: 80%;" /></a>
</div>
<p><strong>Creating proxy class which implements WebService interface</strong></p>
<p>Define <code class="docutils literal"><span class="pre">org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean</span></code> generating a proxy class which implements a WebService interface.</p>
<p><em>[client projectName]-env/src/main/resources/META-INF/spring/[client projectName]-env.xml</em></p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;todoWebService&quot;</span>
    <span class="na">class=</span><span class="s">&quot;org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean&quot;</span><span class="nt">&gt;</span><span class="c">&lt;!-- (1) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;serviceInterface&quot;</span> <span class="na">value=</span><span class="s">&quot;com.example.ws.todo.TodoWebService&quot;</span> <span class="nt">/&gt;</span><span class="c">&lt;!-- (2) --&gt;</span>
    <span class="c">&lt;!-- (3) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;serviceName&quot;</span> <span class="na">value=</span><span class="s">&quot;TodoWebService&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;portName&quot;</span> <span class="na">value=</span><span class="s">&quot;TodoWebPort&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;namespaceUri&quot;</span> <span class="na">value=</span><span class="s">&quot;http://example.com/todo&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;wsdlDocumentResource&quot;</span> <span class="na">value=</span><span class="s">&quot;${webservice.todoWebService.wsdlDocumentResource}&quot;</span> <span class="nt">/&gt;</span><span class="c">&lt;!-- (4) --&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<p><em>[client projectName]-env/src/main/resources/META-INF/spring/[client projectName]-infra.properties</em></p>
<div class="highlight-properties"><div class="highlight"><pre><span></span><span class="c"># (5)</span>
<span class="na">webservice.todoWebService.wsdlDocumentResource</span><span class="o">=</span><span class="s">http://AAA.BBB.CCC.DDD:XXXX/[server projectName]-web/ws/TodoWebService?wsdl</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No..</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define <code class="docutils literal"><span class="pre">org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean</span></code>.SOAP server can be accessed through proxy class generated by this class.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define an interface that should be implemented by Web service in <code class="docutils literal"><span class="pre">serviceInterface</span></code> property.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Details same as defined on the server side must be defined in <code class="docutils literal"><span class="pre">serviceName</span></code> ,<code class="docutils literal"><span class="pre">portName</span></code> and <code class="docutils literal"><span class="pre">namespaceUri</span></code> property respectively.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify URL of WDSL published in <code class="docutils literal"><span class="pre">wsdlDocumentResource</span></code> property.</div>
<div class="line">Property key is specified since URL is described in the property file described later.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="first line-block">
<div class="line">Specify value of property key defined in <code class="docutils literal"><span class="pre">[client</span> <span class="pre">projectName]-env.xml</span></code>.Describe URL of WSDL.</div>
</div>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p><strong>Specify other than URL of WSDL file to wsdlDocumentResource</strong></p>
<p class="last">In the example above, it is assumed that SOAP server publishes WSDL file. A static file can be specified as well by using <code class="docutils literal"><span class="pre">classpath:</span></code> or <code class="docutils literal"><span class="pre">file:</span></code> prefix. Refer <a class="reference external" href="http://docs.spring.io/spring/docs/4.2.4.RELEASE/spring-framework-reference/html/resources.html#resources-resourceloader">Spring Framework Reference Documentation -Resources(The ResourceLoader)-</a> for strings that can be specified.</p>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>Overwriting end point address</strong></p>
<p>Access URL configuration is not required in the client since access URL at the time of executing Web service (end point address) is described in WSDL file.
However, when a URL not described in WSDL file is to be accessed, end point address can be overwritten by configuring <code class="docutils literal"><span class="pre">endpointAddress</span></code> property of <code class="docutils literal"><span class="pre">org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean</span></code>.
It should preferably be used while changing the environment in tests etc.
Configuration example is as below.</p>
<p><em>[client projectName]-env/src/main/resources/META-INF/spring/[client projectName]-env.xml</em></p>
<blockquote>
<div><div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;todoWebService&quot;</span>
    <span class="na">class=</span><span class="s">&quot;org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;serviceInterface&quot;</span> <span class="na">value=</span><span class="s">&quot;com.example.ws.todo.TodoWebService&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;serviceName&quot;</span> <span class="na">value=</span><span class="s">&quot;TodoWebService&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;portName&quot;</span> <span class="na">value=</span><span class="s">&quot;TodoWebPort&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;namespaceUri&quot;</span> <span class="na">value=</span><span class="s">&quot;http://example.com/todo&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;wsdlDocumentResource&quot;</span> <span class="na">value=</span><span class="s">&quot;${webservice.todoWebService.wsdlDocumentResource}&quot;</span> <span class="nt">/&gt;</span>
<span class="hll">    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;endpointAddress&quot;</span> <span class="na">value=</span><span class="s">&quot;${webservice.todoWebService.endpointAddress}&quot;</span> <span class="nt">/&gt;</span><span class="c">&lt;!-- (1) --&gt;</span>
</span><span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
</div></blockquote>
<p><em>[client projectName]-env/src/main/resources/META-INF/spring/[client projectName]-infra.properties</em></p>
<blockquote class="last">
<div><div class="highlight-properties"><div class="highlight"><pre><span></span><span class="c"># (2)</span>
<span class="na">webservice.todoWebService.endpointAddress</span><span class="o">=</span><span class="s">http://AAA.BBB.CCC.DDD:XXXX/[server projectName]-web/ws/TodoWebService</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify end point address.</div>
<div class="line">A property key is specified for describing URL in property file described later.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify value of property key defined in <code class="docutils literal"><span class="pre">[client</span> <span class="pre">projectName]-env.xml</span></code>. Describe end point address.</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Call Web service from Service</strong></p>
<p>Inject Web service created above by Service and run Web service.</p>
<p><em>[client projectName]-domain/src/main/java/com/example/domain/service/todo/TodoServiceImpl.java</em></p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.example.soap.domain.service.todo</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">javax.inject.Inject</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Service</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.example.domain.model.Todo</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.example.ws.webfault.WebFaultException</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.example.ws.todo.TodoWebService</span><span class="p">;</span>

<span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TodoServiceImpl</span> <span class="kd">implements</span> <span class="n">TodoService</span> <span class="p">{</span>

    <span class="nd">@Inject</span>
    <span class="n">TodoWebService</span> <span class="n">todoWebService</span><span class="p">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">createTodo</span><span class="p">(</span><span class="n">Todo</span> <span class="n">todo</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// (1)</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="n">todoWebService</span><span class="p">.</span><span class="na">createTodo</span><span class="p">(</span><span class="n">todo</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">WebFaultException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// (2)</span>
            <span class="c1">// handle exception…</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Inject <code class="docutils literal"><span class="pre">TodoWebService</span></code> and call Service to be run.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">When an exception occurs at the server side, it is wrapped in <code class="docutils literal"><span class="pre">WebFaultException</span></code> and sent.</div>
<div class="line">Carry out process depending on the details.</div>
<div class="line">For details of exception process, refer “<a class="reference internal" href="#soaphowtouseexceptionhandler"><span class="std std-ref">Implementing exception handling</span></a>”.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>Defining proxy class</strong></p>
<p class="last">It is recommended to define proxy class in env project.
This is to enable changing implementation class of Web service by changing maven profile.
When sending destination of SOAP server for testing is to be changed or when the SOAP server is not ready,
the testing can be carried out without changing another source by creating a stub class.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>Fetch response information</strong></p>
<p>When the response information is to be fetched by the client for example retry, it can be fetched by casting in <code class="docutils literal"><span class="pre">javax.xml.ws.BindingProvider</span></code>class as given below.</p>
<blockquote>
<div><div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">BindingProvider</span> <span class="n">provider</span> <span class="o">=</span> <span class="p">(</span><span class="n">BindingProvider</span><span class="p">)</span> <span class="n">todoWebService</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">status</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="n">provider</span><span class="p">.</span><span class="na">getResponseContext</span><span class="p">().</span><span class="na">get</span><span class="p">(</span><span class="n">MessageContext</span><span class="p">.</span><span class="na">HTTP_RESPONSE_CODE</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>For details of <code class="docutils literal"><span class="pre">BindingProvider</span></code>, refer <a class="reference external" href="http://www.google.co.jp/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=0ahUKEwj1z_exk7TOAhUDnpQKHbk6AgwQFggfMAA&amp;url=http%3A%2F%2Fdownload.oracle.com%2Fotn-pub%2Fjcp%2Fjaxws-2.2-mrel3-evalu-oth-JSpec%2Fjaxws-2_2-mrel3-spec.pdf&amp;v6u=https%3A%2F%2Fs-v6exp1-ds.metric.gstatic.com%2Fgen_204%3Fip%3D163.135.151.80%26ts%3D1470739411479764%26auth%3Dk5tkj3erhgejiufbavruvdinx2iknps5%26rndm%3D0.9131593964234974&amp;v6s=2&amp;v6t=48530&amp;usg=AFQjCNEfBm6Ji-bQy9GDL8l5crz9PZ188w&amp;bvm=bv.129389765,d.dGo">The Java API for XML-Based Web Services(JAX-WS) 2.2 -4.2 javax.xml.ws.BindingProvider-</a>.</p>
<p>However, when Apatch CXF library is included in the dependency relation of the client, it is not possible to fetch response information by the method given above at the time of communication error.
This is because Apatch CXF proxy is automatically used when Apatch CXF library is included in the dependency relation and Apache CXF proxy does not retain response information in response context at the time of communication error.
For error handling of Apache CXF, refer <a class="reference external" href="http://cxf.apache.org/docs/cxf-architecture.html#CXFArchitecture-FaultHandling">Apache CXF Software Architecture Guide -Fault Handling-</a>.</p>
<p class="last">According to Web service and relay service which includes client of another Web service, if dependency relation of Apache CXF library is necessarily included in the client, it must be considered as a restricted item and adequate care must be taken.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id2">
<h4><a class="toc-backref" href="#id22">5.18.2.2.3. Security measures</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p><strong>Authentication process</strong></p>
<p>When the communication is to be established with SOAP server which uses Basic authentication while using <code class="docutils literal"><span class="pre">org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean</span></code>, authentication can be done only if user name and password are added to bean definition.</p>
<p><em>[client projectName]-env/src/main/resources/META-INF/spring/[client projectName]-env.xml</em></p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;todoWebService&quot;</span>
    <span class="na">class=</span><span class="s">&quot;org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;serviceInterface&quot;</span> <span class="na">value=</span><span class="s">&quot;com.example.ws.todo.TodoWebService&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;serviceName&quot;</span> <span class="na">value=</span><span class="s">&quot;TodoWebService&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;portName&quot;</span> <span class="na">value=</span><span class="s">&quot;TodoWebPort&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;namespaceUri&quot;</span> <span class="na">value=</span><span class="s">&quot;http://example.com/todo&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;wsdlDocumentResource&quot;</span> <span class="na">value=</span><span class="s">&quot;${webservice.todoWebService.wsdlDocumentResource}&quot;</span> <span class="nt">/&gt;</span>
<span class="hll">    <span class="c">&lt;!-- (1) --&gt;</span>
</span><span class="hll">    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;username&quot;</span> <span class="na">value=</span><span class="s">&quot;${webservice.todoWebService.username}&quot;</span> <span class="nt">/&gt;</span>
</span><span class="hll">    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;password&quot;</span> <span class="na">value=</span><span class="s">&quot;${webservice.todoWebService.password}&quot;</span> <span class="nt">/&gt;</span>
</span><span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<p><em>[client projectName]-env/src/main/resources/META-INF/spring/[client projectName]-infra.properties</em></p>
<div class="highlight-properties"><div class="highlight"><pre><span></span><span class="c"># (2)</span>
<span class="na">webservice.todoWebService.username</span><span class="o">=</span><span class="s">testuser</span>
<span class="na">webservice.todoWebService.password</span><span class="o">=</span><span class="s">password</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Authentication information for Basic authentication can be sent by adding user name and password in bean definition of <code class="docutils literal"><span class="pre">org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean</span></code>.</div>
<div class="line">It is a sample wherein user name and password are transferred to the property file.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify value of property key defined in <code class="docutils literal"><span class="pre">[client</span> <span class="pre">projectName]-env.xml</span></code>. Describe user name and password used for authentication.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="implementing-exception-handling">
<span id="soaphowtouseexceptionhandler"></span><h4><a class="toc-backref" href="#id23">5.18.2.2.4. Implementing exception handling</a><a class="headerlink" href="#implementing-exception-handling" title="Permalink to this headline">¶</a></h4>
<div class="line-block">
<div class="line">In SOAP server, it is recommended to wrap exception in <code class="docutils literal"><span class="pre">WebFaultException</span></code>and throw the same.</div>
<div class="line">Client catches <code class="docutils literal"><span class="pre">WebFaultException</span></code>, determines the cause for exception and carry out respective processing.</div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">createTodo</span><span class="p">(</span><span class="n">Todo</span> <span class="n">todo</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">try</span> <span class="p">{</span>
        <span class="c1">// (1)</span>
        <span class="n">todoWebService</span><span class="p">.</span><span class="na">createTodo</span><span class="p">(</span><span class="n">todo</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">WebFaultException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
<span class="hll">        <span class="c1">// (2)</span>
</span><span class="hll">        <span class="k">switch</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="na">getFaultInfo</span><span class="p">().</span><span class="na">getType</span><span class="p">())</span> <span class="p">{</span>
</span><span class="hll">        <span class="k">case</span> <span class="n">ValidationFault</span><span class="p">:</span>
</span><span class="hll">            <span class="c1">// handle exception…</span>
</span><span class="hll">            <span class="k">break</span><span class="p">;</span>
</span><span class="hll">        <span class="k">case</span> <span class="n">BusinessFault</span><span class="p">:</span>
</span><span class="hll">            <span class="c1">// handle exception…</span>
</span><span class="hll">            <span class="k">break</span><span class="p">;</span>
</span><span class="hll">        <span class="k">default</span><span class="p">:</span>
</span><span class="hll">            <span class="c1">// handle exception…</span>
</span><span class="hll">            <span class="k">break</span><span class="p">;</span>
</span><span class="hll">        <span class="p">}</span>
</span>    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr.No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Call Web service. <code class="docutils literal"><span class="pre">WebFaultException</span></code> must be caught since throws clause is applied.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Determine exception by <code class="docutils literal"><span class="pre">faultInfo</span></code>type and describe respective process (sending a message to the screen, throwing an exception etc)</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="timeout-configuration">
<h4><a class="toc-backref" href="#id24">5.18.2.2.5. Timeout configuration</a><a class="headerlink" href="#timeout-configuration" title="Permalink to this headline">¶</a></h4>
<p>Timeout that can be specified by client is broadly classified into following two types.</p>
<ul class="simple">
<li>Connection timeout for each SOAP server</li>
<li>Request timeout for each SOAP server</li>
</ul>
<div class="line-block">
<div class="line">Both the configurations must be specified in the custom property of <code class="docutils literal"><span class="pre">org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean</span></code>.</div>
<div class="line">How to configure is as given below.</div>
</div>
<p><em>[client projectName]-env/src/main/resources/META-INF/spring/[client projectName]-env.xml</em></p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;todoWebService&quot;</span>
    <span class="na">class=</span><span class="s">&quot;org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;serviceInterface&quot;</span> <span class="na">value=</span><span class="s">&quot;com.example.ws.todo.TodoWebService&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;serviceName&quot;</span> <span class="na">value=</span><span class="s">&quot;TodoWebService&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;portName&quot;</span> <span class="na">value=</span><span class="s">&quot;TodoWebPort&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;namespaceUri&quot;</span> <span class="na">value=</span><span class="s">&quot;http://example.com/todo&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;wsdlDocumentResource&quot;</span> <span class="na">value=</span><span class="s">&quot;${webservice.todoWebService.wsdlDocumentResource}&quot;</span> <span class="nt">/&gt;</span>
    <span class="c">&lt;!-- (1) --&gt;</span>
<span class="hll">    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;customProperties&quot;</span><span class="nt">&gt;</span>
</span><span class="hll">        <span class="nt">&lt;map&gt;</span>
</span><span class="hll">            <span class="c">&lt;!-- (2) --&gt;</span>
</span><span class="hll">            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;com.sun.xml.internal.ws.connect.timeout&quot;</span> <span class="na">value-type=</span><span class="s">&quot;java.lang.Integer&quot;</span> <span class="na">value=</span><span class="s">&quot;${webservice.connect.timeout}&quot;</span><span class="nt">/&gt;</span>
</span><span class="hll">            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;com.sun.xml.internal.ws.request.timeout&quot;</span> <span class="na">value-type=</span><span class="s">&quot;java.lang.Integer&quot;</span> <span class="na">value=</span><span class="s">&quot;${webservice.request.timeout}&quot;</span><span class="nt">/&gt;</span>
</span><span class="hll">        <span class="nt">&lt;/map&gt;</span>
</span><span class="hll">    <span class="nt">&lt;/property&gt;</span>
</span><span class="hll"><span class="nt">&lt;/bean&gt;</span>
</span></pre></div>
</div>
<p><em>[client projectName]-env/src/main/resources/META-INF/spring/[client projectName]-infra.properties</em></p>
<div class="highlight-properties"><div class="highlight"><pre><span></span><span class="c"># (3)</span>
<span class="na">webservice.request.timeout</span><span class="o">=</span><span class="s">3000</span>
<span class="na">webservice.connect.timeout</span><span class="o">=</span><span class="s">3000</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define a custom property by specifying Map in <code class="docutils literal"><span class="pre">customProperties</span></code> property.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first line-block">
<div class="line">Define connection timeout and request timeout.</div>
<div class="line">It is a sample wherein the respective values are transferred to a property file.</div>
</div>
<div class="last admonition warning">
<p class="first admonition-title">Warning</p>
<p><strong>Key used for defining timeout</strong></p>
<p class="last">It is necessary to specify a different value based on JAX-WS implementation as a key to define respective timeout.
For details, refer <a class="reference external" href="https://java.net/jira/browse/JAX_WS-1166">JAX_WS-1166 Standardize timeout settings</a>.</p>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify value of property key defined in <code class="docutils literal"><span class="pre">[client</span> <span class="pre">projectName]-env.xml</span></code>. Connection timeout and request timeout are described.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
</div>
<div class="section" id="appendix">
<h2><a class="toc-backref" href="#id25">5.18.3. Appendix</a><a class="headerlink" href="#appendix" title="Permalink to this headline">¶</a></h2>
<div class="section" id="project-configuration-is-changed-for-soap-server">
<span id="soapappendixaddproject"></span><h3><a class="toc-backref" href="#id26">5.18.3.1. Project configuration is changed for SOAP server.</a><a class="headerlink" href="#project-configuration-is-changed-for-soap-server" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">It is recommended to add model project and webservice project to the blank project while creating SOAP server.</div>
<div class="line">The method is described below.</div>
</div>
<div class="line-block">
<div class="line">Blank project default configuration is as below.</div>
<div class="line">Note that, artifactId specified while creating a blank project is configured in artifactId.</div>
</div>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">artifactId</span>
<span class="go">├── pom.xml</span>
<span class="go">├── artifactId-domain</span>
<span class="go">├── artifactId-env</span>
<span class="go">├── artifactId-initdb</span>
<span class="go">├── artifactId-selenium</span>
<span class="go">└── artifactId-web</span>
</pre></div>
</div>
<p>Project configuration is as below.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">artifactId</span>
<span class="go">├── pom.xml</span>
<span class="go">├── artifactId-domain</span>
<span class="go">├── artifactId-env</span>
<span class="go">├── artifactId-initdb</span>
<span class="go">├── artifactId-selenium</span>
<span class="go">├── artifactId-web</span>
<span class="go">├── artifactId-model</span>
<span class="go">└── artifactId-webservice</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="changing-existing-project">
<h4><a class="toc-backref" href="#id27">5.18.3.1.1. Changing existing project</a><a class="headerlink" href="#changing-existing-project" title="Permalink to this headline">¶</a></h4>
<div class="line-block">
<div class="line">A simple implementation of Web application like Controller etc is included in the default state of the blank project.</div>
<div class="line">SOAP web service can be used as it is, however, it is recommended to delete the same since it is not required.</div>
<div class="line">For deletion target, refer “<a class="reference internal" href="../ImplementationAtEachLayer/CreateWebApplicationProject.html#createwebapplicationprojectconfigurationmulti"><span class="std std-ref">Multi-project structure</span></a> of <a class="reference internal" href="../ImplementationAtEachLayer/CreateWebApplicationProject.html"><span class="doc">Create Web application development project</span></a> “.</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="creating-model-project">
<h4><a class="toc-backref" href="#id28">5.18.3.1.2. Creating model project</a><a class="headerlink" href="#creating-model-project" title="Permalink to this headline">¶</a></h4>
<p>model project configuration is explained.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">artifactId-model</span>
<span class="go">    ├── pom.xml  ... (1)</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><div class="first last line-block">
<div class="line">Sr. No.</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">Description</div>
</div>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><p class="first">A POM (Project Object Model) file which defines model module configuration.
Following are defined in this file.</p>
<ul class="last simple">
<li>Definition of plug-ins for dependent libraries and build</li>
<li>Definition for creating jar file</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">pom.xml</span></code> is as shown in the image below. It must be edited when required.</div>
<div class="line">Actually, the values specified while creating a blank project must be configured for “artifactId” and “groupId”.</div>
</div>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>artifactId-model<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;packaging&gt;</span>jar<span class="nt">&lt;/packaging&gt;</span>
    <span class="nt">&lt;parent&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>groupId<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>artifactId<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>1.0.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;relativePath&gt;</span>../pom.xml<span class="nt">&lt;/relativePath&gt;</span>
    <span class="nt">&lt;/parent&gt;</span>
    <span class="nt">&lt;dependencies&gt;</span>
        <span class="c">&lt;!-- == Begin TERASOLUNA == --&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.terasoluna.gfw<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>terasoluna-gfw-common<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.terasoluna.gfw<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>terasoluna-gfw-jodatime<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.terasoluna.gfw<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>terasoluna-gfw-security-core<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>

        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.terasoluna.gfw<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>terasoluna-gfw-recommended-dependencies<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;type&gt;</span>pom<span class="nt">&lt;/type&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
        <span class="c">&lt;!-- == End TERASOLUNA == --&gt;</span>
    <span class="nt">&lt;/dependencies&gt;</span>
<span class="nt">&lt;/project&gt;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="creating-webservice-project">
<h4><a class="toc-backref" href="#id29">5.18.3.1.3. Creating webservice project</a><a class="headerlink" href="#creating-webservice-project" title="Permalink to this headline">¶</a></h4>
<p>webservice project configuration is explained.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">artifactId-webservice</span>
<span class="go">    ├── pom.xml  ... (1)</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><div class="first last line-block">
<div class="line">Sr. No.</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">Description</div>
</div>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><p class="first">A POM (Project Object Model) file which defines webservice module configuration.
Following are defined in this file.</p>
<ul class="last simple">
<li>Definition of plug-ins for dependent libraries and builds</li>
<li>Definition for creating a jar file</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">pom.xml</span></code> is as shown in the image below. It must be edited when required.</div>
<div class="line">Actually, the values specified while creating a blank project must be configured for “artifactId” and “groupId”.</div>
</div>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>artifactId-webservice<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;packaging&gt;</span>jar<span class="nt">&lt;/packaging&gt;</span>
    <span class="nt">&lt;parent&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>groupId<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>artifactId<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>1.0.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;relativePath&gt;</span>../pom.xml<span class="nt">&lt;/relativePath&gt;</span>
    <span class="nt">&lt;/parent&gt;</span>
    <span class="nt">&lt;dependencies&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>${project.groupId}<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>artifactId-model<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
        <span class="c">&lt;!-- == Begin TERASOLUNA == --&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.terasoluna.gfw<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>terasoluna-gfw-common<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.terasoluna.gfw<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>terasoluna-gfw-jodatime<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.terasoluna.gfw<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>terasoluna-gfw-security-core<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>

        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.terasoluna.gfw<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>terasoluna-gfw-recommended-dependencies<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;type&gt;</span>pom<span class="nt">&lt;/type&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
        <span class="c">&lt;!-- == End TERASOLUNA == --&gt;</span>
    <span class="nt">&lt;/dependencies&gt;</span>
<span class="nt">&lt;/project&gt;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="package-configuration-of-soap-server">
<span id="soapappendixpackageserver"></span><h3><a class="toc-backref" href="#id30">5.18.3.2. Package configuration of SOAP server</a><a class="headerlink" href="#package-configuration-of-soap-server" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">Recommended configuration while creating SOAP server is explained.</div>
<div class="line">Following configuration is obtained if the project is added in conformance with the guidelines.</div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Project name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">[server projectName]-domain</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Project which stores class and configuration file related to domain layer of SOAP server</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">[server projectName]-web</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Project which stores class and configuration file related to application layer of SOAP server</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">[server projectName]-env</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Project which stores files dependent on the environment of SOAP server</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">[server projectName]-model</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Project which stores the class to be shared with the client and used while executing Web service, from the classes related to domain layer of SOAP server</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">[server projectName]-webservice</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Project which stores interface of Web service offered by SOAP server</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="server-projectname-domain">
<h4><a class="toc-backref" href="#id31">5.18.3.2.1. [server projectName]-domain</a><a class="headerlink" href="#server-projectname-domain" title="Permalink to this headline">¶</a></h4>
<p>Following is added to <code class="docutils literal"><span class="pre">pom.xml</span></code> for adding dependency of [server projectName]-model.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>${project.groupId}<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>artifactId-model<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
</div>
<p>Refer “<a class="reference internal" href="../Overview/ApplicationLayering.html#application-layering-project-structure"><span class="std std-ref">Project structure</span></a> of <a class="reference internal" href="../Overview/ApplicationLayering.html"><span class="doc">Application Layering</span></a> ” since package configuration besides these is not different from the usual domain project.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="server-projectname-web">
<h4><a class="toc-backref" href="#id32">5.18.3.2.2. [server projectName]-web</a><a class="headerlink" href="#server-projectname-web" title="Permalink to this headline">¶</a></h4>
<p>Following is added to <code class="docutils literal"><span class="pre">pom.xml</span></code> for adding dependency of [server projectName]-webservice.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>${project.groupId}<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>artifactId-webservice<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>How to resolve a dependency</strong></p>
<p class="last">It is not necessary to define dependency of [server projectName]-model because a transitive dependency is added since dependency to [server projectName]-model is defined from [server projectName]-webservice.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Recommended configuration for [server projectName]-web project is shown below.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">[server projectName]-web</span>
<span class="go">  └src</span>
<span class="go">      └main</span>
<span class="go">          ├java</span>
<span class="go">          │  └com</span>
<span class="go">          │      └example</span>
<span class="go">          │          ├app...(1)</span>
<span class="go">          │          └ws...(2)</span>
<span class="go">          │            ├exception...(3)</span>
<span class="go">          │            │  └WsExceptionHandler.java</span>
<span class="go">          │            ├abc</span>
<span class="go">          │            │  └AbcWebServiceImpl.java</span>
<span class="go">          │            └def</span>
<span class="go">          │                └DefWebServiceImpl.java</span>
<span class="go">          ├resources</span>
<span class="go">          │  ├META-INF</span>
<span class="go">          │  │  └spring</span>
<span class="go">          │  │      ├applicationContext.xml...(4)</span>
<span class="go">          │  │      ├application.properties...(5)</span>
<span class="go">          │  │      ├spring-mvc.xml ...(6)</span>
<span class="go">          │  │      ├spring-security.xml...(7)</span>
<span class="go">          │  │      └[server projectName]-ws.xml...(8)</span>
<span class="go">          │  └i18n</span>
<span class="go">          │      └application-messages.properties...(9)</span>
<span class="go">          └webapp</span>
<span class="go">              ├resources...(10)</span>
<span class="go">              └WEB-INF</span>
<span class="go">                  ├views ...(11)</span>
<span class="go">                  └web.xml...(12)</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Package which stores configuration elements of application layer.</div>
<div class="line">It may be deleted if only Web service is required to be created.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Package which stores related class of Web service.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Package which stores exception handler etc of Web service.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Defines a bean related to overall application.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define a property to be used in the application.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(6)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define a Bean for configuring Spring MVC.</div>
<div class="line">It may be deleted if only Web service is required to be created.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(7)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define a Bean for configuring Spring Security.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(8)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define a Bean for Web service.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(9)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define a message (internationalization) for screen display.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(10)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Stores static resources (css, js, image etc).</div>
<div class="line">It may be deleted if only Web service is required to be created.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(11)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Stores View (jsp).</div>
<div class="line">It may be deleted if only Web service is required to be created.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(12)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define Servlet deployment.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>Files not required for SOAP server</strong></p>
<p class="last">When only Web service is to be created in SOAP server, Spring MVC configuration file existing in the blank project is not required, hence can be deleted.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="server-projectname-env">
<h4><a class="toc-backref" href="#id33">5.18.3.2.3. [server projectName]-env</a><a class="headerlink" href="#server-projectname-env" title="Permalink to this headline">¶</a></h4>
<p>Since [server projectName]-env does not differ from normal env project, refer “<a class="reference internal" href="../Overview/ApplicationLayering.html#application-layering-project-structure"><span class="std std-ref">Project structure</span></a> of <a class="reference internal" href="../Overview/ApplicationLayering.html"><span class="doc">Application Layering</span></a>”.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="server-projectname-model">
<h4><a class="toc-backref" href="#id34">5.18.3.2.4. [server projectName]-model</a><a class="headerlink" href="#server-projectname-model" title="Permalink to this headline">¶</a></h4>
<p>Recommended project configuration of [server projectName]-model is shown below.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">[server projectName]-model</span>
<span class="go">  └src</span>
<span class="go">      └main</span>
<span class="go">          └java</span>
<span class="go">              └com</span>
<span class="go">                  └example</span>
<span class="go">                      └domain ...(1)</span>
<span class="go">                          └model ...(2)</span>
<span class="go">                              ├Xxx.java</span>
<span class="go">                              ├Yyy.java</span>
<span class="go">                              └Zzz.java</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Package which stores configuration elements of domain layer.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Package which stores the class to be used while implementing Web service in the Domain Object.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="server-projectname-webservice">
<h4><a class="toc-backref" href="#id35">5.18.3.2.5. [server projectName]-webservice</a><a class="headerlink" href="#server-projectname-webservice" title="Permalink to this headline">¶</a></h4>
<p>Recommended project configuration of [server projectName]-webservice is shown below.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">[server projectName]-webservice</span>
<span class="go">  └src</span>
<span class="go">      └main</span>
<span class="go">          └java</span>
<span class="go">              └com</span>
<span class="go">                  └example</span>
<span class="go">                      └ws...(1)</span>
<span class="go">                        ├webfault...(2)</span>
<span class="go">                        ├abc</span>
<span class="go">                        │  └AbcWebService.java</span>
<span class="go">                        └def</span>
<span class="go">                            └DefWebService.java</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Package which stores Web service interface.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Package which stores webfault of Web service.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="package-configuration-of-client">
<span id="soapappendixpackageclient"></span><h3><a class="toc-backref" href="#id36">5.18.3.3. Package configuration of client</a><a class="headerlink" href="#package-configuration-of-client" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">Recommended configuration while creating a client is explained.</div>
<div class="line">Project when provided from SOAP Server in accordance with the guidelines is of following configuration.</div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Project name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">[client projectName]-domain</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Project which stores class and configuration file related to domain layer of client</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">[client projectName]-web</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Project which stores class and configuration file related to application layer of client</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">[client projectName]-env</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Project which stores files dependent on the client environment</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For [server projectName]-model and [server projectName]-webservice, refer ” <a class="reference internal" href="#soapappendixpackageserver"><span class="std std-ref">Package configuration of SOAP server</span></a>” described earlier.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="client-projectname-domain">
<h4><a class="toc-backref" href="#id37">5.18.3.3.1. [client projectName]-domain</a><a class="headerlink" href="#client-projectname-domain" title="Permalink to this headline">¶</a></h4>
<p>Following is added to <code class="docutils literal"><span class="pre">pom.xml</span></code> for adding dependency of [server projectName]-webservice offered from SOAP server.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>${project.groupId}<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>artifactId-webservice<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>how to resolve dependency</strong></p>
<p class="last">Similar to [server projectName]-web, it is not necessary to define dependency of [server projectName]-model in <code class="docutils literal"><span class="pre">pom.xml</span></code> because a transitive dependency is added since dependency relation to [server projectName]-model is defined from [server projectName]-webservice.</p>
</div>
<p>Since package configuration other than this is not different from the usual domain project, refer “<a class="reference internal" href="../Overview/ApplicationLayering.html#application-layering-project-structure"><span class="std std-ref">Project structure</span></a> of <a class="reference internal" href="../Overview/ApplicationLayering.html"><span class="doc">Application Layering</span></a> “.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="client-projectname-web">
<h4><a class="toc-backref" href="#id38">5.18.3.3.2. [client projectName]-web</a><a class="headerlink" href="#client-projectname-web" title="Permalink to this headline">¶</a></h4>
<p>Since [client projectName]-web is not different from the usual web project, refer “<a class="reference internal" href="../Overview/ApplicationLayering.html#application-layering-project-structure"><span class="std std-ref">Project structure</span></a> of <a class="reference internal" href="../Overview/ApplicationLayering.html"><span class="doc">Application Layering</span></a>”.</p>
</div>
<div class="section" id="client-projectname-env">
<h4><a class="toc-backref" href="#id39">5.18.3.3.3. [client projectName]-env</a><a class="headerlink" href="#client-projectname-env" title="Permalink to this headline">¶</a></h4>
<p>Recommended project configuration of [client projectName]-env project is shown below.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">[projectName]-env</span>
<span class="go">  ├configs ...(1)</span>
<span class="go">  │   └[envName] ...(2)</span>
<span class="go">  │       └resources ...(3)</span>
<span class="go">  └src</span>
<span class="go">      └main</span>
<span class="go">          └resources ...(4)</span>
<span class="go">             ├META-INF</span>
<span class="go">             │  └spring</span>
<span class="go">             │      ├[projectName]-env.xml ...(5)</span>
<span class="go">             │      └[projectName]-infra.properties ...(6)</span>
<span class="go">             ├dozer.properties</span>
<span class="go">             ├log4jdbc.properties</span>
<span class="go">             └logback.xml ...(7)</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Directory for managing environment dependent files of overall environment.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Directory for managing environment dependent files for each environment.</div>
<div class="line">Specify a name which identifies the environment, as a directory name.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Directory for managing configuration files for each environment.</div>
<div class="line">Subdirectory configuration and configuration files to be managed are same as (4).</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Directory for managing configuration files for local development environment.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define a Bean for local development environment.</div>
<div class="line">Specify a proxy class of Web service in this file.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(6)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define a property for local development environment.</div>
<div class="line">Specify the value that can be changed for each environment like URL of WSDL.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(7)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define log output for local development environment.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="wsimport">
<span id="soapappendixwsimport"></span><h3><a class="toc-backref" href="#id40">5.18.3.4. wsimport</a><a class="headerlink" href="#wsimport" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">wsimport is a command line tool that is included in Java SE.</div>
<div class="line">It outputs a Java class (source as well depending on the options) which can call Web service by reading WSDL file.</div>
</div>
<div class="section" id="using-wsimport">
<h4><a class="toc-backref" href="#id41">5.18.3.4.1. Using wsimport</a><a class="headerlink" href="#using-wsimport" title="Permalink to this headline">¶</a></h4>
<div class="line-block">
<div class="line">In this guideline, wsimport has been recommended to be used in the cases given in the image below..</div>
<div class="line">Web service can be implemented by using wsimport while creating a client even when Domain Object or Web service interface which are used in SOAP server cannot be used.</div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../_images/SOAPModelNoProvide.png"><img alt="Server and Client Projects for SOAP" src="../_images/SOAPModelNoProvide.png" style="width: 80%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="how-to-use-wsimport">
<h4><a class="toc-backref" href="#id42">5.18.3.4.2. How to use wsimport</a><a class="headerlink" href="#how-to-use-wsimport" title="Permalink to this headline">¶</a></h4>
<div class="line-block">
<div class="line">It is stored in the bin folder of JDK and can be used only by going through the path.</div>
<div class="line">When the command is executed on the command line as given below, the source file is created in the current directory.</div>
</div>
<div class="highlight-bat"><div class="highlight"><pre><span></span># (1)
wsimport -keep -p [Package name of the source to be output] -s [Location which stores source to be output] [URL of wsdl]
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first line-block">
<div class="line">Specify URL of WSDL as an argument of wsimport.</div>
<div class="line">Following are used as an option.</div>
</div>
<blockquote>
<div><ul class="simple">
<li>-keep Source is output as well.</li>
<li>-p Specify the package of the source to be output.</li>
<li>-s Specify the location which stores the source to be output.</li>
</ul>
</div></blockquote>
<div class="last line-block">
<div class="line">For other options, refer <a class="reference external" href="http://docs.oracle.com/javase/8/docs/technotes/tools/windows/wsimport.html">Java Platform, Standard Edition Tools Reference -Web Services(wsimport)-</a>.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">wsimport outputs only class file as the default behaviour. No action is required only for the moving operation, however when a debug operation is to be carried out, it is recommended to apply ‘keep’ option and store source as well.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>For example, the commands are as below.</p>
<div class="highlight-bat"><div class="highlight"><pre><span></span>wsimport -keep -p com.example.ws.todo -s c:/tmp http://AAA.BBB.CCC.DDD:XXXX/soap-web/ws/TodoWebService?wsdl
</pre></div>
</div>
<p>Although the source created is dependent on Web service to be published, Java class used in the guideline is output.</p>
<ul class="simple">
<li>Web service interface (<code class="docutils literal"><span class="pre">TodoWebService.java</span></code> in the source example）</li>
<li>Domain Object (<code class="docutils literal"><span class="pre">Todo.java</span></code> in the source example)</li>
</ul>
<div class="line-block">
<div class="line">When the class generated by wsimport is to be used in only one client project, it should be placed in the domain project.</div>
<div class="line">Although generated class belongs to infrastructure layer(<a class="reference internal" href="../Overview/ApplicationLayering.html#application-layering-integration-system-connector"><span class="std std-ref">Integration System Connector</span></a>), it can also be included in the normal domain project as shown in Note of <a class="reference internal" href="../Overview/ApplicationLayering.html#application-layering-project-structure"><span class="std std-ref">Project structure</span></a>.</div>
<div class="line">When the generated class is to be used for multiple clients, it is preferable to create model project and webservice project based on <a class="reference internal" href="#soapappendixaddproject"><span class="std std-ref">Project configuration is changed for SOAP server.</span></a>and use by referring the same from respective clients.</div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Java class to be output is also output in the cases other than above. A client can be created only by using source that has been output. However, as a policy in this guideline, since the client uses <code class="docutils literal"><span class="pre">org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean</span></code>, it is recommended to not to use another Java class.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="web-service-development-on-tomcat">
<span id="soapappendixtomcatwebservice"></span><h3><a class="toc-backref" href="#id43">5.18.3.5. Web service development on Tomcat</a><a class="headerlink" href="#web-service-development-on-tomcat" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">Although JAS-VX on Java EE server is described in the guideline, JAX-WS is not implemented in case of Tomcat.</div>
<div class="line">Therefore, when SOAP server is Tomcat, <a class="reference external" href="https://cxf.apache.org/">Apache CXF</a> is used as an implementation product of JAX-WS. It is necessary to use <code class="docutils literal"><span class="pre">CXFServlet</span></code> by changing the configuration.</div>
<div class="line">When Apache CXF is used, a couple of implementation methods of WebService class exist as given below.</div>
</div>
<ol class="arabic simple">
<li>A method wherein Web service implementation class is described in POJO</li>
<li>A method wherein Web service implementation class is created by inheriting <code class="docutils literal"><span class="pre">SpringBeanAutowiringSupport</span></code>. (method that has been described so far)</li>
</ol>
<div class="line-block">
<div class="line">In case of 1, since POJO is used as a Web service implementation class, unit testing can be easily carried out. However, this method may not work well for AP servers other than Tomcat. Therefore, implementation by using second method is described in the guideline instead of using first method. However, when only Tomcat is used, using the first method is recommended due to a number of advantages.</div>
<div class="line">In case of 2, implementation can be done similar to other AP servers. Operations are carried out on Java EE server, however, this method is used when Tomcat must be mandatorily used during development.</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="configuration-while-using-cxfservlet">
<h4><a class="toc-backref" href="#id44">5.18.3.5.1. Configuration while using CXFServlet</a><a class="headerlink" href="#configuration-while-using-cxfservlet" title="Permalink to this headline">¶</a></h4>
<p>Library configuration is described in <code class="docutils literal"><span class="pre">pom.xml</span></code> to use <code class="docutils literal"><span class="pre">CXFServlet</span></code>.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="c">&lt;!-- (1) --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.apache.cxf<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>cxf-rt-frontend-jaxws<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>3.1.4<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.apache.cxf<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>cxf-rt-transports-http<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>3.1.4<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Add dependency to Apache CXF library for using <code class="docutils literal"><span class="pre">CXFServlet</span></code>.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Next, <code class="docutils literal"><span class="pre">CXFServlet</span></code>which receives SOAP Web Service in <code class="docutils literal"><span class="pre">web.xml</span></code> is defined.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="c">&lt;!-- (1) --&gt;</span>
<span class="nt">&lt;servlet&gt;</span>
    <span class="nt">&lt;servlet-name&gt;</span>cxfServlet<span class="nt">&lt;/servlet-name&gt;</span>
    <span class="nt">&lt;servlet-class&gt;</span>org.apache.cxf.transport.servlet.CXFServlet<span class="nt">&lt;/servlet-class&gt;</span>
    <span class="nt">&lt;init-param&gt;</span>
        <span class="nt">&lt;param-name&gt;</span>config-location<span class="nt">&lt;/param-name&gt;</span>
        <span class="nt">&lt;param-value&gt;</span>classpath:/META-INF/spring/cxf-servlet.xml<span class="nt">&lt;/param-value&gt;</span>
    <span class="nt">&lt;/init-param&gt;</span>
    <span class="nt">&lt;load-on-startup&gt;</span>1<span class="nt">&lt;/load-on-startup&gt;</span>
<span class="nt">&lt;/servlet&gt;</span>
<span class="c">&lt;!-- (2) --&gt;</span>
<span class="nt">&lt;servlet-mapping&gt;</span>
    <span class="nt">&lt;servlet-name&gt;</span>cxfServlet<span class="nt">&lt;/servlet-name&gt;</span>
    <span class="nt">&lt;url-pattern&gt;</span>/ws/*<span class="nt">&lt;/url-pattern&gt;</span>
<span class="nt">&lt;/servlet-mapping&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define servlet for <code class="docutils literal"><span class="pre">org.apache.cxf.transport.servlet.CXFServlet</span></code>.</div>
<div class="line">Specify path of <code class="docutils literal"><span class="pre">cxf-servlet.xml</span></code>to be described later, in <code class="docutils literal"><span class="pre">config-location</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define mapping for the servlet that has been defined. In this case, Web service is created under Context name/ws.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="configuration-required-in-pojo-method">
<h4><a class="toc-backref" href="#id45">5.18.3.5.2. Configuration required in POJO method</a><a class="headerlink" href="#configuration-required-in-pojo-method" title="Permalink to this headline">¶</a></h4>
<p>Specify Web service implementation class as an endpoint.</p>
<p><em>[server projectName]-web/src/main/resources/META-INF/spring/cxf-servlet.xml</em></p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.springframework.org/schema/beans&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xmlns:context=</span><span class="s">&quot;http://www.springframework.org/schema/context&quot;</span>
    <span class="na">xmlns:jaxws=</span><span class="s">&quot;http://cxf.apache.org/jaxws&quot;</span> <span class="na">xmlns:soap=</span><span class="s">&quot;http://cxf.apache.org/bindings/soap&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.springframework.org/schema/beans</span>
<span class="s">         http://www.springframework.org/schema/beans/spring-beans.xsd</span>
<span class="s">         http://www.springframework.org/schema/context</span>
<span class="s">         http://www.springframework.org/schema/context/spring-context.xsd</span>
<span class="s">         http://cxf.apache.org/jaxws</span>
<span class="s">         http://cxf.apache.org/schemas/jaxws.xsd</span>
<span class="s">         http://cxf.apache.org/bindings/soap</span>
<span class="s">         http://cxf.apache.org/schemas/configuration/soap.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="c">&lt;!-- (1) --&gt;</span>
    <span class="nt">&lt;jaxws:endpoint</span> <span class="na">id=</span><span class="s">&quot;todoWebEndpoint&quot;</span> <span class="na">implementor=</span><span class="s">&quot;#todoWebServiceImpl&quot;</span>
        <span class="na">address=</span><span class="s">&quot;/TodoWebService&quot;</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;/beans&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define the endpoint to be published.</div>
<div class="line">Specify bean name (“bean name” format) of Web service class which is registered in DI container, in the <code class="docutils literal"><span class="pre">implementor</span></code> attribute.</div>
<div class="line">Specify address which publishes Web service, in <code class="docutils literal"><span class="pre">address</span></code> attribute.</div>
<div class="line">Address describes only the path of end point to be published.</div>
<div class="line">For attribute details, refer <a class="reference external" href="https://cwiki.apache.org/confluence/display/CXF20DOC/JAX-WS+Configuration">Apache CXF JAX-WS Configuration</a>.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Create <code class="docutils literal"><span class="pre">TodoWebServiceImpl</span></code> as POJO.</p>
<p><em>[server projectName]-web/src/main/java/com/example/ws/todo/TodoWebServiceImpl.java</em></p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.example.ws.todo</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">javax.inject.Inject</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.jws.HandlerChain</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.jws.WebService</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.xml.ws.BindingType</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.xml.ws.soap.SOAPBinding</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.web.context.support.SpringBeanAutowiringSupport</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Component</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.example.domain.model.Todo</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.example.domain.service.TodoService</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.example.ws.webfault.WebFaultException</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.example.ws.exception.WsExceptionHandler</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.example.ws.todo.TodoWebService</span><span class="p">;</span>

<span class="c1">// (1)</span>
<span class="nd">@Component</span>
<span class="nd">@WebService</span><span class="p">(</span>
      <span class="n">portName</span> <span class="o">=</span> <span class="s">&quot;TodoWebPort&quot;</span><span class="p">,</span>
      <span class="n">serviceName</span> <span class="o">=</span> <span class="s">&quot;TodoWebService&quot;</span><span class="p">,</span>
      <span class="n">targetNamespace</span> <span class="o">=</span> <span class="s">&quot;http://example.com/todo&quot;</span><span class="p">,</span>
      <span class="n">endpointInterface</span> <span class="o">=</span> <span class="s">&quot;com.example.ws.todo.TodoWebService&quot;</span><span class="p">)</span>
<span class="nd">@BindingType</span><span class="p">(</span><span class="n">SOAPBinding</span><span class="p">.</span><span class="na">SOAP12HTTP_BINDING</span><span class="p">)</span>
<span class="c1">// (2)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TodoWebServiceImpl</span> <span class="kd">implements</span> <span class="n">TodoWebService</span> <span class="p">{</span>

    <span class="c1">// omitted</span>

<span class="p">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Apply <code class="docutils literal"><span class="pre">&#64;Component</span></code>  and register to DI container.</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Create as POJO since registration to DI container is possible by component scan. Basically, inheriting <code class="docutils literal"><span class="pre">org.springframework.web.context.support.SpringBeanAutowiringSupport</span></code> is not necessary.</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="configuration-required-for-the-method-that-inherits-springbeanautowiringsupport">
<h4><a class="toc-backref" href="#id46">5.18.3.5.3. Configuration required for the method that inherits SpringBeanAutowiringSupport</a><a class="headerlink" href="#configuration-required-for-the-method-that-inherits-springbeanautowiringsupport" title="Permalink to this headline">¶</a></h4>
<p>Class name and address acting as SOAP end points are defined in the Bean definition file for CXFServlet.</p>
<p><em>[server projectName]-web/src/main/resources/META-INF/spring/cxf-servlet.xml</em></p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.springframework.org/schema/beans&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xmlns:context=</span><span class="s">&quot;http://www.springframework.org/schema/context&quot;</span>
    <span class="na">xmlns:jaxws=</span><span class="s">&quot;http://cxf.apache.org/jaxws&quot;</span> <span class="na">xmlns:soap=</span><span class="s">&quot;http://cxf.apache.org/bindings/soap&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.springframework.org/schema/beans</span>
<span class="s">         http://www.springframework.org/schema/beans/spring-beans.xsd</span>
<span class="s">         http://www.springframework.org/schema/context</span>
<span class="s">         http://www.springframework.org/schema/context/spring-context.xsd</span>
<span class="s">         http://cxf.apache.org/jaxws</span>
<span class="s">         http://cxf.apache.org/schemas/jaxws.xsd</span>
<span class="s">         http://cxf.apache.org/bindings/soap</span>
<span class="s">         http://cxf.apache.org/schemas/configuration/soap.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- (1) --&gt;</span>
    <span class="nt">&lt;jaxws:endpoint</span> <span class="na">id=</span><span class="s">&quot;todoWebEndpoint&quot;</span> <span class="na">implementor=</span><span class="s">&quot;com.example.ws.todo.TodoWebServiceImpl&quot;</span>
        <span class="na">address=</span><span class="s">&quot;/TodoWebService&quot;</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;/beans&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define endpoint to be published.</div>
<div class="line">Specify implementation class of Web service to be published in <code class="docutils literal"><span class="pre">implementor</span></code> attribute.</div>
<div class="line">Specify address which publishes Web service in <code class="docutils literal"><span class="pre">address</span></code> attribute.</div>
<div class="line">Address describes only the path of end point to be published.</div>
<div class="line">For attribute details, refer <a class="reference external" href="https://cwiki.apache.org/confluence/display/CXF20DOC/JAX-WS+Configuration">Apache CXF JAX-WS Configuration</a>.</div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="FileUpload.html" title="5.19. File Upload"
             >next</a> |</li>
        <li class="right" >
          <a href="RestClient.html" title="5.17. REST Client (HTTP Client)"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.1.1.RELEASE documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >5. Architecture in Detail - TERASOLUNA Server Framework for Java (5.x)</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013-2016, NTT DATA.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.6.3.Theme by <a href="http://github.com/vkvn">vkvn</a>
    </div>
    
    <script>
    
    $(function() {
    	var $sidebar	= $('.sphinxsidebar'),
    		$window		= $(window),
    		offset		= $sidebar.offset(),
    		topPadding	= 3,
    		$scroll		= $('#scroll');
    	
    	$window.scroll(function() {
    		if ($scroll.is(':checked')) {
				if ($window.scrollTop() > offset.top) {
					$sidebar.stop().animate({
						marginTop:$window.scrollTop() - offset.top + topPadding
					});
				} else {
					$sidebar.stop().animate({
						marginTop:0
					});
				}
			}
		});
    	
    	var $navList = $('ul:first', $sidebar);
    	$('li:first', $navList).addClass('open');
    	
    	$navList.treeview({
    		persist: "location",
    		collapsed: true,
    		unique: false
    	});
    	
	});
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-46550814-1', 'terasolunaorg.github.io');
    ga('send', 'pageview');
    </script>
  </body>
</html>