<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>7.6. String Processing &#8212; TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.3.1.RELEASE documentation</title>
    <link rel="stylesheet" href="../../_static/solar.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '5.3.1.RELEASE',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="7.7. Bean Mapping (Dozer)" href="Dozer.html" />
    <link rel="prev" title="7.5. System Date" href="SystemDate.html" /><script async src="https://www.googletagmanager.com/gtag/js?id=G-847V2Q99G8"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date()); gtag('config', 'G-847V2Q99G8');
</script>
<script src="../../_static/jquery.treeview.js" type="text/javascript"></script>
<!-- <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro|Open+Sans:300italic,400italic,700italic,400,300,700' rel='stylesheet' type='text/css'> -->
<link href="../../_static/solarized-dark.css" rel="stylesheet">
<link href="../../_static/jquery.treeview.css" rel="stylesheet">
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Dozer.html" title="7.7. Bean Mapping (Dozer)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="SystemDate.html" title="7.5. System Date"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.3.1.RELEASE documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">7. General-purpose functions that do not depend on the application</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><label><input id="scroll" type="checkbox" checked> scroll sidebar</label>

  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">7.6. String Processing</a><ul>
<li><a class="reference internal" href="#overview">7.6.1. Overview</a></li>
<li><a class="reference internal" href="#how-to-use">7.6.2. How to use</a><ul>
<li><a class="reference internal" href="#trim">7.6.2.1. Trim</a></li>
<li><a class="reference internal" href="#padding-suppress">7.6.2.2. Padding, Suppress</a></li>
<li><a class="reference internal" href="#processing-of-a-string-considered-as-a-surrogate-pair">7.6.2.3. Processing of a string considered as a surrogate pair</a><ul>
<li><a class="reference internal" href="#fetching-string-length">7.6.2.3.1. Fetching string length</a></li>
<li><a class="reference internal" href="#fetch-string-in-the-specified-range">7.6.2.3.2. Fetch string in the specified range</a></li>
<li><a class="reference internal" href="#string-split">7.6.2.3.3. String split</a></li>
</ul>
</li>
<li><a class="reference internal" href="#full-width-half-width-string-conversion">7.6.2.4. Full width, half width string conversion</a><ul>
<li><a class="reference internal" href="#how-to-apply-common-library">7.6.2.4.1. How to apply common library</a></li>
<li><a class="reference internal" href="#conversion-to-full-width-string">7.6.2.4.2. Conversion to full width string</a></li>
<li><a class="reference internal" href="#conversion-to-half-width-string">7.6.2.4.3. Conversion to half width string</a></li>
<li><a class="reference internal" href="#creating-fullhalfconverter-class-for-which-a-unique-full-width-and-half-width-character-pair-definition-is-registered">7.6.2.4.4. Creating FullHalfConverter class for which a unique full width and half width character pair definition is registered</a></li>
</ul>
</li>
<li><a class="reference internal" href="#code-point-set-check-character-type-check">7.6.2.5. Code point set check (character type check)</a><ul>
<li><a class="reference internal" href="#id1">7.6.2.5.1. How to apply common library</a></li>
<li><a class="reference internal" href="#creating-code-point-set">7.6.2.5.2. Creating code point set</a></li>
<li><a class="reference internal" href="#set-operation-of-the-code-point-sets">7.6.2.5.3. Set operation of the code point sets</a></li>
<li><a class="reference internal" href="#string-check-by-using-code-point-set">7.6.2.5.4. String check by using code point set</a></li>
<li><a class="reference internal" href="#string-check-linked-with-bean-validation">7.6.2.5.5. String check linked with Bean Validation</a></li>
<li><a class="reference internal" href="#creating-new-code-point-set-class">7.6.2.5.6. Creating new code point set class</a></li>
<li><a class="reference internal" href="#code-point-set-class-provided-by-common-library">7.6.2.5.7. Code point set class provided by common library</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


  <h4>Previous topic</h4>
  <p class="topless"><a href="SystemDate.html"
                        title="previous chapter">7.5. System Date</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="Dozer.html"
                        title="next chapter">7.7. Bean Mapping (Dozer)</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/ArchitectureInDetail/GeneralFuncDetail/StringProcessing.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="string-processing">
<h1>7.6. String Processing<a class="headerlink" href="#string-processing" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="index">
<p class="topic-title">Index</p>
<ul class="simple">
<li><a class="reference internal" href="#overview" id="id2">Overview</a></li>
<li><a class="reference internal" href="#how-to-use" id="id3">How to use</a><ul>
<li><a class="reference internal" href="#trim" id="id4">Trim</a></li>
<li><a class="reference internal" href="#padding-suppress" id="id5">Padding, Suppress</a></li>
<li><a class="reference internal" href="#processing-of-a-string-considered-as-a-surrogate-pair" id="id6">Processing of a string considered as a surrogate pair</a><ul>
<li><a class="reference internal" href="#fetching-string-length" id="id7">Fetching string length</a></li>
<li><a class="reference internal" href="#fetch-string-in-the-specified-range" id="id8">Fetch string in the specified range</a></li>
<li><a class="reference internal" href="#string-split" id="id9">String split</a></li>
</ul>
</li>
<li><a class="reference internal" href="#full-width-half-width-string-conversion" id="id10">Full width, half width string conversion</a><ul>
<li><a class="reference internal" href="#how-to-apply-common-library" id="id11">How to apply common library</a></li>
<li><a class="reference internal" href="#conversion-to-full-width-string" id="id12">Conversion to full width string</a></li>
<li><a class="reference internal" href="#conversion-to-half-width-string" id="id13">Conversion to half width string</a></li>
<li><a class="reference internal" href="#creating-fullhalfconverter-class-for-which-a-unique-full-width-and-half-width-character-pair-definition-is-registered" id="id14">Creating FullHalfConverter class for which a unique full width and half width character pair definition is registered</a></li>
</ul>
</li>
<li><a class="reference internal" href="#code-point-set-check-character-type-check" id="id15">Code point set check (character type check)</a><ul>
<li><a class="reference internal" href="#id1" id="id16">How to apply common library</a></li>
<li><a class="reference internal" href="#creating-code-point-set" id="id17">Creating code point set</a></li>
<li><a class="reference internal" href="#set-operation-of-the-code-point-sets" id="id18">Set operation of the code point sets</a></li>
<li><a class="reference internal" href="#string-check-by-using-code-point-set" id="id19">String check by using code point set</a></li>
<li><a class="reference internal" href="#string-check-linked-with-bean-validation" id="id20">String check linked with Bean Validation</a></li>
<li><a class="reference internal" href="#creating-new-code-point-set-class" id="id21">Creating new code point set class</a></li>
<li><a class="reference internal" href="#code-point-set-class-provided-by-common-library" id="id22">Code point set class provided by common library</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#id2">7.6.1. Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">There are very few operations in string standard API of Java which specialise in Japanese language.</div>
<div class="line">A process must be devised independently for conversion of full width katakana / half width katakana and</div>
<div class="line">determination of a string consisting of only half width katakana.</div>
</div>
<div class="line-block">
<div class="line">Also, note that although in Java, all the strings are represented in Unicode</div>
<div class="line">the special characters like 吉 are represented in unicode by char type 2 (32 bits) which is referred to as surrogate pair.</div>
<div class="line">Even while handling these characters, an implementation which takes into account various types of characters are necessary to prevent occurrence of unexpected behavior.</div>
</div>
<div class="line-block">
<div class="line">The guideline assumes a case wherein Japanese language is processed, and</div>
<div class="line">includes a typical string operation example and offering a Japanese language operation API by a common library.</div>
</div>
</div>
<div class="section" id="how-to-use">
<h2><a class="toc-backref" href="#id3">7.6.2. How to use</a><a class="headerlink" href="#how-to-use" title="Permalink to this headline">¶</a></h2>
<div class="section" id="trim">
<h3><a class="toc-backref" href="#id4">7.6.2.1. Trim</a><a class="headerlink" href="#trim" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">String#trim</span></code>  method can be used as well while carrying out half width blank trim operation, however, while carrying out complex trim operations like only leading and trailing trim operation, trim operation of any string etc. <code class="docutils literal"><span class="pre">org.springframework.util.StringUtils</span></code> provided by Spring should be preferably used.</div>
<div class="line"><br /></div>
<div class="line">Example is given below.</div>
<div class="line"><br /></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">String</span> <span class="n">str</span> <span class="o">=</span> <span class="s">&quot;  Hello World!!&quot;</span><span class="p">;</span>

<span class="n">StringUtils</span><span class="p">.</span><span class="na">trimWhitespace</span><span class="p">(</span><span class="n">str</span><span class="p">);</span> <span class="c1">// =&gt; &quot;Hello World!!&quot;</span>

<span class="n">StringUtils</span><span class="p">.</span><span class="na">trimLeadingCharacter</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="sc">&#39; &#39;</span><span class="p">);</span> <span class="c1">// =&gt; &quot;Hello World!!&quot;</span>

<span class="n">StringUtils</span><span class="p">.</span><span class="na">trimTrailingCharacter</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="sc">&#39;!&#39;</span><span class="p">);</span> <span class="c1">// =&gt; &quot;  Hello World&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There is no change in the behaviour even if surrogate pair string is specified in the first argument of <code class="docutils literal"><span class="pre">StringUtils#trimLeadingCharacter</span></code> and <code class="docutils literal"><span class="pre">StringUtils#trimTrailingCharacter</span></code>. Also note that, since the second argument is of char type, surrogate pair cannot be specified.</p>
</div>
</div>
<div class="section" id="padding-suppress">
<h3><a class="toc-backref" href="#id5">7.6.2.2. Padding, Suppress</a><a class="headerlink" href="#padding-suppress" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">While carrying out padding (string padding) and suppress (string takeout) operations, a method</div>
<div class="line">provided by <code class="docutils literal"><span class="pre">String</span></code> class can be used.</div>
<div class="line"><br /></div>
<div class="line">Example is given below.</div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="n">String</span> <span class="n">paddingStr</span> <span class="o">=</span> <span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;%03d&quot;</span><span class="p">,</span> <span class="n">num</span><span class="p">);</span> <span class="c1">// =&gt; &quot;001&quot;</span>
<span class="n">String</span> <span class="n">suppressStr</span> <span class="o">=</span> <span class="n">paddingStr</span><span class="p">.</span><span class="na">replaceFirst</span><span class="p">(</span><span class="s">&quot;^0+(?!$)&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">);</span> <span class="c1">// =&gt; &quot;1&quot;</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If a surrogate pair is included while carrying out padding of apparent length, appropriate results cannot be obtained since surrogate pair cannot be taken into account by <code class="docutils literal"><span class="pre">String#format</span></code>.
In order to achieve the padding by using surrogate pair, it is necessary to count number of characters considered as surrogate pair described later, calculate appropriate number of characters that should be padded and join the strings.</p>
</div>
</div>
<div class="section" id="processing-of-a-string-considered-as-a-surrogate-pair">
<h3><a class="toc-backref" href="#id6">7.6.2.3. Processing of a string considered as a surrogate pair</a><a class="headerlink" href="#processing-of-a-string-considered-as-a-surrogate-pair" title="Permalink to this headline">¶</a></h3>
<div class="section" id="fetching-string-length">
<span id="stringprocessinghowtogetsurrogatepairstringlength"></span><h4><a class="toc-backref" href="#id7">7.6.2.3.1. Fetching string length</a><a class="headerlink" href="#fetching-string-length" title="Permalink to this headline">¶</a></h4>
<div class="line-block">
<div class="line">When the length of the string considered as surrogate pair is to be fetched, it is not possible to</div>
<div class="line">simply use <code class="docutils literal"><span class="pre">String#length</span></code> method.</div>
<div class="line">Since surrogate pair is represented by 32 bits (char type 2), the count tends to exceed than the apparent number of characters.</div>
<div class="line"><br /></div>
<div class="line">In the example below, 5 is assigned to variable <code class="docutils literal"><span class="pre">len</span></code>.</div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">String</span> <span class="n">str</span> <span class="o">=</span> <span class="s">&quot;吉田太郎&quot;</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="na">length</span><span class="p">();</span> <span class="c1">// =&gt; 5</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line">Accordingly, a method <code class="docutils literal"><span class="pre">String#codePointCount</span></code> is defined wherein length of the string considered as a surrogate pair is fetched from Java SE 5.</div>
<div class="line">String length can be fetched by specifying start index and end index of the target string in the argument of <code class="docutils literal"><span class="pre">String#codePointCount</span></code>.</div>
<div class="line"><br /></div>
<div class="line">Example is given below.</div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">String</span> <span class="n">str</span> <span class="o">=</span> <span class="s">&quot;吉田太郎&quot;</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">lenOfChar</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="na">length</span><span class="p">();</span> <span class="c1">// =&gt; 5</span>
<span class="kt">int</span> <span class="n">lenOfCodePoint</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="na">codePointCount</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">lenOfChar</span><span class="p">);</span> <span class="c1">// =&gt; 4</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line">Further, Unicode consists of “concatenation”.</div>
<div class="line">Since there is no appearance difference between <code class="docutils literal"><span class="pre">\u304c</span></code> indicating [が] and <code class="docutils literal"><span class="pre">\u304b\u3099</span></code> indicating [か] plus [voiced sound mark], however [か] plus [voiced sound mark] are likely to be counted as two characters.</div>
<div class="line">When number of characters are to be counted including the combining characters as well as described above, counting is done after normalization of text using <code class="docutils literal"><span class="pre">java.text.Normalizer</span></code>.</div>
<div class="line"><br /></div>
<div class="line">A method which returns length of the string after considering combining characters and surrogate pair is given below.</div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kt">int</span> <span class="nf">getStrLength</span><span class="p">(</span><span class="n">String</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">String</span> <span class="n">normalizedStr</span>  <span class="o">=</span> <span class="n">Normalizer</span><span class="p">.</span><span class="na">normalize</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">Normalizer</span><span class="p">.</span><span class="na">Form</span><span class="p">.</span><span class="na">NFC</span><span class="p">);</span>
  <span class="kt">int</span> <span class="n">length</span> <span class="o">=</span> <span class="n">normalizedStr</span><span class="p">.</span><span class="na">codePointCount</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">normalizedStr</span><span class="p">.</span><span class="na">length</span><span class="p">());</span>

  <span class="k">return</span> <span class="n">length</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="fetch-string-in-the-specified-range">
<h4><a class="toc-backref" href="#id8">7.6.2.3.2. Fetch string in the specified range</a><a class="headerlink" href="#fetch-string-in-the-specified-range" title="Permalink to this headline">¶</a></h4>
<div class="line-block">
<div class="line">When a string of specified range is to be fetched, unintended results may be obtained if only <code class="docutils literal"><span class="pre">String#substring</span></code> is used.</div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">String</span> <span class="n">str</span> <span class="o">=</span> <span class="s">&quot;吉田太郎&quot;</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">startIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">endIndex</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

<span class="n">String</span> <span class="n">subStr</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="na">substring</span><span class="p">(</span><span class="n">startIndex</span><span class="p">,</span> <span class="n">endIndex</span><span class="p">);</span>

<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">subStr</span><span class="p">);</span> <span class="c1">// =&gt; &quot;吉田&quot;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">In the example above, when you try to fetch “吉田” by taking out 2 characters from 0th character (beginning), only “吉” could be fetched since the surrogate pair is represented by 32 bits (char type 2).</div>
<div class="line">In such a case, <code class="docutils literal"><span class="pre">String#substring</span></code> method must be used by searching start and end positions considering the surrogate pair, by using <code class="docutils literal"><span class="pre">String#offsetByCodePoints</span></code>.</div>
<div class="line"><br /></div>
<div class="line">An example wherein 2 characters are taken from the beginning (surname part) is shown below.</div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">String</span> <span class="n">str</span> <span class="o">=</span> <span class="s">&quot;吉田太郎&quot;</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">startIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">endIndex</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

<span class="kt">int</span> <span class="n">startIndexSurrogate</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="na">offsetByCodePoints</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">startIndex</span><span class="p">);</span> <span class="c1">// =&gt; 0</span>
<span class="kt">int</span> <span class="n">endIndexSurrogate</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="na">offsetByCodePoints</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">endIndex</span><span class="p">);</span> <span class="c1">// =&gt; 3</span>

<span class="n">String</span> <span class="n">subStrSurrogate</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="na">substring</span><span class="p">(</span><span class="n">startIndexSurrogate</span><span class="p">,</span> <span class="n">endIndexSurrogate</span><span class="p">);</span> <span class="c1">// =&gt; &quot;吉田&quot;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="string-split">
<h4><a class="toc-backref" href="#id9">7.6.2.3.3. String split</a><a class="headerlink" href="#string-split" title="Permalink to this headline">¶</a></h4>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">String#split</span></code> method handles the surrogate pair as a default.</div>
<div class="line">Example is given below.</div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">String</span> <span class="n">str</span> <span class="o">=</span> <span class="s">&quot;吉田太郎&quot;</span><span class="p">;</span>

<span class="n">str</span><span class="p">.</span><span class="na">split</span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">);</span> <span class="c1">// =&gt; {&quot;吉田&quot;, &quot;太郎&quot;}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<div class="last line-block">
<div class="line">Surrogate pair can also be specified in the argument of <code class="docutils literal"><span class="pre">String#split</span></code> as a delimiter.</div>
</div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<div class="line-block">
<div class="line">Please note that behaviour while passing a blank character in <code class="docutils literal"><span class="pre">String#split</span></code> changes in Java SE 7 environment, and Java SE 8. Refer <a class="reference external" href="http://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html#split-java.lang.CharSequence-int-">Pattern#split Javadoc</a></div>
</div>
<div class="last highlight-java"><div class="highlight"><pre><span></span><span class="n">String</span> <span class="n">str</span> <span class="o">=</span> <span class="s">&quot;ABC&quot;</span><span class="p">;</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">elems</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="na">split</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">);</span>

<span class="c1">// Java SE 7 =&gt; {, A, B, C}</span>
<span class="c1">// Java SE 8 =&gt; {A, B, C}</span>
</pre></div>
</div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="full-width-half-width-string-conversion">
<span id="stringprocessinghowtousefullhalfconverter"></span><h3><a class="toc-backref" href="#id10">7.6.2.4. Full width, half width string conversion</a><a class="headerlink" href="#full-width-half-width-string-conversion" title="Permalink to this headline">¶</a></h3>
<p>Full width and half width character conversion is carried out by using API of <code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.fullhalf.FullHalfConverter</span></code> class provided by common library.</p>
<p><code class="docutils literal"><span class="pre">FullHalfConverter</span></code> class adopts a style wherein pair definition of full width and half width characters for conversion (<code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.fullhalf.FullHalfPair</span></code>) is registered in advance.
<code class="docutils literal"><span class="pre">FullHalfConverter</span></code> object for which default pair definition is registered, is provided as a <code class="docutils literal"><span class="pre">INSTANCE</span></code> constant
of <code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.fullhalf.DefaultFullHalf</span></code> class in the common library.
For default pair definition, refer <a class="reference external" href="https://github.com/terasolunaorg/terasoluna-gfw/blob/5.3.1.RELEASE/terasoluna-gfw-common-libraries/terasoluna-gfw-string/src/main/java/org/terasoluna/gfw/common/fullhalf/DefaultFullHalf.java">DefaultFullHalf source</a> .</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When change requirements are not met in the default pair definition provided by common library, <code class="docutils literal"><span class="pre">FullHalfConverter</span></code> object registering a unique pair definition should be created.
For basic methods for creation, refer <a class="reference internal" href="#stringoperationshowtousecustomfullhalfconverter"><span class="std std-ref">Creating FullHalfConverter class for which a unique full width and half width character pair definition is registered</span></a> .</p>
</div>
<div class="section" id="how-to-apply-common-library">
<h4><a class="toc-backref" href="#id11">7.6.2.4.1. How to apply common library</a><a class="headerlink" href="#how-to-apply-common-library" title="Permalink to this headline">¶</a></h4>
<div class="line-block">
<div class="line">It is necessary to add following common library as dependency library in case of <a class="reference internal" href="#stringprocessinghowtousefullhalfconverter"><span class="std std-ref">Full width, half width string conversion</span></a> is used.</div>
</div>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;dependencies&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.terasoluna.gfw<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>terasoluna-gfw-string<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;/dependencies&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In the setting example above, the dependent library version is assumed to be managed by the parent project.
Therefore, the <code class="docutils literal"><span class="pre">&lt;version&gt;</span></code>element is not specified.</p>
</div>
</div>
<div class="section" id="conversion-to-full-width-string">
<h4><a class="toc-backref" href="#id12">7.6.2.4.2. Conversion to full width string</a><a class="headerlink" href="#conversion-to-full-width-string" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal"><span class="pre">toFullwidth</span></code> method of <code class="docutils literal"><span class="pre">FullHalfConverter</span></code> is used while converting a half width character to full width character.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">String</span> <span class="n">fullwidth</span> <span class="o">=</span> <span class="n">DefaultFullHalf</span><span class="p">.</span><span class="na">INSTANCE</span><span class="p">.</span><span class="na">toFullwidth</span><span class="p">(</span><span class="s">&quot;ｱﾞ!A8ｶﾞザ&quot;</span><span class="p">);</span>    <span class="c1">// (1)</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Pass the string which contains half width characters to argument of <code class="docutils literal"><span class="pre">toFullwidth</span></code> method and convert to full width string.</div>
<div class="line">In this example, it is converted to <code class="docutils literal"><span class="pre">&quot;ア゛！Ａ８ガザ&quot;</span></code>. Also, note that the characters for which a pair is not defined (<code class="docutils literal"><span class="pre">&quot;ザ&quot;</span></code> in this example) are returned without any change.</div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="conversion-to-half-width-string">
<h4><a class="toc-backref" href="#id13">7.6.2.4.3. Conversion to half width string</a><a class="headerlink" href="#conversion-to-half-width-string" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal"><span class="pre">toHalfwidth</span></code> method of <code class="docutils literal"><span class="pre">FullHalfConverter</span></code> is used while converting a full width character to half width character.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">String</span> <span class="n">halfwidth</span> <span class="o">=</span> <span class="n">DefaultFullHalf</span><span class="p">.</span><span class="na">INSTANCE</span><span class="p">.</span><span class="na">toHalfwidth</span><span class="p">(</span><span class="s">&quot;Ａ！アガｻ&quot;</span><span class="p">);</span>    <span class="c1">// (1)</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Pass the string which contains full width characters to argument of <code class="docutils literal"><span class="pre">toHalfwidth</span></code> method and convert to half width characters.</div>
<div class="line">In this example, it is converted to <code class="docutils literal"><span class="pre">&quot;A!ｱｶﾞｻ&quot;</span></code>. Also, note that the characters for which a pair is not defined (<code class="docutils literal"><span class="pre">&quot;ｻ&quot;</span></code> of this example) are returned without any change.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><code class="docutils literal"><span class="pre">FullHalfConverter</span></code> cannot convert combining characters that represent a single character using 2 or more characters (Example: “<code class="docutils literal"><span class="pre">&quot;シ&quot;</span></code>(<code class="docutils literal"><span class="pre">\u30b7</span></code>) + voiced sound mark(<code class="docutils literal"><span class="pre">\u3099</span></code>)”）to half width character (Example: <code class="docutils literal"><span class="pre">&quot;ｼﾞ&quot;</span></code>).
When combining characters are to be converted to half width characters, <code class="docutils literal"><span class="pre">FullHalfConverter</span></code> must be used after converting the same to integrated characters （Example:<code class="docutils literal"><span class="pre">&quot;ジ&quot;</span></code>(<code class="docutils literal"><span class="pre">\u30b8</span></code>)）by carrying out text normalization.</p>
<p><code class="docutils literal"><span class="pre">java.text.Normalizer</span></code> is used while carrying out text normalization.
Note that, when combining characters are to be converted to integrated characters, NFC or NFKC is used as a normalization format.</p>
<p>Implementation example wherein NFD (analyse by canonical equivalence) is used as a normalization format</p>
<blockquote>
<div><div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">String</span> <span class="n">str1</span> <span class="o">=</span> <span class="n">Normalizer</span><span class="p">.</span><span class="na">normalize</span><span class="p">(</span><span class="s">&quot;モジ&quot;</span><span class="p">,</span> <span class="n">Normalizer</span><span class="p">.</span><span class="na">Form</span><span class="p">.</span><span class="na">NFD</span><span class="p">);</span> <span class="c1">// str1 = &quot;モシ + Voiced sound mark(\u3099)&quot;</span>
<span class="n">String</span> <span class="n">str2</span> <span class="o">=</span> <span class="n">Normalizer</span><span class="p">.</span><span class="na">normalize</span><span class="p">(</span><span class="s">&quot;ﾓｼﾞ&quot;</span><span class="p">,</span> <span class="n">Normalizer</span><span class="p">.</span><span class="na">Form</span><span class="p">.</span><span class="na">NFD</span><span class="p">);</span>  <span class="c1">// str2 = &quot;ﾓｼﾞ&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p>Implementation example wherein NFC (analyse by canonical equivalence, and integrate again) is used as a normalization format</p>
<blockquote>
<div><div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">String</span> <span class="n">mojiStr</span> <span class="o">=</span> <span class="s">&quot;モシ\u3099&quot;</span><span class="p">;</span>                                   <span class="c1">// &quot;モシ + Voiced sound mark(\u3099)&quot;</span>
<span class="n">String</span> <span class="n">str1</span> <span class="o">=</span> <span class="n">Normalizer</span><span class="p">.</span><span class="na">normalize</span><span class="p">(</span><span class="n">mojiStr</span><span class="p">,</span> <span class="n">Normalizer</span><span class="p">.</span><span class="na">Form</span><span class="p">.</span><span class="na">NFC</span><span class="p">);</span> <span class="c1">// str1 = &quot;モジ（\u30b8）&quot;</span>
<span class="n">String</span> <span class="n">str2</span> <span class="o">=</span> <span class="n">Normalizer</span><span class="p">.</span><span class="na">normalize</span><span class="p">(</span><span class="s">&quot;ﾓｼﾞ&quot;</span><span class="p">,</span> <span class="n">Normalizer</span><span class="p">.</span><span class="na">Form</span><span class="p">.</span><span class="na">NFC</span><span class="p">);</span>   <span class="c1">// str2 = &quot;ﾓｼﾞ&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p>Implementation example wherein NFKD (analyse by compatibility equivalent) is used as a normalization format</p>
<blockquote>
<div><div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">String</span> <span class="n">str1</span> <span class="o">=</span> <span class="n">Normalizer</span><span class="p">.</span><span class="na">normalize</span><span class="p">(</span><span class="s">&quot;モジ&quot;</span><span class="p">,</span> <span class="n">Normalizer</span><span class="p">.</span><span class="na">Form</span><span class="p">.</span><span class="na">NFKD</span><span class="p">);</span> <span class="c1">// str1 = &quot;モシ + Voiced sound mark(\u3099)&quot;</span>
<span class="n">String</span> <span class="n">str2</span> <span class="o">=</span> <span class="n">Normalizer</span><span class="p">.</span><span class="na">normalize</span><span class="p">(</span><span class="s">&quot;ﾓｼﾞ&quot;</span><span class="p">,</span> <span class="n">Normalizer</span><span class="p">.</span><span class="na">Form</span><span class="p">.</span><span class="na">NFKD</span><span class="p">);</span>  <span class="c1">// str2 = &quot;モシ + Voiced sound mark(\u3099)&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p>Implementation example wherein NFKC (analyse by compatibility equivalent and integrate again) is used as a normalization format</p>
<blockquote>
<div><div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">String</span> <span class="n">mojiStr</span> <span class="o">=</span> <span class="s">&quot;モシ\u3099&quot;</span><span class="p">;</span>                                    <span class="c1">// &quot;モシ + Voiced sound mark(\u3099)&quot;</span>
<span class="n">String</span> <span class="n">str1</span> <span class="o">=</span> <span class="n">Normalizer</span><span class="p">.</span><span class="na">normalize</span><span class="p">(</span><span class="n">mojiStr</span><span class="p">,</span> <span class="n">Normalizer</span><span class="p">.</span><span class="na">Form</span><span class="p">.</span><span class="na">NFKC</span><span class="p">);</span> <span class="c1">// str1 = &quot;モジ（\u30b8）&quot;</span>
<span class="n">String</span> <span class="n">str2</span> <span class="o">=</span> <span class="n">Normalizer</span><span class="p">.</span><span class="na">normalize</span><span class="p">(</span><span class="s">&quot;ﾓｼﾞ&quot;</span><span class="p">,</span> <span class="n">Normalizer</span><span class="p">.</span><span class="na">Form</span><span class="p">.</span><span class="na">NFKC</span><span class="p">)</span> <span class="p">;</span>  <span class="c1">// str2 = &quot;モジ&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p class="last">For details, refer <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/text/Normalizer.html">Normalizer JavaDoc</a>.</p>
</div>
</div>
<div class="section" id="creating-fullhalfconverter-class-for-which-a-unique-full-width-and-half-width-character-pair-definition-is-registered">
<span id="stringoperationshowtousecustomfullhalfconverter"></span><h4><a class="toc-backref" href="#id14">7.6.2.4.4. Creating FullHalfConverter class for which a unique full width and half width character pair definition is registered</a><a class="headerlink" href="#creating-fullhalfconverter-class-for-which-a-unique-full-width-and-half-width-character-pair-definition-is-registered" title="Permalink to this headline">¶</a></h4>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">FullHalfConverter</span></code> for which a unique full width and half width character pair definition is registered can also be used without using <code class="docutils literal"><span class="pre">DefaultFullHalf</span></code>.</div>
<div class="line">How to use <code class="docutils literal"><span class="pre">FullHalfConverter</span></code> for which a unique full width character and half width character pair definition is registered, is shown below.</div>
</div>
<p><strong>Implementation example of a class that provides FullHalfConverter for which a unique pair definition is registered</strong></p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CustomFullHalf</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">FULL_HALF_CODE_DIFF</span> <span class="o">=</span> <span class="mh">0xFEE0</span><span class="p">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">FullHalfConverter</span> <span class="n">INSTANCE</span><span class="p">;</span>

    <span class="kd">static</span> <span class="p">{</span>
        <span class="c1">// (1)</span>
        <span class="n">FullHalfPairsBuilder</span> <span class="n">builder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FullHalfPairsBuilder</span><span class="p">();</span>

        <span class="c1">// (2)</span>
        <span class="n">builder</span><span class="p">.</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ー&quot;</span><span class="p">,</span> <span class="s">&quot;-&quot;</span><span class="p">);</span>

        <span class="c1">// (3)</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">char</span> <span class="n">c</span> <span class="o">=</span> <span class="sc">&#39;!&#39;</span><span class="p">;</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="sc">&#39;~&#39;</span><span class="p">;</span> <span class="n">c</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">String</span> <span class="n">fullwidth</span> <span class="o">=</span> <span class="n">String</span><span class="p">.</span><span class="na">valueOf</span><span class="p">((</span><span class="kt">char</span><span class="p">)</span> <span class="p">(</span><span class="n">c</span> <span class="o">+</span> <span class="n">FULL_HALF_CODE_DIFF</span><span class="p">));</span>
            <span class="n">builder</span><span class="p">.</span><span class="na">pair</span><span class="p">(</span><span class="n">fullwidth</span><span class="p">,</span> <span class="n">String</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">c</span><span class="p">));</span>
        <span class="p">}</span>

        <span class="c1">// (4)</span>
        <span class="n">builder</span><span class="p">.</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;。&quot;</span><span class="p">,</span> <span class="s">&quot;｡&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;「&quot;</span><span class="p">,</span> <span class="s">&quot;｢&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;」&quot;</span><span class="p">,</span> <span class="s">&quot;｣&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;、&quot;</span><span class="p">,</span> <span class="s">&quot;､&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;・&quot;</span><span class="p">,</span> <span class="s">&quot;･&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ァ&quot;</span><span class="p">,</span> <span class="s">&quot;ｧ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ィ&quot;</span><span class="p">,</span> <span class="s">&quot;ｨ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ゥ&quot;</span><span class="p">,</span> <span class="s">&quot;ｩ&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ェ&quot;</span><span class="p">,</span> <span class="s">&quot;ｪ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ォ&quot;</span><span class="p">,</span> <span class="s">&quot;ｫ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ャ&quot;</span><span class="p">,</span> <span class="s">&quot;ｬ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ュ&quot;</span><span class="p">,</span> <span class="s">&quot;ｭ&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ョ&quot;</span><span class="p">,</span> <span class="s">&quot;ｮ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ッ&quot;</span><span class="p">,</span> <span class="s">&quot;ｯ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ア&quot;</span><span class="p">,</span> <span class="s">&quot;ｱ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;イ&quot;</span><span class="p">,</span> <span class="s">&quot;ｲ&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ウ&quot;</span><span class="p">,</span> <span class="s">&quot;ｳ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;エ&quot;</span><span class="p">,</span> <span class="s">&quot;ｴ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;オ&quot;</span><span class="p">,</span> <span class="s">&quot;ｵ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;カ&quot;</span><span class="p">,</span> <span class="s">&quot;ｶ&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;キ&quot;</span><span class="p">,</span> <span class="s">&quot;ｷ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ク&quot;</span><span class="p">,</span> <span class="s">&quot;ｸ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ケ&quot;</span><span class="p">,</span> <span class="s">&quot;ｹ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;コ&quot;</span><span class="p">,</span> <span class="s">&quot;ｺ&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;サ&quot;</span><span class="p">,</span> <span class="s">&quot;ｻ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;シ&quot;</span><span class="p">,</span> <span class="s">&quot;ｼ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ス&quot;</span><span class="p">,</span> <span class="s">&quot;ｽ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;セ&quot;</span><span class="p">,</span> <span class="s">&quot;ｾ&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ソ&quot;</span><span class="p">,</span> <span class="s">&quot;ｿ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;タ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾀ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;チ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾁ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ツ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾂ&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;テ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾃ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ト&quot;</span><span class="p">,</span> <span class="s">&quot;ﾄ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ナ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾅ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ニ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾆ&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ヌ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾇ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ネ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾈ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ノ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾉ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ハ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾊ&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ヒ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾋ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;フ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾌ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ヘ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾍ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ホ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾎ&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;マ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾏ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ミ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾐ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ム&quot;</span><span class="p">,</span> <span class="s">&quot;ﾑ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;メ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾒ&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;モ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾓ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ヤ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾔ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ユ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾕ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ヨ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾖ&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ラ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾗ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;リ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾘ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ル&quot;</span><span class="p">,</span> <span class="s">&quot;ﾙ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;レ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾚ&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ロ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾛ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ワ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾜ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ヲ&quot;</span><span class="p">,</span> <span class="s">&quot;ｦ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ン&quot;</span><span class="p">,</span> <span class="s">&quot;ﾝ&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ガ&quot;</span><span class="p">,</span> <span class="s">&quot;ｶﾞ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ギ&quot;</span><span class="p">,</span> <span class="s">&quot;ｷﾞ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;グ&quot;</span><span class="p">,</span> <span class="s">&quot;ｸﾞ&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ゲ&quot;</span><span class="p">,</span> <span class="s">&quot;ｹﾞ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ゴ&quot;</span><span class="p">,</span> <span class="s">&quot;ｺﾞ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ザ&quot;</span><span class="p">,</span> <span class="s">&quot;ｻﾞ&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ジ&quot;</span><span class="p">,</span> <span class="s">&quot;ｼﾞ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ズ&quot;</span><span class="p">,</span> <span class="s">&quot;ｽﾞ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ゼ&quot;</span><span class="p">,</span> <span class="s">&quot;ｾﾞ&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ゾ&quot;</span><span class="p">,</span> <span class="s">&quot;ｿﾞ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ダ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾀﾞ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ヂ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾁﾞ&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ヅ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾂﾞ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;デ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾃﾞ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ド&quot;</span><span class="p">,</span> <span class="s">&quot;ﾄﾞ&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;バ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾊﾞ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ビ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾋﾞ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ブ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾌﾞ&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ベ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾍﾞ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ボ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾎﾞ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;パ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾊﾟ&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ピ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾋﾟ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;プ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾌﾟ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ペ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾍﾟ&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ポ&quot;</span><span class="p">,</span> <span class="s">&quot;ﾎﾟ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;ヴ&quot;</span><span class="p">,</span> <span class="s">&quot;ｳﾞ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;\u30f7&quot;</span><span class="p">,</span> <span class="s">&quot;ﾜﾞ&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;\u30fa&quot;</span><span class="p">,</span> <span class="s">&quot;ｦﾞ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;゛&quot;</span><span class="p">,</span> <span class="s">&quot;ﾞ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;゜&quot;</span><span class="p">,</span> <span class="s">&quot;ﾟ&quot;</span><span class="p">).</span><span class="na">pair</span><span class="p">(</span><span class="s">&quot;　&quot;</span><span class="p">,</span> <span class="s">&quot; &quot;</span><span class="p">);</span>

        <span class="c1">// (5)</span>
        <span class="n">INSTANCE</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FullHalfConverter</span><span class="p">(</span><span class="n">builder</span><span class="p">.</span><span class="na">build</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Use <code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.fullhalf.FullHalfPairsBuilder</span></code> and create <code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.fullhalf.FullHalfPairs</span></code> which represents a set of pair definition of full width and half width characters.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Half width character corresponding to <code class="docutils literal"><span class="pre">&quot;ー&quot;</span></code>of full width character set to <code class="docutils literal"><span class="pre">&quot;ｰ&quot;</span></code>(<code class="docutils literal"><span class="pre">\uFF70</span></code>) in <code class="docutils literal"><span class="pre">DefaultFullHalf</span></code> is changed to <code class="docutils literal"><span class="pre">&quot;-&quot;</span></code>(<code class="docutils literal"><span class="pre">\u002D</span></code>) in this example.</div>
<div class="line">Further, although <code class="docutils literal"><span class="pre">&quot;-&quot;</span></code>(<code class="docutils literal"><span class="pre">\u002D</span></code>) is also included in the process target given below (3), the pair definition defined earlier is given the precedence.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">In this example, a pair is defined for code values of full width of unicode from <code class="docutils literal"><span class="pre">&quot;！&quot;</span></code> to <code class="docutils literal"><span class="pre">&quot;～&quot;</span></code> and of half width of unicode from <code class="docutils literal"><span class="pre">&quot;!&quot;</span></code> to <code class="docutils literal"><span class="pre">&quot;~&quot;</span></code> using a loop process which use the characteristic “code value sequence is same”.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Since code value sequence for the characters other than given in (3) does not match for full width characters and half width characters, define a pair individually for respective characters.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Use <code class="docutils literal"><span class="pre">FullHalfPairs</span></code> created by <code class="docutils literal"><span class="pre">FullHalfPairsBuilder</span></code> and create <code class="docutils literal"><span class="pre">FullHalfConverter</span></code>.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For the values that can be specified in the argument of <code class="docutils literal"><span class="pre">FullHalfPairsBuilder#pair</span></code> method,
refer <a class="reference external" href="https://github.com/terasolunaorg/terasoluna-gfw/blob/5.3.1.RELEASE/terasoluna-gfw-common-libraries/terasoluna-gfw-string/src/main/java/org/terasoluna/gfw/common/fullhalf/FullHalfPair.java">FullHalfPair constructor JavaDoc</a></p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>How to use FullHalfConverter for which a unique pair definition is registered</strong></p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">String</span> <span class="n">halfwidth</span> <span class="o">=</span> <span class="n">CustomFullHalf</span><span class="p">.</span><span class="na">INSTANCE</span><span class="p">.</span><span class="na">toHalfwidth</span><span class="p">(</span><span class="s">&quot;ハローワールド！&quot;</span><span class="p">);</span> <span class="c1">// (1)</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Use <code class="docutils literal"><span class="pre">toHalfwidth</span></code> method of <code class="docutils literal"><span class="pre">FullHalfConverter</span></code> object for which a unique pair definition is registered and convert the string containing full width characters to half width string.</div>
<div class="line">In this example, it is converted to <code class="docutils literal"><span class="pre">&quot;ﾊﾛ-ﾜ-ﾙﾄﾞ!&quot;</span></code>. (<code class="docutils literal"><span class="pre">&quot;-&quot;</span></code> is <code class="docutils literal"><span class="pre">\u002D</span></code>）</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="code-point-set-check-character-type-check">
<span id="stringprocessinghowtousecodepoints"></span><h3><a class="toc-backref" href="#id15">7.6.2.5. Code point set check (character type check)</a><a class="headerlink" href="#code-point-set-check-character-type-check" title="Permalink to this headline">¶</a></h3>
<p>A code point set function provided by common library should be used for checking character type.</p>
<p>Here, how to implement a character type check by using a code point set function is explained.</p>
<ul class="simple">
<li><a class="reference internal" href="#stringprocessinghowtousecodepointsconstruction"><span class="std std-ref">Creating code point set</span></a></li>
<li><a class="reference internal" href="#stringprocessinghowtousecodepointsoperations"><span class="std std-ref">Set operation of the code point sets</span></a></li>
<li><a class="reference internal" href="#stringprocessinghowtousecodepointscheck"><span class="std std-ref">String check by using code point set</span></a></li>
<li><a class="reference internal" href="#stringprocessinghowtousecodepointsvalidator"><span class="std std-ref">String check linked with Bean Validation</span></a></li>
<li><a class="reference internal" href="#stringprocessinghowtousecodepointsclasscreation"><span class="std std-ref">Creating new code point set class</span></a></li>
</ul>
<div class="section" id="id1">
<h4><a class="toc-backref" href="#id16">7.6.2.5.1. How to apply common library</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<div class="line-block">
<div class="line">It is necessary to add <a class="reference internal" href="#stringprocessinghowtousecodepointsclasses"><span class="std std-ref">Code point set class provided by common library</span></a> as dependency library in case of <a class="reference internal" href="#stringprocessinghowtousecodepoints"><span class="std std-ref">Code point set check (character type check)</span></a> is used.</div>
</div>
</div>
<div class="section" id="creating-code-point-set">
<span id="stringprocessinghowtousecodepointsconstruction"></span><h4><a class="toc-backref" href="#id17">7.6.2.5.2. Creating code point set</a><a class="headerlink" href="#creating-code-point-set" title="Permalink to this headline">¶</a></h4>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codepoints.CodePoints</span></code> is a class that represents a code point set.</div>
<div class="line">How to create <code class="docutils literal"><span class="pre">CodePoints</span></code> instance is shown below.</div>
</div>
<p><strong>When an instance is created by calling a factory method (cache)</strong></p>
<div class="line-block">
<div class="line">A method wherein an instance is created from a code point set class ( <code class="docutils literal"><span class="pre">Class&lt;?</span> <span class="pre">extends</span> <span class="pre">CodePoints&gt;</span></code>) and the created instance is then cached, is explained below.</div>
<div class="line">This method is recommended for cache process since it is not necessary to create multiple specific code point sets.</div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">CodePoints</span> <span class="n">codePoints</span> <span class="o">=</span> <span class="n">CodePoints</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">ASCIIPrintableChars</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>  <span class="c1">// (1)</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Pass code point set class in <code class="docutils literal"><span class="pre">CodePoints#of</span></code> method (factory method) and fetch an instance.</div>
<div class="line">In this example, an instance of code point set class (<code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codepoints.catalog.ASCIIPrintableChars</span></code>) of Ascii printable characters is fetched.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Code point set class exists multiple times in the module, same as <code class="docutils literal"><span class="pre">CodePoints</span></code> class.
Although other modules which provide code point set also exist, these modules must be added to their own projects when required.
For details, refer <a class="reference internal" href="#stringprocessinghowtousecodepointsclasses"><span class="std std-ref">Code point set class provided by common library</span></a>.</p>
<p class="last">Further, a new code point set class can also be created.
For details, refer <a class="reference internal" href="#stringprocessinghowtousecodepointsclasscreation"><span class="std std-ref">Creating new code point set class</span></a>.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>When an instance is created by calling a constructor of code point set class</strong></p>
<div class="line-block">
<div class="line">A method wherein an instance is created from code point set class.</div>
<div class="line">When this method is used, it is recommended to use the process which need not be cached (argument of set operation) since the created instance is not cached.</div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">CodePoints</span> <span class="n">codePoints</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ASCIIPrintableChars</span><span class="p">();</span>  <span class="c1">// (1)</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Call constructor by using <code class="docutils literal"><span class="pre">new</span></code> operator and generate an instance of code point set class.</div>
<div class="line">In this example, an instance of code point set class ( <code class="docutils literal"><span class="pre">ASCIIPrintableChars</span></code>) of Ascii printable characters is generated.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>When an instance is created by calling constructor of CodePoints</strong></p>
<div class="line-block">
<div class="line">A method wherein an instance is created from <code class="docutils literal"><span class="pre">CodePoints</span></code> is shown below.</div>
<div class="line">When this method is used, it is recommended to use the process which need not be cached (argument of set operation) since the created instance is not cached.</div>
</div>
<ul>
<li><p class="first">When the codepoint ( <code class="docutils literal"><span class="pre">int</span></code>) is to be passed by using a variable length argument</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">CodePoints</span> <span class="n">codePoints</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CodePoints</span><span class="p">(</span><span class="mh">0x0061</span> <span class="cm">/* a */</span><span class="p">,</span> <span class="mh">0x0062</span> <span class="cm">/* b */</span><span class="p">);</span>  <span class="c1">// (1)</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Generate an instance by passing <code class="docutils literal"><span class="pre">int</span></code> code point in <code class="docutils literal"><span class="pre">CodePoints</span></code> constructor.</div>
<div class="line">In this example, an instance of code point set for characters <code class="docutils literal"><span class="pre">&quot;a&quot;</span></code> and <code class="docutils literal"><span class="pre">&quot;b&quot;</span></code> is generated.</div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<ul>
<li><p class="first">When the <code class="docutils literal"><span class="pre">Set</span></code> of code point ( <code class="docutils literal"><span class="pre">int</span></code>) is to be passed</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Set</span><span class="o">&lt;</span><span class="n">Integet</span><span class="o">&gt;</span> <span class="n">set</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<span class="n">set</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="mh">0x0061</span> <span class="cm">/* a */</span><span class="p">);</span>
<span class="n">set</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="mh">0x0062</span> <span class="cm">/* b */</span><span class="p">);</span>
<span class="n">CodePoints</span> <span class="n">codePoints</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CodePoints</span><span class="p">(</span><span class="n">set</span><span class="p">);</span>  <span class="c1">// (1)</span>
</pre></div>
</div>
</li>
</ul>
<blockquote>
<div><table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Add code point of <code class="docutils literal"><span class="pre">int</span></code> to <code class="docutils literal"><span class="pre">Set</span></code> and  generate an instance by passing the <code class="docutils literal"><span class="pre">Set</span></code> in constructor of <code class="docutils literal"><span class="pre">CodePoints</span></code>.</div>
<div class="line">In this example, an instance of code point set for characters <code class="docutils literal"><span class="pre">&quot;a&quot;</span></code> and <code class="docutils literal"><span class="pre">&quot;b&quot;</span></code> is generated.</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<ul>
<li><p class="first">When code point set string is to be passed by using variable length argument</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">CodePoints</span> <span class="n">codePoints</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CodePoints</span><span class="p">(</span><span class="s">&quot;ab&quot;</span><span class="p">);</span>         <span class="c1">// (1)</span>
</pre></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">CodePoints</span> <span class="n">codePoints</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CodePoints</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">);</span>  <span class="c1">// (2)</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Generate an instance by passing code point set string in constructor of <code class="docutils literal"><span class="pre">CodePoints</span></code>.</div>
<div class="line">In this example, an instance of code point set for characters <code class="docutils literal"><span class="pre">&quot;a&quot;</span></code> and <code class="docutils literal"><span class="pre">&quot;b&quot;</span></code> is generated.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Code point set string can also be passed by dividing it in the arguments. Result is same as (1).</div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="set-operation-of-the-code-point-sets">
<span id="stringprocessinghowtousecodepointsoperations"></span><h4><a class="toc-backref" href="#id18">7.6.2.5.3. Set operation of the code point sets</a><a class="headerlink" href="#set-operation-of-the-code-point-sets" title="Permalink to this headline">¶</a></h4>
<div class="line-block">
<div class="line">A new code point set instance can be created by performing set operation for code point set.</div>
<div class="line">Further, note that status of source code point set does not change due to set operation.</div>
<div class="line">A method wherein an instance of code point set is created by using set operation is given below.</div>
</div>
<p><strong>When an instance of code point set is created by using union set method</strong></p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">CodePoints</span> <span class="n">abCp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CodePoints</span><span class="p">(</span><span class="mh">0x0061</span> <span class="cm">/* a */</span><span class="p">,</span> <span class="mh">0x0062</span> <span class="cm">/* b */</span><span class="p">);</span>
<span class="n">CodePoints</span> <span class="n">cdCp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CodePoints</span><span class="p">(</span><span class="mh">0x0063</span> <span class="cm">/* c */</span><span class="p">,</span> <span class="mh">0x0064</span> <span class="cm">/* d */</span><span class="p">);</span>

<span class="n">CodePoints</span> <span class="n">abcdCp</span> <span class="o">=</span> <span class="n">abCp</span><span class="p">.</span><span class="na">union</span><span class="p">(</span><span class="n">cdCp</span><span class="p">);</span>    <span class="c1">// (1)</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Calculate union of two code point sets by using  <code class="docutils literal"><span class="pre">CodePoints#union</span></code> method and create an instance of new code point set.</div>
<div class="line">In this example, union of “code point set included in string<code class="docutils literal"><span class="pre">&quot;ab&quot;</span></code>” and “code point set included in string <code class="docutils literal"><span class="pre">&quot;cd&quot;</span></code>” is calculated and an instance of new code point set (code point set included in string <code class="docutils literal"><span class="pre">&quot;abcd&quot;</span></code>) is generated.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>When an instance of code point set is created by using difference set method</strong></p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">CodePoints</span> <span class="n">abcdCp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CodePoints</span><span class="p">(</span><span class="mh">0x0061</span> <span class="cm">/* a */</span><span class="p">,</span> <span class="mh">0x0062</span> <span class="cm">/* b */</span><span class="p">,</span>
        <span class="mh">0x0063</span> <span class="cm">/* c */</span><span class="p">,</span> <span class="mh">0x0064</span> <span class="cm">/* d */</span><span class="p">);</span>
<span class="n">CodePoints</span> <span class="n">cdCp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CodePoints</span><span class="p">(</span><span class="mh">0x0063</span> <span class="cm">/* c */</span><span class="p">,</span> <span class="mh">0x0064</span> <span class="cm">/* d */</span><span class="p">);</span>

<span class="n">CodePoints</span> <span class="n">abCp</span> <span class="o">=</span> <span class="n">abcdCp</span><span class="p">.</span><span class="na">subtract</span><span class="p">(</span><span class="n">cdCp</span><span class="p">);</span>    <span class="c1">// (1)</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Calculate difference set of two code point sets by using <code class="docutils literal"><span class="pre">CodePoints#subtract</span></code> method and create an instance of new code point set.</div>
<div class="line">In this example, difference set of “code point set included in string <code class="docutils literal"><span class="pre">&quot;abcd&quot;</span></code>” and “code point set included in string  <code class="docutils literal"><span class="pre">&quot;cd&quot;</span></code>” is calculated and an instance of new code point set (code point set included in string  <code class="docutils literal"><span class="pre">&quot;ab&quot;</span></code>) is created.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>When an instance of new code point set is to be created by intersection set</strong></p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">CodePoints</span> <span class="n">abcdCp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CodePoints</span><span class="p">(</span><span class="mh">0x0061</span> <span class="cm">/* a */</span><span class="p">,</span> <span class="mh">0x0062</span> <span class="cm">/* b */</span><span class="p">,</span>
        <span class="mh">0x0063</span> <span class="cm">/* c */</span><span class="p">,</span> <span class="mh">0x0064</span> <span class="cm">/* d */</span><span class="p">);</span>
<span class="n">CodePoints</span> <span class="n">cdeCp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CodePoints</span><span class="p">(</span><span class="mh">0x0063</span> <span class="cm">/* c */</span><span class="p">,</span> <span class="mh">0x0064</span> <span class="cm">/* d */</span><span class="p">,</span> <span class="mh">0x0064</span> <span class="cm">/* e */</span><span class="p">);</span>

<span class="n">CodePoints</span> <span class="n">cdCp</span> <span class="o">=</span> <span class="n">abcdCp</span><span class="p">.</span><span class="na">intersect</span><span class="p">(</span><span class="n">cdeCp</span><span class="p">);</span>    <span class="c1">// (1)</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Calculate intersection set of two code point sets by using <code class="docutils literal"><span class="pre">CodePoints#intersect</span></code> method and create an instance of new code point set.</div>
<div class="line">In this example, calculate intersection set of “code point set included in string <code class="docutils literal"><span class="pre">&quot;abcd&quot;</span></code>” and “code point set included in string <code class="docutils literal"><span class="pre">&quot;cde&quot;</span></code>” is calculated and an instance of new code point set (code point set included in string <code class="docutils literal"><span class="pre">&quot;cd&quot;</span></code>）is created.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="string-check-by-using-code-point-set">
<span id="stringprocessinghowtousecodepointscheck"></span><h4><a class="toc-backref" href="#id19">7.6.2.5.4. String check by using code point set</a><a class="headerlink" href="#string-check-by-using-code-point-set" title="Permalink to this headline">¶</a></h4>
<div class="line-block">
<div class="line">A string can be checked by using a method provided in <code class="docutils literal"><span class="pre">CodePoints</span></code>.</div>
<div class="line">How to use a method which is used while checking the string is given below.</div>
</div>
<p><strong>containsAll method</strong></p>
<p>Determine whether the entire string for checking is included in the code point set.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">CodePoints</span> <span class="n">jisX208KanaCp</span> <span class="o">=</span> <span class="n">CodePoints</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">JIS_X_0208_Katakana</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>

<span class="kt">boolean</span> <span class="n">result</span><span class="p">;</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">jisX208KanaCp</span><span class="p">.</span><span class="na">containsAll</span><span class="p">(</span><span class="s">&quot;カ&quot;</span><span class="p">);</span>     <span class="c1">// true</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">jisX208KanaCp</span><span class="p">.</span><span class="na">containsAll</span><span class="p">(</span><span class="s">&quot;カナ&quot;</span><span class="p">);</span>   <span class="c1">// true</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">jisX208KanaCp</span><span class="p">.</span><span class="na">containsAll</span><span class="p">(</span><span class="s">&quot;カナa&quot;</span><span class="p">);</span>  <span class="c1">// false</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>firstExcludedContPoint method</strong></p>
<p>Return the first code point which is not included in the code point set, from the string targeted for checking.
Further, return <code class="docutils literal"><span class="pre">CodePoints#NOT_FOUND</span></code> when the entire string for checking is included in code point set.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">CodePoints</span> <span class="n">jisX208KanaCp</span> <span class="o">=</span> <span class="n">CodePoints</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">JIS_X_0208_Katakana</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">result</span><span class="p">;</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">jisX208KanaCp</span><span class="p">.</span><span class="na">firstExcludedCodePoint</span><span class="p">(</span><span class="s">&quot;カナa&quot;</span><span class="p">);</span>  <span class="c1">// 0x0061 (a)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">jisX208KanaCp</span><span class="p">.</span><span class="na">firstExcludedCodePoint</span><span class="p">(</span><span class="s">&quot;カaナ&quot;</span><span class="p">);</span>  <span class="c1">// 0x0061 (a)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">jisX208KanaCp</span><span class="p">.</span><span class="na">firstExcludedCodePoint</span><span class="p">(</span><span class="s">&quot;カナ&quot;</span><span class="p">);</span>   <span class="c1">// CodePoints#NOT_FOUND</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>allExcludedCodePoints method</strong></p>
<p>Return <code class="docutils literal"><span class="pre">Set</span></code> of the code point which is not included in the code point set, from the string targeted for checking.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">CodePoints</span> <span class="n">jisX208KanaCp</span> <span class="o">=</span> <span class="n">CodePoints</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">JIS_X_0208_Katakana</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>

<span class="n">Set</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">jisX208KanaCp</span><span class="p">.</span><span class="na">allExcludedCodePoints</span><span class="p">(</span><span class="s">&quot;カナa&quot;</span><span class="p">);</span>  <span class="c1">// [0x0061 (a)]</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">jisX208KanaCp</span><span class="p">.</span><span class="na">allExcludedCodePoints</span><span class="p">(</span><span class="s">&quot;カaナb&quot;</span><span class="p">);</span> <span class="c1">// [0x0061 (a), 0x0062 (b)]</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">jisX208KanaCp</span><span class="p">.</span><span class="na">allExcludedCodePoints</span><span class="p">(</span><span class="s">&quot;カナ&quot;</span><span class="p">);</span>   <span class="c1">// []</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="string-check-linked-with-bean-validation">
<span id="stringprocessinghowtousecodepointsvalidator"></span><h4><a class="toc-backref" href="#id20">7.6.2.5.5. String check linked with Bean Validation</a><a class="headerlink" href="#string-check-linked-with-bean-validation" title="Permalink to this headline">¶</a></h4>
<div class="line-block">
<div class="line">It can be checked whether the entire string targeted for checking is included in the specified code point set by specifying code point set class in <code class="docutils literal"><span class="pre">&#64;org.terasoluna.gfw.common.codepoints.ConsistOf</span></code> annotation.</div>
<div class="line">How to use is shown below.</div>
</div>
<p><strong>When there is only one code point set used for checking</strong></p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="nd">@ConsisOf</span><span class="p">(</span><span class="n">JIS_X_0208_Hiragana</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>    <span class="c1">// (1)</span>
<span class="kd">private</span> <span class="n">String</span> <span class="n">firstName</span><span class="p">;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Check whether the string specified in the targeted field is entirely “Hiragana of JIS X 0208”.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>When there are multiple code point sets used for checking</strong></p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="nd">@ConsisOf</span><span class="p">({</span><span class="n">JIS_X_0208_Hiragana</span><span class="p">.</span><span class="na">class</span><span class="p">,</span> <span class="n">JIS_X_0208_Katakana</span><span class="p">.</span><span class="na">class</span><span class="p">})</span>    <span class="c1">// (1)</span>
<span class="kd">private</span> <span class="n">String</span> <span class="n">firstName</span><span class="p">;</span>
</pre></div>
</div>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Check whether the string specified in the targeted field is entirely “Hiragana of JIS X 0208” or “Katakana of JIS X 0208”.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If string of length N is checked by code point sets M, a checking process that contains N x M is employed. When the string is large, it is likely to cause performance degradation.
Hence, a new code point set class that acts as a union set of code point set used for checking is created, that class alone should be specified.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="creating-new-code-point-set-class">
<span id="stringprocessinghowtousecodepointsclasscreation"></span><h4><a class="toc-backref" href="#id21">7.6.2.5.6. Creating new code point set class</a><a class="headerlink" href="#creating-new-code-point-set-class" title="Permalink to this headline">¶</a></h4>
<div class="line-block">
<div class="line">When a new code point set class is to be created, specify code point using constructor by inheriting <code class="docutils literal"><span class="pre">CodePoints</span></code> class.</div>
<div class="line">A method wherein a new code point set class is created is given below.</div>
<div class="line"><br /></div>
</div>
<p><strong>When a new code point set class is created by specifying code point</strong></p>
<p>How to create code point set which is formed by “only numbers”</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">NumberChars</span> <span class="kd">extends</span> <span class="n">CodePoints</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="nf">NumberCodePoints</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">super</span><span class="p">(</span><span class="mh">0x0030</span> <span class="cm">/* 0 */</span><span class="p">,</span> <span class="mh">0x0031</span> <span class="cm">/* 1 */</span><span class="p">,</span> <span class="mh">0x0032</span> <span class="cm">/* 2 */</span><span class="p">,</span> <span class="mh">0x0033</span> <span class="cm">/* 3 */</span><span class="p">,</span>
                <span class="mh">0x0034</span> <span class="cm">/* 4 */</span><span class="p">,</span> <span class="mh">0x0035</span> <span class="cm">/* 5 */</span><span class="p">,</span> <span class="mh">0x0036</span> <span class="cm">/* 6 */</span><span class="p">,</span>
                <span class="mh">0x0037</span> <span class="cm">/* 7 */</span><span class="p">,</span> <span class="mh">0x0038</span> <span class="cm">/* 8 */</span><span class="p">,</span> <span class="mh">0x0039</span> <span class="cm">/* 9 */</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>When a new code point set class is created by using a set operation method of code point set class</strong></p>
<p>How to create a code point set using a union set consisting of “Hiragana” and “Katakana”</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FullwidthHiraganaKatakana</span> <span class="kd">extends</span> <span class="n">CodePoints</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="nf">FullwidthHiraganaKatakana</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">super</span><span class="p">(</span><span class="k">new</span> <span class="n">X_JIS_0208_Hiragana</span><span class="p">().</span><span class="na">union</span><span class="p">(</span><span class="k">new</span> <span class="n">X_JIS_0208_Katakana</span><span class="p">()));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>How to create a code point set using difference set consisting of “half width katakana excluding symbols (｡｢｣､･)”</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">HalfwidthKatakana</span> <span class="kd">extends</span> <span class="n">CodePoints</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="nf">HalfwidthKatakana</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">CodePoints</span> <span class="n">symbolCp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CodePoints</span><span class="p">(</span><span class="mh">0xFF61</span> <span class="cm">/* ｡ */</span><span class="p">,</span> <span class="mh">0xFF62</span> <span class="cm">/* ｢ */</span><span class="p">,</span>
                <span class="mh">0xFF63</span> <span class="cm">/* ｣ */</span><span class="p">,</span> <span class="mh">0xFF64</span> <span class="cm">/* ､ */</span><span class="p">,</span> <span class="mh">0xFF65</span> <span class="cm">/* ･ */</span><span class="p">);</span>

        <span class="kd">super</span><span class="p">(</span><span class="k">new</span> <span class="n">JIS_X_0201_Katakana</span><span class="p">().</span><span class="na">subtract</span><span class="p">(</span><span class="n">symbolCp</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When the code point set class used in set operation (<code class="docutils literal"><span class="pre">X_JIS_0208_Hiragana</span></code> or <code class="docutils literal"><span class="pre">X_JIS_0208_Katakana</span></code>etc in this example) is not to be used individually, it must be ensured that code point is not needlessly cached, by using <code class="docutils literal"><span class="pre">new</span></code> operator and calling constructor.
If it is cached by using <code class="docutils literal"><span class="pre">CodePoints#of</span></code>method, code point set used only during set operation calculation remains in the heap resulting in load on the memory.
On the other hand, if it is used individually, it should be cached using <code class="docutils literal"><span class="pre">CodePoints#of</span></code> method.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="code-point-set-class-provided-by-common-library">
<span id="stringprocessinghowtousecodepointsclasses"></span><h4><a class="toc-backref" href="#id22">7.6.2.5.7. Code point set class provided by common library</a><a class="headerlink" href="#code-point-set-class-provided-by-common-library" title="Permalink to this headline">¶</a></h4>
<p>Code point class provided by common library (<code class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codepoints.catalog</span></code> package class) and
artifact information to be incorporated while using are given below.</p>
<table border="1" class="colwidths-given longtable docutils">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="30%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Class name</th>
<th class="head">Description</th>
<th class="head">Artifact information</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">ASCIIControlChars</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Ascii control characters set.</div>
<div class="line">(<code class="docutils literal"><span class="pre">0x0000</span></code>-<code class="docutils literal"><span class="pre">0x001F</span></code>、<code class="docutils literal"><span class="pre">0x007F</span></code>)</div>
</div>
</td>
<td><div class="first last highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.terasoluna.gfw<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>terasoluna-gfw-codepoints<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">ASCIIPrintableChars</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Ascii printable characters set.</div>
<div class="line">(<code class="docutils literal"><span class="pre">0x0020</span></code>-<code class="docutils literal"><span class="pre">0x007E</span></code>)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">(Same as above)</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">CRLF</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Linefeed code set.</div>
<div class="line"><code class="docutils literal"><span class="pre">0x000A</span></code>(LINE FEED) and <code class="docutils literal"><span class="pre">0x000D</span></code>(CARRIAGE RETURN)。</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">(Same as above)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">JIS_X_0201_Katakana</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">JIS X 0201  katakana set.</div>
<div class="line">Symbols (｡｢｣､･) included as well.</div>
</div>
</td>
<td><div class="first last highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.terasoluna.gfw.codepoints<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>terasoluna-gfw-codepoints-jisx0201<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">JIS_X_0201_LatinLetters</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">JIS X 0201 Latin characters set.</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">(Same as above)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(6)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">JIS_X_0208_SpecialChars</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Row 2 of JIS X 0208: Special characters set.</div>
</div>
</td>
<td><div class="first last highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.terasoluna.gfw.codepoints<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>terasoluna-gfw-codepoints-jisx0208<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(7)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">JIS_X_0208_LatinLetters</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Row 3 of JIS X 0208: Alphanumeric set.</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">(Same as above)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(8)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">JIS_X_0208_Hiragana</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Row 4 of JIS X 0208: Hiragana set.</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">(Same as above)</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(9)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">JIS_X_0208_Katakana</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Row 5 of JIS X 0208: Katakana set.</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">(Same as above)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(10)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">JIS_X_0208_GreekLetters</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Row 6 of JIS X 0208: Greek letters set.</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">(Same as above)</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(11)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">JIS_X_0208_CyrillicLetters</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Row 7 of JIS X 0208: Cyrillic letters set.</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">(Same as above)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(12)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">JIS_X_0208_BoxDrawingChars</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Row 8 of JIS X 0208: Box drawing characters.</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">(Same as above)</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(13)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">JIS_X_0208_Kanji</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Kanji 6355 characters specified in JIS X 208.</div>
<div class="line">First and second level kanjis.</div>
</div>
</td>
<td><div class="first last highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.terasoluna.gfw.codepoints<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>terasoluna-gfw-codepoints-jisx0208kanji<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(14)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">JIS_X_0213_Kanji</span></code></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Kanji 10050 characters specified in JIS X 0213:2004.</div>
<div class="line">First, second, third and fourth level kanjis.</div>
</div>
</td>
<td><div class="first last highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.terasoluna.gfw.codepoints<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>terasoluna-gfw-codepoints-jisx0213kanji<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<blockquote>
<div>In the above setting example, since it is assumed that the dependent library version is managed by the parent project terasoluna-gfw-parent , specifying the version in pom.xml is not necessary.</div></blockquote>
<p class="last"><code class="docutils literal"><span class="pre">JIS_X_0208_SpecialChars</span></code>codepoint set class is a special character set corresponding to JIS chinese characters (JIS X 0208)-section 01-02.
Double byte dash (-) of JIS chinese characters is EM DASH and the corresponding UCS(ISO/IEC 10646-1, JIS X 0221, Unicode) codepoints usually correspond to <code class="docutils literal"><span class="pre">U+2014</span></code>.
However, in the conversion table offered by Unicode consortium , characters supported by Unicode are <a class="reference external" href="http://www.unicode.org/Public/MAPPINGS/OBSOLETE/EASTASIA/JIS/JIS0208.TXT">HORINZONTAL BAR (U+2015)</a> instead of EM DASH..
Since general conversion rules that are being used and Unicode conversion table vary, problems may occur during actual use if codepoint set is defined as per Unicode conversion table. Therefore, codepoint set is defined in 、<code class="docutils literal"><span class="pre">JIS_X_0208_SpecialChars</span></code> codepoint set class by converting HORINZONTAL BAR (<code class="docutils literal"><span class="pre">U+2015</span></code>) to EM DASH (<code class="docutils literal"><span class="pre">U+2014</span></code>).</p>
</div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="Dozer.html" title="7.7. Bean Mapping (Dozer)"
             >next</a> |</li>
        <li class="right" >
          <a href="SystemDate.html" title="7.5. System Date"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.3.1.RELEASE documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >7. General-purpose functions that do not depend on the application</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer">
      © Copyright 2013-2017, NTT DATA Corporation. © Copyright 2017, NTT Corporation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.6.3.Theme by <a href="http://github.com/vkvn">vkvn</a>
    </div>
    
    <script>
    
    $(function() {
    	var $sidebar	= $('.sphinxsidebar'),
    		$window		= $(window),
    		offset		= $sidebar.offset(),
    		topPadding	= 3,
    		$scroll		= $('#scroll');
    	
    	$window.scroll(function() {
    		if ($scroll.is(':checked')) {
				if ($window.scrollTop() > offset.top) {
					$sidebar.stop().animate({
						marginTop:$window.scrollTop() - offset.top + topPadding
					});
				} else {
					$sidebar.stop().animate({
						marginTop:0
					});
				}
			}
		});
    	
    	var $navList = $('ul:first', $sidebar);
    	$('li:first', $navList).addClass('open');
    	
    	$navList.treeview({
    		persist: "location",
    		collapsed: true,
    		unique: false
    	});
    	
	});
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-46550814-1', 'terasolunaorg.github.io');
    ga('send', 'pageview');
    </script>
  </body>
</html>