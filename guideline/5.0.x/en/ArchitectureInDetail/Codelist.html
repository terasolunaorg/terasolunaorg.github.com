<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>5.14. Codelist &mdash; TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.0.0-SNAPSHOT documentation</title>
    
    <link rel="stylesheet" href="../_static/solar.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '5.0.0-SNAPSHOT',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.0.0-SNAPSHOT documentation" href="../index.html" />
    <link rel="up" title="5. Architecture in Detail - TERASOLUNA Server Framework for Java (5.x)" href="index.html" />
    <link rel="next" title="5.15. Ajax" href="Ajax.html" />
    <link rel="prev" title="5.13. Internationalization" href="Internationalization.html" /><script src="../_static/jquery.treeview.js" type="text/javascript"></script>
<!-- <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro|Open+Sans:300italic,400italic,700italic,400,300,700' rel='stylesheet' type='text/css'> -->
<link href="../_static/solarized-dark.css" rel="stylesheet">
<link href="../_static/jquery.treeview.css" rel="stylesheet">
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Ajax.html" title="5.15. Ajax"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Internationalization.html" title="5.13. Internationalization"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.0.0-SNAPSHOT documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">5. Architecture in Detail - TERASOLUNA Server Framework for Java (5.x)</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><label><input id="scroll" type="checkbox" checked> scroll sidebar</label>

  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">5.14. Codelist</a><ul>
<li><a class="reference internal" href="#overview">5.14.1. Overview</a></li>
<li><a class="reference internal" href="#how-to-use">5.14.2. How to use</a><ul>
<li><a class="reference internal" href="#using-simplemapcodelist">5.14.2.1. Using SimpleMapCodeList</a><ul>
<li><a class="reference internal" href="#example-of-codelist-settings">5.14.2.1.1. Example of codelist settings</a></li>
<li><a class="reference internal" href="#using-codelist-in-jsp">5.14.2.1.2. Using codelist in JSP</a></li>
<li><a class="reference internal" href="#using-codelist-in-java-class">5.14.2.1.3. Using codelist in Java class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-numberrangecodelist">5.14.2.2. Using NumberRangeCodeList</a><ul>
<li><a class="reference internal" href="#id1">5.14.2.2.1. Example of codelist settings</a></li>
<li><a class="reference internal" href="#id2">5.14.2.2.2. Using codelist in JSP</a></li>
<li><a class="reference internal" href="#id3">5.14.2.2.3. Using codelist in Java class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-jdbccodelist">5.14.2.3. Using JdbcCodeList</a><ul>
<li><a class="reference internal" href="#id4">5.14.2.3.1. Example of codelist settings</a></li>
<li><a class="reference internal" href="#id5">5.14.2.3.2. Using codelist in JSP</a></li>
<li><a class="reference internal" href="#id6">5.14.2.3.3. Using codelist in Java class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-use-simplei18ncodelist">5.14.2.4. How to use SimpleI18nCodeList</a><ul>
<li><a class="reference internal" href="#example-of-setting-a-codelist">5.14.2.4.1. Example of setting a codelist</a></li>
<li><a class="reference internal" href="#id7">5.14.2.4.2. Using codelist in JSP</a></li>
<li><a class="reference internal" href="#id8">5.14.2.4.3. Using codelist in Java class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#input-validation-of-code-value-using-codelist">5.14.2.5. Input validation of code value using codelist</a><ul>
<li><a class="reference internal" href="#example-of-existincodelist-settings">5.14.2.5.1. Example of &#64;ExistInCodeList settings</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-extend">5.14.3. How to extend</a><ul>
<li><a class="reference internal" href="#when-large-number-of-records-need-to-be-read-from-jdbccodelist">5.14.3.1. When large number of records need to be read from JdbcCodeList</a></li>
<li><a class="reference internal" href="#when-reloading-the-codelist">5.14.3.2. When reloading the codelist</a><ul>
<li><a class="reference internal" href="#using-task-scheduler">5.14.3.2.1. Using Task Scheduler</a></li>
<li><a class="reference internal" href="#calling-refresh-method-in-controller-service-class">5.14.3.2.2. Calling refresh method in Controller (Service) class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#customizing-the-codelist-independently">5.14.3.3. Customizing the codelist independently</a></li>
</ul>
</li>
<li><a class="reference internal" href="#appendix">5.14.4. Appendix</a><ul>
<li><a class="reference internal" href="#setting-simplei18ncodelist">5.14.4.1. Setting SimpleI18nCodeList</a><ul>
<li><a class="reference internal" href="#set-java-util-map-key-code-value-value-label-for-each-locale-by-rows">5.14.4.1.1. Set <tt class="docutils literal"><span class="pre">java.util.Map</span></tt> (key = code value, value = label) for each locale by rows</a></li>
<li><a class="reference internal" href="#set-java-util-map-key-locale-value-label-for-each-code-value-by-columns">5.14.4.1.2. Set <tt class="docutils literal"><span class="pre">java.util.Map</span></tt>(key = locale, value = label) for each code value by columns</a></li>
</ul>
</li>
<li><a class="reference internal" href="#variations-of-numberrangecodelist">5.14.4.2. Variations of NumberRangeCodeList</a><ul>
<li><a class="reference internal" href="#create-the-descending-numberrangecodelist">5.14.4.2.1. Create the Descending NumberRangeCodeList</a></li>
<li><a class="reference internal" href="#change-interval-of-numberrangecodelist">5.14.4.2.2. Change interval of NumberRangeCodeList</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


  <h4>Previous topic</h4>
  <p class="topless"><a href="Internationalization.html"
                        title="previous chapter">5.13. Internationalization</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="Ajax.html"
                        title="next chapter">5.15. Ajax</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/ArchitectureInDetail/Codelist.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="codelist">
<h1>5.14. Codelist<a class="headerlink" href="#codelist" title="Permalink to this headline">¶</a></h1>
<div class="admonition caution">
  <p class="first admonition-title">Caution</p>
  <p><strong>本ガイドラインは執筆中の段階であり、大きく変更される可能性があります</strong>。安定版のガイドラインは<a href="http://terasolunaorg.github.io/guideline/">こちら</a>からご参照ください。</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#overview" id="id9">Overview</a></li>
<li><a class="reference internal" href="#how-to-use" id="id10">How to use</a><ul>
<li><a class="reference internal" href="#using-simplemapcodelist" id="id11">Using SimpleMapCodeList</a><ul>
<li><a class="reference internal" href="#example-of-codelist-settings" id="id12">Example of codelist settings</a></li>
<li><a class="reference internal" href="#using-codelist-in-jsp" id="id13">Using codelist in JSP</a></li>
<li><a class="reference internal" href="#using-codelist-in-java-class" id="id14">Using codelist in Java class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-numberrangecodelist" id="id15">Using NumberRangeCodeList</a><ul>
<li><a class="reference internal" href="#id1" id="id16">Example of codelist settings</a></li>
<li><a class="reference internal" href="#id2" id="id17">Using codelist in JSP</a></li>
<li><a class="reference internal" href="#id3" id="id18">Using codelist in Java class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-jdbccodelist" id="id19">Using JdbcCodeList</a><ul>
<li><a class="reference internal" href="#id4" id="id20">Example of codelist settings</a></li>
<li><a class="reference internal" href="#id5" id="id21">Using codelist in JSP</a></li>
<li><a class="reference internal" href="#id6" id="id22">Using codelist in Java class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-use-simplei18ncodelist" id="id23">How to use SimpleI18nCodeList</a><ul>
<li><a class="reference internal" href="#example-of-setting-a-codelist" id="id24">Example of setting a codelist</a></li>
<li><a class="reference internal" href="#id7" id="id25">Using codelist in JSP</a></li>
<li><a class="reference internal" href="#id8" id="id26">Using codelist in Java class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#input-validation-of-code-value-using-codelist" id="id27">Input validation of code value using codelist</a><ul>
<li><a class="reference internal" href="#example-of-existincodelist-settings" id="id28">Example of &#64;ExistInCodeList settings</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-extend" id="id29">How to extend</a><ul>
<li><a class="reference internal" href="#when-large-number-of-records-need-to-be-read-from-jdbccodelist" id="id30">When large number of records need to be read from JdbcCodeList</a></li>
<li><a class="reference internal" href="#when-reloading-the-codelist" id="id31">When reloading the codelist</a><ul>
<li><a class="reference internal" href="#using-task-scheduler" id="id32">Using Task Scheduler</a></li>
<li><a class="reference internal" href="#calling-refresh-method-in-controller-service-class" id="id33">Calling refresh method in Controller (Service) class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#customizing-the-codelist-independently" id="id34">Customizing the codelist independently</a></li>
</ul>
</li>
<li><a class="reference internal" href="#appendix" id="id35">Appendix</a><ul>
<li><a class="reference internal" href="#setting-simplei18ncodelist" id="id36">Setting SimpleI18nCodeList</a><ul>
<li><a class="reference internal" href="#set-java-util-map-key-code-value-value-label-for-each-locale-by-rows" id="id37">Set <tt class="docutils literal"><span class="pre">java.util.Map</span></tt> (key = code value, value = label) for each locale by rows</a></li>
<li><a class="reference internal" href="#set-java-util-map-key-locale-value-label-for-each-code-value-by-columns" id="id38">Set <tt class="docutils literal"><span class="pre">java.util.Map</span></tt>(key = locale, value = label) for each code value by columns</a></li>
</ul>
</li>
<li><a class="reference internal" href="#variations-of-numberrangecodelist" id="id39">Variations of NumberRangeCodeList</a><ul>
<li><a class="reference internal" href="#create-the-descending-numberrangecodelist" id="id40">Create the Descending NumberRangeCodeList</a></li>
<li><a class="reference internal" href="#change-interval-of-numberrangecodelist" id="id41">Change interval of NumberRangeCodeList</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#id9">5.14.1. Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>A codelist is a pair comprising of &#8220;Code values (Value) and their display names (Label)&#8221;.</p>
<p>It is used for mapping code values with the labels to be displayed on screen such as selectbox.</p>
<p>Common library provides the following functionalities:</p>
<ul class="simple">
<li>Functionality to read and cache the codelist defined in xml file or DB at the time of launching the application.</li>
<li>Functionality to refer to the codelist from JSP or Java class</li>
<li>Functionality to perform input validation using codelist</li>
</ul>
<p>Moreover, it also supports</p>
<ul class="simple">
<li>internationalization of codelist</li>
<li>reloading of cached codelist</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As per standard specifications, only the codelist defined in DB is reloadable.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Following four types of codelists are implemented in common library.</p>
<table border="1" class="docutils">
<caption><strong>Types of codelist</strong></caption>
<colgroup>
<col width="50%" />
<col width="30%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Types</th>
<th class="head">Contents</th>
<th class="head">Reloadable</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.SimpleMapCodeList</span></tt></td>
<td>Use the hard-coded contents from xml file.</td>
<td>NO</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.NumberRangeCodeList</span></tt></td>
<td>Use when creating number range list.</td>
<td>NO</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.JdbcCodeList</span></tt></td>
<td>Use the codelist by fetching the code from DB using SQL.</td>
<td>YES</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.i18n.SimpleI18nCodeList</span></tt></td>
<td>Use the codelist corresponding to java.util.Locale.</td>
<td>NO</td>
</tr>
</tbody>
</table>
<p>Common library provides <tt class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.CodeList</span></tt> for the interface of above codelists.</p>
<p>Codelist class diagram provided in common library is as follows:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/codelist-class-diagram.png"><img alt="codelist class diagram" src="../_images/codelist-class-diagram.png" style="width: 70%;" /></a>
<p class="caption"><strong>Picture - Image of codelist class diagram</strong></p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="how-to-use">
<h2><a class="toc-backref" href="#id10">5.14.2. How to use</a><a class="headerlink" href="#how-to-use" title="Permalink to this headline">¶</a></h2>
<p>This section describes settings for various codelists and their implementation methods.</p>
<ul class="simple">
<li><a class="reference internal" href="#codelist-simple"><em>Using SimpleMapCodeList</em></a></li>
<li><a class="reference internal" href="#codelist-number"><em>Using NumberRangeCodeList</em></a></li>
<li><a class="reference internal" href="#codelist-jdbc"><em>Using JdbcCodeList</em></a></li>
<li><a class="reference internal" href="#codelisti18n"><em>How to use SimpleI18nCodeList</em></a></li>
<li><a class="reference internal" href="#codelist-validate"><em>Input validation of code value using codelist</em></a></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="using-simplemapcodelist">
<span id="codelist-simple"></span><h3><a class="toc-backref" href="#id11">5.14.2.1. Using SimpleMapCodeList</a><a class="headerlink" href="#using-simplemapcodelist" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.SimpleMapCodeList</span></tt> reads the code values defined in xml file at the time of launching the application and uses them as is.</p>
<p><strong>SimpleMapCodeList image</strong></p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/codelist-simple.png"><img alt="codelist simple" src="../_images/codelist-simple.png" style="width: 100%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="example-of-codelist-settings">
<h4><a class="toc-backref" href="#id12">5.14.2.1.1. Example of codelist settings</a><a class="headerlink" href="#example-of-codelist-settings" title="Permalink to this headline">¶</a></h4>
<p><strong>Definition of Bean definition file(xxx-codelist.xml)</strong></p>
<p>It is recommended to create a bean definition file for codelist.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="hll"> <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_ORDERSTATUS&quot;</span> <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.SimpleMapCodeList&quot;</span><span class="nt">&gt;</span> <span class="c">&lt;!-- (1) --&gt;</span>
</span>     <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;map&quot;</span><span class="nt">&gt;</span>
         <span class="nt">&lt;util:map&gt;</span>
<span class="hll">             <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;1&quot;</span> <span class="na">value=</span><span class="s">&quot;Received&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (2) --&gt;</span>
</span>             <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;2&quot;</span> <span class="na">value=</span><span class="s">&quot;Sent&quot;</span> <span class="nt">/&gt;</span>
             <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;3&quot;</span> <span class="na">value=</span><span class="s">&quot;Cancelled&quot;</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;/util:map&gt;</span>
     <span class="nt">&lt;/property&gt;</span>
 <span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define a bean of SimpleMapCodeList class.</div>
<div class="line">beanID should have the name matching with the ID pattern of <tt class="docutils literal"><span class="pre">org.terasoluna.gfw.web.codelist.CodeListInterceptor</span></tt> described later.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define Key, Value pairs of Map.</div>
<div class="line">When map-class attribute is omitted, it is registered in <tt class="docutils literal"><span class="pre">java.util.LinkedHashMap</span></tt>; hence in the above example, &#8220;Name and value&#8221; are stored in Map in the order of registration.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Definition of Bean definition file(xxx-domain.xml)</strong></p>
<p>Once the bean definition file for codelist is created, it should be imported to already existing bean definition file.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="hll"> <span class="nt">&lt;import</span> <span class="na">resource=</span><span class="s">&quot;classpath:META-INF/spring/projectName-codelist.xml&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (3) --&gt;</span>
</span> <span class="nt">&lt;context:component-scan</span> <span class="na">base-package=</span><span class="s">&quot;com.example.domain&quot;</span> <span class="nt">/&gt;</span>

<span class="hll"> <span class="c">&lt;!-- omitted --&gt;</span>
</span></pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Import bean definition file for codelist.</div>
<div class="line">Resource information of import is necessary during component-scan;</div>
<div class="line">hence import should be set above <tt class="docutils literal"><span class="pre">&lt;context:component-scan</span> <span class="pre">base-package=&quot;com.example.domain&quot;</span> <span class="pre">/&gt;</span></tt>.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="using-codelist-in-jsp">
<span id="clientside"></span><h4><a class="toc-backref" href="#id13">5.14.2.1.2. Using codelist in JSP</a><a class="headerlink" href="#using-codelist-in-jsp" title="Permalink to this headline">¶</a></h4>
<p>By using the interceptor of common library,
codelist can be set automatically in request scope and can be easily referred from JSP.</p>
<p><strong>Definition of Bean definition file(spring-mvc.xml)</strong></p>
<div class="highlight-xml"><div class="highlight"><pre> <span class="nt">&lt;mvc:interceptors&gt;</span>
   <span class="nt">&lt;mvc:interceptor&gt;</span>
<span class="hll">     <span class="nt">&lt;mvc:mapping</span> <span class="na">path=</span><span class="s">&quot;/**&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (1) --&gt;</span>
</span>     <span class="nt">&lt;bean</span>
<span class="hll">       <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.web.codelist.CodeListInterceptor&quot;</span><span class="nt">&gt;</span> <span class="c">&lt;!-- (2) --&gt;</span>
</span><span class="hll">       <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;codeListIdPattern&quot;</span> <span class="na">value=</span><span class="s">&quot;CL_.+&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (3) --&gt;</span>
</span>     <span class="nt">&lt;/bean&gt;</span>
   <span class="nt">&lt;/mvc:interceptor&gt;</span>

   <span class="c">&lt;!-- omitted --&gt;</span>

 <span class="nt">&lt;/mvc:interceptors&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Set the applicable path.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define a bean of CodeListInterceptor class.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Set the beanID pattern of codelist which is automatically set in the request scope.</div>
<div class="line">In pattern, regular expression used in <tt class="docutils literal"><span class="pre">java.util.regex.Pattern</span></tt> should be set.</div>
<div class="line">In the above example, only the data in which id is defined in &#8220;CL_XXX&#8221; format is targeted. In that case, bean definition wherein id does not start with &#8220;CL_&#8221; should not be imported.</div>
<div class="line">beanID defined in &#8220;CL_&#8221; can be used in JSP since it is set in the request scope.</div>
<div class="line"><br /></div>
<div class="line"><tt class="docutils literal"><span class="pre">codeListIdPattern</span></tt> property can be omitted.</div>
<div class="line">If omitting <tt class="docutils literal"><span class="pre">codeListIdPattern</span></tt> property, all of <tt class="docutils literal"><span class="pre">CodeList</span></tt>s (all beans which implements <tt class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.CodeList</span></tt>) are available in JSP.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Example of implementing the codelist in jsp</strong></p>
<div class="highlight-jsp"><div class="highlight"><pre><span class="nt">&lt;form:select</span> <span class="na">path=</span><span class="s">&quot;orderStatus&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;form:option</span> <span class="na">value=</span><span class="s">&quot;&quot;</span> <span class="na">label=</span><span class="s">&quot;--Select--&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (4) --&gt;</span>
  <span class="nt">&lt;form:options</span> <span class="na">items=</span><span class="s">&quot;${CL_ORDERSTATUS}&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (5) --&gt;</span>
<span class="nt">&lt;/form:select&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">When setting dummy value at the top of the selectbox, null characters should be specified in the value.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify the beanID for which codelist is defined.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p><strong>Output HTML</strong></p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;orderStatus&quot;</span> <span class="na">name=</span><span class="s">&quot;orderStatus&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>&quot;--Select--<span class="nt">&lt;/option&gt;</span>
   <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>Received<span class="nt">&lt;/option&gt;</span>
   <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">&gt;</span>Sent<span class="nt">&lt;/option&gt;</span>
   <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;3&quot;</span><span class="nt">&gt;</span>Cancelled<span class="nt">&lt;/option&gt;</span>
<span class="nt">&lt;/select&gt;</span>
</pre></div>
</div>
<p><strong>Output screen</strong></p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/codelist_selectbox.png"><img alt="codelist selectbox" src="../_images/codelist_selectbox.png" style="width: 40%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="using-codelist-in-java-class">
<span id="serverside"></span><h4><a class="toc-backref" href="#id14">5.14.2.1.3. Using codelist in Java class</a><a class="headerlink" href="#using-codelist-in-java-class" title="Permalink to this headline">¶</a></h4>
<p>When using the codelist in Java class,
inject the codelist by setting <tt class="docutils literal"><span class="pre">javax.inject.Inject</span></tt> annotation and <tt class="docutils literal"><span class="pre">javax.inject.Named</span></tt> annotation.
Specify the codelist name in <tt class="docutils literal"><span class="pre">&#64;Named</span></tt> annotation.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">javax.inject.Named</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.terasoluna.fw.common.codelist.CodeList</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrderServiceImpl</span> <span class="kd">implements</span> <span class="n">OrderService</span> <span class="o">{</span>

    <span class="nd">@Inject</span>
    <span class="nd">@Named</span><span class="o">(</span><span class="s">&quot;CL_ORDERSTATUS&quot;</span><span class="o">)</span>
    <span class="n">CodeList</span> <span class="n">orderStatusCodeList</span><span class="o">;</span> <span class="c1">// (1)</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">existOrderStatus</span><span class="o">(</span><span class="n">String</span> <span class="n">target</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">orderStatusCodeList</span><span class="o">.</span><span class="na">asMap</span><span class="o">().</span><span class="na">containsKey</span><span class="o">(</span><span class="n">target</span><span class="o">);</span> <span class="c1">// (2)</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Inject the codelist with beanID &#8220;CL_ORDERSTATUS&#8221;.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Fetch the codelist in <tt class="docutils literal"><span class="pre">java.util.Map</span></tt> format using CodeList#asMap method.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="using-numberrangecodelist">
<span id="codelist-number"></span><h3><a class="toc-backref" href="#id15">5.14.2.2. Using NumberRangeCodeList</a><a class="headerlink" href="#using-numberrangecodelist" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.NumberRangeCodeList</span></tt> is a codelist that creates the list of numeric values of specified range at the time of launching the application.
It is assumed that this codelist will mainly be used in the selectboxes having only numbers i.e. selectbox for month, date etc.</p>
<p><strong>Image of NumberRangeCodeList</strong></p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/codelist-number.png"><img alt="codelist number" src="../_images/codelist-number.png" style="width: 100%;" /></a>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">NumberRangeCodeList supports only Arabic numbers and does not support Chinese and Roman numbers.
Chinese and Roman numbers can be supported by using JdbcCodeList and SimpleMapCodeList.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>NumberRangeCodeList has the following features:</p>
<ol class="arabic simple">
<li>In order to set From value &lt; To value, the values increased in accordance with the interval are set in From-To range in ascending order.</li>
<li>In order to set To value &lt; From value, the values decreased in accordance with the interval are set in To-From range in descending order.</li>
<li>Increment (decrement) can be changed by setting intervals.</li>
</ol>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>The information here describes how to configure the ascending <tt class="docutils literal"><span class="pre">NumberRangeCodeList</span></tt>.
For how to create the descending <tt class="docutils literal"><span class="pre">NumberRangeCodeList</span></tt> or change interval, refer to &#8220;<a class="reference internal" href="#codelistappendixnumberrangecodelistvariation"><em>Variations of NumberRangeCodeList</em></a>&#8221;.
|</p>
<div class="section" id="id1">
<h4><a class="toc-backref" href="#id16">5.14.2.2.1. Example of codelist settings</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>Example of setting From value &lt; To value is shown below.</p>
<p><strong>Definition of Bean definition file(xxx-codelist.xml)</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_MONTH&quot;</span>
    <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.NumberRangeCodeList&quot;</span><span class="nt">&gt;</span> <span class="c">&lt;!-- (1) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;from&quot;</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (2) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;to&quot;</span> <span class="na">value=</span><span class="s">&quot;12&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (3) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;valueFormat&quot;</span> <span class="na">value=</span><span class="s">&quot;%d&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (4) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;labelFormat&quot;</span> <span class="na">value=</span><span class="s">&quot;%02d&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (5) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;interval&quot;</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (6) --&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define a bean of NumberRangeCodeList.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify the range start value. When omitted, &#8220;0&#8221; is set as range start value.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify the range end value. It cannot be blank.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify the format of the code value. Format used should be <tt class="docutils literal"><span class="pre">java.lang.String.format</span></tt>.</div>
<div class="line">When omitted, &#8220;%s&#8221; is set.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify the format of the code name. Format used should be <tt class="docutils literal"><span class="pre">java.lang.String.format</span></tt>.</div>
<div class="line">When omitted, &#8220;%s&#8221; is set.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(6)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Set the increment value. When omitted, &#8220;1&#8221; is set.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id2">
<h4><a class="toc-backref" href="#id17">5.14.2.2.2. Using codelist in JSP</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p>For details on settings shown below, refer to <a class="reference internal" href="#clientside"><em>Using codelist in JSP</em></a> described earlier.</p>
<p><strong>Example of jsp implementation</strong></p>
<div class="highlight-jsp"><div class="highlight"><pre><span class="nt">&lt;form:select</span> <span class="na">path=</span><span class="s">&quot;depMonth&quot;</span> <span class="na">items=</span><span class="s">&quot;${CL_MONTH}&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p><strong>Output HTML</strong></p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;depMonth&quot;</span> <span class="na">name=</span><span class="s">&quot;depMonth&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>01<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">&gt;</span>02<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;3&quot;</span><span class="nt">&gt;</span>03<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;4&quot;</span><span class="nt">&gt;</span>04<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;5&quot;</span><span class="nt">&gt;</span>05<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;6&quot;</span><span class="nt">&gt;</span>06<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;7&quot;</span><span class="nt">&gt;</span>07<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;8&quot;</span><span class="nt">&gt;</span>08<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;9&quot;</span><span class="nt">&gt;</span>09<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;10&quot;</span><span class="nt">&gt;</span>10<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;11&quot;</span><span class="nt">&gt;</span>11<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;12&quot;</span><span class="nt">&gt;</span>12<span class="nt">&lt;/option&gt;</span>
<span class="nt">&lt;/select&gt;</span>
</pre></div>
</div>
<p><strong>Output screen</strong></p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/codelist_numberrenge.png"><img alt="codelist numberrange" src="../_images/codelist_numberrenge.png" style="width: 5%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id3">
<h4><a class="toc-backref" href="#id18">5.14.2.2.3. Using codelist in Java class</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p>For details on settings shown below, refer to <a class="reference internal" href="#serverside"><em>Using codelist in Java class</em></a> described earlier.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="using-jdbccodelist">
<span id="codelist-jdbc"></span><h3><a class="toc-backref" href="#id19">5.14.2.3. Using JdbcCodeList</a><a class="headerlink" href="#using-jdbccodelist" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.JdbcCodeList</span></tt> is a class for creating codelist by fetching values from DB at the time of launching the application.
This list is cached.</p>
<p>The fetched values can be changed dynamically by reloading. For details, refer to <a class="reference internal" href="#codelisttaskscheduler"><em>When reloading the codelist</em></a>.</p>
<p><strong>JdbcCodeList image</strong></p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/codelist-jdbc.png"><img alt="codelist simple" src="../_images/codelist-jdbc.png" style="width: 100%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="id4">
<h4><a class="toc-backref" href="#id20">5.14.2.3.1. Example of codelist settings</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<p><strong>Definition of Table(authority)</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">authority_id</th>
<th class="head">authority_name</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">01</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">STAFF_MANAGEMENT</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">02</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">MASTER_MANAGEMENT</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">03</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">STOCK_MANAGEMENT</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">04</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">ORDER_MANAGEMENT</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">05</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">SHOW_SHOPPING_CENTER</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Definition of Bean definition file(xxx-codelist.xml)</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_AUTHORITIES&quot;</span> <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.JdbcCodeList&quot;</span><span class="nt">&gt;</span> <span class="c">&lt;!-- (1) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;dataSource&quot;</span> <span class="na">ref=</span><span class="s">&quot;dataSource&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;querySql&quot;</span>
        <span class="na">value=</span><span class="s">&quot;SELECT authority_id, authority_name FROM authority ORDER BY authority_id&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (2) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;valueColumn&quot;</span> <span class="na">value=</span><span class="s">&quot;authority_id&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (3) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;labelColumn&quot;</span> <span class="na">value=</span><span class="s">&quot;authority_name&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (4) --&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define a bean of JdbcCodeList class.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Write an SQL for fetching the codelist in querySql property. At that time, <strong>make sure to specify ORDER BY clause to define the order.</strong></div>
<div class="line">If ORDER BY is not specified, the order gets changed every time when records are fetched using SQL.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Set the value corresponding to the Key of Map in valueColumn property. In this example, authority_id is set.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Set the value corresponding to the Value of Map in labelColumn property. In this example, authority_name is set.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id5">
<h4><a class="toc-backref" href="#id21">5.14.2.3.2. Using codelist in JSP</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<div class="line-block">
<div class="line">For details on settings shown below, refer to <a class="reference internal" href="#clientside"><em>Using codelist in JSP</em></a> described earlier.</div>
</div>
<p><strong>Example of jsp implementation</strong></p>
<div class="highlight-jsp"><div class="highlight"><pre><span class="nt">&lt;form:checkboxes</span> <span class="na">items=</span><span class="s">&quot;${CL_AUTHORITIES}&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p><strong>Output HTML</strong></p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;span&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">&quot;authorities1&quot;</span> <span class="na">name=</span><span class="s">&quot;authorities&quot;</span> <span class="na">type=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">value=</span><span class="s">&quot;01&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;authorities1&quot;</span><span class="nt">&gt;</span>STAFF_MANAGEMENT<span class="nt">&lt;/label&gt;</span>
<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;span&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">&quot;authorities2&quot;</span> <span class="na">name=</span><span class="s">&quot;authorities&quot;</span> <span class="na">type=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">value=</span><span class="s">&quot;02&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;authorities2&quot;</span><span class="nt">&gt;</span>MASTER_MANAGEMENT<span class="nt">&lt;/label&gt;</span>
<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;span&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">&quot;authorities3&quot;</span> <span class="na">name=</span><span class="s">&quot;authorities&quot;</span> <span class="na">type=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">value=</span><span class="s">&quot;03&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;authorities3&quot;</span><span class="nt">&gt;</span>STOCK_MANAGEMENT<span class="nt">&lt;/label&gt;</span>
<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;span&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">&quot;authorities4&quot;</span> <span class="na">name=</span><span class="s">&quot;authorities&quot;</span> <span class="na">type=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">value=</span><span class="s">&quot;04&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;authorities4&quot;</span><span class="nt">&gt;</span>ORDER_MANAGEMENT<span class="nt">&lt;/label&gt;</span>
<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;span&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">&quot;authorities5&quot;</span> <span class="na">name=</span><span class="s">&quot;authorities&quot;</span> <span class="na">type=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">value=</span><span class="s">&quot;05&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;authorities5&quot;</span><span class="nt">&gt;</span>SHOW_SHOPPING_CENTER<span class="nt">&lt;/label&gt;</span>
<span class="nt">&lt;/span&gt;</span>
</pre></div>
</div>
<p><strong>Output screen</strong></p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/codelist_checkbox.png"><img alt="codelist checkbox" src="../_images/codelist_checkbox.png" style="width: 50%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id6">
<h4><a class="toc-backref" href="#id22">5.14.2.3.3. Using codelist in Java class</a><a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<p>For details on settings shown below, refer to <a class="reference internal" href="#serverside"><em>Using codelist in Java class</em></a> described earlier.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="how-to-use-simplei18ncodelist">
<span id="codelisti18n"></span><h3><a class="toc-backref" href="#id23">5.14.2.4. How to use SimpleI18nCodeList</a><a class="headerlink" href="#how-to-use-simplei18ncodelist" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.i18n.SimpleI18nCodeList</span></tt> is a codelist supporting internationalization.
By setting the codelist for each locale, the codelist corresponding to locale can be returned.</p>
<p><strong>SimpleI18nCodeList image</strong></p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/codelist-i18n.png"><img alt="codelist i18n" src="../_images/codelist-i18n.png" style="width: 100%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="example-of-setting-a-codelist">
<h4><a class="toc-backref" href="#id24">5.14.2.4.1. Example of setting a codelist</a><a class="headerlink" href="#example-of-setting-a-codelist" title="Permalink to this headline">¶</a></h4>
<p>It is easier to understand if you consider <tt class="docutils literal"><span class="pre">SimpleI18nCodeList</span></tt> as two dimensional table wherein row is <tt class="docutils literal"><span class="pre">Locale</span></tt>, column contains code values and cell details are labels.</p>
<p>The table would be as follows in case of a selectbox for selecting charges.</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="15%" />
<col width="15%" />
<col width="15%" />
<col width="15%" />
<col width="15%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head stub">row=Locale,column=Code</th>
<th class="head">0</th>
<th class="head">10000</th>
<th class="head">20000</th>
<th class="head">30000</th>
<th class="head">40000</th>
<th class="head">50000</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><th class="stub">en</th>
<td>unlimited</td>
<td>Less than $10,000</td>
<td>Less than $20,000</td>
<td>Less than $30,000</td>
<td>Less than $40,000</td>
<td>Less than $50,000</td>
</tr>
<tr class="row-odd"><th class="stub">ja</th>
<td>上限なし</td>
<td>10,000円以下</td>
<td>20,000円以下</td>
<td>30,000円以下</td>
<td>40,000円以下</td>
<td>50,000円以下</td>
</tr>
</tbody>
</table>
<p>For creating a codelist table that supports internationalization, <tt class="docutils literal"><span class="pre">SimpleI18nCodeList</span></tt> has been set in following 3 ways.</p>
<ul class="simple">
<li>Set <tt class="docutils literal"><span class="pre">CodeList</span></tt> for each locale by rows.</li>
<li>Set <tt class="docutils literal"><span class="pre">java.util.Map</span></tt>(key = code value, value = label) for each locale by rows.</li>
<li>Set <tt class="docutils literal"><span class="pre">java.util.Map</span></tt>(key = locale, value = label) for each code value by columns.</li>
</ul>
<p>It is recommended that you set the codelist using &#8220;Set <tt class="docutils literal"><span class="pre">CodeList</span></tt> for each locale by rows.&#8221; method.</p>
<p>The way of setting the <tt class="docutils literal"><span class="pre">CodeList</span></tt> for each locale by rows considering the above example of selectbox for selecting charges, is mentioned below.
For other setting methods, refer to <a class="reference internal" href="#aftercodelisti18n"><em>Setting SimpleI18nCodeList</em></a>.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Definition of Bean definition file (xxx-codelist.xml)</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_I18N_PRICE&quot;</span>
    <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.i18n.SimpleI18nCodeList&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;rowsByCodeList&quot;</span><span class="nt">&gt;</span> <span class="c">&lt;!-- (1) --&gt;</span>
        <span class="nt">&lt;util:map&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;en&quot;</span> <span class="na">value-ref=</span><span class="s">&quot;CL_PRICE_EN&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;ja&quot;</span> <span class="na">value-ref=</span><span class="s">&quot;CL_PRICE_JA&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/util:map&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Set Map wherein key is <tt class="docutils literal"><span class="pre">java.lang.Locale</span></tt>, in rowsByCodeList properties.</div>
<div class="line">In Map, specify locale in key and a reference link to codelist class corresponding to locale in value-ref.</div>
<div class="line">For Map values, refer to codelist class corresponding to each locale.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Definition of Bean definition file(xxx-codelist.xml) when creating SimpleMapCodeList for each locale</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_I18N_PRICE&quot;</span>
    <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.i18n.SimpleI18nCodeList&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;rowsByCodeList&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;util:map&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;en&quot;</span> <span class="na">value-ref=</span><span class="s">&quot;CL_PRICE_EN&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;ja&quot;</span> <span class="na">value-ref=</span><span class="s">&quot;CL_PRICE_JA&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/util:map&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_PRICE_EN&quot;</span> <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.SimpleMapCodeList&quot;</span><span class="nt">&gt;</span>  <span class="c">&lt;!-- (2) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;map&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;util:map&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;0&quot;</span> <span class="na">value=</span><span class="s">&quot;unlimited&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;10000&quot;</span> <span class="na">value=</span><span class="s">&quot;Less than $10,000&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;20000&quot;</span> <span class="na">value=</span><span class="s">&quot;Less than $20,000&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;30000&quot;</span> <span class="na">value=</span><span class="s">&quot;Less than $30,000&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;40000&quot;</span> <span class="na">value=</span><span class="s">&quot;Less than $40,000&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;50000&quot;</span> <span class="na">value=</span><span class="s">&quot;Less than $50,000&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/util:map&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_PRICE_JA&quot;</span> <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.SimpleMapCodeList&quot;</span><span class="nt">&gt;</span>  <span class="c">&lt;!-- (3) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;map&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;util:map&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;0&quot;</span> <span class="na">value=</span><span class="s">&quot;上限なし&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;10000&quot;</span> <span class="na">value=</span><span class="s">&quot;10,000円以下&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;20000&quot;</span> <span class="na">value=</span><span class="s">&quot;20,000円以下&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;30000&quot;</span> <span class="na">value=</span><span class="s">&quot;30,000円以下&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;40000&quot;</span> <span class="na">value=</span><span class="s">&quot;40,000円以下&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;50000&quot;</span> <span class="na">value=</span><span class="s">&quot;50,000円以下&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/util:map&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">For bean definition <tt class="docutils literal"><span class="pre">CL_PRICE_EN</span></tt> where locale is &#8220;en&#8221;, codelist class is set in <tt class="docutils literal"><span class="pre">SimpleMapCodeList</span></tt>.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">For bean definition <tt class="docutils literal"><span class="pre">CL_PRICE_JA</span></tt> where locale is &#8220;ja&#8221;, codelist class is set in <tt class="docutils literal"><span class="pre">SimpleMapCodeList</span></tt>.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Definition of Bean definition file(xxx-codelist.xml) when creating JdbcCodeList for each locale</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_I18N_PRICE&quot;</span>
    <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.i18n.SimpleI18nCodeList&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;rowsByCodeList&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;util:map&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;en&quot;</span> <span class="na">value-ref=</span><span class="s">&quot;CL_PRICE_EN&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;ja&quot;</span> <span class="na">value-ref=</span><span class="s">&quot;CL_PRICE_JA&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/util:map&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_PRICE_EN&quot;</span> <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.JdbcCodeList&quot;</span><span class="nt">&gt;</span>  <span class="c">&lt;!-- (4) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;dataSource&quot;</span> <span class="na">ref=</span><span class="s">&quot;dataSource&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;querySql&quot;</span>
        <span class="na">value=</span><span class="s">&quot;SELECT code, label FROM price WHERE locale = &#39;en&#39; ORDER BY code&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;valueColumn&quot;</span> <span class="na">value=</span><span class="s">&quot;code&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;labelColumn&quot;</span> <span class="na">value=</span><span class="s">&quot;label&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_PRICE_JA&quot;</span> <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.JdbcCodeList&quot;</span><span class="nt">&gt;</span>  <span class="c">&lt;!-- (5) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;dataSource&quot;</span> <span class="na">ref=</span><span class="s">&quot;dataSource&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;querySql&quot;</span>
        <span class="na">value=</span><span class="s">&quot;SELECT code, label FROM price WHERE locale = &#39;ja&#39; ORDER BY code&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;valueColumn&quot;</span> <span class="na">value=</span><span class="s">&quot;code&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;labelColumn&quot;</span> <span class="na">value=</span><span class="s">&quot;label&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">For bean definition <tt class="docutils literal"><span class="pre">CL_PRICE_EN</span></tt> where locale is &#8220;en&#8221;, codelist class is set in <tt class="docutils literal"><span class="pre">JdbcCodeList</span></tt>.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">For bean definition <tt class="docutils literal"><span class="pre">CL_PRICE_JA</span></tt> where locale is &#8220;ja&#8221;, codelist class is set in <tt class="docutils literal"><span class="pre">JdbcCodeList</span></tt>.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Insert the following data in Table Definition (price table).</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">locale</th>
<th class="head">code</th>
<th class="head">label</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">en</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">0</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">unlimited</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">en</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">10000</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Less than $10,000</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">en</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">20000</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Less than $20,000</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">en</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">30000</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Less than $30,000</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">en</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">40000</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Less than $40,000</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">en</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">50000</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Less than $50,000</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">ja</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">0</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">上限なし</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">ja</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">10000</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">10,000円以下</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">ja</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">20000</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">20,000円以下</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">ja</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">30000</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">30,000円以下</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">ja</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">40000</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">40,000円以下</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">ja</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">50000</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">50,000円以下</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Currently <tt class="docutils literal"><span class="pre">SimpleI18nCodeList</span></tt> does not support reloadable functionality.
It should be noted that even if <tt class="docutils literal"><span class="pre">JdbcCodeList</span></tt> (reloadable CodeList) referred by <tt class="docutils literal"><span class="pre">SimpleI18nCodeList</span></tt> is reloaded, it does not get reflected in <tt class="docutils literal"><span class="pre">SimpleI18nCodeList</span></tt>.
In order to make it reloadable, it should be implemented independently.
For implementation method, refer to <a class="reference internal" href="#originalcustomizecodelist"><em>Customizing the codelist independently</em></a>.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id7">
<h4><a class="toc-backref" href="#id25">5.14.2.4.2. Using codelist in JSP</a><a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<p>Description of basic settings is omitted since it is same as <a class="reference internal" href="#clientside"><em>Using codelist in JSP</em></a> described earlier.</p>
<p><strong>Definition of Bean definition file(spring-mvc.xml)</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;mvc:interceptors&gt;</span>
  <span class="nt">&lt;mvc:interceptor&gt;</span>
    <span class="nt">&lt;mvc:mapping</span> <span class="na">path=</span><span class="s">&quot;/**&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;bean</span>
      <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.web.codelist.CodeListInterceptor&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;codeListIdPattern&quot;</span> <span class="na">value=</span><span class="s">&quot;CL_.+&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;fallbackTo&quot;</span> <span class="na">value=</span><span class="s">&quot;en&quot;</span> <span class="nt">/&gt;</span>  <span class="c">&lt;!-- (1) --&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>
  <span class="nt">&lt;/mvc:interceptor&gt;</span>

  <span class="c">&lt;!-- omitted --&gt;</span>

<span class="nt">&lt;/mvc:interceptors&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">When request locale is not defined in codelist,</div>
<div class="line">codelist is fetched using the locale set in fallbackTo property.</div>
<div class="line">When fallbackTo property is not set, default JVM locale is used as fallbackTo property.</div>
<div class="line">When codelist cannot be fetched even after using the locale set in fallbackTo property, WARN log is output and empty Map is returned.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Example of jsp implementation</strong></p>
<div class="highlight-jsp"><div class="highlight"><pre><span class="nt">&lt;form:select</span> <span class="na">path=</span><span class="s">&quot;basePrice&quot;</span> <span class="na">items=</span><span class="s">&quot;${CL_I18N_PRICE}&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p><strong>Output HTML lang=en</strong></p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;basePrice&quot;</span> <span class="na">name=</span><span class="s">&quot;basePrice&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span>unlimited<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>Less than $10,000<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">&gt;</span>Less than $20,000<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;3&quot;</span><span class="nt">&gt;</span>Less than $30,000<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;4&quot;</span><span class="nt">&gt;</span>Less than $40,000<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;5&quot;</span><span class="nt">&gt;</span>Less than $50,000<span class="nt">&lt;/option&gt;</span>
<span class="nt">&lt;/select&gt;</span>
</pre></div>
</div>
<p><strong>Output HTML lang=ja</strong></p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;basePrice&quot;</span> <span class="na">name=</span><span class="s">&quot;basePrice&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span>上限なし<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>10,000円以下<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">&gt;</span>20,000円以下<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;3&quot;</span><span class="nt">&gt;</span>30,000円以下<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;4&quot;</span><span class="nt">&gt;</span>40,000円以下<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;5&quot;</span><span class="nt">&gt;</span>50,000円以下<span class="nt">&lt;/option&gt;</span>
<span class="nt">&lt;/select&gt;</span>
</pre></div>
</div>
<p><strong>Output screen lang=en</strong></p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/codelist_i18n_en.png"><img alt="codelist i18n en" src="../_images/codelist_i18n_en.png" style="width: 20%;" /></a>
</div>
<p><strong>Output screen lang=ja</strong></p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/codelist_i18n_ja.png"><img alt="codelist i18n ja" src="../_images/codelist_i18n_ja.png" style="width: 20%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id8">
<h4><a class="toc-backref" href="#id26">5.14.2.4.3. Using codelist in Java class</a><a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<p>Description of basic settings is omitted since it is same as <a class="reference internal" href="#serverside"><em>Using codelist in Java class</em></a> described earlier.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&quot;orders&quot;</span><span class="o">)</span>
<span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrderController</span> <span class="o">{</span>

    <span class="nd">@Inject</span>
    <span class="nd">@Named</span><span class="o">(</span><span class="s">&quot;CL_I18N_PRICE&quot;</span><span class="o">)</span>
    <span class="n">I18nCodeList</span> <span class="n">priceCodeList</span><span class="o">;</span>

    <span class="c1">// ...</span>

    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">POST</span><span class="o">,</span> <span class="n">params</span> <span class="o">=</span> <span class="s">&quot;confirm&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">confirm</span><span class="o">(</span><span class="n">OrderForm</span> <span class="n">form</span><span class="o">,</span> <span class="n">Locale</span> <span class="n">locale</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// ...</span>
        <span class="n">String</span> <span class="n">priceMassage</span> <span class="o">=</span> <span class="n">getPriceMessage</span><span class="o">(</span><span class="n">form</span><span class="o">.</span><span class="na">getPriceCode</span><span class="o">(),</span> <span class="n">locale</span><span class="o">);</span>
        <span class="c1">// ...</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="nf">getPriceMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">targetPrice</span><span class="o">,</span> <span class="n">Locale</span> <span class="n">locale</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">return</span> <span class="n">priceCodeList</span><span class="o">.</span><span class="na">asMap</span><span class="o">(</span><span class="n">locale</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="n">targetPrice</span><span class="o">);</span>  <span class="c1">// (1)</span>
    <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Map of locale corresponding to I18nCodeList#asMap(Locale) can be fetched.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="input-validation-of-code-value-using-codelist">
<span id="codelist-validate"></span><h3><a class="toc-backref" href="#id27">5.14.2.5. Input validation of code value using codelist</a><a class="headerlink" href="#input-validation-of-code-value-using-codelist" title="Permalink to this headline">¶</a></h3>
<p>When checking whether the input value is the code value defined in codelist,
<tt class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.ExistInCodeList</span></tt> annotation for BeanValidation is provided in common library.</p>
<p>For details on BeanValidation and message output method, refer to <a class="reference internal" href="Validation.html"><em>Input Validation</em></a>.</p>
<p>See below the default message definition that provided by common library.
Please change the message to fit the application requirements.</p>
<div class="highlight-properties"><div class="highlight"><pre><span class="na">org.terasoluna.gfw.common.codelist.ExistInCodeList.message</span> <span class="o">=</span> <span class="s">Does not exist in {codeListId}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>In the terasoluna-gfw-common 5.0.0.RELEASE or later,
the property key has been changed to standard format of Bean Validation(FQCN of annotation class + <tt class="docutils literal"><span class="pre">.message</span></tt>).</p>
<p>See below the default message definition in the version 1.0.x.RELEASE.</p>
<blockquote>
<div><div class="highlight-properties"><div class="highlight"><pre><span class="na">org.terasoluna.gfw.common.codelist.ExistInCodeList</span> <span class="o">=</span> <span class="s">Does not exist in {codeListId}</span>
</pre></div>
</div>
</div></blockquote>
<p class="last">If have change the message to fit the application requirements,
need to change the property key when migrate to the version 5.0.0.RELEASE from the version 1.0.x.RELEASE.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="example-of-existincodelist-settings">
<h4><a class="toc-backref" href="#id28">5.14.2.5.1. Example of &#64;ExistInCodeList settings</a><a class="headerlink" href="#example-of-existincodelist-settings" title="Permalink to this headline">¶</a></h4>
<p>See below the example of input validation method using codelist.</p>
<p><strong>Definition of Bean definition file(xxx-codelist.xml)</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_GENDER&quot;</span> <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.SimpleMapCodeList&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;map&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;map&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;M&quot;</span> <span class="na">value=</span><span class="s">&quot;Male&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;F&quot;</span> <span class="na">value=</span><span class="s">&quot;Female&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/map&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<p><strong>Form object</strong></p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Person</span> <span class="o">{</span>
    <span class="nd">@ExistInCodeList</span><span class="o">(</span><span class="n">codeListId</span> <span class="o">=</span> <span class="s">&quot;CL_GENDER&quot;</span><span class="o">)</span>  <span class="c1">// (1)</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">gender</span><span class="o">;</span>

    <span class="c1">// getter and setter omitted</span>
<span class="o">}</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Set <tt class="docutils literal"><span class="pre">&#64;ExistInCodeList</span></tt> annotation for the field for which input is to be validated,</div>
<div class="line">and specify the target codelist in codeListId.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>As a result of above settings, when characters other than M, F are stored in <tt class="docutils literal"><span class="pre">gender</span></tt>, the system throws an error.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last"><tt class="docutils literal"><span class="pre">&#64;ExistInCodeList</span></tt> input validation supports only <tt class="docutils literal"><span class="pre">String</span></tt> or <tt class="docutils literal"><span class="pre">Character</span></tt> data types.
Therefore, even if the fields with <tt class="docutils literal"><span class="pre">&#64;ExistInCodeList</span></tt> may contain integer values, they should be defined as String data type. (such as Year/Month/Day)</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
</div>
<div class="section" id="how-to-extend">
<h2><a class="toc-backref" href="#id29">5.14.3. How to extend</a><a class="headerlink" href="#how-to-extend" title="Permalink to this headline">¶</a></h2>
<div class="section" id="when-large-number-of-records-need-to-be-read-from-jdbccodelist">
<span id="settingfetchsize"></span><h3><a class="toc-backref" href="#id30">5.14.3.1. When large number of records need to be read from JdbcCodeList</a><a class="headerlink" href="#when-large-number-of-records-need-to-be-read-from-jdbccodelist" title="Permalink to this headline">¶</a></h3>
<p>When large number of records (in hundreds) need to be read from JdbcCodeList, Web application takes time to start.</p>
<p>This is because all records may be fetched at the same time during DB inquiry and it may take time to fetch the list from DB.
(fetchSize may be set to Fetch All by default.)</p>
<p>This problem can be resolved by specifying appropriate value for fetchSize.
In order to change the fetchSize, it is necessary to set the fetchSize of <tt class="docutils literal"><span class="pre">org.springframework.jdbc.core.JdbcTemplate</span></tt>.</p>
<p>See the example below.</p>
<p><strong>Definition of Bean definition file(xxx-infra.xml)</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;jdbcTemplateForCodeList&quot;</span> <span class="na">class=</span><span class="s">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span> <span class="nt">&gt;</span> <span class="c">&lt;!-- (1) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;dataSource&quot;</span> <span class="na">ref=</span><span class="s">&quot;dataSource&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;fetchSize&quot;</span> <span class="na">value=</span><span class="s">&quot;1000&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (2) --&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;AbstractJdbcCodeList&quot;</span>
    <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.JdbcCodeList&quot;</span> <span class="na">abstract=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span> <span class="c">&lt;!-- (3) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;jdbcTemplate&quot;</span> <span class="na">ref=</span><span class="s">&quot;jdbcTemplateForCodeList&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (4) --&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_AUTHORITIES&quot;</span> <span class="na">parent=</span><span class="s">&quot;AbstractJdbcCodeList&quot;</span> <span class="nt">&gt;</span><span class="c">&lt;!-- (5) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;querySql&quot;</span>
        <span class="na">value=</span><span class="s">&quot;SELECT authority_id, authority_name FROM authority ORDER BY authority_id&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;valueColumn&quot;</span> <span class="na">value=</span><span class="s">&quot;authority_id&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;labelColumn&quot;</span> <span class="na">value=</span><span class="s">&quot;authority_name&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define a bean of <tt class="docutils literal"><span class="pre">org.springframework.jdbc.core.JdbcTemplate</span></tt> class.</div>
<div class="line">It is necessary for setting the fetchSize independently.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Set an appropriate value for the fetchSize.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define a common bean of JdbcCodeList.</div>
<div class="line">Common parts of other JdbcCodeList are set. Therefore, for bean definition of basic JdbcCodeList, set this bean definition in parent class.</div>
<div class="line">This bean class cannot be instantiated by setting <tt class="docutils literal"><span class="pre">abstract</span></tt> attribute to true.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Set the jdbcTemplate referring to (1).</div>
<div class="line">JdbcTemplate for which fetchSize value is set is stored in JdbcCodeList.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Bean definition of JdbcCodeList</div>
<div class="line">By setting Bean defined in (3) as parent class in parent attribute, JdbcCodeList is set with fetchSize.</div>
<div class="line">In this bean definition, only the query related settings are carried out and the required CodeList is created.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="when-reloading-the-codelist">
<span id="codelisttaskscheduler"></span><h3><a class="toc-backref" href="#id31">5.14.3.2. When reloading the codelist</a><a class="headerlink" href="#when-reloading-the-codelist" title="Permalink to this headline">¶</a></h3>
<p>Codelist provided in common library is read at the time of launching the application and it is never updated subsequently.
However, in some cases, when the master data of the codelist is updated, the codelist also needs to be updated.</p>
<p>Example: Updating the codelist when DB master is updated using JdbcCodeList.</p>
<p>Common library provides <tt class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.ReloadableCodeList</span></tt> interface.
The class implementing the above interface, implements refresh method. Codelist can be updated by calling this refresh method.
JdbcCodeList implements ReloadableCodeList interface; hence it is possible to update the codelist.</p>
<p>Codelist can be updated in following two ways.</p>
<ol class="arabic simple">
<li>By using Task Scheduler</li>
<li>By calling refresh method in Controller (Service) class</li>
</ol>
<p>This guideline recommends the method to reload the codelist periodically using <a class="reference external" href="http://docs.spring.io/spring/docs/4.1.4.RELEASE/spring-framework-reference/html/scheduling.html">Spring Task Scheduler</a>.</p>
<p>However, when it is necessary to arbitrarily refresh the codelist, it is appropriate to call refresh method in Controller class.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For the codelist having ReloadableCodeList interface, refer to <a class="reference internal" href="#listofcodelist"><em>List of codelist types</em></a>.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="using-task-scheduler">
<h4><a class="toc-backref" href="#id32">5.14.3.2.1. Using Task Scheduler</a><a class="headerlink" href="#using-task-scheduler" title="Permalink to this headline">¶</a></h4>
<p>Example for setting the Task Scheduler is shown below.</p>
<p><strong>Definition of Bean definition file(xxx-codelist.xml)</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;task:scheduler</span> <span class="na">id=</span><span class="s">&quot;taskScheduler&quot;</span> <span class="na">pool-size=</span><span class="s">&quot;10&quot;</span><span class="nt">/&gt;</span>  <span class="c">&lt;!-- (1) --&gt;</span>

<span class="nt">&lt;task:scheduled-tasks</span> <span class="na">scheduler=</span><span class="s">&quot;taskScheduler&quot;</span><span class="nt">&gt;</span>  <span class="c">&lt;!-- (2) --&gt;</span>
    <span class="nt">&lt;task:scheduled</span> <span class="na">ref=</span><span class="s">&quot;CL_AUTHORITIES&quot;</span> <span class="na">method=</span><span class="s">&quot;refresh&quot;</span> <span class="na">cron=</span><span class="s">&quot;${cron.codelist.refreshTime}&quot;</span><span class="nt">/&gt;</span>  <span class="c">&lt;!-- (3) --&gt;</span>
<span class="nt">&lt;/task:scheduled-tasks&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_AUTHORITIES&quot;</span> <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.JdbcCodeList&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;dataSource&quot;</span> <span class="na">ref=</span><span class="s">&quot;dataSource&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;querySql&quot;</span>
        <span class="na">value=</span><span class="s">&quot;SELECT authority_id, authority_name FROM authority ORDER BY authority_id&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;valueColumn&quot;</span> <span class="na">value=</span><span class="s">&quot;authority_id&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;labelColumn&quot;</span> <span class="na">value=</span><span class="s">&quot;authority_name&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify the thread pool size in pool-size attribute of <tt class="docutils literal"><span class="pre">&lt;task:scheduler&gt;</span></tt> element.</div>
<div class="line">When pool-size attribute is not specified, the value is set to &#8220;1&#8221;.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define <tt class="docutils literal"><span class="pre">&lt;task:scheduled-tasks&gt;</span></tt> element and set <tt class="docutils literal"><span class="pre">&lt;task:scheduler&gt;</span></tt> ID in scheduler attribute.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define <tt class="docutils literal"><span class="pre">&lt;task:scheduled&gt;</span></tt> element. Specify refresh method in method attribute.</div>
<div class="line">In cron attribute, the value should be mentioned in <tt class="docutils literal"><span class="pre">org.springframework.scheduling.support.CronSequenceGenerator</span></tt> supported format.</div>
<div class="line">Reload timing for cron attribute may change with development environment and commercial environment; hence it is recommended to fetch the codelist from property file or environment variable.</div>
<div class="line"><br /></div>
<div class="line"><strong>Example of setting cron attribute</strong></div>
<div class="line">Specify in &#8220;Seconds Minutes Hours Month Year Day&#8221;.</div>
<div class="line">execution every second                      &#8220;* * * * * *&#8221;</div>
<div class="line">execution every hour                        &#8220;0 0 * * * *&#8221;</div>
<div class="line">execution every hour 9:00-17:00 on weekdays &#8220;0 0 9-17 * * MON-FRI&#8221;</div>
<div class="line"><br /></div>
<div class="line">For details, refer to JavaDoc.</div>
<div class="line"><a class="reference external" href="http://docs.spring.io/spring/docs/4.1.4.RELEASE/javadoc-api/org/springframework/scheduling/support/CronSequenceGenerator.html">http://docs.spring.io/spring/docs/4.1.4.RELEASE/javadoc-api/org/springframework/scheduling/support/CronSequenceGenerator.html</a></div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="calling-refresh-method-in-controller-service-class">
<h4><a class="toc-backref" href="#id33">5.14.3.2.2. Calling refresh method in Controller (Service) class</a><a class="headerlink" href="#calling-refresh-method-in-controller-service-class" title="Permalink to this headline">¶</a></h4>
<p>See the example below for directly calling refresh method of JdbcCodeList in Service class.</p>
<p><strong>Definition of Bean definition file(xxx-codelist.xml)</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_AUTHORITIES&quot;</span> <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.JdbcCodeList&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;dataSource&quot;</span> <span class="na">ref=</span><span class="s">&quot;dataSource&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;querySql&quot;</span>
        <span class="na">value=</span><span class="s">&quot;SELECT authority_id, authority_name FROM authority ORDER BY authority_id&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;valueColumn&quot;</span> <span class="na">value=</span><span class="s">&quot;authority_id&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;labelColumn&quot;</span> <span class="na">value=</span><span class="s">&quot;authority_name&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<p><strong>Controller class</strong></p>
<div class="highlight-java"><div class="highlight"><pre><span class="nd">@Controller</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;codelist&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CodeListContoller</span> <span class="o">{</span>

    <span class="nd">@Inject</span>
    <span class="n">CodeListService</span> <span class="n">codeListService</span><span class="o">;</span> <span class="c1">// (1)</span>

    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">,</span> <span class="n">params</span> <span class="o">=</span> <span class="s">&quot;refresh&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">refreshJdbcCodeList</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">codeListService</span><span class="o">.</span><span class="na">refresh</span><span class="o">();</span> <span class="c1">// (2)</span>
        <span class="k">return</span> <span class="s">&quot;codelist/jdbcCodeList&quot;</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Inject the Service class that executes refresh method of ReloadableCodeList class.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Execute the refresh method of Service class that executes refresh method of ReloadableCodeList class.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p><strong>Service class</strong></p>
<p>The description below is given only for the implementation class. Description for interface class has been omitted.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CodeListServiceImpl</span> <span class="kd">implements</span> <span class="n">CodeListService</span> <span class="o">{</span> <span class="c1">// (3)</span>

    <span class="nd">@Inject</span>
    <span class="nd">@Named</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;CL_AUTHORITIES&quot;</span><span class="o">)</span> <span class="c1">// (4)</span>
    <span class="n">ReloadableCodeList</span> <span class="n">codeListItem</span><span class="o">;</span> <span class="c1">// (5)</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">refresh</span><span class="o">()</span> <span class="o">{</span> <span class="c1">// (6)</span>
        <span class="n">codeListItem</span><span class="o">.</span><span class="na">refresh</span><span class="o">();</span> <span class="c1">// (7)</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Implement <tt class="docutils literal"><span class="pre">CodeListService</span></tt> interface for <tt class="docutils literal"><span class="pre">CodeListServiceImpl</span></tt> class.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify the corresponding codelist using <tt class="docutils literal"><span class="pre">&#64;Named</span></tt> annotation at the time of injecting the codelist.</div>
<div class="line">ID of the bean to be fetched should be specified in <tt class="docutils literal"><span class="pre">value</span></tt> attribute.</div>
<div class="line">Codelist of ID attribute &#8220;CL_AUTHORITIES&#8221; of bean tag defined in Bean definition file is injected.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">ReloadableCodeList interface should be defined in field type.</div>
<div class="line">ReloadableCodeList interface should be implemented for Bean specified in (4).</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(6)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">refresh method defined in Service class</div>
<div class="line">is called from Controller class.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(7)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">refresh method of codelist wherein ReloadableCodeList interface is implemented.</div>
<div class="line">Codelist is updated by executing refresh method.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="customizing-the-codelist-independently">
<span id="originalcustomizecodelist"></span><h3><a class="toc-backref" href="#id34">5.14.3.3. Customizing the codelist independently</a><a class="headerlink" href="#customizing-the-codelist-independently" title="Permalink to this headline">¶</a></h3>
<p>In order to create a codelist which does not fall under the 4 types provided by the common library, the existing codelist can be customized independently.
Refer to the table below for the implementation method and type of codelist that can be created.</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="15%" />
<col width="30%" />
<col width="45%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Reloadable</th>
<th class="head">Class to be inherited</th>
<th class="head">Implementation location</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Not required</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.AbstractCodeList</span></tt></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Override <tt class="docutils literal"><span class="pre">asMap</span></tt></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Required</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.AbstractReloadableCodeList</span></tt></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Override <tt class="docutils literal"><span class="pre">retrieveMap</span></tt></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>The codelist can be customized by directly implementing <tt class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.CodeList</span></tt> and <tt class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.ReloadableCodeList</span></tt> interfaces; however extending the abstract class provided in common library minimizes the implementation efforts.</p>
<p>Actual example of independent customization is shown below.
It illustrates a codelist for creating a list of current year and the next year.
(Example: If current year is 2013, it is stored in codelist in the order of &#8220;2013, 2014&#8221;.)</p>
<p><strong>Codelist class</strong></p>
<div class="highlight-java"><div class="highlight"><pre><span class="nd">@Component</span><span class="o">(</span><span class="s">&quot;CL_YEAR&quot;</span><span class="o">)</span> <span class="c1">// (1)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DepYearCodeList</span> <span class="kd">extends</span> <span class="n">AbstractCodeList</span> <span class="o">{</span> <span class="c1">// (2)</span>

    <span class="nd">@Inject</span>
    <span class="n">JodaTimeDateFactory</span> <span class="n">dateFactory</span><span class="o">;</span> <span class="c1">// (3)</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">asMap</span><span class="o">()</span> <span class="o">{</span>  <span class="c1">// (4)</span>
        <span class="n">DateTime</span> <span class="n">dateTime</span> <span class="o">=</span> <span class="n">dateFactory</span><span class="o">.</span><span class="na">newDateTime</span><span class="o">();</span>
        <span class="n">DateTime</span> <span class="n">nextYearDateTime</span> <span class="o">=</span> <span class="n">dateTime</span><span class="o">.</span><span class="na">plusYears</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>

        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">depYearMap</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkedHashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;();</span>

        <span class="n">String</span> <span class="n">thisYear</span> <span class="o">=</span> <span class="n">dateTime</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="s">&quot;Y&quot;</span><span class="o">);</span>
        <span class="n">String</span> <span class="n">nextYear</span> <span class="o">=</span> <span class="n">nextYearDateTime</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="s">&quot;Y&quot;</span><span class="o">);</span>
        <span class="n">depYearMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">thisYear</span><span class="o">,</span> <span class="n">thisYear</span><span class="o">);</span>
        <span class="n">depYearMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">nextYear</span><span class="o">,</span> <span class="n">nextYear</span><span class="o">);</span>

        <span class="k">return</span> <span class="n">Collections</span><span class="o">.</span><span class="na">unmodifiableMap</span><span class="o">(</span><span class="n">depYearMap</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Register the codelist as a component using <tt class="docutils literal"><span class="pre">&#64;Component</span></tt> annotation.</div>
<div class="line">By specifying <tt class="docutils literal"><span class="pre">&quot;CL_YEAR&quot;</span></tt> in Value, register the codelist as a component using the codelist intercept set in bean definition.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Inherit <tt class="docutils literal"><span class="pre">org.terasoluna.gfw.common.codelist.AbstractCodeList</span></tt>.</div>
<div class="line">When creating the list of current year and next year, reloading is not necessary since it is created dynamically by calculating from system date.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">org.terasoluna.gfw.common.date.jodatime.JodaTimeDateFactory</span></tt> creating the Date class of system date is injected.</div>
<div class="line">Current year and next year can be fetched using <tt class="docutils literal"><span class="pre">JodaTimeDateFactory</span></tt>.</div>
<div class="line">Class that implements <tt class="docutils literal"><span class="pre">JodaTimeDateFactory</span></tt> interface should be set in advance in bean definition file.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Override <tt class="docutils literal"><span class="pre">asMap()</span></tt> method and create the list of current year and next year.</div>
<div class="line">Implementation differs with every created codelist.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Example of jsp implementation</strong></p>
<div class="highlight-jsp"><div class="highlight"><pre><span class="nt">&lt;form:select</span> <span class="na">path=</span><span class="s">&quot;mostRecentYear&quot;</span> <span class="na">items=</span><span class="s">&quot;${CL_YEAR}&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (5) --&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">&quot;CL_YEAR&quot;</span></tt> registered as component in items attribute should be specified in <tt class="docutils literal"><span class="pre">${}</span></tt> placeholder to fetch the corresponding codelist.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p><strong>Output HTML</strong></p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;mostRecentYear&quot;</span> <span class="na">name=</span><span class="s">&quot;mostRecentYear&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2013&quot;</span><span class="nt">&gt;</span>2013<span class="nt">&lt;/option&gt;</span>
   <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2014&quot;</span><span class="nt">&gt;</span>2014<span class="nt">&lt;/option&gt;</span>
<span class="nt">&lt;/select&gt;</span>
</pre></div>
</div>
<p><strong>Output screen</strong></p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/codelist_customizeCodelist.png"><img alt="customized codelist" src="../_images/codelist_customizeCodelist.png" style="width: 10%;" /></a>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Implementation should be made thread-safe at the time of customizing the reloadable CodeList independently.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="appendix">
<h2><a class="toc-backref" href="#id35">5.14.4. Appendix</a><a class="headerlink" href="#appendix" title="Permalink to this headline">¶</a></h2>
<div class="section" id="setting-simplei18ncodelist">
<span id="aftercodelisti18n"></span><h3><a class="toc-backref" href="#id36">5.14.4.1. Setting SimpleI18nCodeList</a><a class="headerlink" href="#setting-simplei18ncodelist" title="Permalink to this headline">¶</a></h3>
<p>Apart from the settings mentioned in <a class="reference internal" href="#codelisti18n"><em>How to use SimpleI18nCodeList</em></a>, SimpleI18nCodeList can be set in following 2 ways.
The respective setting methods are explained using the example of selectbox for selecting charges.</p>
<div class="section" id="set-java-util-map-key-code-value-value-label-for-each-locale-by-rows">
<h4><a class="toc-backref" href="#id37">5.14.4.1.1. Set <tt class="docutils literal"><span class="pre">java.util.Map</span></tt> (key = code value, value = label) for each locale by rows</a><a class="headerlink" href="#set-java-util-map-key-code-value-value-label-for-each-locale-by-rows" title="Permalink to this headline">¶</a></h4>
<p><strong>Definition of Bean definition file(xxx-codelist.xml)</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_I18N_PRICE&quot;</span>
    <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.i18n.SimpleI18nCodeList&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;rows&quot;</span><span class="nt">&gt;</span> <span class="c">&lt;!-- (1) --&gt;</span>
        <span class="nt">&lt;util:map&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;util:map&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;0&quot;</span> <span class="na">value=</span><span class="s">&quot;unlimited&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;10000&quot;</span> <span class="na">value=</span><span class="s">&quot;Less than $10,000&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;20000&quot;</span> <span class="na">value=</span><span class="s">&quot;Less than $20,000&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;30000&quot;</span> <span class="na">value=</span><span class="s">&quot;Less than $30,000&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;40000&quot;</span> <span class="na">value=</span><span class="s">&quot;Less than $40,000&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;50000&quot;</span> <span class="na">value=</span><span class="s">&quot;Less than $50,000&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/util:map&gt;</span>
            <span class="nt">&lt;/entry&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;ja&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;util:map&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;0&quot;</span> <span class="na">value=</span><span class="s">&quot;unlimited&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;10000&quot;</span> <span class="na">value=</span><span class="s">&quot;10,000円以下&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;20000&quot;</span> <span class="na">value=</span><span class="s">&quot;20,000円以下&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;30000&quot;</span> <span class="na">value=</span><span class="s">&quot;30,000円以下&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;40000&quot;</span> <span class="na">value=</span><span class="s">&quot;40,000円以下&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;50000&quot;</span> <span class="na">value=</span><span class="s">&quot;50,000円以下&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/util:map&gt;</span>
            <span class="nt">&lt;/entry&gt;</span>
        <span class="nt">&lt;/util:map&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Set &#8220;Map of Map&#8221; for rows property. External Map key is <tt class="docutils literal"><span class="pre">java.lang.Locale</span></tt>.</div>
<div class="line">Internal Map key is a code value and value is a label corresponding to locale.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="set-java-util-map-key-locale-value-label-for-each-code-value-by-columns">
<h4><a class="toc-backref" href="#id38">5.14.4.1.2. Set <tt class="docutils literal"><span class="pre">java.util.Map</span></tt>(key = locale, value = label) for each code value by columns</a><a class="headerlink" href="#set-java-util-map-key-locale-value-label-for-each-code-value-by-columns" title="Permalink to this headline">¶</a></h4>
<p><strong>Definition of Bean definition file(xxx-codelist.xml)</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_I18N_PRICE&quot;</span>
    <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.i18n.SimpleI18nCodeList&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;columns&quot;</span><span class="nt">&gt;</span> <span class="c">&lt;!-- (1) --&gt;</span>
        <span class="nt">&lt;util:map&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;util:map&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;en&quot;</span> <span class="na">value=</span><span class="s">&quot;unlimited&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;ja&quot;</span> <span class="na">value=</span><span class="s">&quot;上限なし&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/util:map&gt;</span>
            <span class="nt">&lt;/entry&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;10000&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;util:map&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;en&quot;</span> <span class="na">value=</span><span class="s">&quot;Less than $10,000&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;ja&quot;</span> <span class="na">value=</span><span class="s">&quot;10,000円以下&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/util:map&gt;</span>
            <span class="nt">&lt;/entry&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;20000&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;util:map&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;en&quot;</span> <span class="na">value=</span><span class="s">&quot;Less than $20,000&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;ja&quot;</span> <span class="na">value=</span><span class="s">&quot;20,000円以下&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/util:map&gt;</span>
            <span class="nt">&lt;/entry&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;30000&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;util:map&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;en&quot;</span> <span class="na">value=</span><span class="s">&quot;Less than $30,000&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;ja&quot;</span> <span class="na">value=</span><span class="s">&quot;30,000円以下&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/util:map&gt;</span>
            <span class="nt">&lt;/entry&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;40000&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;util:map&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;en&quot;</span> <span class="na">value=</span><span class="s">&quot;Less than $40,000&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;ja&quot;</span> <span class="na">value=</span><span class="s">&quot;40,000円以下&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/util:map&gt;</span>
            <span class="nt">&lt;/entry&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;50000&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;util:map&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;en&quot;</span> <span class="na">value=</span><span class="s">&quot;Less than $50,000&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;ja&quot;</span> <span class="na">value=</span><span class="s">&quot;50,000円以下&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/util:map&gt;</span>
            <span class="nt">&lt;/entry&gt;</span>
        <span class="nt">&lt;/util:map&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Set &#8220;Map of Map&#8221; for columns property. External Map key is a code value.</div>
<div class="line">Internal Map key is <tt class="docutils literal"><span class="pre">java.lang.Locale</span></tt> and value is a label corresponding to locale.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="variations-of-numberrangecodelist">
<span id="codelistappendixnumberrangecodelistvariation"></span><h3><a class="toc-backref" href="#id39">5.14.4.2. Variations of NumberRangeCodeList</a><a class="headerlink" href="#variations-of-numberrangecodelist" title="Permalink to this headline">¶</a></h3>
<div class="section" id="create-the-descending-numberrangecodelist">
<h4><a class="toc-backref" href="#id40">5.14.4.2.1. Create the Descending NumberRangeCodeList</a><a class="headerlink" href="#create-the-descending-numberrangecodelist" title="Permalink to this headline">¶</a></h4>
<p>Example of setting To value &lt; From value is shown below.</p>
<p><strong>Definition of Bean definition file(xxx-codelist.xml)</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_BIRTH_YEAR&quot;</span>
    <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.NumberRangeCodeList&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;from&quot;</span> <span class="na">value=</span><span class="s">&quot;2013&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (1) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;to&quot;</span> <span class="na">value=</span><span class="s">&quot;2000&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (2) --&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify the range start value. Specify a value greater than the one specified in &#8220;value&#8221; attribute of &#8220;to&#8221; property.</div>
<div class="line">As per this specification, display the values decreased in accordance with the interval in To-From range in descending order.</div>
<div class="line">Since interval is not set, default value 1 is applied.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify the range end value.</div>
<div class="line">In this example, since 2000 is specified as range end value; the value is reduced by 1 and stored in descending order from 2013 to 2000.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Example of jsp implementation</strong></p>
<div class="highlight-jsp"><div class="highlight"><pre><span class="nt">&lt;form:select</span> <span class="na">path=</span><span class="s">&quot;birthYear&quot;</span> <span class="na">items=</span><span class="s">&quot;${CL_BIRTH_YEAR}&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p><strong>Output HTML</strong></p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;birthYear&quot;</span> <span class="na">name=</span><span class="s">&quot;birthYear&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2013&quot;</span><span class="nt">&gt;</span>2013<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2012&quot;</span><span class="nt">&gt;</span>2012<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2011&quot;</span><span class="nt">&gt;</span>2011<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2010&quot;</span><span class="nt">&gt;</span>2010<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2009&quot;</span><span class="nt">&gt;</span>2009<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2008&quot;</span><span class="nt">&gt;</span>2008<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2007&quot;</span><span class="nt">&gt;</span>2007<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2006&quot;</span><span class="nt">&gt;</span>2006<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2005&quot;</span><span class="nt">&gt;</span>2005<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2004&quot;</span><span class="nt">&gt;</span>2004<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2003&quot;</span><span class="nt">&gt;</span>2003<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2002&quot;</span><span class="nt">&gt;</span>2002<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2001&quot;</span><span class="nt">&gt;</span>2001<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2000&quot;</span><span class="nt">&gt;</span>2000<span class="nt">&lt;/option&gt;</span>
<span class="nt">&lt;/select&gt;</span>
</pre></div>
</div>
<p><strong>Output screen</strong></p>
<div class="figure">
<img alt="codelist numberrenge2" src="../_images/codelist_numberrenge2.png" />
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="change-interval-of-numberrangecodelist">
<h4><a class="toc-backref" href="#id41">5.14.4.2.2. Change interval of NumberRangeCodeList</a><a class="headerlink" href="#change-interval-of-numberrangecodelist" title="Permalink to this headline">¶</a></h4>
<p>Example of setting interval value is shown below.</p>
<p><strong>Definition of Bean definition file(xxx-codelist.xml)</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_BULK_ORDER_QUANTITY_UNIT&quot;</span>
    <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.NumberRangeCodeList&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;from&quot;</span> <span class="na">value=</span><span class="s">&quot;10&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;to&quot;</span> <span class="na">value=</span><span class="s">&quot;50&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;interval&quot;</span> <span class="na">value=</span><span class="s">&quot;10&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (1) --&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sr. No.</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify increment (decrement) value. Then, store the values obtained upon increasing (decreasing) the interval value within From-To range as codelist.</div>
<div class="line">In the above example, the values are stored in the order of <tt class="docutils literal"><span class="pre">10</span></tt>,<tt class="docutils literal"><span class="pre">20</span></tt>,<tt class="docutils literal"><span class="pre">30</span></tt>,<tt class="docutils literal"><span class="pre">40</span></tt>,<tt class="docutils literal"><span class="pre">50</span></tt> in the codelist.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Example of jsp implementation</strong></p>
<div class="highlight-jsp"><div class="highlight"><pre><span class="nt">&lt;form:select</span> <span class="na">path=</span><span class="s">&quot;quantity&quot;</span> <span class="na">items=</span><span class="s">&quot;${CL_BULK_ORDER_QUANTITY_UNIT}&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p><strong>Output HTML</strong></p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;quantity&quot;</span> <span class="na">name=</span><span class="s">&quot;quantity&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;10&quot;</span><span class="nt">&gt;</span>10<span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;20&quot;</span><span class="nt">&gt;</span>20<span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;30&quot;</span><span class="nt">&gt;</span>30<span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;40&quot;</span><span class="nt">&gt;</span>40<span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;50&quot;</span><span class="nt">&gt;</span>50<span class="nt">&lt;/option&gt;</span>
<span class="nt">&lt;/select&gt;</span>
</pre></div>
</div>
<p><strong>Output screen</strong></p>
<div class="figure">
<img alt="codelist numberrenge3" src="../_images/codelist_numberrenge3.png" />
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If From-To value exceeds the specified range, then the value increased (decreased) in accordance with interval is not stored in the codelist.</p>
<p>i.e. in case of following definition,</p>
<blockquote>
<div><div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;CL_BULK_ORDER_QUANTITY_UNIT&quot;</span>
    <span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.NumberRangeCodeList&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;from&quot;</span> <span class="na">value=</span><span class="s">&quot;10&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;to&quot;</span> <span class="na">value=</span><span class="s">&quot;55&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;interval&quot;</span> <span class="na">value=</span><span class="s">&quot;10&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
</div></blockquote>
<p class="last">5 values of <tt class="docutils literal"><span class="pre">10</span></tt>,<tt class="docutils literal"><span class="pre">20</span></tt>,<tt class="docutils literal"><span class="pre">30</span></tt>,<tt class="docutils literal"><span class="pre">40</span></tt>,<tt class="docutils literal"><span class="pre">50</span></tt> are stored in the codelist.
The value of subsequent interval <tt class="docutils literal"><span class="pre">60</span></tt> and the range threshold value <tt class="docutils literal"><span class="pre">55</span></tt> are not stored in the codelist.</p>
</div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="Ajax.html" title="5.15. Ajax"
             >next</a> |</li>
        <li class="right" >
          <a href="Internationalization.html" title="5.13. Internationalization"
             >previous</a> |</li>
        <li><a href="../index.html">TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.0.0-SNAPSHOT documentation</a> &raquo;</li>
          <li><a href="index.html" >5. Architecture in Detail - TERASOLUNA Server Framework for Java (5.x)</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013-2015, NTT DATA.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.Theme by <a href="http://github.com/vkvn">vkvn</a>
    </div>
    
    <script>
    
    $(function() {
    	var $sidebar	= $('.sphinxsidebar'),
    		$window		= $(window),
    		offset		= $sidebar.offset(),
    		topPadding	= 3,
    		$scroll		= $('#scroll');
    	
    	$window.scroll(function() {
    		if ($scroll.is(':checked')) {
				if ($window.scrollTop() > offset.top) {
					$sidebar.stop().animate({
						marginTop:$window.scrollTop() - offset.top + topPadding
					});
				} else {
					$sidebar.stop().animate({
						marginTop:0
					});
				}
			}
		});
    	
    	var $navList = $('ul:first', $sidebar);
    	$('li:first', $navList).addClass('open');
    	
    	$navList.treeview({
    		persist: "location",
    		collapsed: true,
    		unique: false
    	});
    	
	});
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-46550814-1', 'terasolunaorg.github.io');
    ga('send', 'pageview');
    </script>
  </body>
</html>
