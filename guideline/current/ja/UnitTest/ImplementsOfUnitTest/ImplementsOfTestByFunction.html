<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>10.2.3. 機能ごとのテスト実装 &#8212; TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.9.0.RELEASE documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/solar.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/tabs.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="10.2.4. 単体テストで利用するOSSライブラリの使い方" href="UsageOfLibraryForTest.html" />
    <link rel="prev" title="10.2.2. レイヤごとのテスト実装" href="ImplementsOfTestByLayer.html" /><script src="../../_static/jquery.js" type="text/javascript"></script>
<script src="../../_static/jquery.treeview.js" type="text/javascript"></script>
<!-- <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro|Open+Sans:300italic,400italic,700italic,400,300,700' rel='stylesheet' type='text/css'> -->
<link href="../../_static/solarized-dark.css" rel="stylesheet">
<link href="../../_static/jquery.treeview.css" rel="stylesheet">
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="UsageOfLibraryForTest.html" title="10.2.4. 単体テストで利用するOSSライブラリの使い方"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ImplementsOfTestByLayer.html" title="10.2.2. レイヤごとのテスト実装"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.9.0.RELEASE documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" ><span class="section-number">10. </span>単体テスト</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U"><span class="section-number">10.2. </span>単体テストの実装</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">10.2.3. </span>機能ごとのテスト実装</a></li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><label><input id="scroll" type="checkbox"> scroll sidebar</label>
  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">10.2.3. 機能ごとのテスト実装</a><ul>
<li><a class="reference internal" href="#id3">10.2.3.1. 入力チェックの単体テスト</a><ul>
<li><a class="reference internal" href="#bean-validationvalidator">10.2.3.1.1. Bean Validationで実装したValidatorの単体テスト</a><ul>
<li><a class="reference internal" href="#hibernate-validatorbean-validation">10.2.3.1.1.1. Hibernate validatorを使用した<code class="docutils literal notranslate"><span class="pre">Bean</span> <span class="pre">Validation</span></code>のテスト</a></li>
<li><a class="reference internal" href="#spring-dibean-validation">10.2.3.1.1.2. Spring のDIコンテナを使用した<code class="docutils literal notranslate"><span class="pre">Bean</span> <span class="pre">Validation</span></code>のテスト</a></li>
</ul>
</li>
<li><a class="reference internal" href="#spring-validatorvalidator">10.2.3.1.2. Spring Validatorで実装したValidatorの単体テスト</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="ImplementsOfTestByLayer.html"
                          title="previous chapter"><span class="section-number">10.2.2. </span>レイヤごとのテスト実装</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="UsageOfLibraryForTest.html"
                          title="next chapter"><span class="section-number">10.2.4. </span>単体テストで利用するOSSライブラリの使い方</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/UnitTest/ImplementsOfUnitTest/ImplementsOfTestByFunction.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="implementsoftestbyfunction">
<span id="id1"></span><h1><span class="section-number">10.2.3. </span>機能ごとのテスト実装<a class="headerlink" href="#implementsoftestbyfunction" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="id2">
<p class="topic-title">目次</p>
<ul class="simple">
<li><p><a class="reference internal" href="#id3" id="id4">入力チェックの単体テスト</a></p>
<ul>
<li><p><a class="reference internal" href="#bean-validationvalidator" id="id5">Bean Validationで実装したValidatorの単体テスト</a></p>
<ul>
<li><p><a class="reference internal" href="#hibernate-validatorbean-validation" id="id6">Hibernate validatorを使用した<code class="docutils literal notranslate"><span class="pre">Bean</span> <span class="pre">Validation</span></code>のテスト</a></p></li>
<li><p><a class="reference internal" href="#spring-dibean-validation" id="id7">Spring のDIコンテナを使用した<code class="docutils literal notranslate"><span class="pre">Bean</span> <span class="pre">Validation</span></code>のテスト</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#spring-validatorvalidator" id="id8">Spring Validatorで実装したValidatorの単体テスト</a></p></li>
</ul>
</li>
</ul>
</nav>
<p>本節では、レイヤ単位に当てはめられない機能のテスト方法ついて説明する。</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="id3">
<h2><a class="toc-backref" href="#id4" role="doc-backlink"><span class="section-number">10.2.3.1. </span>入力チェックの単体テスト</a><a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h2>
<p>ここでは、以下の入力チェックの単体テスト実装方法を説明する。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Validationの種類</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Bean Validation</p></td>
<td><p>Hibernate validatorを使用して実装した<code class="docutils literal notranslate"><span class="pre">Validator</span></code>のテスト</p></td>
</tr>
<tr class="row-odd"><td><p>Bean Validation</p></td>
<td><p>Spring のDIコンテナを使用して実装した<code class="docutils literal notranslate"><span class="pre">Validator</span></code>のテスト</p></td>
</tr>
<tr class="row-even"><td><p>Spring Validation</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Spring</span> <span class="pre">Validation</span></code>を使用して実装した<code class="docutils literal notranslate"><span class="pre">Validator</span></code>のテスト</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">Validator</span></code>の単体テストは本来<code class="docutils literal notranslate"><span class="pre">Controller</span></code>のテストとして行うが、その場合は試験パターンが多くなるため、テストの実施コストを考慮し<code class="docutils literal notranslate"><span class="pre">Controller</span></code>と切り分けて<code class="docutils literal notranslate"><span class="pre">Validator</span></code>単体としてテストを行うこともできる。</div>
<div class="line">ここでは、<code class="docutils literal notranslate"><span class="pre">Validator</span></code>単体としてのテスト作成方法を説明する。</div>
</div>
<p>本節では、<code class="docutils literal notranslate"><span class="pre">Bean</span> <span class="pre">Validation</span></code>を使用している場合と<code class="docutils literal notranslate"><span class="pre">Spring</span> <span class="pre">Validation</span></code>を使用している場合のそれぞれについて実装方法を説明する。</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="bean-validationvalidator">
<span id="implementsoftestbyfunctiontestingbeanvalidator"></span><h3><a class="toc-backref" href="#id5" role="doc-backlink"><span class="section-number">10.2.3.1.1. </span>Bean Validationで実装したValidatorの単体テスト</a><a class="headerlink" href="#bean-validationvalidator" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Bean</span> <span class="pre">Validation</span></code>のテスト行う場合、アプリケーションサーバからライブラリが提供されないため、必要な依存ライブラリ追加する必要がある。追加方法については、<a class="reference internal" href="../../ArchitectureInDetail/WebApplicationDetail/Validation.html#validationadddependencylibrary"><span class="std std-ref">依存ライブラリの追加</span></a>を参照されたい。なお、<code class="docutils literal notranslate"><span class="pre">Hibernate</span> <span class="pre">Validator</span></code>が用意する入力チェック機能についてはテストスコープ外とする。</p>
<p>ここでは、以下の2通りのBean Validationのテスト方法について説明する。</p>
<ul class="simple">
<li><p>Hibernate validatorを使用した<code class="docutils literal notranslate"><span class="pre">Bean</span> <span class="pre">Validation</span></code></p></li>
<li><p>Spring のDIコンテナを使用した<code class="docutils literal notranslate"><span class="pre">Bean</span> <span class="pre">Validation</span></code></p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="hibernate-validatorbean-validation">
<h4><a class="toc-backref" href="#id6" role="doc-backlink"><span class="section-number">10.2.3.1.1.1. </span>Hibernate validatorを使用した<code class="docutils literal notranslate"><span class="pre">Bean</span> <span class="pre">Validation</span></code>のテスト</a><a class="headerlink" href="#hibernate-validatorbean-validation" title="Permalink to this heading">¶</a></h4>
<p>Hibernate validatorを使用した<code class="docutils literal notranslate"><span class="pre">Bean</span> <span class="pre">Validation</span></code>の単体テストにおいて、作成するファイルを以下に示す。</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" role="tablist"><button aria-controls="panel-0-SmF2YSBDb25maWc=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-0-SmF2YSBDb25maWc=" name="SmF2YSBDb25maWc=" role="tab" tabindex="0">Java Config</button><button aria-controls="panel-0-WE1MIENvbmZpZw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-WE1MIENvbmZpZw==" name="WE1MIENvbmZpZw==" role="tab" tabindex="-1">XML Config</button></div><div aria-labelledby="tab-0-SmF2YSBDb25maWc=" class="sphinx-tabs-panel group-tab" id="panel-0-SmF2YSBDb25maWc=" name="SmF2YSBDb25maWc=" role="tabpanel" tabindex="0"><figure class="align-default">
<img alt="../../_images/ImplementsOfTestByFunctionBeanValidationItems_JavaConfig.png" src="../../_images/ImplementsOfTestByFunctionBeanValidationItems_JavaConfig.png" />
</figure>
</div><div aria-labelledby="tab-0-WE1MIENvbmZpZw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-WE1MIENvbmZpZw==" name="WE1MIENvbmZpZw==" role="tabpanel" tabindex="0"><figure class="align-default">
<img alt="../../_images/ImplementsOfTestByFunctionBeanValidationItems.png" src="../../_images/ImplementsOfTestByFunctionBeanValidationItems.png" />
</figure>
</div></div>
<table class="docutils align-default">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>作成するファイル名</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">FullWidthKatakanaTest.java</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;FullWidthKatakana</span></code>アノテーションのテストクラス</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">FullWidthKatakanaTestBean.java</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;FullWidthKatakana</span></code>アノテーションをフィールドに付与したBeanクラス</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>ここでは、テスト対象の<code class="docutils literal notranslate"><span class="pre">&#64;FullWidthKatakana</span></code>を使用したBeanクラス（<code class="docutils literal notranslate"><span class="pre">FullWidthKatakanaTestBean</span></code>）を作成し、
<code class="docutils literal notranslate"><span class="pre">jakarta.validation.ValidatorFactory</span></code>から生成した<code class="docutils literal notranslate"><span class="pre">jakarta.validation.Validator</span></code>の実装クラスにより
バリデーションチェックを行っている。</p>
<p>以下に、<code class="docutils literal notranslate"><span class="pre">&#64;FullWidthKatakana</span></code>アノテーションをフィールドに付与したBeanクラスの作成例を示す。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">FullWidthKatakanaTestBean.java</span></code></p></li>
</ul>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">FullWidthKatakanaTestBean</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@FullWidthKatakana</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">testString</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">FullWidthKatakanaTestBean</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// constructor</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getTestString</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">testString</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setTestString</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">testString</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">testString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">testString</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">FullWidthKatakanaTest.java</span></code></p></li>
</ul>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">FullWidthKatakanaTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Validator</span><span class="w"> </span><span class="n">validator</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@BeforeClass</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setUpBeforeClass</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="c1">// setup</span>
<span class="w">        </span><span class="n">ValidatorFactory</span><span class="w"> </span><span class="n">validatorFactory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Validation</span><span class="p">.</span><span class="na">buildDefaultValidatorFactory</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// (1)</span>
<span class="w">        </span><span class="n">validator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">validatorFactory</span><span class="p">.</span><span class="na">getValidator</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testFullWidthKatakana</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="c1">// setup</span>
<span class="w">        </span><span class="n">FullWidthKatakanaTestBean</span><span class="w"> </span><span class="n">form</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FullWidthKatakanaTestBean</span><span class="p">();</span>
<span class="w">        </span><span class="n">form</span><span class="p">.</span><span class="na">setTestString</span><span class="p">(</span><span class="s">&quot;デンデン&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// run the test</span>
<span class="w">        </span><span class="n">Set</span><span class="o">&lt;</span><span class="n">ConstraintViolation</span><span class="o">&lt;</span><span class="n">FullWidthKatakanaTestBean</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">violations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">validator</span><span class="p">.</span><span class="na">validate</span><span class="p">(</span><span class="n">form</span><span class="p">);</span><span class="w"> </span><span class="c1">// (2)</span>

<span class="w">        </span><span class="c1">// assert</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">violations</span><span class="p">,</span><span class="w"> </span><span class="n">is</span><span class="p">(</span><span class="n">empty</span><span class="p">()));</span><span class="w"> </span><span class="c1">// (3)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">getValidator</span></code>メソッドにより、<code class="docutils literal notranslate"><span class="pre">Validator</span></code>を取得する。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Validator</span></code>を取得することで、<code class="docutils literal notranslate"><span class="pre">validate</span></code>メソッドを使った入力チェックが可能となる。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">validate</span></code>メソッドを使い、入力チェックを行う。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">validate</span></code>メソッドを実行することで、入力チェックエラーの数だけ<code class="docutils literal notranslate"><span class="pre">ConstrainViolation</span></code>の<code class="docutils literal notranslate"><span class="pre">Set</span></code>が返ってくる。
<code class="docutils literal notranslate"><span class="pre">validate</span></code>メソッドの引数には<code class="docutils literal notranslate"><span class="pre">FullWidthKatakanaBean</span></code>クラスのオブジェクトを指定する。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">(2)で取得した<code class="docutils literal notranslate"><span class="pre">Set</span></code>から、エラーが発生したかどうかを確認する。</div>
<div class="line">今回はエラーがないため、空の<code class="docutils literal notranslate"><span class="pre">Set</span></code>が返ってくる。</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>バリデーショングループを使用したテスト</strong></p>
<p>バリデーショングループを設定している場合、入力チェックを行なう際の<code class="docutils literal notranslate"><span class="pre">validate</span></code>メソッド引数に、グループを示す任意の<code class="docutils literal notranslate"><span class="pre">java.lang.Class</span></code>オブジェクトを指定することで、指定したグループの<code class="docutils literal notranslate"><span class="pre">Validator</span></code>のみ適用して実行できる。</p>
<p>バリデーショングループについては、<a class="reference internal" href="../../ArchitectureInDetail/WebApplicationDetail/Validation.html#validationgroupvalidation"><span class="std std-ref">バリデーションのグループ化</span></a>を参照されたい。</p>
<p>以下に、バリデーショングループを使用した<code class="docutils literal notranslate"><span class="pre">Form</span></code>例を示す。</p>
<ul>
<li><p>テスト対象の <code class="docutils literal notranslate"><span class="pre">FullWidthKatakanaTestBean.java</span></code></p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">FullWidthKatakanaTestBean</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Search</span><span class="w"> </span><span class="p">{};</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Register</span><span class="w"> </span><span class="p">{};</span>

<span class="w">    </span><span class="c1">// (1)</span>
<span class="w">    </span><span class="nd">@Size</span><span class="p">(</span><span class="n">min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Search</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@FullWidthKatakana</span><span class="p">(</span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Register</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@NotNull</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">testString</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">FullWidthKatakanaTestBean</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// constructor</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getTestString</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">testString</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setTestString</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">testString</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">testString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">testString</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">フィールドに設定する<code class="docutils literal notranslate"><span class="pre">Validator</span></code>をグループ化している。</div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">FullWidthKatakanaTest.java</span></code></p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">FullWidthKatakanaTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// omitted</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testFullWidthKatakana</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="c1">// setup</span>
<span class="w">        </span><span class="n">FullWidthKatakanaTestBean</span><span class="w"> </span><span class="n">form</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FullWidthKatakanaTestBean</span><span class="p">();</span>
<span class="w">        </span><span class="n">form</span><span class="p">.</span><span class="na">setTestString</span><span class="p">(</span><span class="s">&quot;テスト&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// run the test</span>
<span class="w">        </span><span class="c1">// (1)</span>
<span class="w">        </span><span class="n">Set</span><span class="o">&lt;</span><span class="n">ConstraintViolation</span><span class="o">&lt;</span><span class="n">FullWidthKatakanaTestBean</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">violations</span><span class="w"> </span><span class="o">=</span>
<span class="w">                </span><span class="n">validator</span><span class="p">.</span><span class="na">validate</span><span class="p">(</span><span class="n">form</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// assert</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">violations</span><span class="p">,</span><span class="w"> </span><span class="n">is</span><span class="p">(</span><span class="n">empty</span><span class="p">()));</span><span class="w"> </span><span class="c1">// (2)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">validate</span></code>メソッドの引数に、<code class="docutils literal notranslate"><span class="pre">java.lang.Class</span></code>オブジェクトを追加することで、設定したバリデーショングループに対して入力チェックを実行できる。また、<code class="docutils literal notranslate"><span class="pre">java.lang.Class</span></code>オブジェクトは例のように複数指定することもできる。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">エラーが発生したかどうかを確認する。</div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="spring-dibean-validation">
<h4><a class="toc-backref" href="#id7" role="doc-backlink"><span class="section-number">10.2.3.1.1.2. </span>Spring のDIコンテナを使用した<code class="docutils literal notranslate"><span class="pre">Bean</span> <span class="pre">Validation</span></code>のテスト</a><a class="headerlink" href="#spring-dibean-validation" title="Permalink to this heading">¶</a></h4>
<p>Spring のDIコンテナを使用した<code class="docutils literal notranslate"><span class="pre">Bean</span> <span class="pre">Validation</span></code>の単体テストにおいて、作成するファイルを以下に示す。</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" role="tablist"><button aria-controls="panel-1-SmF2YSBDb25maWc=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-1-SmF2YSBDb25maWc=" name="SmF2YSBDb25maWc=" role="tab" tabindex="0">Java Config</button><button aria-controls="panel-1-WE1MIENvbmZpZw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-WE1MIENvbmZpZw==" name="WE1MIENvbmZpZw==" role="tab" tabindex="-1">XML Config</button></div><div aria-labelledby="tab-1-SmF2YSBDb25maWc=" class="sphinx-tabs-panel group-tab" id="panel-1-SmF2YSBDb25maWc=" name="SmF2YSBDb25maWc=" role="tabpanel" tabindex="0"><figure class="align-default">
<img alt="../../_images/ImplementsOfTestByFunctionExistInCodeListItems_JavaConfig.png" src="../../_images/ImplementsOfTestByFunctionExistInCodeListItems_JavaConfig.png" />
</figure>
<table class="docutils align-default">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>作成するファイル名</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ExistInCodeListTest.java</span></code></p></td>
<td><p>Spring のDIコンテナを使用した<code class="docutils literal notranslate"><span class="pre">Bean</span> <span class="pre">Validation</span></code>のテストクラス</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">TestContextConfig.java</span></code></p></td>
<td><p>Spring Testを使用して単体テストを行う際に必要な設定を補うための設定ファイル。</p></td>
</tr>
</tbody>
</table>
</div><div aria-labelledby="tab-1-WE1MIENvbmZpZw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-WE1MIENvbmZpZw==" name="WE1MIENvbmZpZw==" role="tabpanel" tabindex="0"><figure class="align-default">
<img alt="../../_images/ImplementsOfTestByFunctionExistInCodeListItems.png" src="../../_images/ImplementsOfTestByFunctionExistInCodeListItems.png" />
</figure>
<table class="docutils align-default">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>作成するファイル名</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ExistInCodeListTest.java</span></code></p></td>
<td><p>Spring のDIコンテナを使用した<code class="docutils literal notranslate"><span class="pre">Bean</span> <span class="pre">Validation</span></code>のテストクラス</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">test-context.xml</span></code></p></td>
<td><p>Spring Testを使用して単体テストを行う際に必要な設定を補うための設定ファイル。</p></td>
</tr>
</tbody>
</table>
</div></div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Spring のDIコンテナを利用した<code class="docutils literal notranslate"><span class="pre">Bean</span> <span class="pre">Validation</span></code>は、<code class="docutils literal notranslate"><span class="pre">org.springframework.validation.beanvalidation.LocalValidatorFactoryBean</span></code>から<code class="docutils literal notranslate"><span class="pre">Validator</span></code>オブジェクトを生成することでテストすることができる。</p>
<div class="line-block">
<div class="line">ここでは、Spring のDIコンテナを利用した入力チェックとして<code class="docutils literal notranslate"><span class="pre">&#64;ExistInCodeList</span></code>を例にテストの実装方法を説明する。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">&#64;ExistInCodeList</span></code>についての詳細は<a class="reference internal" href="../../ArchitectureInDetail/WebApplicationDetail/Codelist.html#codelist-validate"><span class="std std-ref">コードリストを用いたコード値の入力チェック</span></a>を参照されたい。</div>
</div>
<p>テストで使用する設定ファイルに、<code class="docutils literal notranslate"><span class="pre">Validator</span></code>オブジェクトを生成するための<code class="docutils literal notranslate"><span class="pre">LocalValidatorFactoryBean</span></code>をBean定義する。</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" role="tablist"><button aria-controls="panel-2-SmF2YSBDb25maWc=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-2-SmF2YSBDb25maWc=" name="SmF2YSBDb25maWc=" role="tab" tabindex="0">Java Config</button><button aria-controls="panel-2-WE1MIENvbmZpZw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-2-WE1MIENvbmZpZw==" name="WE1MIENvbmZpZw==" role="tab" tabindex="-1">XML Config</button></div><div aria-labelledby="tab-2-SmF2YSBDb25maWc=" class="sphinx-tabs-panel group-tab" id="panel-2-SmF2YSBDb25maWc=" name="SmF2YSBDb25maWc=" role="tabpanel" tabindex="0"><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TestContextConfig.java</span></code></p></li>
</ul>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// (1)</span>
<span class="cm">/**</span>
<span class="cm"> * Configure {@link LocalValidatorFactoryBean} bean.</span>
<span class="cm"> * @return Bean of configured {@link LocalValidatorFactoryBean}</span>
<span class="cm"> */</span>
<span class="nd">@Bean</span><span class="p">(</span><span class="s">&quot;validator&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="n">LocalValidatorFactoryBean</span><span class="w"> </span><span class="nf">localValidatorFactoryBean</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">LocalValidatorFactoryBean</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">&#64;ExistInCodeList</span></code>でDIコンテナからコードリストBeanを取得するため、
<code class="docutils literal notranslate"><span class="pre">TestContextConfig.java</span></code>でBean定義した<code class="docutils literal notranslate"><span class="pre">LocalValidatorFactoryBean</span></code>から生成した<code class="docutils literal notranslate"><span class="pre">Validator</span></code>を使う必要がある。</div>
</div>
</td>
</tr>
</tbody>
</table>
</div><div aria-labelledby="tab-2-WE1MIENvbmZpZw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-2-WE1MIENvbmZpZw==" name="WE1MIENvbmZpZw==" role="tabpanel" tabindex="0"><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">test-context.xml</span></code></p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!-- (1) --&gt;</span>
<span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;validator&quot;</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;org.springframework.validation.beanvalidation.LocalValidatorFactoryBean&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">&#64;ExistInCodeList</span></code>でDIコンテナからコードリストBeanを取得するため、
<code class="docutils literal notranslate"><span class="pre">test-context.xml</span></code>でBean定義した<code class="docutils literal notranslate"><span class="pre">LocalValidatorFactoryBean</span></code>から生成した<code class="docutils literal notranslate"><span class="pre">Validator</span></code>を使う必要がある。</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></div>
<p>以下に、<code class="docutils literal notranslate"><span class="pre">&#64;ExistInCodeList</span></code>が使われている<code class="docutils literal notranslate"><span class="pre">Form</span></code>クラスの実装例を示す。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TicketSearchForm.java</span></code></p></li>
</ul>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TicketSearchForm</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Serializable</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@NotNull</span>
<span class="w">    </span><span class="nd">@ExistInCodeList</span><span class="p">(</span><span class="n">codeListId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;CL_AIRPORT&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">// (1)</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">depAirportCd</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// omitted</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">depAirportCd</span></code>フィールドに対して、コードリストに存在する値かどうか検証する。</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>以下に、<code class="docutils literal notranslate"><span class="pre">&#64;ExistInCodeList</span></code>のテストクラス作成方法を説明する。
ここでは、<code class="docutils literal notranslate"><span class="pre">SampleCodeListConfig.java</span></code>または<code class="docutils literal notranslate"><span class="pre">sample-codelist.xml</span></code>に定義したコードリスト（<code class="docutils literal notranslate"><span class="pre">CL_AIRPORT</span></code>）に定義していない値を設定し、
インジェクションした<code class="docutils literal notranslate"><span class="pre">jakarta.validation.Validator</span></code>の実装クラスによりバリデーションチェックエラーになることを確認している。</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" role="tablist"><button aria-controls="panel-3-SmF2YSBDb25maWc=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-3-SmF2YSBDb25maWc=" name="SmF2YSBDb25maWc=" role="tab" tabindex="0">Java Config</button><button aria-controls="panel-3-WE1MIENvbmZpZw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-3-WE1MIENvbmZpZw==" name="WE1MIENvbmZpZw==" role="tab" tabindex="-1">XML Config</button></div><div aria-labelledby="tab-3-SmF2YSBDb25maWc=" class="sphinx-tabs-panel group-tab" id="panel-3-SmF2YSBDb25maWc=" name="SmF2YSBDb25maWc=" role="tabpanel" tabindex="0"><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ExistInCodeListTest.java</span></code></p></li>
</ul>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@RunWith</span><span class="p">(</span><span class="n">SpringJUnit4ClassRunner</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="nd">@ContextConfiguration</span><span class="p">(</span><span class="n">classes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">SampleEnvConfig</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">SampleInfraConfig</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">SampleCodeListConfig</span><span class="p">.</span><span class="na">class</span><span class="p">,</span>
<span class="w">                </span><span class="n">TestContextConfig</span><span class="p">.</span><span class="na">class</span><span class="w"> </span><span class="p">})</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ExistInCodeListTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// (1)</span>
<span class="w">    </span><span class="nd">@Inject</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Validator</span><span class="w"> </span><span class="n">validator</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testExistInCodeList</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="c1">// setup</span>
<span class="w">        </span><span class="n">TicketSearchForm</span><span class="w"> </span><span class="n">ticketSearchForm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">TicketSearchForm</span><span class="p">();</span>
<span class="w">        </span><span class="c1">// (2)</span>
<span class="w">        </span><span class="n">ticketSearchForm</span><span class="p">.</span><span class="na">setDepAirportCd</span><span class="p">(</span><span class="s">&quot;AAA&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// omitted</span>

<span class="w">        </span><span class="c1">// run the test</span>
<span class="w">        </span><span class="n">Set</span><span class="o">&lt;</span><span class="n">ConstraintViolation</span><span class="o">&lt;</span><span class="n">TicketSearchForm</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">violations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">validator</span>
<span class="w">                </span><span class="p">.</span><span class="na">validate</span><span class="p">(</span><span class="n">ticketSearchForm</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// assert</span>
<span class="w">        </span><span class="c1">// (3)</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">violations</span><span class="p">.</span><span class="na">size</span><span class="p">(),</span><span class="w"> </span><span class="n">is</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>
<span class="w">        </span><span class="n">ConstraintViolation</span><span class="o">&lt;</span><span class="n">TicketSearchForm</span><span class="o">&gt;</span><span class="w"> </span><span class="n">violation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">violations</span><span class="p">.</span><span class="na">iterator</span><span class="p">().</span><span class="na">next</span><span class="p">();</span>
<span class="w">        </span><span class="c1">// (4)</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">violation</span><span class="p">.</span><span class="na">getPropertyPath</span><span class="p">().</span><span class="na">toString</span><span class="p">(),</span><span class="w"> </span><span class="n">is</span><span class="p">(</span><span class="s">&quot;depAirportCd&quot;</span><span class="p">));</span>
<span class="w">        </span><span class="c1">// (5)</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">((</span><span class="n">String</span><span class="p">)</span><span class="w"> </span><span class="n">violation</span><span class="p">.</span><span class="na">getInvalidValue</span><span class="p">(),</span><span class="w"> </span><span class="n">is</span><span class="p">(</span><span class="s">&quot;AAA&quot;</span><span class="p">));</span>
<span class="w">        </span><span class="c1">// (6)</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">violation</span><span class="p">.</span><span class="na">getMessage</span><span class="p">(),</span><span class="w"> </span><span class="n">is</span><span class="p">(</span><span class="s">&quot;Does not exist in CL_AIRPORT&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-3-WE1MIENvbmZpZw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-3-WE1MIENvbmZpZw==" name="WE1MIENvbmZpZw==" role="tabpanel" tabindex="0"><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ExistInCodeListTest.java</span></code></p></li>
</ul>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@RunWith</span><span class="p">(</span><span class="n">SpringJUnit4ClassRunner</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="nd">@ContextConfiguration</span><span class="p">(</span><span class="n">locations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s">&quot;classpath:META-INF/spring/sample-infra.xml&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s">&quot;classpath:META-INF/spring/sample-codelist.xml&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s">&quot;classpath:META-INF/spring/test-context.xml&quot;</span><span class="w"> </span><span class="p">})</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ExistInCodeListTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// (1)</span>
<span class="w">    </span><span class="nd">@Inject</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Validator</span><span class="w"> </span><span class="n">validator</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testExistInCodeList</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="c1">// setup</span>
<span class="w">        </span><span class="n">TicketSearchForm</span><span class="w"> </span><span class="n">ticketSearchForm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">TicketSearchForm</span><span class="p">();</span>
<span class="w">        </span><span class="c1">// (2)</span>
<span class="w">        </span><span class="n">ticketSearchForm</span><span class="p">.</span><span class="na">setDepAirportCd</span><span class="p">(</span><span class="s">&quot;AAA&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// omitted</span>

<span class="w">        </span><span class="c1">// run the test</span>
<span class="w">        </span><span class="n">Set</span><span class="o">&lt;</span><span class="n">ConstraintViolation</span><span class="o">&lt;</span><span class="n">TicketSearchForm</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">violations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">validator</span>
<span class="w">                </span><span class="p">.</span><span class="na">validate</span><span class="p">(</span><span class="n">ticketSearchForm</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// assert</span>
<span class="w">        </span><span class="c1">// (3)</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">violations</span><span class="p">.</span><span class="na">size</span><span class="p">(),</span><span class="w"> </span><span class="n">is</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>
<span class="w">        </span><span class="n">ConstraintViolation</span><span class="o">&lt;</span><span class="n">TicketSearchForm</span><span class="o">&gt;</span><span class="w"> </span><span class="n">violation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">violations</span><span class="p">.</span><span class="na">iterator</span><span class="p">().</span><span class="na">next</span><span class="p">();</span>
<span class="w">        </span><span class="c1">// (4)</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">violation</span><span class="p">.</span><span class="na">getPropertyPath</span><span class="p">().</span><span class="na">toString</span><span class="p">(),</span><span class="w"> </span><span class="n">is</span><span class="p">(</span><span class="s">&quot;depAirportCd&quot;</span><span class="p">));</span>
<span class="w">        </span><span class="c1">// (5)</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">((</span><span class="n">String</span><span class="p">)</span><span class="w"> </span><span class="n">violation</span><span class="p">.</span><span class="na">getInvalidValue</span><span class="p">(),</span><span class="w"> </span><span class="n">is</span><span class="p">(</span><span class="s">&quot;AAA&quot;</span><span class="p">));</span>
<span class="w">        </span><span class="c1">// (6)</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">violation</span><span class="p">.</span><span class="na">getMessage</span><span class="p">(),</span><span class="w"> </span><span class="n">is</span><span class="p">(</span><span class="s">&quot;Does not exist in CL_AIRPORT&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">Validator</span></code>にSpringの<code class="docutils literal notranslate"><span class="pre">LocalValidatorFactoryBean</span></code>から生成した<code class="docutils literal notranslate"><span class="pre">Validator</span></code>をDIしている。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">LocalValidatorFactoryBean</span></code>から生成した<code class="docutils literal notranslate"><span class="pre">Validator</span></code>はSpringのDIコンテナ上で動作し、<code class="docutils literal notranslate"><span class="pre">&#64;ContextConfiguration</span></code>で読み込んだコードリストのBeanを取得することができる。</div>
<div class="line">これにより、<code class="docutils literal notranslate"><span class="pre">&#64;ExistInCodeList</span></code>を期待通りに動作させることができる。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">コードリストに存在しないコードを入力し、<code class="docutils literal notranslate"><span class="pre">&#64;ExistInCodeList</span></code>でエラーが発生することを期待する。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">size</span></code>メソッドを使って入力チェックエラーの数を取得し、エラーが発生したかどうかを確認する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">違反したフィールドが想定した箇所であるかを確認する。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">違反した入力値が想定した値であるかを確認する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(6)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">発生したエラーのメッセージを確認する。</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="spring-validatorvalidator">
<h3><a class="toc-backref" href="#id8" role="doc-backlink"><span class="section-number">10.2.3.1.2. </span>Spring Validatorで実装したValidatorの単体テスト</a><a class="headerlink" href="#spring-validatorvalidator" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Validator(Spring</span> <span class="pre">Validation)</span></code>の単体テストにおいて、作成するファイルを以下に示す。</p>
<figure class="align-default">
<img alt="../../_images/ImplementsOfTestByFunctionSpringValidationItems.png" src="../../_images/ImplementsOfTestByFunctionSpringValidationItems.png" />
</figure>
<table class="docutils align-default">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>作成するファイル名</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">TicketSearchValidatorTest.java</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TicketSearchValidator.java</span></code>のテストクラス</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>以下に、テスト対象のクラスを示す。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TicketSearchValidator.java</span></code></p></li>
</ul>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Component</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TicketSearchValidator</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Validator</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">supports</span><span class="p">(</span><span class="n">Class</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">clazz</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">TicketSearchForm</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">isAssignableFrom</span><span class="p">(</span><span class="n">clazz</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">validate</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">target</span><span class="p">,</span><span class="w"> </span><span class="n">Errors</span><span class="w"> </span><span class="n">errors</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="n">TicketSearchForm</span><span class="w"> </span><span class="n">form</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">TicketSearchForm</span><span class="p">)</span><span class="w"> </span><span class="n">target</span><span class="p">;</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">errors</span><span class="p">.</span><span class="na">hasFieldErrors</span><span class="p">(</span><span class="s">&quot;depAirportCd&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="n">errors</span><span class="p">.</span><span class="na">hasFieldErrors</span><span class="p">(</span><span class="s">&quot;arrAirportCd&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">depAirport</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">form</span><span class="p">.</span><span class="na">getDepAirportCd</span><span class="p">();</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">arrAirport</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">form</span><span class="p">.</span><span class="na">getArrAirportCd</span><span class="p">();</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">depAirport</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">arrAirport</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">errors</span><span class="p">.</span><span class="na">reject</span><span class="p">(</span><span class="n">TicketSearchErrorCode</span><span class="p">.</span><span class="na">E_AR_B1_5001</span><span class="p">.</span><span class="na">code</span><span class="p">());</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// omitted</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">以下に、<code class="docutils literal notranslate"><span class="pre">Validator(Spring</span> <span class="pre">Validation)</span></code>のテストクラス作成方法を説明する。</div>
<div class="line">ここでは、テスト対象の<code class="docutils literal notranslate"><span class="pre">TicketSearchValidator</span></code>でエラーになる値を<code class="docutils literal notranslate"><span class="pre">TicketSearchForm</span></code>に設定してバリデーションエラーになることと、エラーメッセージが正しいことを確認している。</div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TicketSearchValidatorTest.java</span></code></p></li>
</ul>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TicketSearchValidatorTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">TicketSearchValidator</span><span class="w"> </span><span class="n">validator</span><span class="p">;</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">TicketSearchForm</span><span class="w"> </span><span class="n">ticketSearchForm</span><span class="p">;</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BindingResult</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@BeforeClass</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setUpBeforeClass</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="c1">// setup</span>
<span class="w">        </span><span class="n">validator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">TicketSearchValidator</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testTicketSearchValidator</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="c1">// setup</span>
<span class="w">        </span><span class="n">ticketSearchForm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">TicketSearchForm</span><span class="p">();</span>
<span class="w">        </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DirectFieldBindingResult</span><span class="p">(</span><span class="n">ticketSearchForm</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;TicketSearchForm&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="n">ticketSearchForm</span><span class="p">.</span><span class="na">setFlightType</span><span class="p">(</span><span class="n">FlightType</span><span class="p">.</span><span class="na">RT</span><span class="p">);</span>
<span class="w">        </span><span class="n">ticketSearchForm</span><span class="p">.</span><span class="na">setDepAirportCd</span><span class="p">(</span><span class="s">&quot;HND&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">ticketSearchForm</span><span class="p">.</span><span class="na">setArrAirportCd</span><span class="p">(</span><span class="s">&quot;HND&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="c1">// omitted</span>

<span class="w">        </span><span class="c1">// run the test</span>
<span class="w">        </span><span class="c1">// (1)</span>
<span class="w">        </span><span class="n">validator</span><span class="p">.</span><span class="na">validate</span><span class="p">(</span><span class="n">ticketSearchForm</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// (2)</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">hasErrors</span><span class="p">(),</span><span class="w"> </span><span class="n">is</span><span class="p">(</span><span class="kc">true</span><span class="p">));</span>

<span class="w">        </span><span class="c1">// (3)</span>
<span class="w">        </span><span class="n">ObjectError</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="na">getGlobalError</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// (4)</span>
<span class="w">        </span><span class="n">ResourceBundleMessageSource</span><span class="w"> </span><span class="n">messageSource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ResourceBundleMessageSource</span><span class="p">();</span>
<span class="w">        </span><span class="c1">// (5)</span>
<span class="w">        </span><span class="n">messageSource</span><span class="p">.</span><span class="na">setBasename</span><span class="p">(</span><span class="s">&quot;i18n/sample-messages&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="c1">// (6)</span>
<span class="w">        </span><span class="n">messageSource</span><span class="p">.</span><span class="na">setUseCodeAsDefaultMessage</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">error</span><span class="p">.</span><span class="na">getCode</span><span class="p">();</span>
<span class="w">        </span><span class="c1">// assert</span>
<span class="w">        </span><span class="c1">// (7)</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">code</span><span class="p">,</span><span class="w"> </span><span class="n">is</span><span class="p">(</span><span class="n">TicketSearchErrorCode</span><span class="p">.</span><span class="na">E_AR_B1_5001</span><span class="p">.</span><span class="na">code</span><span class="p">()));</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">messageSource</span><span class="p">.</span><span class="na">getMessage</span><span class="p">(</span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="n">Locale</span><span class="p">.</span><span class="na">JAPAN</span><span class="p">),</span>
<span class="w">                </span><span class="n">is</span><span class="p">(</span><span class="s">&quot;出発空港と到着空港に同じ空港は指定できません。区間をご確認ください。&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">validate</span></code>メソッドの引数に、<code class="docutils literal notranslate"><span class="pre">ticketSearchForm</span></code>と、<code class="docutils literal notranslate"><span class="pre">BindingResult</span></code>インターフェースのオブジェクトを指定することで、<code class="docutils literal notranslate"><span class="pre">ticketSearchForm</span></code>に対する入力チェックの結果が、<code class="docutils literal notranslate"><span class="pre">BindingResult</span></code>クラスのオブジェクトに格納される。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">hasErrors</span></code>メソッドを使って、エラーの有無を判定する。</div>
<div class="line">エラーがある場合はtrueが返り値として返り、エラーがない場合はfalseが返り値として返る。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">getGlobalError</span></code>メソッドで、エラー内容を取得する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">エラーメッセージの内容を確認するために、<code class="docutils literal notranslate"><span class="pre">MessageSource</span></code>の実装クラスである<code class="docutils literal notranslate"><span class="pre">org.springframework.context.support.ResourceBundleMessageSource</span></code>のオブジェクトを生成する。</div>
<div class="line">クラスの詳細については、<a class="reference external" href="https://docs.spring.io/spring-framework/docs/6.1.3/javadoc-api/org/springframework/context/support/ResourceBundleMessageSource.html">ResourceBundleMessageSourceのJavadoc</a>を参照されたい。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">setBasename</span></code>メソッドに、メッセージが定義されたプロパティファイルを指定して読み込ませる。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(6)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">setUseCodeAsDefaultMessage</span></code>メソッドにtrueを指定すると、エラーコードに対応するメッセージが定義されていない場合にエラーコードが返される。</div>
<div class="line">falseを指定すると、エラーコードに対応するメッセージが定義されていない場合に<code class="docutils literal notranslate"><span class="pre">NoSuchMessageException</span></code>が返される。</div>
<div class="line">デフォルトではfalseが適用されている。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(7)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">エラーコード、メッセージ内容を検証する。</div>
</div>
</td>
</tr>
</tbody>
</table>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="UsageOfLibraryForTest.html" title="10.2.4. 単体テストで利用するOSSライブラリの使い方"
             >next</a> |</li>
        <li class="right" >
          <a href="ImplementsOfTestByLayer.html" title="10.2.2. レイヤごとのテスト実装"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.9.0.RELEASE documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" ><span class="section-number">10. </span>単体テスト</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" ><span class="section-number">10.2. </span>単体テストの実装</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">10.2.3. </span>機能ごとのテスト実装</a></li> 
      </ul>
    </div>
    <div class="footer">
      © Copyright 2024, NTT DATA Group Corporation. © Copyright 2013, NTT Corporation.
      Created using <a href="https://www.sphinx-doc.org/en/master/">Sphinx</a> 7.0.1.Theme is <a href="https://pypi.org/project/solar-theme/">Solar</a>
    </div>
    
    <script>
    
    $(function() {
    	var $sidebar	= $('.sphinxsidebar'),
    		$window		= $(window),
    		offset		= $sidebar.offset(),
    		topPadding	= 3,
    		$scroll		= $('#scroll');
    	
    	$window.scroll(function() {
    		if ($scroll.is(':checked')) {
				if ($window.scrollTop() > offset.top) {
					$sidebar.stop().animate({
						marginTop:$window.scrollTop() - offset.top + topPadding
					});
				} else {
					$sidebar.stop().animate({
						marginTop:0
					});
				}
			}
		});
    	
    	var $navList = $('ul:first', $sidebar);
    	$('li:first', $navList).addClass('open');
    	
    	$navList.treeview({
    		persist: "location",
    		collapsed: true,
    		unique: false
    	});
    	
	});
    </script>
  </body>
</html>