<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>4.5. ページネーション &#8212; TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.9.0.RELEASE documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/solar.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/tabs.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="4.6. 二重送信防止" href="DoubleSubmitProtection.html" />
    <link rel="prev" title="4.4. セッション管理" href="SessionManagement.html" /><script src="../../_static/jquery.js" type="text/javascript"></script>
<script src="../../_static/jquery.treeview.js" type="text/javascript"></script>
<!-- <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro|Open+Sans:300italic,400italic,700italic,400,300,700' rel='stylesheet' type='text/css'> -->
<link href="../../_static/solarized-dark.css" rel="stylesheet">
<link href="../../_static/jquery.treeview.css" rel="stylesheet">
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="DoubleSubmitProtection.html" title="4.6. 二重送信防止"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="SessionManagement.html" title="4.4. セッション管理"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.9.0.RELEASE documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U"><span class="section-number">4. </span>Webアプリ開発機能</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">4.5. </span>ページネーション</a></li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><label><input id="scroll" type="checkbox"> scroll sidebar</label>
  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">4.5. ページネーション</a><ul>
<li><a class="reference internal" href="#overview">4.5.1. Overview</a><ul>
<li><a class="reference internal" href="#pagination-overview-page">4.5.1.1. ページ分割時の一覧画面の表示について</a></li>
<li><a class="reference internal" href="#pagination-overview-page-search">4.5.1.2. ページ検索について</a><ul>
<li><a class="reference internal" href="#spring-data">4.5.1.2.1. Spring Data提供のページ検索機能について</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pagination-overview-page-display">4.5.1.3. ページネーションの表示について</a><ul>
<li><a class="reference internal" href="#pagination-overview-page-display-fetcheddata">4.5.1.3.1. 取得データの表示について</a></li>
<li><a class="reference internal" href="#pagination-overview-page-display-paginationlink">4.5.1.3.2. ページネーションリンクの表示について</a><ul>
<li><a class="reference internal" href="#pagination-overview-page-display-paginationlink-structure">4.5.1.3.2.1. ページネーションリンクの構成</a></li>
<li><a class="reference internal" href="#html">4.5.1.3.2.2. ページネーションリンクのHTML構造</a></li>
<li><a class="reference internal" href="#jsp">4.5.1.3.2.3. JSPタブライブラリのパラメータについて</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pagination-overview-page-display-paginationinfo">4.5.1.3.3. ページネーション情報の表示について</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id11">4.5.1.4. ページネーション機能使用時の処理フロー</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-use">4.5.2. How to use</a><ul>
<li><a class="reference internal" href="#id12">4.5.2.1. アプリケーションの設定</a><ul>
<li><a class="reference internal" href="#id13">4.5.2.1.1. Spring Dataのページネーション機能を有効化するための設定</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id14">4.5.2.2. ページ検索の実装</a><ul>
<li><a class="reference internal" href="#pagination-how-to-use-page-search-impl-app">4.5.2.2.1. アプリケーション層の実装</a></li>
<li><a class="reference internal" href="#mybatis3">4.5.2.2.2. ドメイン層の実装(MyBatis3編)</a></li>
<li><a class="reference internal" href="#jpa">4.5.2.2.3. ドメイン層の実装(JPA編)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id16">4.5.2.3. ページネーションの実装</a><ul>
<li><a class="reference internal" href="#id17">4.5.2.3.1. 基本実装(JSP)</a><ul>
<li><a class="reference internal" href="#id18">4.5.2.3.1.1. 取得データの表示</a></li>
<li><a class="reference internal" href="#pagination-how-to-use-make-jsp-basic-paginationlink">4.5.2.3.1.2. ページネーションリンクの表示</a></li>
<li><a class="reference internal" href="#id20">4.5.2.3.1.3. ページネーション情報の表示</a></li>
<li><a class="reference internal" href="#pagination-how-to-use-make-jsp-basic-search-criteria">4.5.2.3.1.4. ページリンクで検索条件を引き継ぐ</a></li>
<li><a class="reference internal" href="#id22">4.5.2.3.1.5. ページリンクでソート条件を引き継ぐ</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pagination-how-to-use-make-jsp-layout">4.5.2.3.2. レイアウト変更(JSP)</a><ul>
<li><a class="reference internal" href="#id24">4.5.2.3.2.1. 先頭ページと最終ページに移動するリンクの削除</a></li>
<li><a class="reference internal" href="#id25">4.5.2.3.2.2. 前ページと次ページに移動するリンクの削除</a></li>
<li><a class="reference internal" href="#disabled">4.5.2.3.2.3. disabled状態のリンクの削除</a></li>
<li><a class="reference internal" href="#id26">4.5.2.3.2.4. 指定ページへ移動するリンクの最大表示数の変更</a></li>
<li><a class="reference internal" href="#id27">4.5.2.3.2.5. 指定ページへ移動するリンクの削除</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id28">4.5.2.3.3. 動作変更(JSP)</a><ul>
<li><a class="reference internal" href="#id29">4.5.2.3.3.1. ソート条件の指定</a></li>
<li><a class="reference internal" href="#javascript">4.5.2.3.3.2. JavaScriptを使用したページリンクの無効化</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#thymeleaf">4.5.2.4. Thymeleafの実装</a><ul>
<li><a class="reference internal" href="#id30">4.5.2.4.1. テンプレートHTMLの実装</a><ul>
<li><a class="reference internal" href="#id31">4.5.2.4.1.1. 取得データの表示</a></li>
<li><a class="reference internal" href="#pagination-how-to-use-make-thymeleaf-basic-paginationlink">4.5.2.4.1.2. ページネーションリンクの表示</a><ul>
<li><a class="reference internal" href="#pagination-how-to-use-make-thymeleaf-basic-paginationlink-link-expressionobject">4.5.2.4.1.2.1. リンクの出力範囲を計算する式オブジェクトを実装する</a></li>
<li><a class="reference internal" href="#pagination-how-to-use-make-thymeleaf-basic-paginationlink-impl-fragment">4.5.2.4.1.2.2. フラグメントにページネーションリンクのHTMLを実装する</a></li>
<li><a class="reference internal" href="#pagination-how-to-use-make-thymeleaf-basic-paginationlink-impl-usefragment">4.5.2.4.1.2.3. フラグメントを利用してページネーションリンクを表示する</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id36">4.5.2.4.1.3. ページネーション情報の表示</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#appendix">4.5.3. Appendix</a><ul>
<li><a class="reference internal" href="#pageablehandlermethodargumentresolver">4.5.3.1. <code class="docutils literal notranslate"><span class="pre">PageableHandlerMethodArgumentResolver</span></code>のプロパティ値について</a></li>
<li><a class="reference internal" href="#sorthandlermethodargumentresolver">4.5.3.2. <code class="docutils literal notranslate"><span class="pre">SortHandlerMethodArgumentResolver</span></code>のプロパティ値について</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="SessionManagement.html"
                          title="previous chapter"><span class="section-number">4.4. </span>セッション管理</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="DoubleSubmitProtection.html"
                          title="next chapter"><span class="section-number">4.6. </span>二重送信防止</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/ArchitectureInDetail/WebApplicationDetail/Pagination.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="id1">
<h1><span class="section-number">4.5. </span>ページネーション<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="id2">
<p class="topic-title">目次</p>
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id37">Overview</a></p>
<ul>
<li><p><a class="reference internal" href="#pagination-overview-page" id="id38">ページ分割時の一覧画面の表示について</a></p></li>
<li><p><a class="reference internal" href="#pagination-overview-page-search" id="id39">ページ検索について</a></p>
<ul>
<li><p><a class="reference internal" href="#spring-data" id="id40">Spring Data提供のページ検索機能について</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#pagination-overview-page-display" id="id41">ページネーションの表示について</a></p>
<ul>
<li><p><a class="reference internal" href="#pagination-overview-page-display-fetcheddata" id="id42">取得データの表示について</a></p></li>
<li><p><a class="reference internal" href="#pagination-overview-page-display-paginationlink" id="id43">ページネーションリンクの表示について</a></p></li>
<li><p><a class="reference internal" href="#pagination-overview-page-display-paginationinfo" id="id44">ページネーション情報の表示について</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id11" id="id45">ページネーション機能使用時の処理フロー</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#how-to-use" id="id46">How to use</a></p>
<ul>
<li><p><a class="reference internal" href="#id12" id="id47">アプリケーションの設定</a></p>
<ul>
<li><p><a class="reference internal" href="#id13" id="id48">Spring Dataのページネーション機能を有効化するための設定</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id14" id="id49">ページ検索の実装</a></p>
<ul>
<li><p><a class="reference internal" href="#pagination-how-to-use-page-search-impl-app" id="id50">アプリケーション層の実装</a></p></li>
<li><p><a class="reference internal" href="#mybatis3" id="id51">ドメイン層の実装(MyBatis3編)</a></p></li>
<li><p><a class="reference internal" href="#jpa" id="id52">ドメイン層の実装(JPA編)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id16" id="id53">ページネーションの実装</a></p>
<ul>
<li><p><a class="reference internal" href="#id17" id="id54">基本実装(JSP)</a></p></li>
<li><p><a class="reference internal" href="#pagination-how-to-use-make-jsp-layout" id="id55">レイアウト変更(JSP)</a></p></li>
<li><p><a class="reference internal" href="#id28" id="id56">動作変更(JSP)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#thymeleaf" id="id57">Thymeleafの実装</a></p>
<ul>
<li><p><a class="reference internal" href="#id30" id="id58">テンプレートHTMLの実装</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#appendix" id="id59">Appendix</a></p>
<ul>
<li><p><a class="reference internal" href="#pageablehandlermethodargumentresolver" id="id60"><code class="docutils literal notranslate"><span class="pre">PageableHandlerMethodArgumentResolver</span></code>のプロパティ値について</a></p></li>
<li><p><a class="reference internal" href="#sorthandlermethodargumentresolver" id="id61"><code class="docutils literal notranslate"><span class="pre">SortHandlerMethodArgumentResolver</span></code>のプロパティ値について</a></p></li>
</ul>
</li>
</ul>
</nav>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="overview">
<h2><a class="toc-backref" href="#id37" role="doc-backlink"><span class="section-number">4.5.1. </span>Overview</a><a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h2>
<p>本章では、検索条件に一致するデータをページ分割して表示する方法(ページネーション)について説明する。</p>
<div class="line-block">
<div class="line"><strong>検索条件に一致するデータが大量になる場合は、ページネーション機能を使用することを推奨する。</strong></div>
<div class="line">一度に大量のデータを取得し画面に表示すると、以下3点の問題が発生する可能性がある。</div>
</div>
<ul>
<li><div class="line-block">
<div class="line">サーバ側のメモリ枯渇の発生。</div>
<div class="line">単発のリクエストで問題が発生しなくても、同時に複数実行された場合に<code class="docutils literal notranslate"><span class="pre">java.lang.OutOfMemoryError</span></code>が発生する可能性がある。</div>
</div>
</li>
<li><div class="line-block">
<div class="line">ネットワーク負荷の発生。</div>
<div class="line">不要なデータがネットワークに流れることで、ネットワーク全体にかかる負荷が高くなり、システム全体のレスポンスタイムに影響を与える可能性がある。</div>
</div>
</li>
<li><div class="line-block">
<div class="line">画面のレスポンス遅延の発生。</div>
<div class="line">大量のデータを扱う場合、サーバの処理、ネットワークのトラフィック処理、クライアントの描画処理の全てで時間がかかるため、画面のレスポンスが遅くなる可能性がある。</div>
</div>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="pagination-overview-page">
<span id="id3"></span><h3><a class="toc-backref" href="#id38" role="doc-backlink"><span class="section-number">4.5.1.1. </span>ページ分割時の一覧画面の表示について</a><a class="headerlink" href="#pagination-overview-page" title="Permalink to this heading">¶</a></h3>
<div class="line-block">
<div class="line">ページネーション機能を利用してページ分割した場合、以下のような画面になる。</div>
<div class="line">各要素の表示にはサーバ側で行う検索処理をページ検索に対応させる必要がある。ページ検索機能については、「<a class="reference internal" href="#pagination-overview-page-search"><span class="std std-ref">ページ検索について</span></a>」を参照されたい。</div>
<div class="line">また、各要素の概要及びHTML構造等については、「<a class="reference internal" href="#pagination-overview-page-display"><span class="std std-ref">ページネーションの表示について</span></a>」を参照されたい。</div>
</div>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/pagination-overview_screen.png"><img alt="Screen image of Pagination." src="../../_images/pagination-overview_screen.png" style="width: 100%;" /></a>
</figure>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">ページ検索処理で取得したデータを表示する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">ページを移動するためのリンクを表示する。</div>
<div class="line">リンク押下時には、該当ページを表示するためのリクエストを送信する。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">ページネーションに関連する情報(合計件数、合計ページ数、表示ページ数など)を表示する。</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="pagination-overview-page-search">
<span id="id4"></span><h3><a class="toc-backref" href="#id39" role="doc-backlink"><span class="section-number">4.5.1.2. </span>ページ検索について</a><a class="headerlink" href="#pagination-overview-page-search" title="Permalink to this heading">¶</a></h3>
<div class="line-block">
<div class="line">ページネーションを実現する際には、まずサーバ側で行う検索処理をページ検索できるように実装する必要がある。</div>
<div class="line">本ガイドラインでは、サーバ側のページ検索は、Spring Dataから提供されている仕組みを利用することを前提としている。</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="spring-data">
<span id="pagination-overview-page-springdata"></span><h4><a class="toc-backref" href="#id40" role="doc-backlink"><span class="section-number">4.5.1.2.1. </span>Spring Data提供のページ検索機能について</a><a class="headerlink" href="#spring-data" title="Permalink to this heading">¶</a></h4>
<p>Spring Dataより提供されているページ検索用の機能は、以下の通り。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><div class="line-block">
<div class="line">リクエストパラメータよりページ検索に必要な情報(検索対象のページ位置、取得件数、ソート条件)を抽出し、抽出した情報を<code class="docutils literal notranslate"><span class="pre">org.springframework.data.domain.Pageable</span></code>のオブジェクトとしてControllerの引数に引き渡す。</div>
<div class="line">この機能は、<code class="docutils literal notranslate"><span class="pre">org.springframework.data.web.PageableHandlerMethodArgumentResolver</span></code>クラスとして提供されており、<code class="file docutils literal notranslate"><span class="pre">spring-mvc.xml</span></code>の<code class="docutils literal notranslate"><span class="pre">&lt;mvc:argument-resolvers&gt;</span></code>要素に追加することで有効となる。</div>
<div class="line">リクエストパラメータについては、「<a class="reference internal" href="#pagination-overview-pagesearch-requestparameter"><span class="std std-ref">Note欄</span></a>」を参照されたい。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><div class="line-block">
<div class="line">ページ情報(合計件数、該当ページのデータ、検索対象のページ位置、取得件数、ソート条件)を保持する。</div>
<div class="line">この機能は、<code class="docutils literal notranslate"><span class="pre">org.springframework.data.domain.Page</span></code>インタフェースとして提供されており、デフォルトの実装クラスとして<code class="docutils literal notranslate"><span class="pre">org.springframework.data.domain.PageImpl</span></code>が提供されている。</div>
</div>
<ul>
<li><p>JSP</p>
<p>共通ライブラリより提供しているページネーションリンクを出力するためのJSPタグライブラリを使用し、Pageオブジェクトから必要なデータを取得する。</p>
</li>
<li><p>Thymeleaf</p>
<p>ページネーションリンクを出力する際には、<code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトから必要なデータを取得する。</p>
</li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><div class="line-block">
<div class="line">データベースアクセスとしてSpring Data JPAを使用する場合は、RepositoryのQueryメソッドの引数に<code class="docutils literal notranslate"><span class="pre">Pageable</span></code>オブジェクトを指定することで、該当ページの情報が<code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトとして返却される。</div>
<div class="line">合計件数を取得するSQLの発行、ソート条件の追加、該当ページに一致するデータの抽出などの処理が全て自動で行われる。</div>
<div class="line">データベースアクセスとして、MyBatisを使用する場合は、Spring Data JPAが自動で行ってくれる処理を、Java(Service)及びSQLマッピングファイル内で実装する必要がある。</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note" id="pagination-overview-pagesearch-requestparameter">
<p class="admonition-title">Note</p>
<p><strong>ページ検索用のリクエストパラメータについて</strong></p>
<p>Spring Dataより提供されているページ検索用のリクエストパラメータは以下の3つとなる。</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 15.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>パラメータ名</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><ol class="arabic simple">
<li></li>
</ol>
</td>
<td><p>page</p></td>
<td><div class="line-block">
<div class="line">検索対象のページ位置を指定するためのリクエストパラメータ。</div>
<div class="line">値には、0以上の数値を指定する。</div>
<div class="line">デフォルトの設定では、ページ位置の値は”<code class="docutils literal notranslate"><span class="pre">0</span></code>“ から開始する。そのため、1ページ目のデータを取得する場合は”<code class="docutils literal notranslate"><span class="pre">0</span></code>“を、2ページ目のデータを取得する場合は”<code class="docutils literal notranslate"><span class="pre">1</span></code>“を指定する必要がある。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><ol class="arabic simple" start="2">
<li></li>
</ol>
</td>
<td><p>size</p></td>
<td><div class="line-block">
<div class="line">取得する件数を指定するためのリクエストパラメータ。</div>
<div class="line">値には、1以上の数値を指定する。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">PageableHandlerMethodArgumentResolver</span></code>の<code class="docutils literal notranslate"><span class="pre">maxPageSize</span></code>に指定された値より大きい値が指定された場合は、<code class="docutils literal notranslate"><span class="pre">maxPageSize</span></code>の値が<code class="docutils literal notranslate"><span class="pre">size</span></code>の値となる。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><ol class="arabic simple" start="3">
<li></li>
</ol>
</td>
<td><p>sort</p></td>
<td><div class="line-block">
<div class="line">ソート条件を指定するためのパラメータ(複数指定可能)。</div>
<div class="line">値には、<code class="docutils literal notranslate"><span class="pre">{ソート項目名(,ソート順)}</span></code>の形式で指定する。</div>
<div class="line">ソート順には、<code class="docutils literal notranslate"><span class="pre">ASC</span></code>又は<code class="docutils literal notranslate"><span class="pre">DESC</span></code>のどちらかの値を指定し、省略した場合は<code class="docutils literal notranslate"><span class="pre">ASC</span></code>が適用される。</div>
<div class="line">項目名は”<code class="docutils literal notranslate"><span class="pre">,</span></code>“区切りで複数指定することが可能である。</div>
<div class="line">例えば、クエリ文字列として<code class="docutils literal notranslate"><span class="pre">sort=lastModifiedDate,id,DESC&amp;sort=subId</span></code>が指定された場合、<code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span> <span class="pre">lastModifiedDate</span> <span class="pre">DESC,</span> <span class="pre">id</span> <span class="pre">DESC,</span> <span class="pre">subId</span> <span class="pre">ASC</span></code>のようなOrder By句をQueryに追加することになる。</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="pagination-overview-page-display">
<span id="id5"></span><h3><a class="toc-backref" href="#id41" role="doc-backlink"><span class="section-number">4.5.1.3. </span>ページネーションの表示について</a><a class="headerlink" href="#pagination-overview-page-display" title="Permalink to this heading">¶</a></h3>
<p>「<a class="reference internal" href="#pagination-overview-page"><span class="std std-ref">ページ分割時の一覧画面の表示について</span></a>」にて説明した画面の各要素について説明する。</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="pagination-overview-page-display-fetcheddata">
<span id="id6"></span><h4><a class="toc-backref" href="#id42" role="doc-backlink"><span class="section-number">4.5.1.3.1. </span>取得データの表示について</a><a class="headerlink" href="#pagination-overview-page-display-fetcheddata" title="Permalink to this heading">¶</a></h4>
<div class="line-block">
<div class="line">ページ検索処理で検索条件(検索対象のページ位置、取得件数、ソート条件等)を指定して取得したデータを表示する。</div>
<div class="line">ページ検索については、「<a class="reference internal" href="#pagination-overview-page-search"><span class="std std-ref">ページ検索について</span></a>」を参照されたい。</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="pagination-overview-page-display-paginationlink">
<span id="id7"></span><h4><a class="toc-backref" href="#id43" role="doc-backlink"><span class="section-number">4.5.1.3.2. </span>ページネーションリンクの表示について</a><a class="headerlink" href="#pagination-overview-page-display-paginationlink" title="Permalink to this heading">¶</a></h4>
<div class="line-block">
<div class="line">この章で実装例として取り上げるページネーションリンクについて以下の流れで説明する。</div>
</div>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#pagination-overview-page-display-paginationlink-structure"><span class="std std-ref">ページネーションリンクの構成</span></a></p></li>
<li><p><a class="reference internal" href="#pagination-overview-page-display-paginationlink-htmlstructure"><span class="std std-ref">ページネーションリンクのHTML構造</span></a></p></li>
<li><p><a class="reference internal" href="#pagination-overview-page-display-paginationlink-taglibparameters"><span class="std std-ref">JSPタブライブラリのパラメータについて</span></a></p></li>
</ol>
<div class="line-block">
<div class="line">なおこの章では、TERASOLUNA共通ライブラリで提供されるJSPタグである<code class="docutils literal notranslate"><span class="pre">&lt;t:pagination&gt;</span></code>のデフォルト設定で出力されるHTMLを例に、ページネーションリンクの実装例を説明する。</div>
<div class="line">実装例のページネーションリンクの構成・レイアウト等は、あくまでも一例である。実装例を参考にアプリケーションの要件によって適宜変更すること。</div>
<div class="line"><br /></div>
<div class="line">以降の説明で使用する画面は、Bootstrap v3.0.0のスタイルシートを適用している。</div>
<div class="line"><br /></div>
</div>
<section id="pagination-overview-page-display-paginationlink-structure">
<span id="id8"></span><h5><span class="section-number">4.5.1.3.2.1. </span>ページネーションリンクの構成<a class="headerlink" href="#pagination-overview-page-display-paginationlink-structure" title="Permalink to this heading">¶</a></h5>
<p>ページネーションリンクは、以下の要素から構成される。</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/pagination-how_to_use_jsp_pagelink_description.png"><img alt="Structure of the pagination link." src="../../_images/pagination-how_to_use_jsp_pagelink_description.png" style="width: 90%;" /></a>
</figure>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">最初のページに移動するためのリンク。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">前のページに移動するためのリンク。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">指定したページに移動するためのリンク。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">次のページに移動するためのリンク。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">最後のページに移動するためのリンク。</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>ページネーションリンクは、以下の状態をもつ。</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/pagination-how_to_use_jsp_pagelink_description_status.png"><img alt="Status of the pagination link." src="../../_images/pagination-how_to_use_jsp_pagelink_description_status.png" style="width: 90%;" /></a>
</figure>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(6)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">現在表示しているページで操作することができないリンクであることを示す状態。</div>
<div class="line">具体的には、1ページ目を表示している時の「最初のページに移動するためのリンク」「前のページに移動するためのリンク」と、最終ページを表示している時の「次のページに移動するためのリンク」「最後のページに移動するためのリンク」がこの状態となる。</div>
<div class="line">この状態を<code class="docutils literal notranslate"><span class="pre">disabled</span></code>と定義する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(7)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">現在表示しているページであることを示す状態。</div>
<div class="line">この状態を<code class="docutils literal notranslate"><span class="pre">active</span></code>と定義する。</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">上記を実現するHTMLは、以下の構造となる。</div>
<div class="line">図中の番号は、上記で説明した「ページネーションリンクの構成」と「ページネーションリンクの状態」の項番に対応させている。</div>
</div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" role="tablist"><button aria-controls="panel-0-SlNQ" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-0-SlNQ" name="SlNQ" role="tab" tabindex="0">JSP</button><button aria-controls="panel-0-VGh5bWVsZWFm" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-VGh5bWVsZWFm" name="VGh5bWVsZWFm" role="tab" tabindex="-1">Thymeleaf</button></div><div aria-labelledby="tab-0-SlNQ" class="sphinx-tabs-panel group-tab" id="panel-0-SlNQ" name="SlNQ" role="tabpanel" tabindex="0"><div class="highlight-jsp notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;t:pagination</span><span class="w"> </span><span class="na">page=</span><span class="s">&quot;${page}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-VGh5bWVsZWFm" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-VGh5bWVsZWFm" name="VGh5bWVsZWFm" role="tabpanel" tabindex="0"><div class="admonition-todo admonition" id="id9">
<p class="admonition-title">Todo</p>
<p>ThymeleafのDialectは次版以降に作成予定となる。</p>
</div>
</div></div>
<ul>
<li><p>出力されるHTML</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/pagination-overview_html.png"><img alt="html of the pagination link." src="../../_images/pagination-overview_html.png" style="width: 90%;" /></a>
</figure>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="html">
<span id="pagination-overview-page-display-paginationlink-htmlstructure"></span><h5><span class="section-number">4.5.1.3.2.2. </span>ページネーションリンクのHTML構造<a class="headerlink" href="#html" title="Permalink to this heading">¶</a></h5>
<p>ページネーションリンクのHTMLは、以下の構造となる。</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" role="tablist"><button aria-controls="panel-1-SlNQ" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-1-SlNQ" name="SlNQ" role="tab" tabindex="0">JSP</button><button aria-controls="panel-1-VGh5bWVsZWFm" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-VGh5bWVsZWFm" name="VGh5bWVsZWFm" role="tab" tabindex="-1">Thymeleaf</button></div><div aria-labelledby="tab-1-SlNQ" class="sphinx-tabs-panel group-tab" id="panel-1-SlNQ" name="SlNQ" role="tabpanel" tabindex="0"><p>TERASOLUNA共通ライブラリで提供しているJSPタグを使用する。</p>
<ul>
<li><p>HTML</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/pagination-overview_html_basic.png"><img alt="html structure of the pagination link." src="../../_images/pagination-overview_html_basic.png" style="width: 100%;" /></a>
</figure>
</li>
<li><p>画面イメージ</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/pagination-overview_html_basic_screen.png"><img alt="screen structure of the pagination link." src="../../_images/pagination-overview_html_basic_screen.png" style="width: 80%;" /></a>
</figure>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 70.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>デフォルト値</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">ページネーションリンクの構成要素をまとめるための要素。</div>
<div class="line">共通ライブラリでは、この部分を「Outer Element」と呼び、複数の「Inner Element」を保持する。</div>
<div class="line">使用する要素は、JSPタグライブラリのパラメータによって変更することが出来る。</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;ul&gt;</span></code>要素</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">「Outer Element」のスタイルクラスを指定するための属性。</div>
<div class="line">共通ライブラリでは、この部分を「Outer Element Class」と呼び、属性値はJSPタグライブラリのパラメータによって指定する。</div>
</div>
</td>
<td><div class="line-block">
<div class="line">指定なし</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">ページネーションリンクを構成するための要素。</div>
<div class="line">共通ライブラリでは、この部分を「Inner Element」と呼び、ページ移動するためのリクエストを送信するための<code class="docutils literal notranslate"><span class="pre">&lt;a&gt;</span></code>要素を保持する。</div>
<div class="line">使用する要素は、JSPタグライブラリのパラメータによって変更することが出来る。</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;li&gt;</span></code>要素</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">「Inner Element」のスタイルクラスを指定するための属性。</div>
<div class="line">共通ライブラリでは、この部分を「Inner Element Class」と呼び、属性値は表示しているページ位置によってJSPタグライブラリ内の処理で切り替わる。</div>
</div>
</td>
<td><div class="line-block">
<div class="line">「<a class="reference internal" href="#pagination-overview-paginationlink-innerelementclass"><span class="std std-ref">Note欄</span></a>」を参照されたい。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">ページ移動するためのリクエストを送信するための要素。</div>
<div class="line">共通ライブラリでは、この部分を「Page Link」と呼ぶ。</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;a&gt;</span></code>要素固定</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(6)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">ページ移動するためのURLを指定するための属性。</div>
<div class="line">共通ライブラリでは、この部分を「Page Link URL」と呼ぶ。</div>
</div>
</td>
<td><div class="line-block">
<div class="line">下記の「<a class="reference internal" href="#pagination-overview-paginationlink-pagelinkurl"><span class="std std-ref">Note欄</span></a>」を参照されたい。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(7)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">ページ移動するためのリンクの表示テキストを指定する。</div>
<div class="line">共通ライブラリでは、この部分を「Page Link Text」と呼ぶ。</div>
</div>
</td>
<td><div class="line-block">
<div class="line">下記の「<a class="reference internal" href="#pagination-overview-paginationlink-pagelinktext"><span class="std std-ref">Note欄</span></a>」を参照されたい。</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>「Inner Element」の数について</strong></p>
<p>デフォルトの設定では、「Inner Element」は最大で14個となる。内訳は以下の通り。</p>
<ul class="simple">
<li><p>最初のページに移動するためのリンク : 1</p></li>
<li><p>前のページに移動するためのリンク : 1</p></li>
<li><p>指定したページに移動するためのリンク : 最大10</p></li>
<li><p>次のページに移動するためのリンク : 1</p></li>
<li><p>最後のページに移動するためのリンク : 1</p></li>
</ul>
<p>「Inner Element」の数は、JSPタグライブラリのパラメータの指定によって変更することができる。</p>
</div>
</li>
</ul>
<blockquote id="pagination-overview-paginationlink-innerelementclass">
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>「Inner Element Class」の設定値について</strong></p>
<p>デフォルトの設定では、ページ位置によって、以下3つの値となる。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">disabled</span></code> : 現在表示しているページでは操作することができないリンクであることを示すためのスタイルクラス。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">active</span></code> : 現在表示しているページのリンクであることを示すためのスタイルクラス。</p></li>
<li><p>指定なし : 上記以外のリンクであることを示す。</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">disabled</span></code>と<code class="docutils literal notranslate"><span class="pre">active</span></code>は、JSPタグライブラリのパラメータの指定によって別の値に変更することができる。</p>
</div>
</div></blockquote>
<blockquote id="pagination-overview-paginationlink-pagelinkurl">
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>「Page Link URL」のデフォルト値について</strong></p>
<p>リンクの状態が<code class="docutils literal notranslate"><span class="pre">disabled</span></code>と<code class="docutils literal notranslate"><span class="pre">active</span></code>の場合は<code class="docutils literal notranslate"><span class="pre">javascript:void(0)</span></code>、それ以外の場合は<code class="docutils literal notranslate"><span class="pre">?page={page}&amp;size={size}</span></code>となる。</p>
<p>「Page Link URL」は、JSPタグライブラリのパラメータの指定によって別の値に変更することができる。</p>
</div>
</div></blockquote>
<blockquote id="pagination-overview-paginationlink-pagelinktext">
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>「Page Link Text」のデフォルト値について</strong></p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 55.6%" />
<col style="width: 33.3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>リンク名</p></th>
<th class="head"><p>デフォルト値</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><ol class="arabic simple">
<li></li>
</ol>
</td>
<td><p>最初のページに移動するためのリンク</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;&lt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><ol class="arabic simple" start="2">
<li></li>
</ol>
</td>
<td><p>前のページに移動するためのリンク</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;</span></code></p></td>
</tr>
<tr class="row-even"><td><ol class="arabic simple" start="3">
<li></li>
</ol>
</td>
<td><p>指定したページに移動するためのリンク</p></td>
<td><div class="line-block">
<div class="line">該当ページのページ番号</div>
<div class="line">(変更不可)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><ol class="arabic simple" start="4">
<li></li>
</ol>
</td>
<td><p>次のページに移動するためのリンク</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&gt;</span></code></p></td>
</tr>
<tr class="row-even"><td><ol class="arabic simple" start="5">
<li></li>
</ol>
</td>
<td><p>最後のページに移動するためのリンク</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code></p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>「指定したページに移動するためのリンク」以外は、JSPタグライブラリのパラメータの指定によって、別の値に変更することができる。</p>
</div>
</div></blockquote>
</div><div aria-labelledby="tab-1-VGh5bWVsZWFm" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-VGh5bWVsZWFm" name="VGh5bWVsZWFm" role="tabpanel" tabindex="0"><p>スタイルクラスの指定は省略している。スタイルクラスは、作成するアプリケーションの要件に応じて適宜指定すること。</p>
<ul>
<li><p>HTML</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/pagination-overview_html_basic.png"><img alt="html structure of the pagination link." src="../../_images/pagination-overview_html_basic.png" style="width: 80%;" /></a>
</figure>
</li>
<li><p>画面イメージ</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/pagination-overview_html_basic_screen.png"><img alt="screen structure of the pagination link." src="../../_images/pagination-overview_html_basic_screen.png" style="width: 80%;" /></a>
</figure>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">ページネーションリンクの構成要素をまとめるための要素。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">ページネーションリンクを構成するための要素。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">ページ移動するためのリクエストを送信するための要素。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">ページ移動するためのURLを指定するための属性。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">ページ移動するためのリンクの表示テキストを指定する。</div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
</div></div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="jsp">
<span id="pagination-overview-page-display-paginationlink-taglibparameters"></span><h5><span class="section-number">4.5.1.3.2.3. </span>JSPタブライブラリのパラメータについて<a class="headerlink" href="#jsp" title="Permalink to this heading">¶</a></h5>
<p>JSPタグライブラリのパラメータに値を指定することで、デフォルト動作を変更することができる。</p>
<p>以下にパラメータの一覧を示す。</p>
<p><strong>レイアウトを制御するためのパラメータ</strong></p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 25.0%" />
<col style="width: 65.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>パラメータ名</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><ol class="arabic simple">
<li></li>
</ol>
</td>
<td><p>outerElement</p></td>
<td><div class="line-block">
<div class="line">「Outer Element」として使用するHTML要素名を指定する。</div>
<div class="line">例) div</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><ol class="arabic simple" start="2">
<li></li>
</ol>
</td>
<td><p>outerElementClass</p></td>
<td><div class="line-block">
<div class="line">「Outer Element」のclass属性に設定するスタイルシートのクラス名を指定する。</div>
<div class="line">例) pagination</div>
</div>
</td>
</tr>
<tr class="row-even"><td><ol class="arabic simple" start="3">
<li></li>
</ol>
</td>
<td><p>innerElement</p></td>
<td><div class="line-block">
<div class="line">「Inner Element」として使用するHTML要素名を指定する。</div>
<div class="line">例) span</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><ol class="arabic simple" start="4">
<li></li>
</ol>
</td>
<td><p>innerElementClass</p></td>
<td><div class="line-block">
<div class="line">「Inner Element」のclass属性に設定するスタイルシートのクラス名を指定する。<strong>5.6.0から追加</strong></div>
<div class="line">例) enablePage</div>
</div>
</td>
</tr>
<tr class="row-even"><td><ol class="arabic simple" start="5">
<li></li>
</ol>
</td>
<td><p>disabledClass</p></td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">disabled</span></code>状態と判断された「Inner Element」のclass属性に設定する値を指定する。</div>
<div class="line">例) hiddenPage</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><ol class="arabic simple" start="6">
<li></li>
</ol>
</td>
<td><p>activeClass</p></td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">active</span></code>状態の「Inner Element」のclass属性に設定する値を指定する。</div>
<div class="line">例) currentPage</div>
</div>
</td>
</tr>
<tr class="row-even"><td><ol class="arabic simple" start="7">
<li></li>
</ol>
</td>
<td><p>anchorClass</p></td>
<td><div class="line-block">
<div class="line">「Page Link」のclass属性に設定するスタイルシートのクラス名を指定する。<strong>5.7.0から追加</strong></div>
<div class="line">例) pageLink</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><ol class="arabic simple" start="8">
<li></li>
</ol>
</td>
<td><p>firstLinkText</p></td>
<td><div class="line-block">
<div class="line">「最初のページに移動するためのリンク」の「Page Link Text」に設定する値を指定する。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>を指定すると、「最初のページに移動するためのリンク」自体が出力されなくなる。</div>
<div class="line">例) First</div>
</div>
</td>
</tr>
<tr class="row-even"><td><ol class="arabic simple" start="9">
<li></li>
</ol>
</td>
<td><p>previousLinkText</p></td>
<td><div class="line-block">
<div class="line">「前のページに移動するためのリンク」の「Page Link Text」に設定する値を指定する。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>を指定すると、「前のページに移動するためのリンク」自体が出力されなくなる。</div>
<div class="line">例) Prev</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><ol class="arabic simple" start="10">
<li></li>
</ol>
</td>
<td><p>nextLinkText</p></td>
<td><div class="line-block">
<div class="line">「次のページに移動するためのリンク」の「Page Link Text」に設定する値を指定する。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>を指定すると、「次のページに移動するためのリンク」自体が出力されなくなる。</div>
<div class="line">例) Next</div>
</div>
</td>
</tr>
<tr class="row-even"><td><ol class="arabic simple" start="11">
<li></li>
</ol>
</td>
<td><p>lastLinkText</p></td>
<td><div class="line-block">
<div class="line">「最後のページに移動するためのリンク」の「Page Link Text」に設定する値を指定する。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>を指定すると、「次のページに移動するためのリンク」自体が出力されなくなる。</div>
<div class="line">例) Last</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><ol class="arabic simple" start="12">
<li></li>
</ol>
</td>
<td><p>maxDisplayCount</p></td>
<td><div class="line-block">
<div class="line">「指定したページに移動するためのリンク」の最大表示数を指定する。</div>
<div class="line">“<code class="docutils literal notranslate"><span class="pre">0</span></code>“ を指定すると、「指定したページに移動するためのリンク」自体が出力されなくなる。</div>
<div class="line">例) 5</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">レイアウトを制御するためのパラメータを、全てデフォルトから変更した時に出力されるHTMLは以下の通り。</div>
<div class="line">図中の番号は、上記で説明したパラメータ一覧の項番に対応している。</div>
</div>
<ul>
<li><p>JSP</p>
<div class="highlight-jsp notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;t:pagination</span><span class="w"> </span><span class="na">page=</span><span class="s">&quot;${page}&quot;</span>
<span class="w">    </span><span class="na">outerElement=</span><span class="s">&quot;div&quot;</span>
<span class="w">    </span><span class="na">outerElementClass=</span><span class="s">&quot;pagination&quot;</span>
<span class="w">    </span><span class="na">innerElement=</span><span class="s">&quot;span&quot;</span>
<span class="w">    </span><span class="na">innerElementClass=</span><span class="s">&quot;enablePage&quot;</span>
<span class="w">    </span><span class="na">disabledClass=</span><span class="s">&quot;hiddenPage&quot;</span>
<span class="w">    </span><span class="na">activeClass=</span><span class="s">&quot;currentPage&quot;</span>
<span class="w">    </span><span class="na">anchorClass=</span><span class="s">&quot;pageLink&quot;</span>
<span class="w">    </span><span class="na">firstLinkText=</span><span class="s">&quot;First&quot;</span>
<span class="w">    </span><span class="na">previousLinkText=</span><span class="s">&quot;Prev&quot;</span>
<span class="w">    </span><span class="na">nextLinkText=</span><span class="s">&quot;Next&quot;</span>
<span class="w">    </span><span class="na">lastLinkText=</span><span class="s">&quot;Last&quot;</span>
<span class="w">    </span><span class="na">maxDisplayCount=</span><span class="s">&quot;5&quot;</span>
<span class="w">    </span><span class="nt">/&gt;</span>
</pre></div>
</div>
</li>
<li><p>出力されるHTML</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/pagination-overview_html_changed.png"><img alt="html of the pagination link(changed layout)." src="../../_images/pagination-overview_html_changed.png" style="width: 100%;" /></a>
</figure>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>動作を制御するためのパラメータ</strong></p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 25.0%" />
<col style="width: 65.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>パラメータ名</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><ol class="arabic simple">
<li></li>
</ol>
</td>
<td><p>disabledHref</p></td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">disabled</span></code>状態のリンクの「Page Link URL」に設定する値を指定する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><ol class="arabic simple" start="2">
<li></li>
</ol>
</td>
<td><p>pathTmpl</p></td>
<td><div class="line-block">
<div class="line">「Page Link URL」に設定するリクエストパスのテンプレートを指定する。</div>
<div class="line">ページ表示時のリクエストパスとページ移動するためのリクエストパスが異なる場合は、このパラメータにページ移動用のリクエストパスを指定する必要がある。</div>
<div class="line">指定するリクエストパスのテンプレートには、ページ位置(page)や取得件数(size)などをパス変数(プレースホルダ)として指定することができる。</div>
<div class="line">指定した値はUTF-8でURLエンコーディングされる。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><ol class="arabic simple" start="3">
<li></li>
</ol>
</td>
<td><p>queryTmpl</p></td>
<td><div class="line-block">
<div class="line">「Page Link URL」のクエリ文字列のテンプレートを指定する。</div>
<div class="line">ページ移動する際に必要となるページネーション用のクエリ文字列(page,size,sortパラメータ)を生成するためのテンプレートを指定する。</div>
<div class="line">ページ位置や取得件数のリクエストパラメータ名をデフォルト以外の値にする場合は、このパラメータにクエリ文字列を指定する必要がある。</div>
<div class="line">指定するクエリ文字列のテンプレートには、ページ位置(page)や取得件数(size)などをパス変数(プレースホルダ)として指定することができる。</div>
<div class="line">指定した値はUTF-8でURLエンコーディングされる。</div>
<div class="line"><br /></div>
<div class="line">この属性は、ページネーション用のクエリ文字列(page,size,sortパラメータ)を生成するための属性であるため、検索条件を引き継ぐためのクエリ文字列はcriteriaQuery属性に指定すること。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><ol class="arabic simple" start="4">
<li></li>
</ol>
</td>
<td><p>criteriaQuery</p></td>
<td><div class="line-block">
<div class="line">「Page Link URL」に追加する検索条件用のクエリ文字列を指定する。</div>
<div class="line"><strong>「Page Link URL」に検索条件を引き継ぐ場合は、このパラメータに検索条件用のクエリ文字列を指定すること。</strong></div>
<div class="line"><strong>指定した値はURLエンコーディングされないため、URLエンコーディング済みのクエリ文字列を指定する必要がある。</strong></div>
<div class="line"><br /></div>
<div class="line">フォームオブジェクトに格納されている検索条件をURLエンコーディング済みのクエリ文字列に変換する場合は、共通ライブラリから提供しているELファンクション(<code class="docutils literal notranslate"><span class="pre">f:query(Object)</span></code>)を使用すると、簡単に条件を引き継ぐことができる。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><ol class="arabic simple" start="5">
<li></li>
</ol>
</td>
<td><p>disableHtmlEscapeOfCriteriaQuery</p></td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">criteriaQuery</span></code>パラメータに指定された値に対するHTMLエスケープ処理を無効化するためのフラグ。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">true</span></code>を指定する事で、<code class="docutils literal notranslate"><span class="pre">criteriaQuery</span></code>パラメータに指定された値に対してHTMLエスケープ処理が行われなくなる。(デフォルト値は<code class="docutils literal notranslate"><span class="pre">false</span></code>)</div>
<div class="line"><strong>trueを指定する場合は、XSS対策が必要な文字がクエリ文字列内に含まれない事が保証されていること。</strong></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><ol class="arabic simple" start="6">
<li></li>
</ol>
</td>
<td><p>enableLinkOfCurrentPage</p></td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">active</span></code>状態のページリンクを押下した際に、該当ページを再表示するためのリクエストを送信するためのフラグ。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">true</span></code>を指定する事で、「Page Link URL」に該当ページを再表示するためのURL(デフォルト値は<code class="docutils literal notranslate"><span class="pre">?page={page}&amp;size={size}</span></code>)が設定される。(デフォルト値は<code class="docutils literal notranslate"><span class="pre">false</span></code>で、「Page Link URL」には<code class="docutils literal notranslate"><span class="pre">disabledHref</span></code>属性の値が設定される)</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>disabledHrefの設定値について</strong></p>
<p>デフォルトでは、<code class="docutils literal notranslate"><span class="pre">disabledHref</span></code>属性には<code class="docutils literal notranslate"><span class="pre">javascript:void(0)</span></code>が設定されている。ページリンク押下時の動作を無効化するだけであれば、デフォルトのままでよい。</p>
<p>ただし、デフォルトの状態でページリンクにフォーカスを移動又はマウスオーバーした場合、ブラウザのステータスバーに<code class="docutils literal notranslate"><span class="pre">javascript:void(0)</span></code>が表示されることがある。この挙動を変えたい場合は、JavaScriptを使用してページリンク押下時の動作を無効化する必要がある。実装例については、「<a class="reference internal" href="#paginationhowtousedisablepagelinkusingjavascript"><span class="std std-ref">JavaScriptを使用したページリンクの無効化</span></a>」を参照されたい。</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>パス変数(プレースホルダ)について</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">pathTmpl</span></code>及び<code class="docutils literal notranslate"><span class="pre">queryTmpl</span></code>に指定できるパス変数は、以下の通り。</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 25.0%" />
<col style="width: 65.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>パス変数名</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><ol class="arabic simple">
<li></li>
</ol>
</td>
<td><p>page</p></td>
<td><p>ページ位置を埋め込むためのパス変数。</p></td>
</tr>
<tr class="row-odd"><td><ol class="arabic simple" start="2">
<li></li>
</ol>
</td>
<td><p>size</p></td>
<td><p>取得件数を埋め込むためのパス変数。</p></td>
</tr>
<tr class="row-even"><td><ol class="arabic simple" start="3">
<li></li>
</ol>
</td>
<td><p>sortOrderProperty</p></td>
<td><p>ソート条件のソート項目を埋め込むためのパス変数。</p></td>
</tr>
<tr class="row-odd"><td><ol class="arabic simple" start="4">
<li></li>
</ol>
</td>
<td><p>sortOrderDirection</p></td>
<td><p>ソート条件のソート順を埋め込むためのパス変数。</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>パス変数は、<code class="docutils literal notranslate"><span class="pre">{パス変数名}</span></code>の形式で指定する。</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>ソート条件の制約事項</strong></p>
<p>ソート条件のパス変数に設定される値は、ひとつのソート条件のみとなっている。そのため、複数のソート条件を指定して検索した結果を、ページネーション表示する必要がある場合は、共通ライブラリから提供しているJSPタグライブラリを拡張する必要がある。</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">動作を制御するためのパラメータを変更した時に出力されるHTMLは、以下の通り。</div>
<div class="line">図中の番号は、上記で説明したパラメータ一覧の項番に対応している。</div>
</div>
<ul>
<li><p>JSP</p>
<div class="highlight-jsp notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;t:pagination</span><span class="w"> </span><span class="na">page=</span><span class="s">&quot;${page}&quot;</span>
<span class="w">    </span><span class="na">disabledHref=</span><span class="s">&quot;#&quot;</span>
<span class="w">    </span><span class="na">pathTmpl=</span><span class="s">&quot;${pageContext.request.contextPath}/article/list/{page}/{size}&quot;</span>
<span class="w">    </span><span class="na">queryTmpl=</span><span class="s">&quot;sort={sortOrderProperty},{sortOrderDirection}&quot;</span>
<span class="w">    </span><span class="na">criteriaQuery=</span><span class="s">&quot;${f:query(articleSearchCriteriaForm)}&quot;</span>
<span class="w">    </span><span class="na">enableLinkOfCurrentPage=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
</li>
<li><p>出力されるHTML</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/pagination-overview_html_changed2.png"><img alt="html of the pagination link(changed behavior)." src="../../_images/pagination-overview_html_changed2.png" style="width: 100%;" /></a>
</figure>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="pagination-overview-page-display-paginationinfo">
<span id="id10"></span><h4><a class="toc-backref" href="#id44" role="doc-backlink"><span class="section-number">4.5.1.3.3. </span>ページネーション情報の表示について</a><a class="headerlink" href="#pagination-overview-page-display-paginationinfo" title="Permalink to this heading">¶</a></h4>
<div class="line-block">
<div class="line">ページネーションに関する情報の表示を行う。</div>
<div class="line">Spring Data提供のページ検索機能を使用することで、以下の情報を画面に表示することができる。</div>
</div>
<ul class="simple">
<li><p>合計件数</p></li>
<li><p>検索対象のページ位置</p></li>
<li><p>取得件数</p></li>
<li><p>ソート条件</p></li>
</ul>
<div class="line-block">
<div class="line">ページ検索については、「<a class="reference internal" href="#pagination-overview-page-search"><span class="std std-ref">ページ検索について</span></a>」を参照されたい。</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="id11">
<h3><a class="toc-backref" href="#id45" role="doc-backlink"><span class="section-number">4.5.1.4. </span>ページネーション機能使用時の処理フロー</a><a class="headerlink" href="#id11" title="Permalink to this heading">¶</a></h3>
<div class="line-block">
<div class="line">Spring Dataより提供されているページネーション機能を利用した際の処理フローは、以下の通り。</div>
<div class="line">(JSPの場合は共通ライブラリから提供しているJSPタグライブラリを利用する)</div>
</div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" role="tablist"><button aria-controls="panel-2-SlNQ" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-2-SlNQ" name="SlNQ" role="tab" tabindex="0">JSP</button><button aria-controls="panel-2-VGh5bWVsZWFm" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-2-VGh5bWVsZWFm" name="VGh5bWVsZWFm" role="tab" tabindex="-1">Thymeleaf</button></div><div aria-labelledby="tab-2-SlNQ" class="sphinx-tabs-panel group-tab" id="panel-2-SlNQ" name="SlNQ" role="tabpanel" tabindex="0"><figure class="align-default">
<a class="reference internal image-reference" href="../../_images/pagination-overview_flow_jsp.png"><img alt="processing flow of pagination" src="../../_images/pagination-overview_flow_jsp.png" style="width: 100%;" /></a>
</figure>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">検索条件と共に、リクエストパラメータとして検索対象のページ位置(page)と取得件数(size)を指定してリクエストを送信する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">PageableHandlerMethodArgumentResolver</span></code>は、リクエストパラメータに指定されている検索対象のページ位置(page)と取得件数(size)を取得し、<code class="docutils literal notranslate"><span class="pre">Pageable</span></code>オブジェクトを生成する。</div>
<div class="line">生成された<code class="docutils literal notranslate"><span class="pre">Pageable</span></code>オブジェクトは、Controllerのハンドラメソッドの引数に設定される。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Controllerは、引数で受け取った<code class="docutils literal notranslate"><span class="pre">Pageable</span></code>オブジェクトを、Serviceのメソッドに引き渡す。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Serviceは、引数で受け取った<code class="docutils literal notranslate"><span class="pre">Pageable</span></code>オブジェクトを、RepositoryのQueryメソッドに引き渡す。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Repositoryは、検索条件に一致するデータの合計件数(totalElements)と、引数で受け取った<code class="docutils literal notranslate"><span class="pre">Pageable</span></code>オブジェクトに指定されているページ位置(page)と取得件数(size)の範囲に存在するデータを、データベースより取得する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(6)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Repositoryは、取得した合計件数(totalElements)、取得データ(content)、引数で受け取った<code class="docutils literal notranslate"><span class="pre">Pageable</span></code>オブジェクトより<code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトを作成し、Service及びControllerへ返却する。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(7)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Controllerは、返却された<code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトを、<code class="docutils literal notranslate"><span class="pre">Model</span></code>オブジェクトに格納後、JSPに遷移する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(8)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">JSPは、<code class="docutils literal notranslate"><span class="pre">Model</span></code>オブジェクトに格納されている<code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトを取得し、共通ライブラリから提供されているページネーション用のJSPタグライブラリ(<code class="docutils literal notranslate"><span class="pre">&lt;t:pagination&gt;</span></code>)を呼び出す。</div>
<div class="line">ページネーション用のJSPタグライブラリは<code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトを参照し、ページネーションリンクを生成する。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(9)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">JSPで生成したHTMLを、クライアント(ブラウザ)に返却する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(10)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">ページネーションリンクを押下すると、該当ページを表示するためリクエストが送信される。</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Repositoryの実装について</strong></p>
<p>上記フローの(5)と(6)の処理は、使用するO/R Mapperによって実装方法が異なる。</p>
<ul class="simple">
<li><p>MyBatis3を使用する場合は、Java(Service)及びSQLマッピングファイルの実装が必要である。</p></li>
<li><p>Spring Data JPAを使用する場合は、Spring Data JPAの機能で自動的で行われるため実装は不要である。</p></li>
</ul>
<p>具体的な実装例については、</p>
<ul class="simple">
<li><p><a class="reference internal" href="../DataAccessDetail/DataAccessMyBatis3.html"><span class="doc">データベースアクセス（MyBatis3編）</span></a></p></li>
<li><p><a class="reference internal" href="../DataAccessDetail/DataAccessJpa.html"><span class="doc">データベースアクセス（JPA編）</span></a></p></li>
</ul>
<p>を参照されたい。</p>
</div>
</div><div aria-labelledby="tab-2-VGh5bWVsZWFm" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-2-VGh5bWVsZWFm" name="VGh5bWVsZWFm" role="tabpanel" tabindex="0"><figure class="align-default">
<a class="reference internal image-reference" href="../../_images/pagination-overview_flow_thymeleaf.png"><img alt="processing flow of pagination" src="../../_images/pagination-overview_flow_thymeleaf.png" style="width: 100%;" /></a>
</figure>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">検索条件と共に、リクエストパラメータとして検索対象のページ位置(page)と取得件数(size)を指定してリクエストを送信する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">PageableHandlerMethodArgumentResolver</span></code>は、リクエストパラメータに指定されている検索対象のページ位置(page)と取得件数(size)を取得し、<code class="docutils literal notranslate"><span class="pre">Pageable</span></code>オブジェクトを生成する。</div>
<div class="line">生成された<code class="docutils literal notranslate"><span class="pre">Pageable</span></code>オブジェクトは、Controllerのハンドラメソッドの引数に設定される。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Controllerは、引数で受け取った<code class="docutils literal notranslate"><span class="pre">Pageable</span></code>オブジェクトを、Serviceのメソッドに引き渡す。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Serviceは、引数で受け取った<code class="docutils literal notranslate"><span class="pre">Pageable</span></code>オブジェクトを、RepositoryのQueryメソッドに引き渡す。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Repositoryは、検索条件に一致するデータの合計件数(totalElements)と、引数で受け取った<code class="docutils literal notranslate"><span class="pre">Pageable</span></code>オブジェクトに指定されているページ位置(page)と取得件数(size)の範囲に存在するデータを、データベースより取得する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(6)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Repositoryは、取得した合計件数(totalElements)、取得データ(content)、引数で受け取った<code class="docutils literal notranslate"><span class="pre">Pageable</span></code>オブジェクトより<code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトを作成し、Service及びControllerへ返却する。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(7)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Controllerは、返却された<code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトを、<code class="docutils literal notranslate"><span class="pre">Model</span></code>オブジェクトに格納後、ThymeleafのテンプレートHTMLに遷移する。</div>
<div class="line">テンプレートHTMLは、<code class="docutils literal notranslate"><span class="pre">Model</span></code>オブジェクトに格納されている<code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトを取得し、ページネーションリンクを生成する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(8)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">生成したHTMLを、クライアント(ブラウザ)に返却する。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(9)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">ページネーションリンクを押下すると、該当ページを表示するためリクエストが送信される。</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Repositoryの実装について</strong></p>
<p>上記フローの(5)と(6)の具体的な実装例については、</p>
<ul class="simple">
<li><p><a class="reference internal" href="../DataAccessDetail/DataAccessMyBatis3.html"><span class="doc">データベースアクセス（MyBatis3編）</span></a></p></li>
</ul>
<p>を参照されたい。</p>
</div>
</div></div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="how-to-use">
<h2><a class="toc-backref" href="#id46" role="doc-backlink"><span class="section-number">4.5.2. </span>How to use</a><a class="headerlink" href="#how-to-use" title="Permalink to this heading">¶</a></h2>
<p>ページネーション機能の具体的な使用方法を以下に示す。</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="id12">
<h3><a class="toc-backref" href="#id47" role="doc-backlink"><span class="section-number">4.5.2.1. </span>アプリケーションの設定</a><a class="headerlink" href="#id12" title="Permalink to this heading">¶</a></h3>
<section id="id13">
<h4><a class="toc-backref" href="#id48" role="doc-backlink"><span class="section-number">4.5.2.1.1. </span>Spring Dataのページネーション機能を有効化するための設定</a><a class="headerlink" href="#id13" title="Permalink to this heading">¶</a></h4>
<div class="line-block">
<div class="line">リクエストパラメータに指定された検索対象のページ位置(page)、取得件数(size)、ソート条件(sort)を、<code class="docutils literal notranslate"><span class="pre">Pageable</span></code>オブジェクトとしてControllerの引数に設定するための機能を有効化する。</div>
<div class="line">下記の設定は、ブランクプロジェクトでは設定済みの状態になっている。</div>
</div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" role="tablist"><button aria-controls="panel-3-SmF2YSBDb25maWc=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-3-SmF2YSBDb25maWc=" name="SmF2YSBDb25maWc=" role="tab" tabindex="0">Java Config</button><button aria-controls="panel-3-WE1MIENvbmZpZw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-3-WE1MIENvbmZpZw==" name="WE1MIENvbmZpZw==" role="tab" tabindex="-1">XML Config</button></div><div aria-labelledby="tab-3-SmF2YSBDb25maWc=" class="sphinx-tabs-panel group-tab" id="panel-3-SmF2YSBDb25maWc=" name="SmF2YSBDb25maWc=" role="tabpanel" tabindex="0"><p><code class="file docutils literal notranslate"><span class="pre">SpringMvcConfig.java</span></code></p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@EnableAspectJAutoProxy</span>
<span class="nd">@EnableWebMvc</span>
<span class="nd">@Configuration</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SpringMvcConfig</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">WebMvcConfigurer</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">addArgumentResolvers</span><span class="p">(</span>
<span class="w">            </span><span class="n">List</span><span class="o">&lt;</span><span class="n">HandlerMethodArgumentResolver</span><span class="o">&gt;</span><span class="w"> </span><span class="n">argumentResolvers</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">argumentResolvers</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">pageableHandlerMethodArgumentResolver</span><span class="p">());</span><span class="w"> </span><span class="c1">// (1)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Bean</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">PageableHandlerMethodArgumentResolver</span><span class="w"> </span><span class="nf">pageableHandlerMethodArgumentResolver</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PageableHandlerMethodArgumentResolver</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">addArgumentResolvers</span></code>で<code class="docutils literal notranslate"><span class="pre">argumentResolvers</span></code>に<code class="docutils literal notranslate"><span class="pre">org.springframework.data.web.PageableHandlerMethodArgumentResolver</span></code>を追加する。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">PageableHandlerMethodArgumentResolver</span></code>で指定できるプロパティについては、「<a class="reference internal" href="#paginatin-appendix-pageablehandlermethodargumentresolver"><span class="std std-ref">PageableHandlerMethodArgumentResolverのプロパティ値について</span></a>」を参照されたい。</div>
</div>
</td>
</tr>
</tbody>
</table>
</div><div aria-labelledby="tab-3-WE1MIENvbmZpZw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-3-WE1MIENvbmZpZw==" name="WE1MIENvbmZpZw==" role="tabpanel" tabindex="0"><p><code class="file docutils literal notranslate"><span class="pre">spring-mvc.xml</span></code></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;mvc:annotation-driven&gt;</span>
<span class="w">    </span><span class="nt">&lt;mvc:argument-resolvers&gt;</span>
<span class="w">        </span><span class="cm">&lt;!-- (1) --&gt;</span>
<span class="w">        </span><span class="nt">&lt;bean</span>
<span class="w">            </span><span class="na">class=</span><span class="s">&quot;org.springframework.data.web.PageableHandlerMethodArgumentResolver&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/mvc:argument-resolvers&gt;</span>
<span class="nt">&lt;/mvc:annotation-driven&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;mvc:argument-resolvers&gt;</span></code>に<code class="docutils literal notranslate"><span class="pre">org.springframework.data.web.PageableHandlerMethodArgumentResolver</span></code>を指定する。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">PageableHandlerMethodArgumentResolver</span></code>で指定できるプロパティについては、「<a class="reference internal" href="#paginatin-appendix-pageablehandlermethodargumentresolver"><span class="std std-ref">PageableHandlerMethodArgumentResolverのプロパティ値について</span></a>」を参照されたい。</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="id14">
<h3><a class="toc-backref" href="#id49" role="doc-backlink"><span class="section-number">4.5.2.2. </span>ページ検索の実装</a><a class="headerlink" href="#id14" title="Permalink to this heading">¶</a></h3>
<p>ページ検索を実現するための実装方法を以下に示す。</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="pagination-how-to-use-page-search-impl-app">
<span id="id15"></span><h4><a class="toc-backref" href="#id50" role="doc-backlink"><span class="section-number">4.5.2.2.1. </span>アプリケーション層の実装</a><a class="headerlink" href="#pagination-how-to-use-page-search-impl-app" title="Permalink to this heading">¶</a></h4>
<p>ページ検索に必要な情報(検索対象のページ位置、取得件数、ソート条件)を、Controllerの引数として受け取り、Serviceのメソッドに引き渡す。</p>
<ul>
<li><p>Controller</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;list&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="nd">@Validated</span><span class="w"> </span><span class="n">ArticleSearchCriteriaForm</span><span class="w"> </span><span class="n">form</span><span class="p">,</span>
<span class="w">        </span><span class="n">BindingResult</span><span class="w"> </span><span class="n">result</span><span class="p">,</span>
<span class="w">        </span><span class="n">Pageable</span><span class="w"> </span><span class="n">pageable</span><span class="p">,</span><span class="w"> </span><span class="c1">// (1)</span>
<span class="w">        </span><span class="n">Model</span><span class="w"> </span><span class="n">model</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="n">ArticleSearchCriteria</span><span class="w"> </span><span class="n">criteria</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">beanMapper</span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">form</span><span class="p">);</span><span class="w"> </span><span class="c1">// (2)</span>

<span class="w">    </span><span class="n">Page</span><span class="o">&lt;</span><span class="n">Article</span><span class="o">&gt;</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">articleService</span><span class="p">.</span><span class="na">searchArticle</span><span class="p">(</span><span class="n">criteria</span><span class="p">,</span><span class="w"> </span><span class="n">pageable</span><span class="p">);</span><span class="w"> </span><span class="c1">// (3)</span>

<span class="w">    </span><span class="n">model</span><span class="p">.</span><span class="na">addAttribute</span><span class="p">(</span><span class="s">&quot;page&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">page</span><span class="p">);</span><span class="w"> </span><span class="c1">// (4)</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;article/list&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">ハンドラメソッドの引数として<code class="docutils literal notranslate"><span class="pre">Pageable</span></code>を指定する。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Pageable</span></code>オブジェクトには、ページ検索に必要な情報(検索対象のページ位置、取得件数、ソート条件)が格納されている。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">BeanのマッピングにはMapStructを用いて作成したマッパーインタフェースを使用する。</div>
<div class="line">Mapperインタフェースの定義方法については<a class="reference internal" href="../GeneralFuncDetail/BeanMapping.html"><span class="doc">Beanマッピング(MapStruct)</span></a>を参照されたい。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Serviceのメソッドの引数に<code class="docutils literal notranslate"><span class="pre">Pageable</span></code>オブジェクトを指定して呼び出す。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Serviceから返却された検索結果(<code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクト )を<code class="docutils literal notranslate"><span class="pre">Model</span></code>に追加する。<code class="docutils literal notranslate"><span class="pre">Model</span></code>に追加することで、View(JSP/テンプレートHTML)から参照できるようになる。</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>リクエストパラメータにページ検索に必要な情報の指定がない場合の動作について</strong></p>
<p>ページ検索に必要な情報(検索対象のページ位置、取得件数、ソート条件)がリクエストパラメータに指定されていない場合は、デフォルト値が適用される。
デフォルト値は、以下の通り。</p>
<ul class="simple">
<li><p>検索対象のページ位置 : <code class="docutils literal notranslate"><span class="pre">0</span></code>(1ページ目)</p></li>
<li><p>取得件数 : <code class="docutils literal notranslate"><span class="pre">20</span></code></p></li>
<li><p>ソート条件 : <code class="docutils literal notranslate"><span class="pre">null</span></code>(ソート条件なし)</p></li>
</ul>
<p>デフォルト値は、以下の２つの方法で変更することができる。</p>
<ul class="simple">
<li><p>ハンドラメソッドの<code class="docutils literal notranslate"><span class="pre">Pageable</span></code>の引数に、<code class="docutils literal notranslate"><span class="pre">&#64;org.springframework.data.web.PageableDefault</span></code>アノテーションを指定してデフォルト値を定義する。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PageableHandlerMethodArgumentResolver</span></code>の<code class="docutils literal notranslate"><span class="pre">fallbackPageable</span></code>プロパティにデフォルト値を定義した<code class="docutils literal notranslate"><span class="pre">Pageable</span></code>オブジェクトを指定する。</p></li>
</ul>
</div>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">&#64;PageableDefault</span></code>アノテーションを使用してデフォルト値を指定する方法について説明する。</div>
<div class="line">ページ検索処理毎にデフォルト値を変更する必要がある場合は、<code class="docutils literal notranslate"><span class="pre">&#64;PageableDefault</span></code>アノテーションを使ってデフォルト値を指定する。</div>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;list&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="nd">@Validated</span><span class="w"> </span><span class="n">ArticleSearchCriteriaForm</span><span class="w"> </span><span class="n">form</span><span class="p">,</span>
<span class="w">        </span><span class="n">BindingResult</span><span class="w"> </span><span class="n">result</span><span class="p">,</span>
<span class="w">        </span><span class="nd">@PageableDefault</span><span class="p">(</span><span class="w"> </span><span class="c1">// (1)</span>
<span class="w">                </span><span class="n">page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">    </span><span class="c1">// (2)</span>
<span class="w">                </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">   </span><span class="c1">// (3)</span>
<span class="w">                </span><span class="n">direction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="na">DESC</span><span class="p">,</span><span class="w">  </span><span class="c1">// (4)</span>
<span class="w">                </span><span class="n">sort</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w">     </span><span class="c1">// (5)</span>
<span class="w">                    </span><span class="s">&quot;publishedDate&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="s">&quot;articleId&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">)</span><span class="w"> </span><span class="n">Pageable</span><span class="w"> </span><span class="n">pageable</span><span class="p">,</span>
<span class="w">        </span><span class="n">Model</span><span class="w"> </span><span class="n">model</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;article/list&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 70.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>デフォルト値</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">Pageable</span></code>の引数に<code class="docutils literal notranslate"><span class="pre">&#64;PageableDefault</span></code>アノテーションを指定する。</div>
</div>
</td>
<td><div class="line-block">
<div class="line">-</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">ページ位置のデフォルト値を変更する場合は、<code class="docutils literal notranslate"><span class="pre">&#64;PageableDefault</span></code>のpage属性に値を指定する。</div>
<div class="line">通常変更する必要はない。</div>
</div>
</td>
<td><div class="line-block">
<div class="line">“<code class="docutils literal notranslate"><span class="pre">0</span></code>“</div>
<div class="line">(1ページ目)</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">取得件数のデフォルト値を変更する場合は、<code class="docutils literal notranslate"><span class="pre">&#64;PageableDefault</span></code>のsize又はvalue属性に値を指定する。</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">10</span></code></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">ソート条件のデフォルト値を変更する場合は、<code class="docutils literal notranslate"><span class="pre">&#64;PageableDefault</span></code>のdirection属性に値を指定する。</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">Direction.ASC</span></code></div>
<div class="line">(昇順)</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">ソート条件のソート項目を指定する場合は、<code class="docutils literal notranslate"><span class="pre">&#64;PageableDefault</span></code>のsort属性にソート項目を指定する。</div>
<div class="line">複数の項目でソートする場合は、ソートするプロパティ名を配列で指定する。</div>
<div class="line">上記例のように設定した場合、<code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span> <span class="pre">publishedDate</span> <span class="pre">DESC,</span> <span class="pre">articleId</span> <span class="pre">DESC</span></code>のようなソート条件がQueryに追加される。</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>指定したソート条件のクエリへの反映法はO/RMapperにより異なる。</p>
<p>詳細については以下を参照されたい。</p>
<ul class="simple">
<li><p><a class="reference internal" href="#dataaccessmybatis3howtousepageableobject"><span class="std std-ref">ドメイン層の実装(MyBatis3編)</span></a></p></li>
<li><p><a class="reference internal" href="#dataaccessjpahowtousepageableobject"><span class="std std-ref">ドメイン層の実装(JPA編)</span></a></p></li>
</ul>
</div>
</td>
<td><div class="line-block">
<div class="line">空の配列</div>
<div class="line">(ソート項目なし)</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>&#64;PageableDefaultアノテーションで指定できるソート順について</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">&#64;PageableDefault</span></code>アノテーションで指定できるソート順は昇順か降順のどちらか一つなので、項目ごとに異なるソート順を指定したい場合は<code class="docutils literal notranslate"><span class="pre">&#64;org.springframework.data.web.SortDefaults</span></code>アノテーションを使用する必要がある。</p>
<p>具体的には、<code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span> <span class="pre">publishedDate</span> <span class="pre">DESC,</span> <span class="pre">articleId</span> <span class="pre">ASC</span></code>のようなソート順にしたい場合である。</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>取得件数のデフォルト値のみ変更する場合の指定方法</strong></p>
<p>取得件数のデフォルト値のみ変更する場合は、<code class="docutils literal notranslate"><span class="pre">&#64;PageableDefault(50)</span></code>と指定することもできる。これは<code class="docutils literal notranslate"><span class="pre">&#64;PageableDefault(size</span> <span class="pre">=</span> <span class="pre">50)</span></code>と同じ動作となる。</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">&#64;SortDefaults</span></code>アノテーションを使用してデフォルト値を指定する方法について説明する。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">&#64;SortDefaults</span></code>アノテーションは、ソート項目が複数あり、項目ごとに異なるソート順を指定したい場合に使用する。</div>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;list&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span>
<span class="w">        </span><span class="nd">@Validated</span><span class="w"> </span><span class="n">ArticleSearchCriteriaForm</span><span class="w"> </span><span class="n">form</span><span class="p">,</span>
<span class="w">        </span><span class="n">BindingResult</span><span class="w"> </span><span class="n">result</span><span class="p">,</span>
<span class="w">        </span><span class="nd">@PageableDefault</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">50</span><span class="p">)</span>
<span class="w">        </span><span class="nd">@SortDefaults</span><span class="p">(</span><span class="w">  </span><span class="c1">// (1)</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nd">@SortDefault</span><span class="p">(</span><span class="w">  </span><span class="c1">// (2)</span>
<span class="w">                                 </span><span class="n">sort</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;publishedDate&quot;</span><span class="p">,</span><span class="w">    </span><span class="c1">// (3)</span>
<span class="w">                                 </span><span class="n">direction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="na">DESC</span><span class="w"> </span><span class="c1">// (4)</span>
<span class="w">                                </span><span class="p">),</span>
<span class="w">                    </span><span class="nd">@SortDefault</span><span class="p">(</span>
<span class="w">                                 </span><span class="n">sort</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;articleId&quot;</span>
<span class="w">                                </span><span class="p">)</span>
<span class="w">                </span><span class="p">})</span><span class="w"> </span><span class="n">Pageable</span><span class="w"> </span><span class="n">pageable</span><span class="p">,</span>
<span class="w">        </span><span class="n">Model</span><span class="w"> </span><span class="n">model</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;article/list&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 70.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>デフォルト値</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">Pageable</span></code>の引数に<code class="docutils literal notranslate"><span class="pre">&#64;SortDefaults</span></code>アノテーションを指定する。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">&#64;SortDefaults</span></code>アノテーションには、複数の<code class="docutils literal notranslate"><span class="pre">&#64;org.springframework.data.web.SortDefault</span></code>アノテーションを配列として指定することができる。</div>
</div>
</td>
<td><div class="line-block">
<div class="line">-</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">&#64;SortDefaults</span></code>アノテーションの value属性に、<code class="docutils literal notranslate"><span class="pre">&#64;SortDefault</span></code>アノテーションを指定する。</div>
<div class="line">複数指定する場合は配列として指定する。</div>
</div>
</td>
<td><div class="line-block">
<div class="line">-</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">&#64;PageableDefault</span></code>のsort又はvalue属性にソート項目を指定する。</div>
<div class="line">複数の項目を指定する場合は配列として指定する。</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>指定したソート条件のクエリへの反映法はO/RMapperにより異なる。</p>
<p>詳細については以下を参照されたい。</p>
<ul class="simple">
<li><p><a class="reference internal" href="#dataaccessmybatis3howtousepageableobject"><span class="std std-ref">ドメイン層の実装(MyBatis3編)</span></a></p></li>
<li><p><a class="reference internal" href="#dataaccessjpahowtousepageableobject"><span class="std std-ref">ドメイン層の実装(JPA編)</span></a></p></li>
</ul>
</div>
</td>
<td><div class="line-block">
<div class="line">空の配列</div>
<div class="line">(ソート項目なし)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">ソート条件のデフォルト値を変更する場合は、<code class="docutils literal notranslate"><span class="pre">&#64;PageableDefault</span></code> のdirection属性に値を指定する。</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">Direction.ASC</span></code></div>
<div class="line">(昇順)</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>ソート項目のデフォルト値のみ指定する場合の指定方法</strong></p>
<p>取得項目のみ指定する場合は、<code class="docutils literal notranslate"><span class="pre">&#64;PageableDefault(&quot;articleId&quot;)</span></code>と指定することもできる。これは<code class="docutils literal notranslate"><span class="pre">&#64;PageableDefault(sort</span> <span class="pre">=</span> <span class="pre">&quot;articleId&quot;)</span></code>や<code class="docutils literal notranslate"><span class="pre">&#64;PageableDefault(sort</span> <span class="pre">=</span> <span class="pre">&quot;articleId&quot;,</span> <span class="pre">direction</span> <span class="pre">=</span> <span class="pre">Direction.ASC)</span></code>と同じ動作となる。</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>アプリケーション全体のデフォルト値を変更する必要がある場合は、<code class="file docutils literal notranslate"><span class="pre">spring-mvc.xml</span></code>に定義した<code class="docutils literal notranslate"><span class="pre">PageableHandlerMethodArgumentResolver</span></code>の<code class="docutils literal notranslate"><span class="pre">fallbackPageable</span></code>プロパティにデフォルト値を定義した<code class="docutils literal notranslate"><span class="pre">Pageable</span></code>オブジェクトを指定する。</p>
<p><code class="docutils literal notranslate"><span class="pre">fallbackPageable</span></code>の説明や具体的な設定例については、「<a class="reference internal" href="#paginatin-appendix-pageablehandlermethodargumentresolver"><span class="std std-ref">PageableHandlerMethodArgumentResolverのプロパティ値について</span></a>」を参照されたい。</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="mybatis3">
<span id="dataaccessmybatis3howtousepageableobject"></span><h4><a class="toc-backref" href="#id51" role="doc-backlink"><span class="section-number">4.5.2.2.2. </span>ドメイン層の実装(MyBatis3編)</a><a class="headerlink" href="#mybatis3" title="Permalink to this heading">¶</a></h4>
<div class="line-block">
<div class="line">MyBatisを使用してデータベースにアクセスする場合は、Controllerから受け取った<code class="docutils literal notranslate"><span class="pre">Pageable</span></code>オブジェクトより、必要な情報を抜き出してRepositoryに引き渡す。</div>
<div class="line">該当データを抽出するためのSQLやソート条件については、SQLマッピングで実装する必要がある。</div>
</div>
<p>ドメイン層で実装するページ検索処理の詳細については、</p>
<ul class="simple">
<li><p><a class="reference internal" href="../DataAccessDetail/DataAccessMyBatis3.html#dataaccessmybatis3howtousefindpageusingmybatisfunction"><span class="std std-ref">Entityのページネーション検索(MyBatis3標準方式)</span></a></p></li>
<li><p><a class="reference internal" href="../DataAccessDetail/DataAccessMyBatis3.html#dataaccessmybatis3howtousefindpageusingsqlfilter"><span class="std std-ref">Entityのページネーション検索(SQL絞り込み方式)</span></a></p></li>
<li><p><a class="reference internal" href="../DataAccessDetail/DataAccessMyBatis3.html#dataaccessmybatis3howtousefindpageusingsort"><span class="std std-ref">Entityのページネーション検索(検索結果のソート)</span></a></p></li>
</ul>
<p>を参照されたい。</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="jpa">
<span id="dataaccessjpahowtousepageableobject"></span><h4><a class="toc-backref" href="#id52" role="doc-backlink"><span class="section-number">4.5.2.2.3. </span>ドメイン層の実装(JPA編)</a><a class="headerlink" href="#jpa" title="Permalink to this heading">¶</a></h4>
<p>JPA(Spring Data JPA)を使用してデータベースにアクセスする場合は、Controllerから受け取った<code class="docutils literal notranslate"><span class="pre">Pageable</span></code>オブジェクトをRepositoryに引き渡す。</p>
<p>ドメイン層で実装するページ検索処理の詳細については、</p>
<ul class="simple">
<li><p><a class="reference internal" href="../DataAccessDetail/DataAccessJpa.html#dataaccessjpahowtousefindpage"><span class="std std-ref">条件に一致するEntityのページ検索</span></a></p></li>
</ul>
<p>を参照されたい。</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="id16">
<h3><a class="toc-backref" href="#id53" role="doc-backlink"><span class="section-number">4.5.2.3. </span>ページネーションの実装</a><a class="headerlink" href="#id16" title="Permalink to this heading">¶</a></h3>
<p>ページ検索処理で取得した<code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトを一覧画面に表示し、ページネーションリンク及びページネーション情報(合計件数、合計ページ数、表示ページ数など)を表示する方法を以下に示す。</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="id17">
<h4><a class="toc-backref" href="#id54" role="doc-backlink"><span class="section-number">4.5.2.3.1. </span>基本実装(JSP)</a><a class="headerlink" href="#id17" title="Permalink to this heading">¶</a></h4>
<section id="id18">
<h5><span class="section-number">4.5.2.3.1.1. </span>取得データの表示<a class="headerlink" href="#id18" title="Permalink to this heading">¶</a></h5>
<p>ページ検索処理で取得したデータを表示するための実装例を以下に示す。</p>
<ul>
<li><p>Controller</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;list&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="nd">@Validated</span><span class="w"> </span><span class="n">ArticleSearchCriteriaForm</span><span class="w"> </span><span class="n">form</span><span class="p">,</span><span class="w"> </span><span class="n">BindingResult</span><span class="w"> </span><span class="n">result</span><span class="p">,</span>
<span class="w">        </span><span class="n">Pageable</span><span class="w"> </span><span class="n">pageable</span><span class="p">,</span><span class="w"> </span><span class="n">Model</span><span class="w"> </span><span class="n">model</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">StringUtils</span><span class="p">.</span><span class="na">hasLength</span><span class="p">(</span><span class="n">form</span><span class="p">.</span><span class="na">getWord</span><span class="p">()))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;article/list&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">ArticleSearchCriteria</span><span class="w"> </span><span class="n">criteria</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">beanMapper</span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">form</span><span class="p">);</span>

<span class="w">    </span><span class="n">Page</span><span class="o">&lt;</span><span class="n">Article</span><span class="o">&gt;</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">articleService</span><span class="p">.</span><span class="na">searchArticle</span><span class="p">(</span><span class="n">criteria</span><span class="p">,</span><span class="w"> </span><span class="n">pageable</span><span class="p">);</span>

<span class="w">    </span><span class="n">model</span><span class="p">.</span><span class="na">addAttribute</span><span class="p">(</span><span class="s">&quot;page&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">page</span><span class="p">);</span><span class="w"> </span><span class="c1">// (1)</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;article/list&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">page</span></code>という属性名で<code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトを<code class="docutils literal notranslate"><span class="pre">Model</span></code>に格納する。</div>
<div class="line">JSPでは<code class="docutils literal notranslate"><span class="pre">page</span></code>という属性名を指定して<code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトにアクセスすることになる。</div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
<li><p>JSP</p>
<div class="highlight-jsp notranslate"><div class="highlight"><pre><span></span><span class="k">&lt;%-</span><span class="o">-</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="o">--</span><span class="k">%&gt;</span>

<span class="k">&lt;%-</span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">--</span><span class="k">%&gt;</span>
<span class="nt">&lt;c:when</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;${page != null &amp;&amp; page.totalPages != 0}&quot;</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="nt">&lt;table</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;maintable&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;thead&gt;</span>
<span class="w">            </span><span class="nt">&lt;tr&gt;</span>
<span class="w">                </span><span class="nt">&lt;th</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;no&quot;</span><span class="nt">&gt;</span>No<span class="nt">&lt;/th&gt;</span>
<span class="w">                </span><span class="nt">&lt;th</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;articleClass&quot;</span><span class="nt">&gt;</span>Class<span class="nt">&lt;/th&gt;</span>
<span class="w">                </span><span class="nt">&lt;th</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;title&quot;</span><span class="nt">&gt;</span>Title<span class="nt">&lt;/th&gt;</span>
<span class="w">                </span><span class="nt">&lt;th</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;overview&quot;</span><span class="nt">&gt;</span>Overview<span class="nt">&lt;/th&gt;</span>
<span class="w">                </span><span class="nt">&lt;th</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;date&quot;</span><span class="nt">&gt;</span>Published<span class="w"> </span>Date<span class="nt">&lt;/th&gt;</span>
<span class="w">            </span><span class="nt">&lt;/tr&gt;</span>
<span class="w">        </span><span class="nt">&lt;/thead&gt;</span>

<span class="w">        </span><span class="k">&lt;%-</span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">--</span><span class="k">%&gt;</span>
<span class="w">        </span><span class="nt">&lt;c:forEach</span><span class="w"> </span><span class="na">var=</span><span class="s">&quot;article&quot;</span><span class="w"> </span><span class="na">items=</span><span class="s">&quot;${page.content}&quot;</span><span class="w"> </span><span class="na">varStatus=</span><span class="s">&quot;rowStatus&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;tr&gt;</span>
<span class="w">                </span><span class="nt">&lt;td</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;no&quot;</span><span class="nt">&gt;</span>
<span class="w">                    </span>${(page.number<span class="w"> </span>*<span class="w"> </span>page.size)<span class="w"> </span>+<span class="w"> </span>rowStatus.count}
<span class="w">                </span><span class="nt">&lt;/td&gt;</span>
<span class="w">                </span><span class="nt">&lt;td</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;articleClass&quot;</span><span class="nt">&gt;</span>
<span class="w">                    </span>${f:h(article.articleClass.name)}
<span class="w">                </span><span class="nt">&lt;/td&gt;</span>
<span class="w">                </span><span class="nt">&lt;td</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;title&quot;</span><span class="nt">&gt;</span>
<span class="w">                    </span>${f:h(article.title)}
<span class="w">                </span><span class="nt">&lt;/td&gt;</span>
<span class="w">                </span><span class="nt">&lt;td</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;overview&quot;</span><span class="nt">&gt;</span>
<span class="w">                    </span>${f:h(article.overview)}
<span class="w">                </span><span class="nt">&lt;/td&gt;</span>
<span class="w">                </span><span class="nt">&lt;td</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;date&quot;</span><span class="nt">&gt;</span>
<span class="w">                    </span>${f:h(article.publishedDate)}
<span class="w">                </span><span class="nt">&lt;/td&gt;</span>
<span class="w">            </span><span class="nt">&lt;/tr&gt;</span>
<span class="w">        </span><span class="nt">&lt;/c:forEach&gt;</span>

<span class="w">    </span><span class="nt">&lt;/table&gt;</span>

<span class="w">    </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;paginationPart&quot;</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="k">&lt;%-</span><span class="o">-</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="o">--</span><span class="k">%&gt;</span>

<span class="w">    </span><span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/c:when&gt;</span>

<span class="k">&lt;%-</span><span class="o">-</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="o">--</span><span class="k">%&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">上記例では、条件に一致するデータが存在するかチェックを行い、一致するデータがない場合はヘッダ行も含めて表示していない。</div>
<div class="line">一致するデータがない場合でもヘッダ行は表示させる必要がある場合は、この分岐は不要となる。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">JSTLの<code class="docutils literal notranslate"><span class="pre">&lt;c:forEach&gt;</span></code>タグを使用して、取得したデータの一覧を表示する。</div>
<div class="line">取得したデータは、<code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトの<code class="docutils literal notranslate"><span class="pre">content</span></code>プロパティにリスト形式で格納されている。</div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
<li><p>上記JSPで出力される画面例</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/pagination-how_to_use_view_list_screen.png"><img alt="Screen image of content table" src="../../_images/pagination-how_to_use_view_list_screen.png" style="width: 100%;" /></a>
</figure>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="pagination-how-to-use-make-jsp-basic-paginationlink">
<span id="id19"></span><h5><span class="section-number">4.5.2.3.1.2. </span>ページネーションリンクの表示<a class="headerlink" href="#pagination-how-to-use-make-jsp-basic-paginationlink" title="Permalink to this heading">¶</a></h5>
<p>ページ移動するためのリンク(ページネーションリンク)を表示するための実装例を以下に示す。</p>
<p>共通ライブラリより提供しているJSPタグライブラリを使用して、ページネーションリンクを出力する。</p>
<ul>
<li><p><code class="file docutils literal notranslate"><span class="pre">include.jsp</span></code></p>
<p>共通ライブラリより提供しているJSPタグライブラリの宣言を行う。ブランクプロジェクトでは設定済みの状態となっている。</p>
<div class="highlight-jsp notranslate"><div class="highlight"><pre><span></span><span class="k">&lt;%@</span><span class="w"> </span><span class="n">taglib</span><span class="w"> </span><span class="n">uri</span><span class="o">=</span><span class="s">&quot;http://terasoluna.org/tags&quot;</span><span class="w"> </span><span class="n">prefix</span><span class="o">=</span><span class="s">&quot;t&quot;</span><span class="k">%&gt;</span><span class="w">       </span><span class="k">&lt;%-</span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">--</span><span class="k">%&gt;</span>
<span class="k">&lt;%@</span><span class="w"> </span><span class="n">taglib</span><span class="w"> </span><span class="n">uri</span><span class="o">=</span><span class="s">&quot;http://terasoluna.org/functions&quot;</span><span class="w"> </span><span class="n">prefix</span><span class="o">=</span><span class="s">&quot;f&quot;</span><span class="k">%&gt;</span><span class="w">  </span><span class="k">&lt;%-</span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">--</span><span class="k">%&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">ページネーションリンクを表示するためのJSPタグが格納されている。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">ページネーションリンクを使う際に利用するJSPのELファンクションが格納されている。</div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
<li><p>JSP</p>
<div class="highlight-jsp notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;t:pagination</span><span class="w"> </span><span class="na">page=</span><span class="s">&quot;${page}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="k">&lt;%-</span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">--</span><span class="k">%&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;t:pagination&gt;</span></code>タグを使用する。 page属性には、Controllerで<code class="docutils literal notranslate"><span class="pre">Model</span></code>に格納した<code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトを指定する。</div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<ul>
<li><p>出力されるHTML</p>
<p>下記の出力例は、<code class="docutils literal notranslate"><span class="pre">?page=0&amp;size=6</span></code>を指定して検索した際の結果である。</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;disabled&quot;</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;javascript:void(0)&quot;</span><span class="p">&gt;</span><span class="ni">&amp;lt;&amp;lt;</span><span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;disabled&quot;</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;javascript:void(0)&quot;</span><span class="p">&gt;</span><span class="ni">&amp;lt;</span><span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;active&quot;</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;javascript:void(0)&quot;</span><span class="p">&gt;</span>1<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;?page=1&amp;size=6&quot;</span><span class="p">&gt;</span>2<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;?page=2&amp;size=6&quot;</span><span class="p">&gt;</span>3<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;?page=3&amp;size=6&quot;</span><span class="p">&gt;</span>4<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;?page=4&amp;size=6&quot;</span><span class="p">&gt;</span>5<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;?page=5&amp;size=6&quot;</span><span class="p">&gt;</span>6<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;?page=6&amp;size=6&quot;</span><span class="p">&gt;</span>7<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;?page=7&amp;size=6&quot;</span><span class="p">&gt;</span>8<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;?page=8&amp;size=6&quot;</span><span class="p">&gt;</span>9<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;?page=9&amp;size=6&quot;</span><span class="p">&gt;</span>10<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;?page=1&amp;size=6&quot;</span><span class="p">&gt;</span><span class="ni">&amp;gt;</span><span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;?page=9&amp;size=6&quot;</span><span class="p">&gt;</span><span class="ni">&amp;gt;&amp;gt;</span><span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre></div>
</div>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">ページネーションリンク用のスタイルシートを用意しないと以下のような表示となる。</div>
<div class="line">見てわかる通り、ページネーションリンクとして成立していない。</div>
</div>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/pagination-how_to_use_jsp_not_applied_css.png"><img alt="Screen image that style sheet is not applied." src="../../_images/pagination-how_to_use_jsp_not_applied_css.png" style="width: 120px; height: 290px;" /></a>
</figure>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">ページネーションリンクとして成立する最低限のスタイルシートの定義の追加と、JSPの変更を行うと、以下のような表示となる。</div>
</div>
<ul>
<li><p>画面イメージ</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/pagination-how_to_use_jsp_applied_simple_css.png"><img alt="Screen image that simple style sheet applied." src="../../_images/pagination-how_to_use_jsp_applied_simple_css.png" style="width: 290px; height: 40px;" /></a>
</figure>
</li>
<li><p>JSP</p>
<div class="highlight-jsp notranslate"><div class="highlight"><pre><span></span><span class="k">&lt;%-</span><span class="o">-</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="o">--</span><span class="k">%&gt;</span>

<span class="nt">&lt;t:pagination</span><span class="w"> </span><span class="na">page=</span><span class="s">&quot;${page}&quot;</span>
<span class="w">    </span><span class="na">outerElementClass=</span><span class="s">&quot;pagination&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="k">&lt;%-</span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="o">--</span><span class="k">%&gt;</span>

<span class="k">&lt;%-</span><span class="o">-</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="o">--</span><span class="k">%&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">ページネーションリンクであることを示すクラス名を指定する。</div>
<div class="line">クラス名を指定することによってスタイルシートで指定するスタイルの適用範囲をページネーションリンクに限定することができる。</div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
<li><p>スタイルシート</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="nt">li</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">inline</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="nt">li</span><span class="o">&gt;</span><span class="nt">a</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">margin-left</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>ページネーションリンクとして成立したが、以下2つの問題が残る。</p>
<ul class="simple">
<li><p>押下できるリンクと押下できないリンクの区別ができない。</p></li>
<li><p>現在表示しているページ位置がわからない。</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>上記の問題を解決する手段として、Bootstrap v3.0.0のスタイルシートと適用すると、以下のような表示となる。</p>
<ul>
<li><p>画面イメージ</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/pagination-how_to_use_jsp_applied_bootstrap_v3_0_0_css.png"><img alt="Screen image that v3.0.0 of bootstrap is applied." src="../../_images/pagination-how_to_use_jsp_applied_bootstrap_v3_0_0_css.png" style="width: 520px; height: 70px;" /></a>
</figure>
</li>
<li><p>スタイルシート</p>
<div class="line-block">
<div class="line">bootstrap v3.0.0 の cssファイルを<code class="docutils literal notranslate"><span class="pre">$WEB_APP_ROOT/resources/vendor/bootstrap-3.0.0/css/bootstrap.css</span></code>に配置する。</div>
<div class="line">以下、ページネーション関連のスタイル定義の抜粋。</div>
</div>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">inline-block</span><span class="p">;</span>
<span class="w">  </span><span class="k">padding-left</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">  </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="kt">px</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">  </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">li</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">inline</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">li</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">a</span><span class="o">,</span>
<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">li</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">span</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">position</span><span class="p">:</span><span class="w"> </span><span class="kc">relative</span><span class="p">;</span>
<span class="w">  </span><span class="k">float</span><span class="p">:</span><span class="w"> </span><span class="kc">left</span><span class="p">;</span>
<span class="w">  </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="kt">px</span><span class="w"> </span><span class="mi">12</span><span class="kt">px</span><span class="p">;</span>
<span class="w">  </span><span class="k">margin-left</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="kt">px</span><span class="p">;</span>
<span class="w">  </span><span class="k">line-height</span><span class="p">:</span><span class="w"> </span><span class="mf">1.428571429</span><span class="p">;</span>
<span class="w">  </span><span class="k">text-decoration</span><span class="p">:</span><span class="w"> </span><span class="kc">none</span><span class="p">;</span>
<span class="w">  </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#ffffff</span><span class="p">;</span>
<span class="w">  </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="mh">#dddddd</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">li</span><span class="p">:</span><span class="nd">first-child</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">a</span><span class="o">,</span>
<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">li</span><span class="p">:</span><span class="nd">first-child</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">span</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">margin-left</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">  </span><span class="k">border-bottom-left-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
<span class="w">  </span><span class="k">border-top-left-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">li</span><span class="p">:</span><span class="nd">last-child</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">a</span><span class="o">,</span>
<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">li</span><span class="p">:</span><span class="nd">last-child</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">span</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">border-top-right-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
<span class="w">  </span><span class="k">border-bottom-right-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">li</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">a</span><span class="p">:</span><span class="nd">hover</span><span class="o">,</span>
<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">li</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">span</span><span class="p">:</span><span class="nd">hover</span><span class="o">,</span>
<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">li</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">a</span><span class="p">:</span><span class="nd">focus</span><span class="o">,</span>
<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">li</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">span</span><span class="p">:</span><span class="nd">focus</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#eeeeee</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">.</span><span class="nc">active</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">a</span><span class="o">,</span>
<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">.</span><span class="nc">active</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">span</span><span class="o">,</span>
<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">.</span><span class="nc">active</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">a</span><span class="p">:</span><span class="nd">hover</span><span class="o">,</span>
<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">.</span><span class="nc">active</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">span</span><span class="p">:</span><span class="nd">hover</span><span class="o">,</span>
<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">.</span><span class="nc">active</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">a</span><span class="p">:</span><span class="nd">focus</span><span class="o">,</span>
<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">.</span><span class="nc">active</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">span</span><span class="p">:</span><span class="nd">focus</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">z-index</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">  </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#ffffff</span><span class="p">;</span>
<span class="w">  </span><span class="k">cursor</span><span class="p">:</span><span class="w"> </span><span class="kc">default</span><span class="p">;</span>
<span class="w">  </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#428bca</span><span class="p">;</span>
<span class="w">  </span><span class="k">border-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#428bca</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">.</span><span class="nc">disabled</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">span</span><span class="o">,</span>
<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">.</span><span class="nc">disabled</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">a</span><span class="o">,</span>
<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">.</span><span class="nc">disabled</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">a</span><span class="p">:</span><span class="nd">hover</span><span class="o">,</span>
<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">.</span><span class="nc">disabled</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">a</span><span class="p">:</span><span class="nd">focus</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#999999</span><span class="p">;</span>
<span class="w">  </span><span class="k">cursor</span><span class="p">:</span><span class="w"> </span><span class="kc">not-allowed</span><span class="p">;</span>
<span class="w">  </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#ffffff</span><span class="p">;</span>
<span class="w">  </span><span class="k">border-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#dddddd</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>JSP</p>
<p>JSPでは配置したcssファイルを読み込む定義を追加する。</p>
<div class="highlight-jsp notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span>
<span class="w">    </span><span class="na">href=</span><span class="s">&quot;${pageContext.request.contextPath}/resources/vendor/bootstrap-3.0.0/css/bootstrap.css&quot;</span>
<span class="w">    </span><span class="na">type=</span><span class="s">&quot;text/css&quot;</span><span class="w"> </span><span class="na">media=</span><span class="s">&quot;screen, projection&quot;</span><span class="nt">&gt;</span>
</pre></div>
</div>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="id20">
<h5><span class="section-number">4.5.2.3.1.3. </span>ページネーション情報の表示<a class="headerlink" href="#id20" title="Permalink to this heading">¶</a></h5>
<p>ページネーションに関連する情報(合計件数、合計ページ数、表示ページ数など)を表示するための実装例を以下に示す。</p>
<ul>
<li><p>画面例</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/pagination-how_to_use_view_pagination_info1.png"><img alt="Screen image of pagination information(total results, current pages, total pages)" src="../../_images/pagination-how_to_use_view_pagination_info1.png" style="width: 400px; height: 250px;" /></a>
</figure>
</li>
<li><p>JSP</p>
<div class="highlight-jsp notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;div&gt;</span>
<span class="w">    </span><span class="nt">&lt;fmt:formatNumber</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${page.totalElements}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span>results<span class="w"> </span><span class="k">&lt;%-</span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">--</span><span class="k">%&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div&gt;</span>
<span class="w">    </span>${f:h(page.number<span class="w"> </span>+<span class="w"> </span>1)<span class="w"> </span>}<span class="w"> </span>/<span class="w">       </span><span class="k">&lt;%-</span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">--</span><span class="k">%&gt;</span>
<span class="w">    </span>${f:h(page.totalPages)}<span class="w"> </span>Pages<span class="w">    </span><span class="k">&lt;%-</span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">--</span><span class="k">%&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">検索条件に一致するデータの合計件数を表示する場合は、<code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトの<code class="docutils literal notranslate"><span class="pre">totalElements</span></code>プロパティから値を取得する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">表示しているページのページ数を表示する場合は、<code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトの<code class="docutils literal notranslate"><span class="pre">number</span></code>プロパティから値を取得し、<code class="docutils literal notranslate"><span class="pre">+1</span></code>する。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトの<code class="docutils literal notranslate"><span class="pre">number</span></code>プロパティは”<code class="docutils literal notranslate"><span class="pre">0</span></code>“ 開始のため、ページ番号を表示する際は<code class="docutils literal notranslate"><span class="pre">+1</span></code>が必要となる。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">検索条件に一致するデータの合計ページ数を表示する場合は、<code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトの<code class="docutils literal notranslate"><span class="pre">totalPages</span></code>プロパティから値を取得する。</div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>該当ページの表示データ範囲を表示するための実装例を以下に示す。</p>
<ul>
<li><p>画面例</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/pagination-how_to_use_view_pagination_info2.png"><img alt="Screen image of pagination information(begin position, end position)" src="../../_images/pagination-how_to_use_view_pagination_info2.png" style="width: 400px; height: 250px;" /></a>
</figure>
</li>
<li><p>JSP</p>
<div class="highlight-jsp notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;div&gt;</span>
<span class="w">    </span><span class="k">&lt;%-</span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="o">--</span><span class="k">%&gt;</span>
<span class="w">    </span><span class="nt">&lt;fmt:formatNumber</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${(page.number * page.size) + 1}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span>-
<span class="w">    </span><span class="k">&lt;%-</span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="o">--</span><span class="k">%&gt;</span>
<span class="w">    </span><span class="nt">&lt;fmt:formatNumber</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${(page.number * page.size) + page.numberOfElements}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">開始位置を表示する場合は、<code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトの<code class="docutils literal notranslate"><span class="pre">number</span></code>プロパティと<code class="docutils literal notranslate"><span class="pre">size</span></code>プロパティを使って計算する。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトの<code class="docutils literal notranslate"><span class="pre">number</span></code>プロパティは”<code class="docutils literal notranslate"><span class="pre">0</span></code>“開始のため、データ開始位置を表示する際は<code class="docutils literal notranslate"><span class="pre">+1</span></code>が必要となる。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">終了位置を表示する場合は、<code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトの<code class="docutils literal notranslate"><span class="pre">number</span></code>プロパティ、<code class="docutils literal notranslate"><span class="pre">size</span></code>プロパティ、<code class="docutils literal notranslate"><span class="pre">numberOfElements</span></code>プロパティ を使って計算する。</div>
<div class="line">最終ページは端数となる可能性があるので、<code class="docutils literal notranslate"><span class="pre">numberOfElements</span></code>を加算する必要がある。</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>数値のフォーマットについて</strong></p>
<p>表示する数値をフォーマットする必要がある場合は、JSTLから提供されているタグライブラリ(<code class="docutils literal notranslate"><span class="pre">&lt;fmt:formatNumber&gt;</span></code>)を使用する。</p>
</div>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="pagination-how-to-use-make-jsp-basic-search-criteria">
<span id="id21"></span><h5><span class="section-number">4.5.2.3.1.4. </span>ページリンクで検索条件を引き継ぐ<a class="headerlink" href="#pagination-how-to-use-make-jsp-basic-search-criteria" title="Permalink to this heading">¶</a></h5>
<p>検索条件をページ移動時のリクエストに引き継ぐ方法を、以下に示す。</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/pagination-how_to_use_view_take_over_search_criteria.png"><img alt="Processing image of take over search criteria" src="../../_images/pagination-how_to_use_view_take_over_search_criteria.png" style="width: 100%;" /></a>
</figure>
<ul>
<li><p>JSP</p>
<div class="highlight-jsp notranslate"><div class="highlight"><pre><span></span><span class="k">&lt;%-</span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">--</span><span class="k">%&gt;</span>
<span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;criteriaPart&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;form:form</span><span class="w"> </span><span class="na">action=</span><span class="s">&quot;${pageContext.request.contextPath}/article/list&quot;</span><span class="w"> </span><span class="na">method=</span><span class="s">&quot;get&quot;</span>
<span class="w">        </span><span class="na">modelAttribute=</span><span class="s">&quot;articleSearchCriteriaForm&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;form:input</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;word&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;form:button&gt;</span>Search<span class="nt">&lt;/form:button&gt;</span>
<span class="w">        </span><span class="nt">&lt;br&gt;</span>
<span class="w">    </span><span class="nt">&lt;/form:form&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="k">&lt;%-</span><span class="o">-</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="o">--</span><span class="k">%&gt;</span>

<span class="nt">&lt;t:pagination</span><span class="w"> </span><span class="na">page=</span><span class="s">&quot;${page}&quot;</span>
<span class="w">    </span><span class="na">outerElementClass=</span><span class="s">&quot;pagination&quot;</span>
<span class="w">    </span><span class="na">criteriaQuery=</span><span class="s">&quot;${f:query(articleSearchCriteriaForm)}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="k">&lt;%-</span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">--</span><span class="k">%&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">検索条件を指定するフォーム。</div>
<div class="line">検索条件として<code class="docutils literal notranslate"><span class="pre">word</span></code>が存在する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">ページ移動時のリクエストに検索条件を引き継ぐ場合は、<code class="docutils literal notranslate"><span class="pre">criteriaQuery</span></code>属性に<strong>URLエンコーディング済みのクエリ文字列</strong>を指定する。</div>
<div class="line">検索条件をフォームオブジェクトに格納する場合は、共通ライブラリから提供しているELファンクション(<code class="docutils literal notranslate"><span class="pre">f:query(Object)</span></code>) を使用すると、簡単に条件を引き継ぐことができる。</div>
<div class="line">上記例の場合、<code class="docutils literal notranslate"><span class="pre">?page=ページ位置&amp;size=取得件数&amp;word=入力値</span></code>という形式のクエリ文字列が生成される。</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>f:query(Object) の仕様について</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">f:query</span></code>の引数には、フォームオブジェクトなどのJavaBeanと<code class="docutils literal notranslate"><span class="pre">Map</span></code>オブジェクトを指定することができる。JavaBeanの場合はプロパティ名がリクエストパラメータ名となり、<code class="docutils literal notranslate"><span class="pre">Map</span></code>オブジェクトの場合はマップのキー名がリクエストパラメータとなる。生成されるクエリ文字列は、UTF-8のURLエンコーディングが行われる。</p>
<p>terasoluna-gfw-web 5.0.1.RELEASEより、ネスト構造をもつJavaBeanと<code class="docutils literal notranslate"><span class="pre">Map</span></code>オブジェクトを指定できるように改善されている。</p>
<p><code class="docutils literal notranslate"><span class="pre">f:query</span></code>の詳細な仕様(URLエンコーディングの仕様など)については、「<a class="reference internal" href="TagLibAndELFunctions.html#taglibandelfunctionshowtouseelfunctionquery"><span class="std std-ref">f:query()</span></a>」を参照されたい。</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>f:queryを使用して生成したクエリ文字列をqueryTmpl属性に指定した際の動作について</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">f:query</span></code>を使用して生成したクエリ文字列をqueryTmpl属性に指定すると、URLエンコーディングが重複してしまい、特殊文字の引き継ぎが正しく行われないことが判明している。</p>
<p>URLエンコーディングが重複してしまう事象については、terasoluna-gfw-web 1.0.1.RELEASE以上で利用可能な<code class="docutils literal notranslate"><span class="pre">criteriaQuery</span></code>属性を使用することで回避する事が出来る。</p>
</div>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="id22">
<h5><span class="section-number">4.5.2.3.1.5. </span>ページリンクでソート条件を引き継ぐ<a class="headerlink" href="#id22" title="Permalink to this heading">¶</a></h5>
<p>ソート条件をページ移動時のリクエストに引き継ぐ方法を、以下に示す。</p>
<ul>
<li><p>JSP</p>
<div class="highlight-jsp notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;t:pagination</span><span class="w"> </span><span class="na">page=</span><span class="s">&quot;${page}&quot;</span>
<span class="w">    </span><span class="na">outerElementClass=</span><span class="s">&quot;pagination&quot;</span>
<span class="w">    </span><span class="na">queryTmpl=</span><span class="s">&quot;page={page}&amp;size={size}&amp;sort={sortOrderProperty},{sortOrderDirection}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">  </span><span class="k">&lt;%-</span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">--</span><span class="k">%&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">ページ移動時のリクエストにソート条件を引き継ぐ場合は、<code class="docutils literal notranslate"><span class="pre">queryTmpl</span></code>を指定し、クエリ文字列にソート条件を追加する。</div>
<div class="line">ソート条件を指定するためのパラメータの仕様については、「<a class="reference internal" href="#pagination-overview-pagesearch-requestparameter"><span class="std std-ref">ページ検索用のリクエストパラメータについて</span></a>」を参照されたい。</div>
<div class="line">上記例の場合、<code class="docutils literal notranslate"><span class="pre">?page=0&amp;size=20&amp;sort=ソート項目,ソート順(ASC</span> <span class="pre">or</span> <span class="pre">DESC)</span></code>がクエリ文字列となる。</div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="pagination-how-to-use-make-jsp-layout">
<span id="id23"></span><h4><a class="toc-backref" href="#id55" role="doc-backlink"><span class="section-number">4.5.2.3.2. </span>レイアウト変更(JSP)</a><a class="headerlink" href="#pagination-how-to-use-make-jsp-layout" title="Permalink to this heading">¶</a></h4>
<section id="id24">
<h5><span class="section-number">4.5.2.3.2.1. </span>先頭ページと最終ページに移動するリンクの削除<a class="headerlink" href="#id24" title="Permalink to this heading">¶</a></h5>
<p>「最初のページに移動するためのリンク」と「最後のページに移動するためのリンク」を削除するための実装例を、以下に示す。</p>
<ul>
<li><p>画面例</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/pagination-how_to_use_view_remove_link1.png"><img alt="Remove page link that move to first &amp; last page" src="../../_images/pagination-how_to_use_view_remove_link1.png" style="width: 510px; height: 140px;" /></a>
</figure>
</li>
<li><p>JSP</p>
<div class="highlight-jsp notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;t:pagination</span><span class="w"> </span><span class="na">page=</span><span class="s">&quot;${page}&quot;</span>
<span class="w">    </span><span class="na">outerElementClass=</span><span class="s">&quot;pagination&quot;</span>
<span class="w">    </span><span class="na">firstLinkText=</span><span class="s">&quot;&quot;</span>
<span class="w">    </span><span class="na">lastLinkText=</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="k">&lt;%-</span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">--</span><span class="k">%&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">「最初のページに移動するためのリンク」を非表示にする場合は、<code class="docutils literal notranslate"><span class="pre">&lt;t:pagination&gt;</span></code>タグの<code class="docutils literal notranslate"><span class="pre">firstLinkText</span></code>属性に<code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>を指定する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">「最後のページに移動するためのリンク」を非表示にする場合は、<code class="docutils literal notranslate"><span class="pre">&lt;t:pagination&gt;</span></code>タグの<code class="docutils literal notranslate"><span class="pre">lastLinkText</span></code>属性に<code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>を指定する。</div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="id25">
<h5><span class="section-number">4.5.2.3.2.2. </span>前ページと次ページに移動するリンクの削除<a class="headerlink" href="#id25" title="Permalink to this heading">¶</a></h5>
<p>「前のページに移動するためのリンク」と「次のページに移動するためのリンク」を削除するための実装例を、以下に示す。</p>
<ul>
<li><p>画面例</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/pagination-how_to_use_view_remove_link2.png"><img alt="Remove page link that move to previous &amp; next page" src="../../_images/pagination-how_to_use_view_remove_link2.png" style="width: 470px; height: 220px;" /></a>
</figure>
</li>
<li><p>JSP</p>
<div class="highlight-jsp notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;t:pagination</span><span class="w"> </span><span class="na">page=</span><span class="s">&quot;${page}&quot;</span>
<span class="w">    </span><span class="na">outerElementClass=</span><span class="s">&quot;pagination&quot;</span>
<span class="w">    </span><span class="na">previousLinkText=</span><span class="s">&quot;&quot;</span>
<span class="w">    </span><span class="na">nextLinkText=</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="k">&lt;%-</span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">--</span><span class="k">%&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">「前のページに移動するためのリンク」を非表示にする場合は、<code class="docutils literal notranslate"><span class="pre">&lt;t:pagination&gt;</span></code>タグの previousLinkText属性に<code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>を指定する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">「次のページに移動するためのリンク」を非表示にする場合は、<code class="docutils literal notranslate"><span class="pre">&lt;t:pagination&gt;</span></code>タグの nextLinkText属性に<code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>を指定する。</div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="disabled">
<h5><span class="section-number">4.5.2.3.2.3. </span>disabled状態のリンクの削除<a class="headerlink" href="#disabled" title="Permalink to this heading">¶</a></h5>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">disabled</span></code>状態のリンクを削除するための実装例を、以下に示す。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">disabled</span></code>時のスタイルシートに、以下の定義を追加する。</div>
</div>
<ul>
<li><p>画面例</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/pagination-how_to_use_view_remove_link3.png"><img alt="Remove page link that move to previous &amp; next page" src="../../_images/pagination-how_to_use_view_remove_link3.png" style="width: 530px; height: 200px;" /></a>
</figure>
</li>
<li><p>スタイルシート</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="p">.</span><span class="nc">disabled</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">none</span><span class="p">;</span><span class="w">  </span><span class="c">/* (1) */</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">disabled</span></code>クラスの属性値として、<code class="docutils literal notranslate"><span class="pre">display:</span> <span class="pre">none;</span></code>を指定する。</div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="id26">
<h5><span class="section-number">4.5.2.3.2.4. </span>指定ページへ移動するリンクの最大表示数の変更<a class="headerlink" href="#id26" title="Permalink to this heading">¶</a></h5>
<p>指定したページに移動するためのリンクの最大表示数を変更するための実装例を、以下に示す。</p>
<ul>
<li><p>画面例</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/pagination-how_to_use_view_change_maxsize.png"><img alt="change max display count of page link that move to specified page" src="../../_images/pagination-how_to_use_view_change_maxsize.png" style="width: 450px; height: 220px;" /></a>
</figure>
</li>
<li><p>JSP</p>
<div class="highlight-jsp notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;t:pagination</span><span class="w"> </span><span class="na">page=</span><span class="s">&quot;${page}&quot;</span>
<span class="w">    </span><span class="na">outerElementClass=</span><span class="s">&quot;pagination&quot;</span>
<span class="w">    </span><span class="na">maxDisplayCount=</span><span class="s">&quot;5&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="k">&lt;%-</span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">--</span><span class="k">%&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">指定したページに移動するためのリンクの最大表示数を変更する場合は、<code class="docutils literal notranslate"><span class="pre">&lt;t:pagination&gt;</span></code>タグの<code class="docutils literal notranslate"><span class="pre">maxDisplayCount</span></code>属性に値を指定する。</div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="id27">
<h5><span class="section-number">4.5.2.3.2.5. </span>指定ページへ移動するリンクの削除<a class="headerlink" href="#id27" title="Permalink to this heading">¶</a></h5>
<div class="line-block">
<div class="line">指定したページに移動するためのリンクを削除するための実装例を、以下に示す。</div>
</div>
<ul>
<li><p>画面例</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/pagination-how_to_use_view_remove_link4.png"><img alt="Remove page link that move to specified page" src="../../_images/pagination-how_to_use_view_remove_link4.png" style="width: 410px; height: 220px;" /></a>
</figure>
</li>
<li><p>JSP</p>
<div class="highlight-jsp notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;t:pagination</span><span class="w"> </span><span class="na">page=</span><span class="s">&quot;${page}&quot;</span>
<span class="w">    </span><span class="na">outerElementClass=</span><span class="s">&quot;pagination&quot;</span>
<span class="w">    </span><span class="na">maxDisplayCount=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="k">&lt;%-</span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">--</span><span class="k">%&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">指定したページに移動するためのリンクを非表示にする場合は、<code class="docutils literal notranslate"><span class="pre">&lt;t:pagination&gt;</span></code>タグの<code class="docutils literal notranslate"><span class="pre">maxDisplayCount</span></code>属性に”<code class="docutils literal notranslate"><span class="pre">0</span></code>“を指定する。</div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="id28">
<h4><a class="toc-backref" href="#id56" role="doc-backlink"><span class="section-number">4.5.2.3.3. </span>動作変更(JSP)</a><a class="headerlink" href="#id28" title="Permalink to this heading">¶</a></h4>
<section id="id29">
<h5><span class="section-number">4.5.2.3.3.1. </span>ソート条件の指定<a class="headerlink" href="#id29" title="Permalink to this heading">¶</a></h5>
<p>クライアントからソート条件を指定するための実装例を、以下に示す。</p>
<ul>
<li><p>画面例</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/pagination-how_to_use_view_sort.png"><img alt="specify the sort condition" src="../../_images/pagination-how_to_use_view_sort.png" style="width: 100%;" /></a>
</figure>
</li>
<li><p>JSP</p>
<div class="highlight-jsp notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;criteriaPart&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;form:form</span>
<span class="w">        </span><span class="na">action=</span><span class="s">&quot;${pageContext.request.contextPath}/article/search&quot;</span>
<span class="w">        </span><span class="na">method=</span><span class="s">&quot;get&quot;</span><span class="w"> </span><span class="na">modelAttribute=</span><span class="s">&quot;articleSearchCriteriaForm&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;form:input</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;word&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="k">&lt;%-</span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">--</span><span class="k">%&gt;</span>
<span class="w">        </span><span class="nt">&lt;form:select</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;sort&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;form:option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;publishedDate,DESC&quot;</span><span class="nt">&gt;</span>Newest<span class="nt">&lt;/form:option&gt;</span>
<span class="w">            </span><span class="nt">&lt;form:option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;publishedDate,ASC&quot;</span><span class="nt">&gt;</span>Oldest<span class="nt">&lt;/form:option&gt;</span>
<span class="w">        </span><span class="nt">&lt;/form:select&gt;</span>
<span class="w">        </span><span class="nt">&lt;form:button&gt;</span>Search<span class="nt">&lt;/form:button&gt;</span>
<span class="w">        </span><span class="nt">&lt;br&gt;</span>
<span class="w">    </span><span class="nt">&lt;/form:form&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">クライアントからソート条件を指定する場合は、ソート条件を指定するためのパラメータを追加する。</div>
<div class="line">ソート条件を指定するためのパラメータの仕様については、「<a class="reference internal" href="#pagination-overview-pagesearch-requestparameter"><span class="std std-ref">ページ検索用のリクエストパラメータについて</span></a>」を参照されたい。</div>
<div class="line">上記例では、publishedDateの昇順と降順をプルダウンで選択できるようにしている。</div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="javascript">
<span id="paginationhowtousedisablepagelinkusingjavascript"></span><h5><span class="section-number">4.5.2.3.3.2. </span>JavaScriptを使用したページリンクの無効化<a class="headerlink" href="#javascript" title="Permalink to this heading">¶</a></h5>
<p>デフォルトでは、<code class="docutils literal notranslate"><span class="pre">disabled</span></code>状態と<code class="docutils literal notranslate"><span class="pre">active</span></code>状態のページリンク押下時の動作を無効化するために、<code class="docutils literal notranslate"><span class="pre">&lt;t:pagination&gt;</span></code>タグの<code class="docutils literal notranslate"><span class="pre">disabledHref</span></code>属性に<code class="docutils literal notranslate"><span class="pre">javascript:void(0)</span></code>を設定している。
この状態でページリンクにフォーカスを移動又はマウスオーバーすると、ブラウザのステータスバーに<code class="docutils literal notranslate"><span class="pre">javascript:void(0)</span></code>が表示されることがある。
この挙動を変えたい場合は、JavaScriptを使用してページリンク押下時の動作を無効化する必要がある。</p>
<p>以下に実装例を示す。</p>
<p><strong>JSP</strong></p>
<div class="highlight-jsp notranslate"><div class="highlight"><pre><span></span><span class="k">&lt;%-</span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">--</span><span class="k">%&gt;</span>
<span class="nt">&lt;script</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span>
<span class="w">        </span><span class="na">src=</span><span class="s">&quot;${pageContext.request.contextPath}/resources/vendor/js/jquery.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>

<span class="k">&lt;%-</span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">--</span><span class="k">%&gt;</span>
<span class="nt">&lt;script</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span>$(function(){
<span class="w">        </span>$(document).on(&quot;click&quot;,<span class="w"> </span>&quot;.disabled<span class="w"> </span>a,<span class="w"> </span>.active<span class="w"> </span>a&quot;,<span class="w"> </span>function(){
<span class="w">            </span>return<span class="w"> </span>false;
<span class="w">        </span>});
<span class="w">    </span>});
<span class="nt">&lt;/script&gt;</span>

<span class="k">&lt;%-</span><span class="o">-</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="o">--</span><span class="k">%&gt;</span>

<span class="k">&lt;%-</span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">--</span><span class="k">%&gt;</span>
<span class="nt">&lt;t:pagination</span><span class="w"> </span><span class="na">page=</span><span class="s">&quot;${page}&quot;</span><span class="w"> </span><span class="na">disabledHref=</span><span class="s">&quot;#&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><p>jQueryのjsファイルを読み込む。</p>
<p>上記例では、JavaScriptを使用してページリンク押下時の動作を無効化するためにjQueryのAPIを利用する。</p>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><p>jQueryのAPIを使用して、<code class="docutils literal notranslate"><span class="pre">disabled</span></code>状態と<code class="docutils literal notranslate"><span class="pre">active</span></code>状態のページリンクのクリックイベントを無効化する。</p>
<p>ただし、<code class="docutils literal notranslate"><span class="pre">&lt;t:pagination&gt;</span></code>タグの<code class="docutils literal notranslate"><span class="pre">enableLinkOfCurrentPage</span></code>属性に<code class="docutils literal notranslate"><span class="pre">true</span></code>を指定している場合は、<code class="docutils literal notranslate"><span class="pre">active</span></code>状態のページリンクのクリックイベントを無効化してはいけない。</p>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">disabledHref</span></code>属性に”<code class="docutils literal notranslate"><span class="pre">#</span></code>“を指定する。</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
</section>
<section id="thymeleaf">
<h3><a class="toc-backref" href="#id57" role="doc-backlink"><span class="section-number">4.5.2.4. </span>Thymeleafの実装</a><a class="headerlink" href="#thymeleaf" title="Permalink to this heading">¶</a></h3>
<section id="id30">
<h4><a class="toc-backref" href="#id58" role="doc-backlink"><span class="section-number">4.5.2.4.1. </span>テンプレートHTMLの実装</a><a class="headerlink" href="#id30" title="Permalink to this heading">¶</a></h4>
<p>ページ検索処理で取得した<code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトからデータを取得し、ページネーションを行う画面に取得したデータ、ページネーションリンク、ページネーションに関する情報(合計件数、合計ページ数、表示ページ数など)を表示する方法について説明する。</p>
<div class="line-block">
<div class="line">ページネーションリンクやページネーション情報の表示は、アプリケーション内で共通的に使用されるため部品化することを推奨する。</div>
<div class="line">また、ページネーションリンクの出力範囲や該当ページの表示データ範囲の計算等の複雑な計算ロジックはテンプレートHTMLではなくJavaで実装することを推奨する。</div>
</div>
<p>そのため、ここでは以下の構成でテンプレートHTMLの実装を行う例を示す。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 40.0%" />
<col style="width: 60.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>成果物の構成要素</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">テンプレートHTML（ページネーションを行う画面）</div>
</div>
</td>
<td><div class="line-block">
<div class="line">取得したデータの一覧の表示を実装する</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">テンプレートHTML（フラグメント）</div>
</div>
</td>
<td><div class="line-block">
<div class="line">すべてのテンプレートHTML（ページネーションを行う画面）で同様の、ページネーションリンクやページネーション情報の表示の実装を共通化する</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">式オブジェクト</div>
</div>
</td>
<td><div class="line-block">
<div class="line">ページネーションリンクの出力範囲や該当ページの表示データ範囲の計算ロジックを実装する</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">なお、「<a class="reference internal" href="#pagination-how-to-use-page-search-impl-app"><span class="std std-ref">アプリケーション層の実装</span></a>」の例では、<code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトを<code class="docutils literal notranslate"><span class="pre">page</span></code>という名前で<code class="docutils literal notranslate"><span class="pre">Model</span></code>に格納している。</div>
<div class="line">そのため、テンプレートHTMLの実装では<code class="docutils literal notranslate"><span class="pre">page</span></code>という名前を指定して<code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトにアクセスすることができる。</div>
</div>
<section id="id31">
<h5><span class="section-number">4.5.2.4.1.1. </span>取得データの表示<a class="headerlink" href="#id31" title="Permalink to this heading">¶</a></h5>
<p>ページ検索処理で取得したデータを表示するための実装例を以下に示す。
データの表示内容は画面ごとに異なるため、共通化せずテンプレートHTML（ページネーションを行う画面）に実装すると良い。</p>
<ul>
<li><p>テンプレートHTML（ページネーションを行う画面）</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!--/* ... */--&gt;</span>

<span class="cm">&lt;!--/* (1) */--&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">th:if</span><span class="o">=</span><span class="s">&quot;${page} != null&quot;</span> <span class="na">th:remove</span><span class="o">=</span><span class="s">&quot;tag&quot;</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">table</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;maintable&quot;</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">thead</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>No<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Class<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Title<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Overview<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Published Date<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>

    <span class="cm">&lt;!--/* (2) */--&gt;</span>
    <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">tr</span> <span class="na">th:each</span><span class="o">=</span><span class="s">&quot;article, status : ${page.content}&quot;</span> <span class="na">th:object</span><span class="o">=</span><span class="s">&quot;${article}&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;no&quot;</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&quot;*{articleId}&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;articleClass&quot;</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&quot;*{articleClass.name}&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;title&quot;</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&quot;*{title}&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;overview&quot;</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&quot;*{overview}&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;date&quot;</span>
          <span class="na">th:text</span><span class="o">=</span><span class="s">&quot;*{#dates.format(publishDate, &#39;yyyy/MM/dd HH:mm:ss&#39;)}&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>

  <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="cm">&lt;!--/* ... */--&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">上記例では、条件に一致するデータが存在するかチェックを行い、一致するデータがない場合はヘッダ行も含めて表示していない。</div>
<div class="line">一致するデータがない場合でもヘッダ行は表示させる必要がある場合は、この分岐は不要となる</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">th:each</span></code>属性を使用して、取得したデータの一覧を表示する。</div>
<div class="line">取得したデータは、<code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトの<code class="docutils literal notranslate"><span class="pre">content</span></code>プロパティにリスト形式で格納されている。</div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
<li><p>上記テンプレートHTMLで出力される画面例</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/pagination-how_to_use_view_list_screen.png"><img alt="Screen image of content table" src="../../_images/pagination-how_to_use_view_list_screen.png" style="width: 100%;" /></a>
</figure>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="pagination-how-to-use-make-thymeleaf-basic-paginationlink">
<span id="id32"></span><h5><span class="section-number">4.5.2.4.1.2. </span>ページネーションリンクの表示<a class="headerlink" href="#pagination-how-to-use-make-thymeleaf-basic-paginationlink" title="Permalink to this heading">¶</a></h5>
<div class="line-block">
<div class="line">ページ移動するためのリンク(ページネーションリンク)は、「<a class="reference internal" href="#pagination-overview-page-display-paginationlink-structure"><span class="std std-ref">ページネーションリンクの構成</span></a>」にて説明した以下の5つのパーツに分けて出力を行う。</div>
</div>
<ul class="simple">
<li><p>最初のページに移動するためのリンク</p></li>
<li><p>前のページに移動するためのリンク</p></li>
<li><p>指定したページに移動するためのリンク</p></li>
<li><p>次のページに移動するためのリンク</p></li>
<li><p>最後のページに移動するためのリンク</p></li>
</ul>
<div class="line-block">
<div class="line">「指定したページに移動するためのリンク」の出力では、表示するリンクの範囲(開始位置、終了位置)を計算し出力数を制御する必要があり、複雑な計算ロジックを実装することになるため、テンプレートHTMLではなくJavaで実装することを推奨する。</div>
<div class="line">ここでは、表示するリンクの範囲(開始位置、終了位置)の計算を式オブジェクトに実装する方法を実装例として採用する。</div>
<div class="line"><br /></div>
<div class="line">また、ページネーションリンクはアプリケーション内で共通的に使用されるため、ページネーションリンクを生成するテンプレートHTMLをフラグメントとして定義する例を実装例として採用する。</div>
<div class="line">そのため、以下の流れで「ページネーションリンクの表示」の実装例を説明する。</div>
</div>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#pagination-how-to-use-make-thymeleaf-basic-paginationlink-link-expressionobject"><span class="std std-ref">リンクの出力範囲を計算する式オブジェクトを実装する</span></a></p></li>
<li><p><a class="reference internal" href="#pagination-how-to-use-make-thymeleaf-basic-paginationlink-impl-fragment"><span class="std std-ref">フラグメントにページネーションリンクのHTMLを実装する</span></a></p></li>
<li><p><a class="reference internal" href="#pagination-how-to-use-make-thymeleaf-basic-paginationlink-impl-usefragment"><span class="std std-ref">ページネーションを行う画面にフラグメントを利用してページネーションリンクを表示する</span></a></p></li>
</ol>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>指定したページに移動するためのリンクの出力範囲の計算の実装方法について</strong></p>
<p>この章で説明している式オブジェクトを使用した実装方法はあくまでも一例であり、実装方法を規定するものではない。他に以下のような実装方法があるため、プロジェクトの開発方針に則り実装していただきたい。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトを拡張し、表示するリンクの範囲(開始位置、終了位置)を計算、保持する。</p></li>
<li><p>ControllerのHelperクラスでリンクの範囲(開始位置、終了位置)を計算する。</p></li>
</ul>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="pagination-how-to-use-make-thymeleaf-basic-paginationlink-link-expressionobject">
<span id="id33"></span><h6><span class="section-number">4.5.2.4.1.2.1. </span>リンクの出力範囲を計算する式オブジェクトを実装する<a class="headerlink" href="#pagination-how-to-use-make-thymeleaf-basic-paginationlink-link-expressionobject" title="Permalink to this heading">¶</a></h6>
<div class="line-block">
<div class="line">「指定したページに移動するためのリンク」の出力では、表示するリンクの範囲(開始位置、終了位置)を計算し出力数を制御する必要があり、複雑な計算ロジックを実装することになるため、テンプレートHTMLではなくJavaで実装することを推奨する。</div>
<div class="line">ここでは、表示するリンクの範囲(開始位置、終了位置)を計算するメソッドを持つ式オブジェクトを実装し、カスタムダイアレクトを追加する方法について説明する。</div>
<div class="line">カスタムダイアレクトの追加の詳細については、「<a class="reference internal" href="Thymeleaf.html#thymeleaf-how-to-extend-add-custom-dialect"><span class="std std-ref">カスタムダイアレクトの追加</span></a>」を参照されたい。</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">追加するカスタムダイアレクトの使用例は以下の通りである。</div>
</div>
<p><strong>テンプレート記述例</strong></p>
<div class="line-block">
<div class="line">ここでは、Pageオブジェクトとリンクの最大表示数を入力として、ページ番号のリストを出力する<code class="docutils literal notranslate"><span class="pre">#pageInfo.sequence(</span> <span class="pre">Pageオブジェクト,</span> <span class="pre">リンクの最大表示数)</span></code>メソッドを追加する。これを<code class="docutils literal notranslate"><span class="pre">th:each</span></code>属性の引数として利用することで、指定したページに移動するためのリンクを繰り返し出力する。</div>
<div class="line">なお、以下に示す実装例では操作可否の制御(<code class="docutils literal notranslate"><span class="pre">disabled</span></code>及び<code class="docutils literal notranslate"><span class="pre">active</span></code>)は行っていない。</div>
</div>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">li</span> <span class="na">th:each</span><span class="o">=</span><span class="s">&quot;i : ${#pageInfo.sequence(page, 5)}&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">a</span> <span class="na">th:href</span><span class="o">=</span><span class="s">&quot;@{/sample(page=${i-1},size=${page.size})}&quot;</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&quot;${i}&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</pre></div>
</div>
<p><strong>独自属性の処理結果</strong></p>
<p>ページサイズが10、ページリンクの出力範囲が1から5までの場合、以下のように出力される。</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/sample?page=0&amp;amp;size=10&quot;</span><span class="p">&gt;</span>1<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/sample?page=1&amp;amp;size=10&quot;</span><span class="p">&gt;</span>2<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/sample?page=2&amp;amp;size=10&quot;</span><span class="p">&gt;</span>3<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/sample?page=3&amp;amp;size=10&quot;</span><span class="p">&gt;</span>4<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/sample?page=4&amp;amp;size=10&quot;</span><span class="p">&gt;</span>5<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">まず、式オブジェクトを実装する。実装例を以下に示す。</div>
</div>
<p><strong>実装例</strong></p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.poi.ss.formula.functions.T</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.data.domain.Page</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.thymeleaf.util.NumberUtils</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">PageInfo</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// (1)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Integer</span><span class="o">[]</span><span class="w"> </span><span class="nf">sequence</span><span class="p">(</span><span class="n">Page</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">page</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">pageLinkMaxDispNum</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="c1">// (2)</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">begin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="na">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">page</span><span class="p">.</span><span class="na">getNumber</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">pageLinkMaxDispNum</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">begin</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">pageLinkMaxDispNum</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">end</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">page</span><span class="p">.</span><span class="na">getTotalPages</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">page</span><span class="p">.</span><span class="na">getTotalPages</span><span class="p">();</span>
<span class="w">            </span><span class="n">begin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="na">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="n">pageLinkMaxDispNum</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// (3)</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">NumberUtils</span><span class="p">.</span><span class="na">sequence</span><span class="p">(</span><span class="n">begin</span><span class="p">,</span><span class="w"> </span><span class="n">end</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトとリンクの最大表示数を引数に取り、<code class="docutils literal notranslate"><span class="pre">Integer[]</span></code>型を返すメソッドを定義する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">表示するリンクの範囲(開始位置、終了位置)を計算する。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトの<code class="docutils literal notranslate"><span class="pre">number</span></code>プロパティは<code class="docutils literal notranslate"><span class="pre">0</span></code>開始のため、ページ番号を表示する際は<code class="docutils literal notranslate"><span class="pre">+1</span></code>が必要となる。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">計算したリンクの範囲(開始位置、終了位置)のリストを生成し返却する。</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">次に、実装した式オブジェクトをテンプレートに適用するためにダイアレクトを実装する。実装例を以下に示す。</div>
</div>
<p><strong>実装例（式オブジェクトの登録）</strong></p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">PageInfoDialect</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">IExpressionObjectDialect</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// (1)</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">PAGE_INFO_DIALECT_NAME</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;pageInfo&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">EXPRESSION_OBJECT_NAMES</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Collections</span>
<span class="w">            </span><span class="p">.</span><span class="na">singleton</span><span class="p">(</span><span class="n">PAGE_INFO_DIALECT_NAME</span><span class="p">);</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">IExpressionObjectFactory</span><span class="w"> </span><span class="nf">getExpressionObjectFactory</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IExpressionObjectFactory</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">            </span><span class="c1">// (1)</span>
<span class="w">            </span><span class="nd">@Override</span>
<span class="w">            </span><span class="kd">public</span><span class="w"> </span><span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getAllExpressionObjectNames</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">EXPRESSION_OBJECT_NAMES</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="c1">// (2)</span>
<span class="w">            </span><span class="nd">@Override</span>
<span class="w">            </span><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">buildObject</span><span class="p">(</span><span class="n">IExpressionContext</span><span class="w"> </span><span class="n">context</span><span class="p">,</span>
<span class="w">                    </span><span class="n">String</span><span class="w"> </span><span class="n">expressionObjectName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">PAGE_INFO_DIALECT_NAME</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">expressionObjectName</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PageInfo</span><span class="p">();</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="nd">@Override</span>
<span class="w">            </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isCacheable</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">expressionObjectName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// omitted</span>

<span class="p">}</span>
</pre></div>
</div>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">pageInfo</span></code>という名前で式オブジェクトを登録する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">実装した式オブジェクトを登録する。</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>最後に、作成したカスタムダイアレクトの設定を行う。設定例を以下に示す。</p>
<p><strong>spring-mvc.xml</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;templateEngine&quot;</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;org.thymeleaf.spring6.SpringTemplateEngine&quot;</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- omitted --&gt;</span>

<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;additionalDialects&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;set&gt;</span>
<span class="w">            </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;org.thymeleaf.extras.springsecurity6.dialect.SpringSecurityDialect&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;com.example.sample.dialect.PageInfoDialect&quot;</span><span class="nt">/&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (1) --&gt;</span>
<span class="w">        </span><span class="nt">&lt;/set&gt;</span>
<span class="w">    </span><span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">テンプレートエンジンに作成したカスタムダイアレクトを追加する。</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>以上でカスタムダイアレクトの実装及び設定は完了となる。</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="pagination-how-to-use-make-thymeleaf-basic-paginationlink-impl-fragment">
<span id="id34"></span><h6><span class="section-number">4.5.2.4.1.2.2. </span>フラグメントにページネーションリンクのHTMLを実装する<a class="headerlink" href="#pagination-how-to-use-make-thymeleaf-basic-paginationlink-impl-fragment" title="Permalink to this heading">¶</a></h6>
<p>ページネーションリンクのテンプレートHTMLのフラグメントの実装例を以下に示す。</p>
<div class="line-block">
<div class="line">以降で説明する実装例は、<code class="docutils literal notranslate"><span class="pre">th:fragment</span></code>属性を利用してページネーションリンクのHTMLを部品化している。</div>
<div class="line">ページネーションリンクは、アプリケーション内で共通的に使用されるため部品化することを推奨する。HTMLの部品化については、「<a class="reference internal" href="TemplateLayout.html#templatelayout-overview-fragment"><span class="std std-ref">Thymeleafのテンプレートレイアウト機能を使用したHTMLの部品化</span></a>」を参照されたい。</div>
<div class="line">また、実装例のhtmlに記述している<code class="docutils literal notranslate"><span class="pre">${requestURI}</span></code>は、Thymeleafから<code class="docutils literal notranslate"><span class="pre">Model</span></code>を介して<code class="docutils literal notranslate"><span class="pre">HttpServletRequest</span></code>内の<code class="docutils literal notranslate"><span class="pre">requestURI</span></code>を利用する実装の例である。</div>
<div class="line">ページネーションにおける<code class="docutils literal notranslate"><span class="pre">requestURI</span></code>の利用は、アプリケーション全体で共通的に必要になるケースが多いと考えられるため、ここでは各ハンドラメソッドで個別に<code class="docutils literal notranslate"><span class="pre">Model</span></code>に配置するのではなく、<code class="docutils literal notranslate"><span class="pre">&#64;ControllerAdvice</span></code>を利用してController全体の共通処理として実装する例を示す。</div>
<div class="line">Thymeleafから<code class="docutils literal notranslate"><span class="pre">HttpServletRequest</span></code>の内容を利用する際の注意点については、「<a class="reference internal" href="Thymeleaf.html#thymeleaf-how-to-extend-add-web-object"><span class="std std-ref">Web オブジェクト（HttpServletRequest、HttpSession等）の利用</span></a>」を参照されたい。</div>
</div>
<p>以降、以下のファイル構成を前提に実装例を示す。</p>
<ul>
<li><p>File Path</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">WEB-INF</span>
<span class="go">  └─ views</span>
<span class="go">        └─ pgnt</span>
<span class="go">              ├─ fragment.html     (フラグメントを定義するテンプレートHTML)</span>
<span class="go">              └─ serchResult.html  (ページネーションを行う画面を実装するテンプレートHTML)</span>
</pre></div>
</div>
</li>
<li><p>ControllerAdvice</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@ControllerAdvice</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ThymeleafCommonControllerAdvice</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@ModelAttribute</span><span class="p">(</span><span class="s">&quot;requestURI&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">// (1)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">requestURI</span><span class="p">(</span><span class="n">HttpServletRequest</span><span class="w"> </span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getRequestURI</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">テンプレートHTML(フラグメント)の<code class="docutils literal notranslate"><span class="pre">${requestURI}</span></code>がアクセスするための<code class="docutils literal notranslate"><span class="pre">&#64;ModelAttribute</span></code>。</div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
<li><p>テンプレートHTML(フラグメント)</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!--/* ... */--&gt;</span>

<span class="cm">&lt;!--/* (1), (2) */--&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">th:fragment</span><span class="o">=</span><span class="s">&quot;pagination (page)&quot;</span> <span class="na">th:object</span><span class="o">=</span><span class="s">&quot;${page}&quot;</span> <span class="na">th:remove</span><span class="o">=</span><span class="s">&quot;tag&quot;</span><span class="p">&gt;</span>

  <span class="cm">&lt;!--/* (3), (4) */--&gt;</span>
  <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">th:if</span><span class="o">=</span><span class="s">&quot;*{totalElements} != 0&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;pagination&quot;</span>
    <span class="na">th:with</span><span class="o">=</span><span class="s">&quot;pageLinkMaxDispNum = 10, disabledHref = &#39;javascript:void(0)&#39;, currentUrl = ${requestURI}&quot;</span><span class="p">&gt;</span>

    <span class="cm">&lt;!--/* (5) */--&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span> <span class="na">th:class</span><span class="o">=</span><span class="s">&quot;*{isFirst()} ? &#39;disabled&#39;&quot;</span><span class="p">&gt;</span>
      <span class="cm">&lt;!--/* (6) */--&gt;</span>
      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">th:href</span><span class="o">=</span><span class="s">&quot;*{isFirst()} ? ${disabledHref} : @{{currentUrl}(currentUrl=${currentUrl},page=0,size=*{size})}&quot;</span><span class="p">&gt;</span><span class="ni">&amp;lt;&amp;lt;</span><span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>

    <span class="cm">&lt;!--/* (7) */--&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span> <span class="na">th:class</span><span class="o">=</span><span class="s">&quot;*{isFirst()} ? &#39;disabled&#39;&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">th:href</span><span class="o">=</span><span class="s">&quot;*{isFirst()} ? ${disabledHref} : @{{currentUrl}(currentUrl=${currentUrl},page=*{number - 1},size=*{size})}&quot;</span><span class="p">&gt;</span><span class="ni">&amp;lt;</span><span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>

    <span class="cm">&lt;!--/* (8) */--&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span> <span class="na">th:each</span><span class="o">=</span><span class="s">&quot;i : ${#pageInfo.sequence(page, pageLinkMaxDispNum)}&quot;</span>
      <span class="na">th:with</span><span class="o">=</span><span class="s">&quot;isActive=${i} == *{number + 1}&quot;</span> <span class="na">th:class</span><span class="o">=</span><span class="s">&quot;${isActive} ? &#39;active&#39;&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">th:href</span><span class="o">=</span><span class="s">&quot;${isActive} ? ${disabledHref} : @{{currentUrl}(currentUrl=${currentUrl},page=${i - 1},size=*{size})}&quot;</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&quot;${i}&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>

    <span class="cm">&lt;!--/* (9) */--&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span> <span class="na">th:class</span><span class="o">=</span><span class="s">&quot;*{isLast()} ? &#39;disabled&#39;&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">th:href</span><span class="o">=</span><span class="s">&quot;*{isLast()} ? ${disabledHref} : @{{currentUrl}(currentUrl=${currentUrl},page=*{number + 1},size=*{size})}&quot;</span><span class="p">&gt;</span><span class="ni">&amp;gt;</span><span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>

    <span class="cm">&lt;!--/* (10) */--&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span> <span class="na">th:class</span><span class="o">=</span><span class="s">&quot;*{isLast()} ? &#39;disabled&#39;&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">th:href</span><span class="o">=</span><span class="s">&quot;*{isLast()} ? ${disabledHref} : @{{currentUrl}(currentUrl=${currentUrl},page=*{totalPages - 1},size=*{size})}&quot;</span><span class="p">&gt;</span><span class="ni">&amp;gt;&amp;gt;</span><span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>

  <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="cm">&lt;!--/* ... */--&gt;</span>
</pre></div>
</div>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">th:fragment</span></code>属性を使用し、<code class="docutils literal notranslate"><span class="pre">pagination</span></code>という名前でフラグメント化する。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトをパラメータとして受け取るための引数<code class="docutils literal notranslate"><span class="pre">page</span></code>を定義する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">th:object</span></code>属性にフラグメントの引数で受け取った<code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトを指定し、以降の処理でオブジェクト名を省略してプロパティを指定可能にする。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;ul&gt;</span></code>要素を出力する。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">th:if</span></code>属性を用いてページの要素数が0ではない場合のみ<code class="docutils literal notranslate"><span class="pre">&lt;ul&gt;</span></code>要素を出力するように制御している。</div>
<div class="line">ページネーションリンクであることを示すクラス名<code class="docutils literal notranslate"><span class="pre">pagination</span></code>を指定している。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">th:with</span></code>属性にてページネーションリンクを表示する際に使用するローカル変数を定義している。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">pageLinkMaxDispNum</span></code>には、「指定したページに移動するためのリンク」の最大表示数を指定する。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">disabledHref</span></code>には、ページリンク押下時の動作を無効化する場合(<code class="docutils literal notranslate"><span class="pre">active</span></code>状態、または<code class="docutils literal notranslate"><span class="pre">disabled</span></code>状態)に<code class="docutils literal notranslate"><span class="pre">th:href</span></code>属性に指定する値を指定する。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">currentUrl</span></code>には、各ページリンクの<code class="docutils literal notranslate"><span class="pre">th:href</span></code>属性の設定に使用するURLのパスを設定する。</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>disabledHrefの設定値について</strong></p>
<p>実装例では、<code class="docutils literal notranslate"><span class="pre">disabledHref</span></code>には<code class="docutils literal notranslate"><span class="pre">javascript:void(0)</span></code>を設定している。ページリンク押下時の動作を無効化するだけであれば、実装例と同じ設定でよい。</p>
<p>ただし、実装例の設定でページリンクにフォーカスを移動又はマウスオーバーした場合、ブラウザのステータスバーに<code class="docutils literal notranslate"><span class="pre">javascript:void(0)</span></code>が表示されることがある。この挙動を変えたい場合は、JavaScriptを使用してページリンク押下時の動作を無効化する必要がある。</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>currentUrlの設定値について</strong></p>
<p>実装例では<code class="docutils literal notranslate"><span class="pre">th:href</span></code>属性に前回リクエストのURLを指定するため、<code class="docutils literal notranslate"><span class="pre">currentUrl</span></code>に<code class="docutils literal notranslate"><span class="pre">HttpServletRequest</span></code>オブジェクトから取得したリクエストURIを設定している。<code class="docutils literal notranslate"><span class="pre">th:href</span></code>属性に前回リクエストのURLを指定するのであれば、実装例と同じ設定でよい。</p>
<p><code class="docutils literal notranslate"><span class="pre">th:href</span></code>属性に前回リクエストのURL以外を設定する場合は、アプリケーションの要件に応じて<code class="docutils literal notranslate"><span class="pre">th:href</span></code>属性の指定方法を変更すること。<code class="docutils literal notranslate"><span class="pre">th:href</span></code>属性に設定する値はフラグメントのパラメータとして受け取ることで対応可能である。</p>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">最初のページに移動するためのリンクを出力する。</div>
<div class="line">リンク先が現在のページである場合は<code class="docutils literal notranslate"><span class="pre">disabled</span></code>状態としている。</div>
<div class="line">リンクが不要な場合は<code class="docutils literal notranslate"><span class="pre">&lt;li&gt;</span></code>要素ごと削除すること。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(6)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">ページ移動するためのリクエストを送信する<code class="docutils literal notranslate"><span class="pre">&lt;a&gt;</span></code>要素を出力する。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">th:href</span></code>属性は、現在のページが最初のページである場合は、ページリンク押下時の動作を無効化するため<code class="docutils literal notranslate"><span class="pre">disabledHref</span></code>を指定する。そうでない場合には、リンクURL式<code class="docutils literal notranslate"><span class="pre">&#64;{}</span></code>を使用してリクエストURLを生成して指定する。リンクURL式<code class="docutils literal notranslate"><span class="pre">&#64;{}</span></code>に指定するパスには(4)で定義した<code class="docutils literal notranslate"><span class="pre">currentUrl</span></code>を、パラメータにはページ位置と取得件数を指定する。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">th:href</span></code>属性に指定するリクエストURLの生成の詳細については、「<a class="reference internal" href="../../ImplementationAtEachLayer/ApplicationLayer.html#view-thymeleaf-requesturl-label"><span class="std std-ref">リクエストURLを生成する</span></a>」を参照されたい。</div>
<div class="line">リンクとして表示する文字列は直接記載するか<code class="docutils literal notranslate"><span class="pre">th:text</span></code>属性を用いて出力する。</div>
<div class="line"><br /></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;a&gt;</span></code>要素の基本的な構造は、以降の<code class="docutils literal notranslate"><span class="pre">&lt;a&gt;</span></code>要素も同様であるため説明は省略する。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(7)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">前のページに移動するためのリンクを出力する。</div>
<div class="line">リンク先が現在のページである場合は<code class="docutils literal notranslate"><span class="pre">disabled</span></code>状態としている。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;a&gt;</span></code>要素の属性は、現在のページが最初のページであるかを判定し、<code class="docutils literal notranslate"><span class="pre">th:href</span></code>属性に値を設定している。</div>
<div class="line">リンクが不要な場合は<code class="docutils literal notranslate"><span class="pre">&lt;li&gt;</span></code>要素ごと削除すること。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(8)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">指定したページに移動するためのリンクを<code class="docutils literal notranslate"><span class="pre">th:each</span></code>属性を利用し、繰り返し処理を行うことで出力する。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">th:each</span></code>属性に指定する配列は、「<a class="reference internal" href="#pagination-how-to-use-make-thymeleaf-basic-paginationlink-link-expressionobject"><span class="std std-ref">指定したページに移動するためのリンクの出力範囲の計算</span></a>」で作成したカスタムダイアレクトを使用して取得する。</div>
<div class="line">リンクが不要な場合は<code class="docutils literal notranslate"><span class="pre">&lt;li&gt;</span></code>要素ごと削除すること。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(9)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">次のページに移動するためのリンクを出力する。</div>
<div class="line">リンク先が現在のページである場合は<code class="docutils literal notranslate"><span class="pre">disabled</span></code>状態としている。</div>
<div class="line">リンクが不要な場合は<code class="docutils literal notranslate"><span class="pre">&lt;li&gt;</span></code>要素ごと削除すること。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(10)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">最後のページに移動するためのリンクを出力する。</div>
<div class="line">リンク先が現在のページである場合は<code class="docutils literal notranslate"><span class="pre">disabled</span></code>状態としている。</div>
<div class="line">リンクが不要な場合は<code class="docutils literal notranslate"><span class="pre">&lt;li&gt;</span></code>要素ごと削除すること。</div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="pagination-how-to-use-make-thymeleaf-basic-paginationlink-impl-usefragment">
<span id="id35"></span><h6><span class="section-number">4.5.2.4.1.2.3. </span>フラグメントを利用してページネーションリンクを表示する<a class="headerlink" href="#pagination-how-to-use-make-thymeleaf-basic-paginationlink-impl-usefragment" title="Permalink to this heading">¶</a></h6>
<p>「<a class="reference internal" href="#pagination-how-to-use-make-thymeleaf-basic-paginationlink-impl-fragment"><span class="std std-ref">テンプレートHTML（フラグメント）にページネーションリンクのHTMLを実装する</span></a>」で実装したフラグメントを利用してページネーションリンクを表示するテンプレートHTML実装例を以下に示す。</p>
<ul>
<li><p>テンプレートHTML(ページネーションを行う画面)</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!--/* ... */--&gt;</span>

<span class="cm">&lt;!--/* (1) */--&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">th:replace</span><span class="o">=</span><span class="s">&quot;~{pgnt/fragment :: pagination (${page})}&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="cm">&lt;!--/* ... */--&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">th:replace</span></code>属性を使用して、テンプレートである<code class="docutils literal notranslate"><span class="pre">pgnt/fragment.html</span></code>の<code class="docutils literal notranslate"><span class="pre">pagination</span></code>フラグメントの内容で<code class="docutils literal notranslate"><span class="pre">div</span></code>タグ以下の内容を置換している。</div>
<div class="line">パラメータとして<code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトを指定している。</div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
<li><p>出力されるHTML</p>
<p>下記の出力例は、<code class="docutils literal notranslate"><span class="pre">?page=0&amp;size=10</span></code>を指定して検索した際の結果である。</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;disabled&quot;</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;javascript:void(0)&quot;</span><span class="p">&gt;</span><span class="ni">&amp;lt;&amp;lt;</span><span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;disabled&quot;</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;javascript:void(0)&quot;</span><span class="p">&gt;</span><span class="ni">&amp;lt;</span><span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;active&quot;</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;javascript:void(0)&quot;</span><span class="p">&gt;</span>1<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;?page=1&amp;size=10&quot;</span><span class="p">&gt;</span>2<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;?page=2&amp;size=10&quot;</span><span class="p">&gt;</span>3<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;?page=3&amp;size=10&quot;</span><span class="p">&gt;</span>4<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;?page=4&amp;size=10&quot;</span><span class="p">&gt;</span>5<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;?page=5&amp;size=10&quot;</span><span class="p">&gt;</span>6<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;?page=6&amp;size=10&quot;</span><span class="p">&gt;</span>7<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;?page=7&amp;size=10&quot;</span><span class="p">&gt;</span>8<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;?page=8&amp;size=10&quot;</span><span class="p">&gt;</span>9<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;?page=9&amp;size=10&quot;</span><span class="p">&gt;</span>10<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;?page=1&amp;size=10&quot;</span><span class="p">&gt;</span><span class="ni">&amp;gt;</span><span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;?page=9&amp;size=10&quot;</span><span class="p">&gt;</span><span class="ni">&amp;gt;&amp;gt;</span><span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre></div>
</div>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">ページネーションリンク用のスタイルシートを用意しないと以下のような表示となる。</div>
<div class="line">見てわかる通り、ページネーションリンクとして成立していない。</div>
</div>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/pagination-how_to_use_jsp_not_applied_css.png"><img alt="Screen image that style sheet is not applied." src="../../_images/pagination-how_to_use_jsp_not_applied_css.png" style="width: 120px; height: 290px;" /></a>
</figure>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">ページネーションリンクとして成立する最低限のスタイルシートの定義の追加を行うと、以下のような表示となる。</div>
</div>
<ul>
<li><p>画面イメージ</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/pagination-how_to_use_jsp_applied_simple_css.png"><img alt="Screen image that simple style sheet applied." src="../../_images/pagination-how_to_use_jsp_applied_simple_css.png" style="width: 290px; height: 40px;" /></a>
</figure>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>ページネーションリンクとして成立したが、以下2つの問題が残る。</p>
<ul class="simple">
<li><p>押下できるリンクと押下できないリンクの区別ができない。</p></li>
<li><p>現在表示しているページ位置がわからない。</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>上記の問題を解決する手段として、Bootstrap v3.0.0のスタイルシートと適用すると、以下のような表示となる。</p>
<ul>
<li><p>画面イメージ</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/pagination-how_to_use_jsp_applied_bootstrap_v3_0_0_css.png"><img alt="Screen image that v3.0.0 of bootstrap is applied." src="../../_images/pagination-how_to_use_jsp_applied_bootstrap_v3_0_0_css.png" style="width: 520px; height: 70px;" /></a>
</figure>
</li>
<li><p>スタイルシート</p>
<div class="line-block">
<div class="line">bootstrap v3.0.0 の cssファイルを<code class="docutils literal notranslate"><span class="pre">$WEB_APP_ROOT/resources/vendor/bootstrap-3.0.0/css/bootstrap.css</span></code>に配置する。</div>
<div class="line">以下、ページネーション関連のスタイル定義の抜粋。</div>
</div>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">inline-block</span><span class="p">;</span>
<span class="w">  </span><span class="k">padding-left</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">  </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="kt">px</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">  </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">li</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">inline</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">li</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">a</span><span class="o">,</span>
<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">li</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">span</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">position</span><span class="p">:</span><span class="w"> </span><span class="kc">relative</span><span class="p">;</span>
<span class="w">  </span><span class="k">float</span><span class="p">:</span><span class="w"> </span><span class="kc">left</span><span class="p">;</span>
<span class="w">  </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="kt">px</span><span class="w"> </span><span class="mi">12</span><span class="kt">px</span><span class="p">;</span>
<span class="w">  </span><span class="k">margin-left</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="kt">px</span><span class="p">;</span>
<span class="w">  </span><span class="k">line-height</span><span class="p">:</span><span class="w"> </span><span class="mf">1.428571429</span><span class="p">;</span>
<span class="w">  </span><span class="k">text-decoration</span><span class="p">:</span><span class="w"> </span><span class="kc">none</span><span class="p">;</span>
<span class="w">  </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#ffffff</span><span class="p">;</span>
<span class="w">  </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="mh">#dddddd</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">li</span><span class="p">:</span><span class="nd">first-child</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">a</span><span class="o">,</span>
<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">li</span><span class="p">:</span><span class="nd">first-child</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">span</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">margin-left</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">  </span><span class="k">border-bottom-left-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
<span class="w">  </span><span class="k">border-top-left-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">li</span><span class="p">:</span><span class="nd">last-child</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">a</span><span class="o">,</span>
<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">li</span><span class="p">:</span><span class="nd">last-child</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">span</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">border-top-right-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
<span class="w">  </span><span class="k">border-bottom-right-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">li</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">a</span><span class="p">:</span><span class="nd">hover</span><span class="o">,</span>
<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">li</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">span</span><span class="p">:</span><span class="nd">hover</span><span class="o">,</span>
<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">li</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">a</span><span class="p">:</span><span class="nd">focus</span><span class="o">,</span>
<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">li</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">span</span><span class="p">:</span><span class="nd">focus</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#eeeeee</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">.</span><span class="nc">active</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">a</span><span class="o">,</span>
<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">.</span><span class="nc">active</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">span</span><span class="o">,</span>
<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">.</span><span class="nc">active</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">a</span><span class="p">:</span><span class="nd">hover</span><span class="o">,</span>
<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">.</span><span class="nc">active</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">span</span><span class="p">:</span><span class="nd">hover</span><span class="o">,</span>
<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">.</span><span class="nc">active</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">a</span><span class="p">:</span><span class="nd">focus</span><span class="o">,</span>
<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">.</span><span class="nc">active</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">span</span><span class="p">:</span><span class="nd">focus</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">z-index</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">  </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#ffffff</span><span class="p">;</span>
<span class="w">  </span><span class="k">cursor</span><span class="p">:</span><span class="w"> </span><span class="kc">default</span><span class="p">;</span>
<span class="w">  </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#428bca</span><span class="p">;</span>
<span class="w">  </span><span class="k">border-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#428bca</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">.</span><span class="nc">disabled</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">span</span><span class="o">,</span>
<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">.</span><span class="nc">disabled</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">a</span><span class="o">,</span>
<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">.</span><span class="nc">disabled</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">a</span><span class="p">:</span><span class="nd">hover</span><span class="o">,</span>
<span class="p">.</span><span class="nc">pagination</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">.</span><span class="nc">disabled</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">a</span><span class="p">:</span><span class="nd">focus</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#999999</span><span class="p">;</span>
<span class="w">  </span><span class="k">cursor</span><span class="p">:</span><span class="w"> </span><span class="kc">not-allowed</span><span class="p">;</span>
<span class="w">  </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#ffffff</span><span class="p">;</span>
<span class="w">  </span><span class="k">border-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#dddddd</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>テンプレートHTML</p>
<p>テンプレートHTMLでは配置したcssファイルを読み込む定義を追加する。</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!--/* ... */--&gt;</span>

<span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">th:href</span><span class="o">=</span><span class="s">&quot;@{/resources/vendor/bootstrap/dist/css/bootstrap.min.css}&quot;</span><span class="p">&gt;</span>

<span class="cm">&lt;!--/* ... */--&gt;</span>
</pre></div>
</div>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="id36">
<h5><span class="section-number">4.5.2.4.1.3. </span>ページネーション情報の表示<a class="headerlink" href="#id36" title="Permalink to this heading">¶</a></h5>
<p>ページネーションに関連する情報(合計件数、合計ページ数、表示ページ数など)を表示するための実装例を以下に示す。</p>
<p>ここでは、どの画面でも共通のページネーション情報を表示するため、テンプレートHTML（フラグメント）に実装する。また、ページネーション情報に出力する「該当ページの表示データ範囲」については、計算ロジックを伴うため式オブジェクトに実装する。</p>
<ul>
<li><p>画面例</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/pagination-how_to_use_view_pagination_info1.png"><img alt="Screen image of pagination information(total results, current pages, total pages)" src="../../_images/pagination-how_to_use_view_pagination_info1.png" style="width: 400px; height: 250px;" /></a>
</figure>
</li>
<li><p>テンプレートHTML（フラグメント）</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!--/* ... */--&gt;</span>

<span class="p">&lt;</span><span class="nt">div</span> <span class="na">th:fragment</span><span class="o">=</span><span class="s">&quot;paginationInfo (page)&quot;</span> <span class="na">th:object</span><span class="o">=</span><span class="s">&quot;${page}&quot;</span> <span class="na">th:remove</span><span class="o">=</span><span class="s">&quot;tag&quot;</span><span class="p">&gt;</span>

  <span class="cm">&lt;!--/* (1) */--&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-center&quot;</span>
    <span class="na">th:text</span><span class="o">=</span><span class="s">&quot;|*{totalElements} results|&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

  <span class="cm">&lt;!--/* (2), (3) */--&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">th:if</span><span class="o">=</span><span class="s">&quot;*{totalElements} != 0&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-center&quot;</span>
    <span class="na">th:text</span><span class="o">=</span><span class="s">&quot;|*{number + 1} / *{totalPages} Pages|&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="cm">&lt;!--/* ... */--&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">検索条件に一致するデータの合計件数を表示する場合は、<code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトの<code class="docutils literal notranslate"><span class="pre">totalElements</span></code>プロパティから値を取得する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">表示しているページのページ数を表示する場合は、<code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトの<code class="docutils literal notranslate"><span class="pre">number</span></code>プロパティから値を取得し、<code class="docutils literal notranslate"><span class="pre">+1</span></code>する。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトの<code class="docutils literal notranslate"><span class="pre">number</span></code>プロパティは<code class="docutils literal notranslate"><span class="pre">0</span></code>開始のため、ページ番号を表示する際は<code class="docutils literal notranslate"><span class="pre">+1</span></code>が必要となる。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">検索条件に一致するデータの合計ページ数を表示する場合は、<code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトの<code class="docutils literal notranslate"><span class="pre">totalPages</span></code>プロパティから値を取得する。</div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">該当ページの表示データ範囲を表示するための実装例を以下に示す。</div>
<div class="line">該当ページの表示データ範囲の表示では最大で3つの変数を用いた複雑な計算ロジックを実装することになるため式オブジェクトを用いた実装例を示す。</div>
<div class="line"><br /></div>
<div class="line">ここでは、式オブジェクトへ追加するメソッドの実装例のみを示す。式オブジェクトの登録や作成したカスタムダイアレクトの設定等については、「<a class="reference internal" href="#pagination-how-to-use-make-thymeleaf-basic-paginationlink-link-expressionobject"><span class="std std-ref">リンクの出力範囲を計算する式オブジェクトを実装する</span></a>」を参照されたい。</div>
</div>
<ul>
<li><p>画面例</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/pagination-how_to_use_view_pagination_info2.png"><img alt="Screen image of pagination information(begin position, end position)" src="../../_images/pagination-how_to_use_view_pagination_info2.png" style="width: 400px; height: 250px;" /></a>
</figure>
</li>
</ul>
<p>「<a class="reference internal" href="#pagination-how-to-use-make-thymeleaf-basic-paginationlink-link-expressionobject"><span class="std std-ref">リンクの出力範囲を計算する式オブジェクトを実装する</span></a>」で作成した式オブジェクトに新たにメソッドを実装する。実装例を以下に示す。</p>
<ul>
<li><p>式オブジェクト</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">PageInfo</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// omitted</span>

<span class="w">    </span><span class="c1">// (1)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">firstItemNumInPage</span><span class="p">(</span><span class="n">Page</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">page</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">page</span><span class="p">.</span><span class="na">getNumber</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">page</span><span class="p">.</span><span class="na">getSize</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// (2)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">lastItemNumInPage</span><span class="p">(</span><span class="n">Page</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">page</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">page</span><span class="p">.</span><span class="na">getNumber</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">page</span><span class="p">.</span><span class="na">getSize</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">page</span><span class="p">.</span><span class="na">getNumberOfElements</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトを引数に取り、該当ページの表示データの開始位置を返すメソッドを定義する。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトの<code class="docutils literal notranslate"><span class="pre">number</span></code>プロパティは<code class="docutils literal notranslate"><span class="pre">0</span></code>開始のため、データ開始位置を表示する際は<code class="docutils literal notranslate"><span class="pre">+1</span></code>が必要となる。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">Page</span></code>オブジェクトを引数に取り、該当ページの表示データの終了位置を返すメソッドを定義する。</div>
<div class="line">最終ページは端数となる可能性があるので、<code class="docutils literal notranslate"><span class="pre">numberOfElements</span></code>を加算する必要がある。</div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
<li><p>テンプレートHTML（フラグメント）</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!--/* ... */--&gt;</span>

<span class="p">&lt;</span><span class="nt">div</span> <span class="na">th:fragment</span><span class="o">=</span><span class="s">&quot;paginationInfo (page)&quot;</span> <span class="na">th:object</span><span class="o">=</span><span class="s">&quot;${page}&quot;</span> <span class="na">th:remove</span><span class="o">=</span><span class="s">&quot;tag&quot;</span><span class="p">&gt;</span>

  <span class="cm">&lt;!--/* (4), (5) */--&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-center&quot;</span>
    <span class="na">th:text</span><span class="o">=</span><span class="s">&quot;|${#pageInfo.firstItemNumInPage(page)} - ${#pageInfo.lastItemNumInPage(page)}|&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="cm">&lt;!--/* ... */--&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">開始位置を式オブジェクトを使用して取得する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">終了位置を式オブジェクトを使用して取得する。</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>数値のフォーマットについて</strong></p>
<p>表示する数値をフォーマットする必要がある場合は、Thymeleafから提供されているユーティリティメソッド<code class="docutils literal notranslate"><span class="pre">#numbers.formatInteger()</span></code>を使用する。</p>
</div>
</li>
</ul>
<p>上記で定義したフラグメントを使用してページネーション情報を表示するテンプレートHTML（ページネーションを行う画面）の実装例は以下の通りとなる。</p>
<ul>
<li><p>テンプレートHTML（ページネーションを行う画面）</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!--/* ... */--&gt;</span>

<span class="p">&lt;</span><span class="nt">div</span> <span class="na">th:replace</span><span class="o">=</span><span class="s">&quot;~{pgnt/fragment :: paginationInfo (${page})}&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="cm">&lt;!--/* ... */--&gt;</span>
</pre></div>
</div>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
</section>
</section>
<section id="appendix">
<span id="paginatin-appendix"></span><h2><a class="toc-backref" href="#id59" role="doc-backlink"><span class="section-number">4.5.3. </span>Appendix</a><a class="headerlink" href="#appendix" title="Permalink to this heading">¶</a></h2>
<section id="pageablehandlermethodargumentresolver">
<span id="paginatin-appendix-pageablehandlermethodargumentresolver"></span><h3><a class="toc-backref" href="#id60" role="doc-backlink"><span class="section-number">4.5.3.1. </span><code class="docutils literal notranslate"><span class="pre">PageableHandlerMethodArgumentResolver</span></code>のプロパティ値について</a><a class="headerlink" href="#pageablehandlermethodargumentresolver" title="Permalink to this heading">¶</a></h3>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">PageableHandlerMethodArgumentResolver</span></code>で指定できるプロパティは以下の通り。</div>
<div class="line">アプリケーションの要件に応じて、値を変更すること。</div>
</div>
<blockquote>
<div><table class="longtable docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 20.0%" />
<col style="width: 55.0%" />
<col style="width: 15.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>プロパティ名</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>デフォルト値</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><ol class="arabic simple">
<li></li>
</ol>
</td>
<td><p>maxPageSize</p></td>
<td><div class="line-block">
<div class="line">取得件数として許可する最大値を指定する。</div>
<div class="line">指定された取得件数が<code class="docutils literal notranslate"><span class="pre">maxPageSize</span></code>を超えていた場合は、<code class="docutils literal notranslate"><span class="pre">maxPageSize</span></code>が取得件数となる。</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">2000</span></code></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><ol class="arabic simple" start="2">
<li></li>
</ol>
</td>
<td><p>fallbackPageable</p></td>
<td><div class="line-block">
<div class="line">アプリケーション全体のページ位置、取得件数、ソート条件のデフォルト値を指定する。</div>
<div class="line">ページ位置、取得件数、ソート条件が指定されていない場合は、fallbackPageableに設定されている値が適用される。</div>
</div>
</td>
<td><div class="line-block">
<div class="line">ページ位置 : <code class="docutils literal notranslate"><span class="pre">0</span></code></div>
<div class="line">取得件数 : <code class="docutils literal notranslate"><span class="pre">20</span></code></div>
<div class="line">ソート条件 : <code class="docutils literal notranslate"><span class="pre">null</span></code></div>
</div>
</td>
</tr>
<tr class="row-even"><td><ol class="arabic simple" start="3">
<li></li>
</ol>
</td>
<td><p>oneIndexedParameters</p></td>
<td><div class="line-block">
<div class="line">ページ位置の開始値を指定する。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">false</span></code>を指定した場合はページ位置の開始値は<code class="docutils literal notranslate"><span class="pre">0</span></code>となり、<code class="docutils literal notranslate"><span class="pre">true</span></code>を指定した場合はページ位置の開始値は<code class="docutils literal notranslate"><span class="pre">1</span></code>となる。</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">false</span></code></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><ol class="arabic simple" start="4">
<li></li>
</ol>
</td>
<td><p>pageParameterName</p></td>
<td><div class="line-block">
<div class="line">ページ位置を指定するためのリクエストパラメータ名を指定する。</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">page</span></code></div>
</div>
</td>
</tr>
<tr class="row-even"><td><ol class="arabic simple" start="5">
<li></li>
</ol>
</td>
<td><p>sizeParameterName</p></td>
<td><div class="line-block">
<div class="line">取得件数を指定するためのリクエストパラメータ名を指定する。</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">size</span></code></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><ol class="arabic simple" start="6">
<li></li>
</ol>
</td>
<td><p>prefix</p></td>
<td><div class="line-block">
<div class="line">ページ位置と取得件数を指定するためのリクエストパラメータの接頭辞(ネームスペース)を指定する。</div>
<div class="line">デフォルトのパラメータ名がアプリケーションで使用するパラメータと衝突する場合は、ネームスペースを指定することでリクエストパラメータ名の衝突を防ぐことが出来る。</div>
<div class="line">prefixを指定すると、ページ位置を指定するためのリクエストパラメータ名は<code class="docutils literal notranslate"><span class="pre">prefix</span> <span class="pre">+</span> <span class="pre">pageParameterName</span></code>、取得件数を指定するためのリクエストパラメータ名は<code class="docutils literal notranslate"><span class="pre">prefix</span> <span class="pre">+</span> <span class="pre">sizeParameterName</span></code>となる。</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code></div>
<div class="line">(ネームスペースなし)</div>
</div>
</td>
</tr>
<tr class="row-even"><td><ol class="arabic simple" start="7">
<li></li>
</ol>
</td>
<td><p>qualifierDelimiter</p></td>
<td><div class="line-block">
<div class="line">同一リクエストで複数のページ検索が必要になる場合、ページ検索に必要な情報(検索対象のページ位置、取得件数など)を区別するために、リクエストパラメータ名は<code class="docutils literal notranslate"><span class="pre">qualifier</span> <span class="pre">+</span> <span class="pre">delimiter</span> <span class="pre">+</span> <span class="pre">標準パラメータ名</span></code>の形式で指定する。</div>
<div class="line">本プロパティは、上記形式の中の<code class="docutils literal notranslate"><span class="pre">delimiter</span></code>の値を設定する。</div>
<div class="line">この設定を変更する場合は、<code class="docutils literal notranslate"><span class="pre">SortHandlerMethodArgumentResolver</span></code>の<code class="docutils literal notranslate"><span class="pre">qualifierDelimiter</span></code>設定も合わせて変更する必要がある。</div>
</div>
</td>
<td><div class="line-block">
<div class="line">“<code class="docutils literal notranslate"><span class="pre">_</span></code>“</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>maxPageSizeの設定値について</strong></p>
<p>デフォルト値は<code class="docutils literal notranslate"><span class="pre">2000</span></code>であるが、アプリケーションが許容する最大値に設定を変更することを推奨する。</p>
<p>アプリケーションが許可する最大値が<code class="docutils literal notranslate"><span class="pre">100</span></code>ならば、<code class="docutils literal notranslate"><span class="pre">maxPageSize</span></code>も<code class="docutils literal notranslate"><span class="pre">100</span></code>に設定する。</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>fallbackPageableの設定方法について</strong></p>
<p>アプリケーション全体に適用するデフォルト値を変更する場合は、<code class="docutils literal notranslate"><span class="pre">fallbackPageable</span></code>プロパティにデフォルト値が定義されている<code class="docutils literal notranslate"><span class="pre">Pageable</span></code>(<code class="docutils literal notranslate"><span class="pre">org.springframework.data.domain.PageRequest</span></code>) オブジェクトを設定する。</p>
<p>ソート条件のデフォルト値を変更する場合は、<code class="docutils literal notranslate"><span class="pre">SortHandlerMethodArgumentResolver</span></code>の<code class="docutils literal notranslate"><span class="pre">fallbackSort</span></code>プロパティにデフォルト値が定義されている<code class="docutils literal notranslate"><span class="pre">org.springframework.data.domain.Sort</span></code>オブジェクトを設定する。</p>
</div>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>開発するアプリケーション毎に変更が想定される以下の項目について、デフォルト値を変更する際の設定例を以下に示す。</p>
<ul class="simple">
<li><p>取得件数として許可する最大値(<code class="docutils literal notranslate"><span class="pre">maxPageSize</span></code>)</p></li>
<li><p>アプリケーション全体のページ位置、取得件数のデフォルト値(<code class="docutils literal notranslate"><span class="pre">fallbackPageable</span></code>)</p></li>
<li><p>ソート条件のデフォルト値(<code class="docutils literal notranslate"><span class="pre">fallbackSort</span></code>)</p></li>
</ul>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" role="tablist"><button aria-controls="panel-4-SmF2YSBDb25maWc=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-4-SmF2YSBDb25maWc=" name="SmF2YSBDb25maWc=" role="tab" tabindex="0">Java Config</button><button aria-controls="panel-4-WE1MIENvbmZpZw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-4-WE1MIENvbmZpZw==" name="WE1MIENvbmZpZw==" role="tab" tabindex="-1">XML Config</button></div><div aria-labelledby="tab-4-SmF2YSBDb25maWc=" class="sphinx-tabs-panel group-tab" id="panel-4-SmF2YSBDb25maWc=" name="SmF2YSBDb25maWc=" role="tabpanel" tabindex="0"><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@EnableAspectJAutoProxy</span>
<span class="nd">@EnableWebMvc</span>
<span class="nd">@Configuration</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SpringMvcConfig</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">WebMvcConfigurer</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">addArgumentResolvers</span><span class="p">(</span>
<span class="w">            </span><span class="n">List</span><span class="o">&lt;</span><span class="n">HandlerMethodArgumentResolver</span><span class="o">&gt;</span><span class="w"> </span><span class="n">argumentResolvers</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">argumentResolvers</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">pageableHandlerMethodArgumentResolver</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Bean</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">PageableHandlerMethodArgumentResolver</span><span class="w"> </span><span class="nf">pageableHandlerMethodArgumentResolver</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">PageableHandlerMethodArgumentResolver</span><span class="w"> </span><span class="n">bean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PageableHandlerMethodArgumentResolver</span><span class="p">(</span><span class="n">sortHandlerMethodArgumentResolver</span><span class="p">());</span><span class="w"> </span><span class="c1">// (5)</span>
<span class="w">        </span><span class="n">bean</span><span class="p">.</span><span class="na">setMaxPageSize</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span><span class="w"> </span><span class="c1">// (1)</span>
<span class="w">        </span><span class="n">bean</span><span class="p">.</span><span class="na">setFallbackPageable</span><span class="p">(</span><span class="n">pageRequest</span><span class="p">());</span><span class="w"> </span><span class="c1">// (2)</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">bean</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Bean</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">PageRequest</span><span class="w"> </span><span class="nf">pageRequest</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">PageRequest</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="p">);</span><span class="w"> </span><span class="c1">// (3)(4)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Bean</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">SortHandlerMethodArgumentResolver</span><span class="w"> </span><span class="nf">sortHandlerMethodArgumentResolver</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">SortHandlerMethodArgumentResolver</span><span class="w"> </span><span class="n">bean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SortHandlerMethodArgumentResolver</span><span class="p">();</span>
<span class="w">        </span><span class="n">bean</span><span class="p">.</span><span class="na">setFallbackSort</span><span class="p">(</span><span class="n">sort</span><span class="p">());</span><span class="w"> </span><span class="c1">// (6)</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">bean</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Bean</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Sort</span><span class="w"> </span><span class="nf">sort</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Order</span><span class="o">&gt;</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Order</span><span class="o">&gt;</span><span class="p">();</span>
<span class="w">        </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">order</span><span class="p">());</span><span class="w"> </span><span class="c1">// (8)</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Sort</span><span class="p">.</span><span class="na">by</span><span class="p">(</span><span class="n">list</span><span class="p">);</span><span class="w"> </span><span class="c1">// (7)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Bean</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Order</span><span class="w"> </span><span class="nf">order</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Order</span><span class="p">(</span><span class="n">Direction</span><span class="p">.</span><span class="na">DESC</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;article_id&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// (9)(10)</span>
<span class="w">    </span><span class="p">}</span>
</pre></div>
</div>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">上記例では取得件数の最大値を<code class="docutils literal notranslate"><span class="pre">100</span></code>に設定している。取得件数(size)に<code class="docutils literal notranslate"><span class="pre">101</span></code>以上が指定された場合は、<code class="docutils literal notranslate"><span class="pre">100</span></code>に切り捨てて検索が行われる。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">org.springframework.data.domain.PageRequest</span></code>のインスタンスを生成し、<code class="docutils literal notranslate"><span class="pre">fallbackPageable</span></code>に設定する。</div>
<div class="line">spring-data-commons 2.2.0より<code class="docutils literal notranslate"><span class="pre">PageRequest</span></code>クラスからpublicなコンストラクタが削除されたため、factory-methodを利用してstaticな<code class="docutils literal notranslate"><span class="pre">PageRequest#of</span></code>メソッドによりBeanを生成する必要がある。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">PageRequest#of</span></code>メソッドの第1引数に、ページ位置のデフォルト値を指定する。</div>
<div class="line">上記例では<code class="docutils literal notranslate"><span class="pre">0</span></code>を指定しているため、デフォルト値は変更していない。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">PageRequest#of</span></code>メソッドの第2引数に、取得件数のデフォルト値を指定する。</div>
<div class="line">上記例ではリクエストパラメータに取得件数の指定がない場合の取得件数は<code class="docutils literal notranslate"><span class="pre">50</span></code>となる。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">PageableHandlerMethodArgumentResolver</span></code>のコンストラクタとして、<code class="docutils literal notranslate"><span class="pre">SortHandlerMethodArgumentResolver</span></code>のインスタンスを設定する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(6)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">Sort</span></code>のインスタンスを生成し、<code class="docutils literal notranslate"><span class="pre">fallbackSort</span></code>に設定する。</div>
<div class="line">spring-data-commons 2.2.0より<code class="docutils literal notranslate"><span class="pre">Sort</span></code>クラスからpublicなコンストラクタが削除されたため、factory-methodを利用してstaticな<code class="docutils literal notranslate"><span class="pre">Sort#by</span></code>メソッドによりBeanを生成する必要がある。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(7)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">Sort#by</span></code>メソッドの第1引数に、デフォルト値として使用する<code class="docutils literal notranslate"><span class="pre">Order</span></code>オブジェクトのリストを設定する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(8)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">Order</span></code>のインスタンスを生成し、デフォルト値として使用する<code class="docutils literal notranslate"><span class="pre">Order</span></code>オブジェクトのリストに追加する。</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>指定したソート条件のクエリへの反映法はO/RMapperにより異なる。</p>
<p>詳細については以下を参照されたい。</p>
<ul class="simple">
<li><p><a class="reference internal" href="#dataaccessmybatis3howtousepageableobject"><span class="std std-ref">ドメイン層の実装(MyBatis3編)</span></a></p></li>
<li><p><a class="reference internal" href="#dataaccessjpahowtousepageableobject"><span class="std std-ref">ドメイン層の実装(JPA編)</span></a></p></li>
</ul>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(9)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">Order</span></code>のコンストラクタの第1引数に、ソート順(ASC/DESC)を指定する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(10)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">Order</span></code>のコンストラクタの第2引数に、ソート項目を指定する。</div>
</div>
</td>
</tr>
</tbody>
</table>
</div><div aria-labelledby="tab-4-WE1MIENvbmZpZw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-4-WE1MIENvbmZpZw==" name="WE1MIENvbmZpZw==" role="tabpanel" tabindex="0"><div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;mvc:annotation-driven&gt;</span>
<span class="w">    </span><span class="nt">&lt;mvc:argument-resolvers&gt;</span>
<span class="w">        </span><span class="nt">&lt;bean</span>
<span class="w">            </span><span class="na">class=</span><span class="s">&quot;org.springframework.data.web.PageableHandlerMethodArgumentResolver&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="cm">&lt;!-- (1) --&gt;</span>
<span class="w">            </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;maxPageSize&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;100&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="cm">&lt;!-- (2) --&gt;</span>
<span class="w">            </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;fallbackPageable&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;org.springframework.data.domain.PageRequest&quot;</span><span class="w"> </span><span class="na">factory-method=</span><span class="s">&quot;of&quot;</span><span class="nt">&gt;</span>
<span class="w">                    </span><span class="cm">&lt;!-- (3) --&gt;</span>
<span class="w">                    </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                    </span><span class="cm">&lt;!-- (4) --&gt;</span>
<span class="w">                    </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;50&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;/bean&gt;</span>
<span class="w">            </span><span class="nt">&lt;/property&gt;</span>
<span class="w">            </span><span class="cm">&lt;!-- (5) --&gt;</span>
<span class="w">            </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;org.springframework.data.web.SortHandlerMethodArgumentResolver&quot;</span><span class="nt">&gt;</span>
<span class="w">                    </span><span class="cm">&lt;!-- (6) --&gt;</span>
<span class="w">                    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;fallbackSort&quot;</span><span class="nt">&gt;</span>
<span class="w">                        </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;org.springframework.data.domain.Sort&quot;</span><span class="w"> </span><span class="na">factory-method=</span><span class="s">&quot;by&quot;</span><span class="nt">&gt;</span>
<span class="w">                            </span><span class="cm">&lt;!-- (7) --&gt;</span>
<span class="w">                            </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span>
<span class="w">                                </span><span class="nt">&lt;list&gt;</span>
<span class="w">                                    </span><span class="cm">&lt;!-- (8) --&gt;</span>
<span class="w">                                    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;org.springframework.data.domain.Sort.Order&quot;</span><span class="nt">&gt;</span>
<span class="w">                                        </span><span class="cm">&lt;!-- (9) --&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;DESC&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                                        </span><span class="cm">&lt;!-- (10) --&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;lastModifiedDate&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                                    </span><span class="nt">&lt;/bean&gt;</span>
<span class="w">                                    </span><span class="cm">&lt;!-- (8) --&gt;</span>
<span class="w">                                    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;org.springframework.data.domain.Sort.Order&quot;</span><span class="nt">&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;ASC&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                                    </span><span class="nt">&lt;/bean&gt;</span>
<span class="w">                                </span><span class="nt">&lt;/list&gt;</span>
<span class="w">                            </span><span class="nt">&lt;/constructor-arg&gt;</span>
<span class="w">                        </span><span class="nt">&lt;/bean&gt;</span>
<span class="w">                    </span><span class="nt">&lt;/property&gt;</span>
<span class="w">                </span><span class="nt">&lt;/bean&gt;</span>
<span class="w">            </span><span class="nt">&lt;/constructor-arg&gt;</span>
<span class="w">        </span><span class="nt">&lt;/bean&gt;</span>
<span class="w">    </span><span class="nt">&lt;/mvc:argument-resolvers&gt;</span>
<span class="nt">&lt;/mvc:annotation-driven&gt;</span>
</pre></div>
</div>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">上記例では取得件数の最大値を<code class="docutils literal notranslate"><span class="pre">100</span></code>に設定している。取得件数(size)に<code class="docutils literal notranslate"><span class="pre">101</span></code>以上が指定された場合は、<code class="docutils literal notranslate"><span class="pre">100</span></code>に切り捨てて検索が行われる。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">org.springframework.data.domain.PageRequest</span></code>のインスタンスを生成し、<code class="docutils literal notranslate"><span class="pre">fallbackPageable</span></code>に設定する。</div>
<div class="line">spring-data-commons 2.2.0より<code class="docutils literal notranslate"><span class="pre">PageRequest</span></code>クラスからpublicなコンストラクタが削除されたため、factory-methodを利用してstaticな<code class="docutils literal notranslate"><span class="pre">PageRequest#of</span></code>メソッドによりBeanを生成する必要がある。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">PageRequest#of</span></code>メソッドの第1引数に、ページ位置のデフォルト値を指定する。</div>
<div class="line">上記例では<code class="docutils literal notranslate"><span class="pre">0</span></code>を指定しているため、デフォルト値は変更していない。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">PageRequest#of</span></code>メソッドの第2引数に、取得件数のデフォルト値を指定する。</div>
<div class="line">上記例ではリクエストパラメータに取得件数の指定がない場合の取得件数は<code class="docutils literal notranslate"><span class="pre">50</span></code>となる。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">PageableHandlerMethodArgumentResolver</span></code>のコンストラクタとして、<code class="docutils literal notranslate"><span class="pre">SortHandlerMethodArgumentResolver</span></code>のインスタンスを設定する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(6)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">Sort</span></code>のインスタンスを生成し、<code class="docutils literal notranslate"><span class="pre">fallbackSort</span></code>に設定する。</div>
<div class="line">spring-data-commons 2.2.0より<code class="docutils literal notranslate"><span class="pre">Sort</span></code>クラスからpublicなコンストラクタが削除されたため、factory-methodを利用してstaticな<code class="docutils literal notranslate"><span class="pre">Sort#by</span></code>メソッドによりBeanを生成する必要がある。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(7)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">Sort#by</span></code>メソッドの第1引数に、デフォルト値として使用する<code class="docutils literal notranslate"><span class="pre">Order</span></code>オブジェクトのリストを設定する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(8)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">Order</span></code>のインスタンスを生成し、デフォルト値として使用する<code class="docutils literal notranslate"><span class="pre">Order</span></code>オブジェクトのリストに追加する。</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>指定したソート条件のクエリへの反映法はO/RMapperにより異なる。</p>
<p>詳細については以下を参照されたい。</p>
<ul class="simple">
<li><p><a class="reference internal" href="#dataaccessmybatis3howtousepageableobject"><span class="std std-ref">ドメイン層の実装(MyBatis3編)</span></a></p></li>
<li><p><a class="reference internal" href="#dataaccessjpahowtousepageableobject"><span class="std std-ref">ドメイン層の実装(JPA編)</span></a></p></li>
</ul>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(9)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">Order</span></code>のコンストラクタの第1引数に、ソート順(ASC/DESC)を指定する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(10)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">Order</span></code>のコンストラクタの第2引数に、ソート項目を指定する。</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="sorthandlermethodargumentresolver">
<span id="paginatin-appendix-sorthandlermethodargumentresolver"></span><h3><a class="toc-backref" href="#id61" role="doc-backlink"><span class="section-number">4.5.3.2. </span><code class="docutils literal notranslate"><span class="pre">SortHandlerMethodArgumentResolver</span></code>のプロパティ値について</a><a class="headerlink" href="#sorthandlermethodargumentresolver" title="Permalink to this heading">¶</a></h3>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">SortHandlerMethodArgumentResolver</span></code>で指定できるプロパティは以下の通り。</div>
<div class="line">アプリケーションの要件に応じて、値を変更すること。</div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 20.0%" />
<col style="width: 55.0%" />
<col style="width: 15.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>項番</p></th>
<th class="head"><p>プロパティ名</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>デフォルト値</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><ol class="arabic simple">
<li></li>
</ol>
</td>
<td><p>fallbackSort</p></td>
<td><div class="line-block">
<div class="line">アプリケーション全体のソート条件のデフォルト値を指定する。</div>
<div class="line">ソート条件が指定されていない場合は、fallbackSortに設定されている値が適用される。</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">null</span></code></div>
<div class="line">(ソート条件なし)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><ol class="arabic simple" start="2">
<li></li>
</ol>
</td>
<td><p>sortParameter</p></td>
<td><div class="line-block">
<div class="line">ソート条件を指定するためのリクエストパラメータ名を指定する。</div>
<div class="line">デフォルトのパラメータ名がアプリケーションで使用するパラメータと衝突する場合は、リクエストパラメータ名を変更することで衝突を防ぐことができる。</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">sort</span></code></div>
</div>
</td>
</tr>
<tr class="row-even"><td><ol class="arabic simple" start="3">
<li></li>
</ol>
</td>
<td><p>propertyDelimiter</p></td>
<td><div class="line-block">
<div class="line">ソート項目及びソート順(ASC,DESC)の区切り文字を指定する。</div>
</div>
</td>
<td><div class="line-block">
<div class="line">“<code class="docutils literal notranslate"><span class="pre">,</span></code>“</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><ol class="arabic simple" start="4">
<li></li>
</ol>
</td>
<td><p>qualifierDelimiter</p></td>
<td><div class="line-block">
<div class="line">同一リクエストで複数のページ検索が必要になる場合、ページ検索に必要な情報(ソート条件)を区別するために、リクエストパラメータ名は<code class="docutils literal notranslate"><span class="pre">qualifier</span> <span class="pre">+</span> <span class="pre">delimiter</span> <span class="pre">+</span> <span class="pre">sortParameter</span></code>の形式で指定する。</div>
<div class="line">本プロパティは、上記形式の中の<code class="docutils literal notranslate"><span class="pre">delimiter</span></code>の値を設定する。</div>
</div>
</td>
<td><div class="line-block">
<div class="line">“<code class="docutils literal notranslate"><span class="pre">_</span></code>“</div>
</div>
</td>
</tr>
</tbody>
</table>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="DoubleSubmitProtection.html" title="4.6. 二重送信防止"
             >next</a> |</li>
        <li class="right" >
          <a href="SessionManagement.html" title="4.4. セッション管理"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.9.0.RELEASE documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" ><span class="section-number">4. </span>Webアプリ開発機能</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">4.5. </span>ページネーション</a></li> 
      </ul>
    </div>
    <div class="footer">
      © Copyright 2024, NTT DATA Group Corporation. © Copyright 2013, NTT Corporation.
      Created using <a href="https://www.sphinx-doc.org/en/master/">Sphinx</a> 7.0.1.Theme is <a href="https://pypi.org/project/solar-theme/">Solar</a>
    </div>
    
    <script>
    
    $(function() {
    	var $sidebar	= $('.sphinxsidebar'),
    		$window		= $(window),
    		offset		= $sidebar.offset(),
    		topPadding	= 3,
    		$scroll		= $('#scroll');
    	
    	$window.scroll(function() {
    		if ($scroll.is(':checked')) {
				if ($window.scrollTop() > offset.top) {
					$sidebar.stop().animate({
						marginTop:$window.scrollTop() - offset.top + topPadding
					});
				} else {
					$sidebar.stop().animate({
						marginTop:0
					});
				}
			}
		});
    	
    	var $navList = $('ul:first', $sidebar);
    	$('li:first', $navList).addClass('open');
    	
    	$navList.treeview({
    		persist: "location",
    		collapsed: true,
    		unique: false
    	});
    	
	});
    </script>
  </body>
</html>