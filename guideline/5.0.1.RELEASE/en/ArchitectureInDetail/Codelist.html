<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>5.14. Codelist &#8212; TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.0.1.RELEASE documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/solar.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5.15. Ajax" href="Ajax.html" />
    <link rel="prev" title="5.13. Internationalization" href="Internationalization.html" /><script async src="https://www.googletagmanager.com/gtag/js?id=G-847V2Q99G8"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date()); gtag('config', 'G-847V2Q99G8');
</script>
<script src="../_static/jquery.treeview.js" type="text/javascript"></script>
<!-- <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro|Open+Sans:300italic,400italic,700italic,400,300,700' rel='stylesheet' type='text/css'> -->
<link href="../_static/solarized-dark.css" rel="stylesheet">
<link href="../_static/jquery.treeview.css" rel="stylesheet">
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Ajax.html" title="5.15. Ajax"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Internationalization.html" title="5.13. Internationalization"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.0.1.RELEASE documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U"><span class="section-number">5. </span>Architecture in Detail - TERASOLUNA Server Framework for Java (5.x)</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">5.14. </span>Codelist</a></li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><label><input id="scroll" type="checkbox" checked> scroll sidebar</label>
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">5.14. Codelist</a><ul>
<li><a class="reference internal" href="#overview">5.14.1. Overview</a></li>
<li><a class="reference internal" href="#how-to-use">5.14.2. How to use</a><ul>
<li><a class="reference internal" href="#using-simplemapcodelist">5.14.2.1. Using SimpleMapCodeList</a><ul>
<li><a class="reference internal" href="#example-of-codelist-settings">5.14.2.1.1. Example of codelist settings</a></li>
<li><a class="reference internal" href="#using-codelist-in-jsp">5.14.2.1.2. Using codelist in JSP</a></li>
<li><a class="reference internal" href="#using-codelist-in-java-class">5.14.2.1.3. Using codelist in Java class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-numberrangecodelist">5.14.2.2. Using NumberRangeCodeList</a><ul>
<li><a class="reference internal" href="#id1">5.14.2.2.1. Example of codelist settings</a></li>
<li><a class="reference internal" href="#id2">5.14.2.2.2. Using codelist in JSP</a></li>
<li><a class="reference internal" href="#id3">5.14.2.2.3. Using codelist in Java class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-jdbccodelist">5.14.2.3. Using JdbcCodeList</a><ul>
<li><a class="reference internal" href="#id4">5.14.2.3.1. Example of codelist settings</a></li>
<li><a class="reference internal" href="#id5">5.14.2.3.2. Using codelist in JSP</a></li>
<li><a class="reference internal" href="#id6">5.14.2.3.3. Using codelist in Java class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-use-enumcodelist">5.14.2.4. How to use EnumCodeList</a><ul>
<li><a class="reference internal" href="#id7">5.14.2.4.1. Example of codelist settings</a></li>
<li><a class="reference internal" href="#id8">5.14.2.4.2. Using codelist in JSP</a></li>
<li><a class="reference internal" href="#id9">5.14.2.4.3. Using codelist in Java class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-use-simplei18ncodelist">5.14.2.5. How to use SimpleI18nCodeList</a><ul>
<li><a class="reference internal" href="#id10">5.14.2.5.1. Example of codelist settings</a></li>
<li><a class="reference internal" href="#id11">5.14.2.5.2. Using codelist in JSP</a></li>
<li><a class="reference internal" href="#id12">5.14.2.5.3. Using codelist in Java class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#display-code-name-corresponding-to-code-value">5.14.2.6. Display code name corresponding to code value</a></li>
<li><a class="reference internal" href="#input-validation-of-code-value-using-codelist">5.14.2.7. Input validation of code value using codelist</a><ul>
<li><a class="reference internal" href="#example-of-existincodelist-settings">5.14.2.7.1. Example of &#64;ExistInCodeList settings</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-extend">5.14.3. How to extend</a><ul>
<li><a class="reference internal" href="#when-large-number-of-records-need-to-be-read-from-jdbccodelist">5.14.3.1. When large number of records need to be read from JdbcCodeList</a></li>
<li><a class="reference internal" href="#when-reloading-the-codelist">5.14.3.2. When reloading the codelist</a><ul>
<li><a class="reference internal" href="#using-task-scheduler">5.14.3.2.1. Using Task Scheduler</a></li>
<li><a class="reference internal" href="#calling-refresh-method-in-controller-service-class">5.14.3.2.2. Calling refresh method in Controller (Service) class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#customizing-the-codelist-independently">5.14.3.3. Customizing the codelist independently</a></li>
</ul>
</li>
<li><a class="reference internal" href="#appendix">5.14.4. Appendix</a><ul>
<li><a class="reference internal" href="#setting-simplei18ncodelist">5.14.4.1. Setting SimpleI18nCodeList</a><ul>
<li><a class="reference internal" href="#set-java-util-map-key-code-value-value-label-for-each-locale-by-rows">5.14.4.1.1. Set <code class="docutils literal notranslate"><span class="pre">java.util.Map</span></code> (key = code value, value = label) for each locale by rows</a></li>
<li><a class="reference internal" href="#set-java-util-map-key-locale-value-label-for-each-code-value-by-columns">5.14.4.1.2. Set <code class="docutils literal notranslate"><span class="pre">java.util.Map</span></code>(key = locale, value = label) for each code value by columns</a></li>
</ul>
</li>
<li><a class="reference internal" href="#variations-of-numberrangecodelist">5.14.4.2. Variations of NumberRangeCodeList</a><ul>
<li><a class="reference internal" href="#create-the-descending-numberrangecodelist">5.14.4.2.1. Create the Descending NumberRangeCodeList</a></li>
<li><a class="reference internal" href="#change-interval-of-numberrangecodelist">5.14.4.2.2. Change interval of NumberRangeCodeList</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="Internationalization.html"
                          title="previous chapter"><span class="section-number">5.13. </span>Internationalization</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="Ajax.html"
                          title="next chapter"><span class="section-number">5.15. </span>Ajax</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/ArchitectureInDetail/Codelist.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="codelist">
<h1><span class="section-number">5.14. </span>Codelist<a class="headerlink" href="#codelist" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id15">Overview</a></p></li>
<li><p><a class="reference internal" href="#how-to-use" id="id16">How to use</a></p>
<ul>
<li><p><a class="reference internal" href="#using-simplemapcodelist" id="id17">Using SimpleMapCodeList</a></p>
<ul>
<li><p><a class="reference internal" href="#example-of-codelist-settings" id="id18">Example of codelist settings</a></p></li>
<li><p><a class="reference internal" href="#using-codelist-in-jsp" id="id19">Using codelist in JSP</a></p></li>
<li><p><a class="reference internal" href="#using-codelist-in-java-class" id="id20">Using codelist in Java class</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#using-numberrangecodelist" id="id21">Using NumberRangeCodeList</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id22">Example of codelist settings</a></p></li>
<li><p><a class="reference internal" href="#id2" id="id23">Using codelist in JSP</a></p></li>
<li><p><a class="reference internal" href="#id3" id="id24">Using codelist in Java class</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#using-jdbccodelist" id="id25">Using JdbcCodeList</a></p>
<ul>
<li><p><a class="reference internal" href="#id4" id="id26">Example of codelist settings</a></p></li>
<li><p><a class="reference internal" href="#id5" id="id27">Using codelist in JSP</a></p></li>
<li><p><a class="reference internal" href="#id6" id="id28">Using codelist in Java class</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#how-to-use-enumcodelist" id="id29">How to use EnumCodeList</a></p>
<ul>
<li><p><a class="reference internal" href="#id7" id="id30">Example of codelist settings</a></p></li>
<li><p><a class="reference internal" href="#id8" id="id31">Using codelist in JSP</a></p></li>
<li><p><a class="reference internal" href="#id9" id="id32">Using codelist in Java class</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#how-to-use-simplei18ncodelist" id="id33">How to use SimpleI18nCodeList</a></p>
<ul>
<li><p><a class="reference internal" href="#id10" id="id34">Example of codelist settings</a></p></li>
<li><p><a class="reference internal" href="#id11" id="id35">Using codelist in JSP</a></p></li>
<li><p><a class="reference internal" href="#id12" id="id36">Using codelist in Java class</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#display-code-name-corresponding-to-code-value" id="id37">Display code name corresponding to code value</a></p></li>
<li><p><a class="reference internal" href="#input-validation-of-code-value-using-codelist" id="id38">Input validation of code value using codelist</a></p>
<ul>
<li><p><a class="reference internal" href="#example-of-existincodelist-settings" id="id39">Example of &#64;ExistInCodeList settings</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#how-to-extend" id="id40">How to extend</a></p>
<ul>
<li><p><a class="reference internal" href="#when-large-number-of-records-need-to-be-read-from-jdbccodelist" id="id41">When large number of records need to be read from JdbcCodeList</a></p></li>
<li><p><a class="reference internal" href="#when-reloading-the-codelist" id="id42">When reloading the codelist</a></p>
<ul>
<li><p><a class="reference internal" href="#using-task-scheduler" id="id43">Using Task Scheduler</a></p></li>
<li><p><a class="reference internal" href="#calling-refresh-method-in-controller-service-class" id="id44">Calling refresh method in Controller (Service) class</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#customizing-the-codelist-independently" id="id45">Customizing the codelist independently</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#appendix" id="id46">Appendix</a></p>
<ul>
<li><p><a class="reference internal" href="#setting-simplei18ncodelist" id="id47">Setting SimpleI18nCodeList</a></p>
<ul>
<li><p><a class="reference internal" href="#set-java-util-map-key-code-value-value-label-for-each-locale-by-rows" id="id48">Set <code class="docutils literal notranslate"><span class="pre">java.util.Map</span></code> (key = code value, value = label) for each locale by rows</a></p></li>
<li><p><a class="reference internal" href="#set-java-util-map-key-locale-value-label-for-each-code-value-by-columns" id="id49">Set <code class="docutils literal notranslate"><span class="pre">java.util.Map</span></code>(key = locale, value = label) for each code value by columns</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#variations-of-numberrangecodelist" id="id50">Variations of NumberRangeCodeList</a></p>
<ul>
<li><p><a class="reference internal" href="#create-the-descending-numberrangecodelist" id="id51">Create the Descending NumberRangeCodeList</a></p></li>
<li><p><a class="reference internal" href="#change-interval-of-numberrangecodelist" id="id52">Change interval of NumberRangeCodeList</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<section id="overview">
<h2><a class="toc-backref" href="#id15" role="doc-backlink"><span class="section-number">5.14.1. </span>Overview</a><a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h2>
<p>A codelist is a pair comprising of “Code values (Value) and their display names (Label)”.</p>
<p>It is used for mapping code values with the labels to be displayed on screen such as selectbox.</p>
<p>Common library provides the following functionalities:</p>
<ul class="simple">
<li><p>Functionality to read and cache the codelist defined in xml file or DB at the time of launching the application.</p></li>
<li><p>Functionality to refer to the codelist from JSP or Java class</p></li>
<li><p>Functionality to perform input validation using codelist</p></li>
</ul>
<p>Moreover, it also supports</p>
<ul class="simple">
<li><p>internationalization of codelist</p></li>
<li><p>reloading of cached codelist</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As per standard specifications, only the codelist defined in DB is reloadable.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Following four types of codelists are implemented in common library.</p>
<table class="docutils align-default" id="id13">
<caption><span class="caption-text"><strong>Types of codelist</strong></span><a class="headerlink" href="#id13" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 30%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Types</p></th>
<th class="head"><p>Contents</p></th>
<th class="head"><p>Reloadable</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">org.terasoluna.gfw.common.codelist.SimpleMapCodeList</span></code></p></td>
<td><p>Use the hard-coded contents from xml file.</p></td>
<td><p>NO</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">org.terasoluna.gfw.common.codelist.NumberRangeCodeList</span></code></p></td>
<td><p>Use when creating number range list.</p></td>
<td><p>NO</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">org.terasoluna.gfw.common.codelist.JdbcCodeList</span></code></p></td>
<td><p>Use the codelist by fetching the code from DB using SQL.</p></td>
<td><p>YES</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">org.terasoluna.gfw.common.codelist.EnumCodeList</span></code></p></td>
<td><p>Use when creating the codelist from constant defined in <code class="docutils literal notranslate"><span class="pre">Enum</span></code> class.</p></td>
<td><p>NO</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">org.terasoluna.gfw.common.codelist.i18n.SimpleI18nCodeList</span></code></p></td>
<td><p>Use the codelist corresponding to java.util.Locale.</p></td>
<td><p>NO</p></td>
</tr>
</tbody>
</table>
<p>Common library provides <code class="docutils literal notranslate"><span class="pre">org.terasoluna.gfw.common.codelist.CodeList</span></code> for the interface of above codelists.</p>
<p>Codelist class diagram provided in common library is as follows:</p>
<figure class="align-center" id="id14">
<img alt="codelist class diagram" src="../_images/codelist-class-diagram.png" />
<figcaption>
<p><span class="caption-text"><strong>Picture - Image of codelist class diagram</strong></span><a class="headerlink" href="#id14" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="how-to-use">
<h2><a class="toc-backref" href="#id16" role="doc-backlink"><span class="section-number">5.14.2. </span>How to use</a><a class="headerlink" href="#how-to-use" title="Permalink to this heading">¶</a></h2>
<p>This section describes settings for various codelists and their implementation methods.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#codelist-simple"><span class="std std-ref">Using SimpleMapCodeList</span></a></p></li>
<li><p><a class="reference internal" href="#codelist-number"><span class="std std-ref">Using NumberRangeCodeList</span></a></p></li>
<li><p><a class="reference internal" href="#codelist-jdbc"><span class="std std-ref">Using JdbcCodeList</span></a></p></li>
<li><p><a class="reference internal" href="#codelist-enum"><span class="std std-ref">How to use EnumCodeList</span></a></p></li>
<li><p><a class="reference internal" href="#codelisti18n"><span class="std std-ref">How to use SimpleI18nCodeList</span></a></p></li>
<li><p><a class="reference internal" href="#codelist-display-label"><span class="std std-ref">Display code name corresponding to code value</span></a></p></li>
<li><p><a class="reference internal" href="#codelist-validate"><span class="std std-ref">Input validation of code value using codelist</span></a></p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="using-simplemapcodelist">
<span id="codelist-simple"></span><h3><a class="toc-backref" href="#id17" role="doc-backlink"><span class="section-number">5.14.2.1. </span>Using SimpleMapCodeList</a><a class="headerlink" href="#using-simplemapcodelist" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">org.terasoluna.gfw.common.codelist.SimpleMapCodeList</span></code> reads the code values defined in xml file at the time of launching the application and uses them as is.</p>
<p><strong>SimpleMapCodeList image</strong></p>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/codelist-simple.png"><img alt="codelist simple" src="../_images/codelist-simple.png" style="width: 100%;" /></a>
</figure>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="example-of-codelist-settings">
<h4><a class="toc-backref" href="#id18" role="doc-backlink"><span class="section-number">5.14.2.1.1. </span>Example of codelist settings</a><a class="headerlink" href="#example-of-codelist-settings" title="Permalink to this heading">¶</a></h4>
<p><strong>Definition of Bean definition file(xxx-codelist.xml)</strong></p>
<p>It is recommended to create a bean definition file for codelist.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="w"> </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;CL_ORDERSTATUS&quot;</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.SimpleMapCodeList&quot;</span><span class="nt">&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (1) --&gt;</span>
</span><span class="w">     </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;map&quot;</span><span class="nt">&gt;</span>
<span class="w">         </span><span class="nt">&lt;util:map&gt;</span>
<span class="hll"><span class="w">             </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Received&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (2) --&gt;</span>
</span><span class="w">             </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;2&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Sent&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">             </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;3&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Cancelled&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">         </span><span class="nt">&lt;/util:map&gt;</span>
<span class="w">     </span><span class="nt">&lt;/property&gt;</span>
<span class="w"> </span><span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sr. No.</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Define a bean of SimpleMapCodeList class.</div>
<div class="line">beanID should have the name matching with the ID pattern of <code class="docutils literal notranslate"><span class="pre">org.terasoluna.gfw.web.codelist.CodeListInterceptor</span></code> described later.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Define Key, Value pairs of Map.</div>
<div class="line">When map-class attribute is omitted, it is registered in <code class="docutils literal notranslate"><span class="pre">java.util.LinkedHashMap</span></code>; hence in the above example, “Name and value” are stored in Map in the order of registration.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Definition of Bean definition file(xxx-domain.xml)</strong></p>
<p>Once the bean definition file for codelist is created, it should be imported to already existing bean definition file.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="w"> </span><span class="nt">&lt;import</span><span class="w"> </span><span class="na">resource=</span><span class="s">&quot;classpath:META-INF/spring/projectName-codelist.xml&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (3) --&gt;</span>
</span><span class="w"> </span><span class="nt">&lt;context:component-scan</span><span class="w"> </span><span class="na">base-package=</span><span class="s">&quot;com.example.domain&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="hll"><span class="w"> </span><span class="cm">&lt;!-- omitted --&gt;</span>
</span></pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sr. No.</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Import bean definition file for codelist.</div>
<div class="line">Resource information of import is necessary during component-scan;</div>
<div class="line">hence import should be set above <code class="docutils literal notranslate"><span class="pre">&lt;context:component-scan</span> <span class="pre">base-package=&quot;com.example.domain&quot;</span> <span class="pre">/&gt;</span></code>.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="using-codelist-in-jsp">
<span id="clientside"></span><h4><a class="toc-backref" href="#id19" role="doc-backlink"><span class="section-number">5.14.2.1.2. </span>Using codelist in JSP</a><a class="headerlink" href="#using-codelist-in-jsp" title="Permalink to this heading">¶</a></h4>
<p>By using the interceptor of common library,
codelist can be set automatically in request scope and can be easily referred from JSP.</p>
<p><strong>Definition of Bean definition file(spring-mvc.xml)</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="nt">&lt;mvc:interceptors&gt;</span>
<span class="w">   </span><span class="nt">&lt;mvc:interceptor&gt;</span>
<span class="hll"><span class="w">     </span><span class="nt">&lt;mvc:mapping</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;/**&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (1) --&gt;</span>
</span><span class="w">     </span><span class="nt">&lt;bean</span>
<span class="hll"><span class="w">       </span><span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.web.codelist.CodeListInterceptor&quot;</span><span class="nt">&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (2) --&gt;</span>
</span><span class="hll"><span class="w">       </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;codeListIdPattern&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;CL_.+&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (3) --&gt;</span>
</span><span class="w">     </span><span class="nt">&lt;/bean&gt;</span>
<span class="w">   </span><span class="nt">&lt;/mvc:interceptor&gt;</span>

<span class="w">   </span><span class="cm">&lt;!-- omitted --&gt;</span>

<span class="w"> </span><span class="nt">&lt;/mvc:interceptors&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sr. No.</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Set the applicable path.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Define a bean of CodeListInterceptor class.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Set the beanID pattern of codelist which is automatically set in the request scope.</div>
<div class="line">In pattern, regular expression used in <code class="docutils literal notranslate"><span class="pre">java.util.regex.Pattern</span></code> should be set.</div>
<div class="line">In the above example, only the data in which id is defined in “CL_XXX” format is targeted. In that case, bean definition wherein id does not start with “CL_” should not be imported.</div>
<div class="line">beanID defined in “CL_” can be used in JSP since it is set in the request scope.</div>
<div class="line"><br /></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">codeListIdPattern</span></code> property can be omitted.</div>
<div class="line">If omitting <code class="docutils literal notranslate"><span class="pre">codeListIdPattern</span></code> property, all of <code class="docutils literal notranslate"><span class="pre">CodeList</span></code>s (all beans which implements <code class="docutils literal notranslate"><span class="pre">org.terasoluna.gfw.common.codelist.CodeList</span></code>) are available in JSP.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Example of implementing the codelist in jsp</strong></p>
<div class="highlight-jsp notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;form:select</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;orderStatus&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;form:option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;--Select--&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (4) --&gt;</span>
<span class="w">  </span><span class="nt">&lt;form:options</span><span class="w"> </span><span class="na">items=</span><span class="s">&quot;${CL_ORDERSTATUS}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (5) --&gt;</span>
<span class="nt">&lt;/form:select&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sr. No.</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">When setting dummy value at the top of the selectbox, null characters should be specified in the value.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Specify the beanID for which codelist is defined.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p><strong>Output HTML</strong></p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">select</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;orderStatus&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;orderStatus&quot;</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">&gt;</span>&quot;--Select--<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;1&quot;</span><span class="p">&gt;</span>Received<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2&quot;</span><span class="p">&gt;</span>Sent<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;3&quot;</span><span class="p">&gt;</span>Cancelled<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
</pre></div>
</div>
<p><strong>Output screen</strong></p>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/codelist_selectbox.png"><img alt="codelist selectbox" src="../_images/codelist_selectbox.png" style="width: 40%;" /></a>
</figure>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="using-codelist-in-java-class">
<span id="serverside"></span><h4><a class="toc-backref" href="#id20" role="doc-backlink"><span class="section-number">5.14.2.1.3. </span>Using codelist in Java class</a><a class="headerlink" href="#using-codelist-in-java-class" title="Permalink to this heading">¶</a></h4>
<p>When using the codelist in Java class,
inject the codelist by setting <code class="docutils literal notranslate"><span class="pre">javax.inject.Inject</span></code> annotation and <code class="docutils literal notranslate"><span class="pre">javax.inject.Named</span></code> annotation.
Specify the codelist name in <code class="docutils literal notranslate"><span class="pre">&#64;Named</span></code> annotation.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">javax.inject.Named</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">org.terasoluna.gfw.common.codelist.CodeList</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">OrderServiceImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">OrderService</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Inject</span>
<span class="w">    </span><span class="nd">@Named</span><span class="p">(</span><span class="s">&quot;CL_ORDERSTATUS&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">CodeList</span><span class="w"> </span><span class="n">orderStatusCodeList</span><span class="p">;</span><span class="w"> </span><span class="c1">// (1)</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">existOrderStatus</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">target</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">orderStatusCodeList</span><span class="p">.</span><span class="na">asMap</span><span class="p">().</span><span class="na">containsKey</span><span class="p">(</span><span class="n">target</span><span class="p">);</span><span class="w"> </span><span class="c1">// (2)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sr. No.</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Inject the codelist with beanID “CL_ORDERSTATUS”.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Fetch the codelist in <code class="docutils literal notranslate"><span class="pre">java.util.Map</span></code> format using CodeList#asMap method.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="using-numberrangecodelist">
<span id="codelist-number"></span><h3><a class="toc-backref" href="#id21" role="doc-backlink"><span class="section-number">5.14.2.2. </span>Using NumberRangeCodeList</a><a class="headerlink" href="#using-numberrangecodelist" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">org.terasoluna.gfw.common.codelist.NumberRangeCodeList</span></code> is a codelist that creates the list of numeric values of specified range at the time of launching the application.
It is assumed that this codelist will mainly be used in the selectboxes having only numbers i.e. selectbox for month, date etc.</p>
<p><strong>Image of NumberRangeCodeList</strong></p>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/codelist-number.png"><img alt="codelist number" src="../_images/codelist-number.png" style="width: 100%;" /></a>
</figure>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>NumberRangeCodeList supports only Arabic numbers and does not support Chinese and Roman numbers.
Chinese and Roman numbers can be supported by using JdbcCodeList and SimpleMapCodeList.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>NumberRangeCodeList has the following features:</p>
<ol class="arabic simple">
<li><p>In order to set From value &lt; To value, the values increased in accordance with the interval are set in From-To range in ascending order.</p></li>
<li><p>In order to set To value &lt; From value, the values decreased in accordance with the interval are set in To-From range in descending order.</p></li>
<li><p>Increment (decrement) can be changed by setting intervals.</p></li>
</ol>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>The information here describes how to configure the ascending <code class="docutils literal notranslate"><span class="pre">NumberRangeCodeList</span></code>.
For how to create the descending <code class="docutils literal notranslate"><span class="pre">NumberRangeCodeList</span></code> or change interval, refer to “<a class="reference internal" href="#codelistappendixnumberrangecodelistvariation"><span class="std std-ref">Variations of NumberRangeCodeList</span></a>”.
|</p>
<section id="id1">
<h4><a class="toc-backref" href="#id22" role="doc-backlink"><span class="section-number">5.14.2.2.1. </span>Example of codelist settings</a><a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h4>
<p>Example of setting From value &lt; To value is shown below.</p>
<p><strong>Definition of Bean definition file(xxx-codelist.xml)</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;CL_MONTH&quot;</span>
<span class="w">    </span><span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.NumberRangeCodeList&quot;</span><span class="nt">&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (1) --&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;from&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (2) --&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;to&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;12&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (3) --&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;valueFormat&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;%d&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (4) --&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;labelFormat&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;%02d&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (5) --&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;interval&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (6) --&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sr. No.</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Define a bean of NumberRangeCodeList.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Specify the range start value. When omitted, “0” is set as range start value.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Specify the range end value. It cannot be blank.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Specify the format of the code value. Format used should be <code class="docutils literal notranslate"><span class="pre">java.lang.String.format</span></code>.</div>
<div class="line">When omitted, “%s” is set.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Specify the format of the code name. Format used should be <code class="docutils literal notranslate"><span class="pre">java.lang.String.format</span></code>.</div>
<div class="line">When omitted, “%s” is set.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(6)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Set the increment value. When omitted, “1” is set.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="id2">
<h4><a class="toc-backref" href="#id23" role="doc-backlink"><span class="section-number">5.14.2.2.2. </span>Using codelist in JSP</a><a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h4>
<p>For details on settings shown below, refer to <a class="reference internal" href="#clientside"><span class="std std-ref">Using codelist in JSP</span></a> described earlier.</p>
<p><strong>Example of jsp implementation</strong></p>
<div class="highlight-jsp notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;form:select</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;depMonth&quot;</span><span class="w"> </span><span class="na">items=</span><span class="s">&quot;${CL_MONTH}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p><strong>Output HTML</strong></p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">select</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;depMonth&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;depMonth&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;1&quot;</span><span class="p">&gt;</span>01<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2&quot;</span><span class="p">&gt;</span>02<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;3&quot;</span><span class="p">&gt;</span>03<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;4&quot;</span><span class="p">&gt;</span>04<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;5&quot;</span><span class="p">&gt;</span>05<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;6&quot;</span><span class="p">&gt;</span>06<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;7&quot;</span><span class="p">&gt;</span>07<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;8&quot;</span><span class="p">&gt;</span>08<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;9&quot;</span><span class="p">&gt;</span>09<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;10&quot;</span><span class="p">&gt;</span>10<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;11&quot;</span><span class="p">&gt;</span>11<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;12&quot;</span><span class="p">&gt;</span>12<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
</pre></div>
</div>
<p><strong>Output screen</strong></p>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/codelist_numberrenge.png"><img alt="codelist numberrange" src="../_images/codelist_numberrenge.png" style="width: 5%;" /></a>
</figure>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="id3">
<h4><a class="toc-backref" href="#id24" role="doc-backlink"><span class="section-number">5.14.2.2.3. </span>Using codelist in Java class</a><a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h4>
<p>For details on settings shown below, refer to <a class="reference internal" href="#serverside"><span class="std std-ref">Using codelist in Java class</span></a> described earlier.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="using-jdbccodelist">
<span id="codelist-jdbc"></span><h3><a class="toc-backref" href="#id25" role="doc-backlink"><span class="section-number">5.14.2.3. </span>Using JdbcCodeList</a><a class="headerlink" href="#using-jdbccodelist" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">org.terasoluna.gfw.common.codelist.JdbcCodeList</span></code> is a class for creating codelist by fetching values from DB at the time of launching the application.
This list is cached.</p>
<p>The fetched values can be changed dynamically by reloading. For details, refer to <a class="reference internal" href="#codelisttaskscheduler"><span class="std std-ref">When reloading the codelist</span></a>.</p>
<p><strong>JdbcCodeList image</strong></p>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/codelist-jdbc.png"><img alt="codelist simple" src="../_images/codelist-jdbc.png" style="width: 100%;" /></a>
</figure>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="id4">
<h4><a class="toc-backref" href="#id26" role="doc-backlink"><span class="section-number">5.14.2.3.1. </span>Example of codelist settings</a><a class="headerlink" href="#id4" title="Permalink to this heading">¶</a></h4>
<p><strong>Definition of Table(authority)</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>authority_id</p></th>
<th class="head"><p>authority_name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">01</div>
</div>
</td>
<td><div class="line-block">
<div class="line">STAFF_MANAGEMENT</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">02</div>
</div>
</td>
<td><div class="line-block">
<div class="line">MASTER_MANAGEMENT</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">03</div>
</div>
</td>
<td><div class="line-block">
<div class="line">STOCK_MANAGEMENT</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">04</div>
</div>
</td>
<td><div class="line-block">
<div class="line">ORDER_MANAGEMENT</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">05</div>
</div>
</td>
<td><div class="line-block">
<div class="line">SHOW_SHOPPING_CENTER</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Definition of Bean definition file(xxx-codelist.xml)</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;CL_AUTHORITIES&quot;</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.JdbcCodeList&quot;</span><span class="nt">&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (1) --&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;dataSource&quot;</span><span class="w"> </span><span class="na">ref=</span><span class="s">&quot;dataSource&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;querySql&quot;</span>
<span class="w">        </span><span class="na">value=</span><span class="s">&quot;SELECT authority_id, authority_name FROM authority ORDER BY authority_id&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (2) --&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;valueColumn&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;authority_id&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (3) --&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;labelColumn&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;authority_name&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (4) --&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sr. No.</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Define a bean of JdbcCodeList class.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Write an SQL for fetching the codelist in querySql property. At that time, <strong>make sure to specify ORDER BY clause to define the order.</strong></div>
<div class="line">If ORDER BY is not specified, the order gets changed every time when records are fetched using SQL.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Set the value corresponding to the Key of Map in valueColumn property. In this example, authority_id is set.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Set the value corresponding to the Value of Map in labelColumn property. In this example, authority_name is set.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="id5">
<h4><a class="toc-backref" href="#id27" role="doc-backlink"><span class="section-number">5.14.2.3.2. </span>Using codelist in JSP</a><a class="headerlink" href="#id5" title="Permalink to this heading">¶</a></h4>
<div class="line-block">
<div class="line">For details on settings shown below, refer to <a class="reference internal" href="#clientside"><span class="std std-ref">Using codelist in JSP</span></a> described earlier.</div>
</div>
<p><strong>Example of jsp implementation</strong></p>
<div class="highlight-jsp notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;form:checkboxes</span><span class="w"> </span><span class="na">items=</span><span class="s">&quot;${CL_AUTHORITIES}&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p><strong>Output HTML</strong></p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;authorities1&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;authorities&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;01&quot;</span><span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;authorities1&quot;</span><span class="p">&gt;</span>STAFF_MANAGEMENT<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;authorities2&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;authorities&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;02&quot;</span><span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;authorities2&quot;</span><span class="p">&gt;</span>MASTER_MANAGEMENT<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;authorities3&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;authorities&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;03&quot;</span><span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;authorities3&quot;</span><span class="p">&gt;</span>STOCK_MANAGEMENT<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;authorities4&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;authorities&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;04&quot;</span><span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;authorities4&quot;</span><span class="p">&gt;</span>ORDER_MANAGEMENT<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;authorities5&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;authorities&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;05&quot;</span><span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;authorities5&quot;</span><span class="p">&gt;</span>SHOW_SHOPPING_CENTER<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</pre></div>
</div>
<p><strong>Output screen</strong></p>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/codelist_checkbox.png"><img alt="codelist checkbox" src="../_images/codelist_checkbox.png" style="width: 50%;" /></a>
</figure>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="id6">
<h4><a class="toc-backref" href="#id28" role="doc-backlink"><span class="section-number">5.14.2.3.3. </span>Using codelist in Java class</a><a class="headerlink" href="#id6" title="Permalink to this heading">¶</a></h4>
<p>For details on settings shown below, refer to <a class="reference internal" href="#serverside"><span class="std std-ref">Using codelist in Java class</span></a> described earlier.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="how-to-use-enumcodelist">
<span id="codelist-enum"></span><h3><a class="toc-backref" href="#id29" role="doc-backlink"><span class="section-number">5.14.2.4. </span>How to use EnumCodeList</a><a class="headerlink" href="#how-to-use-enumcodelist" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">org.terasoluna.gfw.common.codelist.EnumCodeList</span></code> is a class
for creating codelist from constant defined in <code class="docutils literal notranslate"><span class="pre">Enum</span></code> class.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In case of handling codelist in applications that match with the following conditions,
it should be analyzed if the codelist label can be stored in <code class="docutils literal notranslate"><span class="pre">Enum</span></code> class using <code class="docutils literal notranslate"><span class="pre">EnumCodeList</span></code> .
By storing codelist label in <code class="docutils literal notranslate"><span class="pre">Enum</span></code> class,
the information and operations linked with code values can be aggregated in <code class="docutils literal notranslate"><span class="pre">Enum</span></code> class.</p>
<ul class="simple">
<li><p>It is necessary to store the code values in <code class="docutils literal notranslate"><span class="pre">Enum</span></code> class (i.e. the process needs to be performed considering code values in Java logic)</p></li>
<li><p>Internationalization (multilingualization) of UI is not required</p></li>
</ul>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Image of using <code class="docutils literal notranslate"><span class="pre">EnumCodeList</span></code> is shown below.</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/codelist-enum.png"><img alt="codelist enum" src="../_images/codelist-enum.png" style="width: 100%;" /></a>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In <code class="docutils literal notranslate"><span class="pre">EnumCodeList</span></code>, <code class="docutils literal notranslate"><span class="pre">org.terasoluna.gfw.common.codelist.EnumCodeList.CodeListItem</span></code> interface
is provided to fetch the information (code values and labels) required for creating codelist from <code class="docutils literal notranslate"><span class="pre">Enum</span></code> class.</p>
<p>In case of using <code class="docutils literal notranslate"><span class="pre">EnumCodeList</span></code>, <code class="docutils literal notranslate"><span class="pre">EnumCodeList.CodeListItem</span></code> interface should be implemented in <code class="docutils literal notranslate"><span class="pre">Enum</span></code> class to be created.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="id7">
<h4><a class="toc-backref" href="#id30" role="doc-backlink"><span class="section-number">5.14.2.4.1. </span>Example of codelist settings</a><a class="headerlink" href="#id7" title="Permalink to this heading">¶</a></h4>
<p><strong>Creating Enum class</strong></p>
<p>In case of using <code class="docutils literal notranslate"><span class="pre">EnumCodeList</span></code>,
create <code class="docutils literal notranslate"><span class="pre">Enum</span></code> class that implements <code class="docutils literal notranslate"><span class="pre">EnumCodeList.CodeListItem</span></code> interface.
Example is shown below.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.domain.model</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">org.terasoluna.gfw.common.codelist.EnumCodeList</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">enum</span><span class="w"> </span><span class="n">OrderStatus</span>
<span class="w">    </span><span class="c1">// (1)</span>
<span class="w">    </span><span class="kd">implements</span><span class="w"> </span><span class="n">EnumCodeList</span><span class="p">.</span><span class="na">CodeListItem</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// (2)</span>
<span class="w">    </span><span class="n">RECEIVED</span><span class="w">  </span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Received&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">SENT</span><span class="w">      </span><span class="p">(</span><span class="s">&quot;2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Sent&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">CANCELLED</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;3&quot;</span><span class="p">,</span><span class="s">&quot;Cancelled&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// (3)</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">label</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// (4)</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="nf">OrderStatus</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">codeValue</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">codeLabel</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">codeValue</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">codeLabel</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// (5)</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getCodeValue</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// (6)</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getCodeLabel</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">label</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sr. No.</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><p>In <code class="docutils literal notranslate"><span class="pre">Enum</span></code> class to be used as codelist,
implement the <code class="docutils literal notranslate"><span class="pre">org.terasoluna.gfw.common.codelist.EnumCodeList.CodeListItem</span></code> interface provided by common library.</p>
<p>In <code class="docutils literal notranslate"><span class="pre">EnumCodeList.CodeListItem</span></code> interface, following methods are defined to fetch the information (code values and labels) required for creating a codelist.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">getCodeValue()</span></code> method to fetch code values</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">getCodeLabel()</span></code> method to fetch labels</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><p>Define constants.</p>
<p>When creating constants, specify the information (code values and labels) required for creating a codelist.</p>
<p>In above example, following 3 constants are defined.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">RECEIVED</span></code> (code value=<code class="docutils literal notranslate"><span class="pre">&quot;1&quot;</span></code>, label=<code class="docutils literal notranslate"><span class="pre">&quot;Received&quot;</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SENT</span></code> (code value=<code class="docutils literal notranslate"><span class="pre">&quot;2&quot;</span></code>, label=<code class="docutils literal notranslate"><span class="pre">&quot;Sent&quot;</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CANCELLED</span></code> (code value=<code class="docutils literal notranslate"><span class="pre">&quot;3&quot;</span></code>, label=<code class="docutils literal notranslate"><span class="pre">&quot;Cancelled&quot;</span></code>)</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Sorting order of codelist when using <code class="docutils literal notranslate"><span class="pre">EnumCodeList</span></code> will be the order of defining constants.</p>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><p>Create a property to store the information (code values and labels) required for creating a codelist.</p></td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(4)</div>
</div>
</td>
<td><p>Create a constructor to receive the information (code values and labels) required for creating a codelist.</p></td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(5)</div>
</div>
</td>
<td><p>Return the code values storing constants.</p>
<p>This method is defined in <code class="docutils literal notranslate"><span class="pre">EnumCodeList.CodeListItem</span></code> interface, and
it is called when <code class="docutils literal notranslate"><span class="pre">EnumCodeList</span></code> fetches code value from a constant.</p>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(6)</div>
</div>
</td>
<td><p>Return the label storing constants.</p>
<p>This method is defined in <code class="docutils literal notranslate"><span class="pre">EnumCodeList.CodeListItem</span></code> interface, and
it is called when <code class="docutils literal notranslate"><span class="pre">EnumCodeList</span></code> fetches label from a constant.</p>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Definition of bean definition file (xxx-codelist.xml)</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">EnumCodeList</span></code> is defined in bean definition file for codelist.
Example of definition is shown below.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;CL_ORDERSTATUS&quot;</span>
<span class="w">      </span><span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.EnumCodeList&quot;</span><span class="nt">&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (7) --&gt;</span>
<span class="w">    </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;com.example.domain.model.OrderStatus&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (8) --&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sr. No.</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(7)</div>
</div>
</td>
<td><p>Specify <code class="docutils literal notranslate"><span class="pre">EnumCodeList</span></code> class as codelist implementation class.</p></td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(8)</div>
</div>
</td>
<td><p>Specify FQCN of <code class="docutils literal notranslate"><span class="pre">Enum</span></code> class that implements <code class="docutils literal notranslate"><span class="pre">EnumCodeList.CodeListItem</span></code> interface in constructor of <code class="docutils literal notranslate"><span class="pre">EnumCodeList</span></code> class.</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="id8">
<h4><a class="toc-backref" href="#id31" role="doc-backlink"><span class="section-number">5.14.2.4.2. </span>Using codelist in JSP</a><a class="headerlink" href="#id8" title="Permalink to this heading">¶</a></h4>
<p>For details on how to use codelist in JSP, refer to <a class="reference internal" href="#clientside"><span class="std std-ref">Using codelist in JSP</span></a> described earlier.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="id9">
<h4><a class="toc-backref" href="#id32" role="doc-backlink"><span class="section-number">5.14.2.4.3. </span>Using codelist in Java class</a><a class="headerlink" href="#id9" title="Permalink to this heading">¶</a></h4>
<p>For details on how to use codelist in Java class,
refer to <a class="reference internal" href="#serverside"><span class="std std-ref">Using codelist in Java class</span></a> described earlier.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="how-to-use-simplei18ncodelist">
<span id="codelisti18n"></span><h3><a class="toc-backref" href="#id33" role="doc-backlink"><span class="section-number">5.14.2.5. </span>How to use SimpleI18nCodeList</a><a class="headerlink" href="#how-to-use-simplei18ncodelist" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">org.terasoluna.gfw.common.codelist.i18n.SimpleI18nCodeList</span></code> is a codelist supporting internationalization.
By setting the codelist for each locale, the codelist corresponding to locale can be returned.</p>
<p><strong>SimpleI18nCodeList image</strong></p>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/codelist-i18n.png"><img alt="codelist i18n" src="../_images/codelist-i18n.png" style="width: 100%;" /></a>
</figure>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="id10">
<h4><a class="toc-backref" href="#id34" role="doc-backlink"><span class="section-number">5.14.2.5.1. </span>Example of codelist settings</a><a class="headerlink" href="#id10" title="Permalink to this heading">¶</a></h4>
<p>It is easier to understand if you consider <code class="docutils literal notranslate"><span class="pre">SimpleI18nCodeList</span></code> as two dimensional table wherein row is <code class="docutils literal notranslate"><span class="pre">Locale</span></code>, column contains code values and cell details are labels.</p>
<p>The table would be as follows in case of a selectbox for selecting charges.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 15%" />
<col style="width: 15%" />
<col style="width: 15%" />
<col style="width: 15%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head stub"><p>row=Locale,column=Code</p></th>
<th class="head"><p>0</p></th>
<th class="head"><p>10000</p></th>
<th class="head"><p>20000</p></th>
<th class="head"><p>30000</p></th>
<th class="head"><p>40000</p></th>
<th class="head"><p>50000</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><th class="stub"><p>en</p></th>
<td><p>unlimited</p></td>
<td><p>Less than \10,000</p></td>
<td><p>Less than \20,000</p></td>
<td><p>Less than \30,000</p></td>
<td><p>Less than \40,000</p></td>
<td><p>Less than \50,000</p></td>
</tr>
<tr class="row-odd"><th class="stub"><p>ja</p></th>
<td><p>上限なし</p></td>
<td><p>10,000円以下</p></td>
<td><p>20,000円以下</p></td>
<td><p>30,000円以下</p></td>
<td><p>40,000円以下</p></td>
<td><p>50,000円以下</p></td>
</tr>
</tbody>
</table>
<p>For creating a codelist table that supports internationalization, <code class="docutils literal notranslate"><span class="pre">SimpleI18nCodeList</span></code> has been set in following 3 ways.</p>
<ul class="simple">
<li><p>Set <code class="docutils literal notranslate"><span class="pre">CodeList</span></code> for each locale by rows.</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">java.util.Map</span></code>(key = code value, value = label) for each locale by rows.</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">java.util.Map</span></code>(key = locale, value = label) for each code value by columns.</p></li>
</ul>
<p>It is recommended that you set the codelist using “Set <code class="docutils literal notranslate"><span class="pre">CodeList</span></code> for each locale by rows.” method.</p>
<p>The way of setting the <code class="docutils literal notranslate"><span class="pre">CodeList</span></code> for each locale by rows considering the above example of selectbox for selecting charges, is mentioned below.
For other setting methods, refer to <a class="reference internal" href="#aftercodelisti18n"><span class="std std-ref">Setting SimpleI18nCodeList</span></a>.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Definition of Bean definition file (xxx-codelist.xml)</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;CL_I18N_PRICE&quot;</span>
<span class="w">    </span><span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.i18n.SimpleI18nCodeList&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;rowsByCodeList&quot;</span><span class="nt">&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (1) --&gt;</span>
<span class="w">        </span><span class="nt">&lt;util:map&gt;</span>
<span class="w">            </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;en&quot;</span><span class="w"> </span><span class="na">value-ref=</span><span class="s">&quot;CL_PRICE_EN&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;ja&quot;</span><span class="w"> </span><span class="na">value-ref=</span><span class="s">&quot;CL_PRICE_JA&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/util:map&gt;</span>
<span class="w">    </span><span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sr. No.</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Set Map wherein key is <code class="docutils literal notranslate"><span class="pre">java.lang.Locale</span></code>, in rowsByCodeList properties.</div>
<div class="line">In Map, specify locale in key and a reference link to codelist class corresponding to locale in value-ref.</div>
<div class="line">For Map values, refer to codelist class corresponding to each locale.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Definition of Bean definition file(xxx-codelist.xml) when creating SimpleMapCodeList for each locale</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;CL_I18N_PRICE&quot;</span>
<span class="w">    </span><span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.i18n.SimpleI18nCodeList&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;rowsByCodeList&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;util:map&gt;</span>
<span class="w">            </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;en&quot;</span><span class="w"> </span><span class="na">value-ref=</span><span class="s">&quot;CL_PRICE_EN&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;ja&quot;</span><span class="w"> </span><span class="na">value-ref=</span><span class="s">&quot;CL_PRICE_JA&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/util:map&gt;</span>
<span class="w">    </span><span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;CL_PRICE_EN&quot;</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.SimpleMapCodeList&quot;</span><span class="nt">&gt;</span><span class="w">  </span><span class="cm">&lt;!-- (2) --&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;map&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;util:map&gt;</span>
<span class="w">            </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;unlimited&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;10000&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Less than \\10,000&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;20000&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Less than \\20,000&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;30000&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Less than \\30,000&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;40000&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Less than \\40,000&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;50000&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Less than \\50,000&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/util:map&gt;</span>
<span class="w">    </span><span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;CL_PRICE_JA&quot;</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.SimpleMapCodeList&quot;</span><span class="nt">&gt;</span><span class="w">  </span><span class="cm">&lt;!-- (3) --&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;map&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;util:map&gt;</span>
<span class="w">            </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;上限なし&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;10000&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;10,000円以下&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;20000&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;20,000円以下&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;30000&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;30,000円以下&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;40000&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;40,000円以下&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;50000&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;50,000円以下&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/util:map&gt;</span>
<span class="w">    </span><span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sr. No.</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">For bean definition <code class="docutils literal notranslate"><span class="pre">CL_PRICE_EN</span></code> where locale is “en”, codelist class is set in <code class="docutils literal notranslate"><span class="pre">SimpleMapCodeList</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">For bean definition <code class="docutils literal notranslate"><span class="pre">CL_PRICE_JA</span></code> where locale is “ja”, codelist class is set in <code class="docutils literal notranslate"><span class="pre">SimpleMapCodeList</span></code>.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Definition of Bean definition file(xxx-codelist.xml) when creating JdbcCodeList for each locale</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;CL_I18N_PRICE&quot;</span>
<span class="w">    </span><span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.i18n.SimpleI18nCodeList&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;rowsByCodeList&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;util:map&gt;</span>
<span class="w">            </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;en&quot;</span><span class="w"> </span><span class="na">value-ref=</span><span class="s">&quot;CL_PRICE_EN&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;ja&quot;</span><span class="w"> </span><span class="na">value-ref=</span><span class="s">&quot;CL_PRICE_JA&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/util:map&gt;</span>
<span class="w">    </span><span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;CL_PRICE_EN&quot;</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.JdbcCodeList&quot;</span><span class="nt">&gt;</span><span class="w">  </span><span class="cm">&lt;!-- (4) --&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;dataSource&quot;</span><span class="w"> </span><span class="na">ref=</span><span class="s">&quot;dataSource&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;querySql&quot;</span>
<span class="w">        </span><span class="na">value=</span><span class="s">&quot;SELECT code, label FROM price WHERE locale = &#39;en&#39; ORDER BY code&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;valueColumn&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;code&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;labelColumn&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;label&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;CL_PRICE_JA&quot;</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.JdbcCodeList&quot;</span><span class="nt">&gt;</span><span class="w">  </span><span class="cm">&lt;!-- (5) --&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;dataSource&quot;</span><span class="w"> </span><span class="na">ref=</span><span class="s">&quot;dataSource&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;querySql&quot;</span>
<span class="w">        </span><span class="na">value=</span><span class="s">&quot;SELECT code, label FROM price WHERE locale = &#39;ja&#39; ORDER BY code&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;valueColumn&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;code&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;labelColumn&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;label&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sr. No.</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">For bean definition <code class="docutils literal notranslate"><span class="pre">CL_PRICE_EN</span></code> where locale is “en”, codelist class is set in <code class="docutils literal notranslate"><span class="pre">JdbcCodeList</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">For bean definition <code class="docutils literal notranslate"><span class="pre">CL_PRICE_JA</span></code> where locale is “ja”, codelist class is set in <code class="docutils literal notranslate"><span class="pre">JdbcCodeList</span></code>.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Insert the following data in Table Definition (price table).</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>locale</p></th>
<th class="head"><p>code</p></th>
<th class="head"><p>label</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">en</div>
</div>
</td>
<td><div class="line-block">
<div class="line">0</div>
</div>
</td>
<td><div class="line-block">
<div class="line">unlimited</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">en</div>
</div>
</td>
<td><div class="line-block">
<div class="line">10000</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Less than \10,000</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">en</div>
</div>
</td>
<td><div class="line-block">
<div class="line">20000</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Less than \20,000</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">en</div>
</div>
</td>
<td><div class="line-block">
<div class="line">30000</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Less than \30,000</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">en</div>
</div>
</td>
<td><div class="line-block">
<div class="line">40000</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Less than \40,000</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">en</div>
</div>
</td>
<td><div class="line-block">
<div class="line">50000</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Less than \50,000</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">ja</div>
</div>
</td>
<td><div class="line-block">
<div class="line">0</div>
</div>
</td>
<td><div class="line-block">
<div class="line">上限なし</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">ja</div>
</div>
</td>
<td><div class="line-block">
<div class="line">10000</div>
</div>
</td>
<td><div class="line-block">
<div class="line">10,000円以下</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">ja</div>
</div>
</td>
<td><div class="line-block">
<div class="line">20000</div>
</div>
</td>
<td><div class="line-block">
<div class="line">20,000円以下</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">ja</div>
</div>
</td>
<td><div class="line-block">
<div class="line">30000</div>
</div>
</td>
<td><div class="line-block">
<div class="line">30,000円以下</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">ja</div>
</div>
</td>
<td><div class="line-block">
<div class="line">40000</div>
</div>
</td>
<td><div class="line-block">
<div class="line">40,000円以下</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">ja</div>
</div>
</td>
<td><div class="line-block">
<div class="line">50000</div>
</div>
</td>
<td><div class="line-block">
<div class="line">50,000円以下</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Currently <code class="docutils literal notranslate"><span class="pre">SimpleI18nCodeList</span></code> does not support reloadable functionality.
It should be noted that even if <code class="docutils literal notranslate"><span class="pre">JdbcCodeList</span></code> (reloadable CodeList) referred by <code class="docutils literal notranslate"><span class="pre">SimpleI18nCodeList</span></code> is reloaded, it does not get reflected in <code class="docutils literal notranslate"><span class="pre">SimpleI18nCodeList</span></code>.
In order to make it reloadable, it should be implemented independently.
For implementation method, refer to <a class="reference internal" href="#originalcustomizecodelist"><span class="std std-ref">Customizing the codelist independently</span></a>.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="id11">
<h4><a class="toc-backref" href="#id35" role="doc-backlink"><span class="section-number">5.14.2.5.2. </span>Using codelist in JSP</a><a class="headerlink" href="#id11" title="Permalink to this heading">¶</a></h4>
<p>Description of basic settings is omitted since it is same as <a class="reference internal" href="#clientside"><span class="std std-ref">Using codelist in JSP</span></a> described earlier.</p>
<p><strong>Definition of Bean definition file(spring-mvc.xml)</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;mvc:interceptors&gt;</span>
<span class="w">  </span><span class="nt">&lt;mvc:interceptor&gt;</span>
<span class="w">    </span><span class="nt">&lt;mvc:mapping</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;/**&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;bean</span>
<span class="w">      </span><span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.web.codelist.CodeListInterceptor&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;codeListIdPattern&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;CL_.+&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;fallbackTo&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;en&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">  </span><span class="cm">&lt;!-- (1) --&gt;</span>
<span class="w">    </span><span class="nt">&lt;/bean&gt;</span>
<span class="w">  </span><span class="nt">&lt;/mvc:interceptor&gt;</span>

<span class="w">  </span><span class="cm">&lt;!-- omitted --&gt;</span>

<span class="nt">&lt;/mvc:interceptors&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sr. No.</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">When request locale is not defined in codelist,</div>
<div class="line">codelist is fetched using the locale set in fallbackTo property.</div>
<div class="line">When fallbackTo property is not set, default JVM locale is used as fallbackTo property.</div>
<div class="line">When codelist cannot be fetched even after using the locale set in fallbackTo property, WARN log is output and empty Map is returned.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Example of jsp implementation</strong></p>
<div class="highlight-jsp notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;form:select</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;basePrice&quot;</span><span class="w"> </span><span class="na">items=</span><span class="s">&quot;${CL_I18N_PRICE}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p><strong>Output HTML lang=en</strong></p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">select</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;basePrice&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;basePrice&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;0&quot;</span><span class="p">&gt;</span>unlimited<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;1&quot;</span><span class="p">&gt;</span>Less than \\10,000<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2&quot;</span><span class="p">&gt;</span>Less than \\20,000<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;3&quot;</span><span class="p">&gt;</span>Less than \\30,000<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;4&quot;</span><span class="p">&gt;</span>Less than \\40,000<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;5&quot;</span><span class="p">&gt;</span>Less than \\50,000<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
</pre></div>
</div>
<p><strong>Output HTML lang=ja</strong></p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">select</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;basePrice&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;basePrice&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;0&quot;</span><span class="p">&gt;</span>上限なし<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;1&quot;</span><span class="p">&gt;</span>10,000円以下<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2&quot;</span><span class="p">&gt;</span>20,000円以下<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;3&quot;</span><span class="p">&gt;</span>30,000円以下<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;4&quot;</span><span class="p">&gt;</span>40,000円以下<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;5&quot;</span><span class="p">&gt;</span>50,000円以下<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
</pre></div>
</div>
<p><strong>Output screen lang=en</strong></p>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/codelist_i18n_en.png"><img alt="codelist i18n en" src="../_images/codelist_i18n_en.png" style="width: 20%;" /></a>
</figure>
<p><strong>Output screen lang=ja</strong></p>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/codelist_i18n_ja.png"><img alt="codelist i18n ja" src="../_images/codelist_i18n_ja.png" style="width: 20%;" /></a>
</figure>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="id12">
<h4><a class="toc-backref" href="#id36" role="doc-backlink"><span class="section-number">5.14.2.5.3. </span>Using codelist in Java class</a><a class="headerlink" href="#id12" title="Permalink to this heading">¶</a></h4>
<p>Description of basic settings is omitted since it is same as <a class="reference internal" href="#serverside"><span class="std std-ref">Using codelist in Java class</span></a> described earlier.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;orders&quot;</span><span class="p">)</span>
<span class="nd">@Controller</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">OrderController</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Inject</span>
<span class="w">    </span><span class="nd">@Named</span><span class="p">(</span><span class="s">&quot;CL_I18N_PRICE&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">I18nCodeList</span><span class="w"> </span><span class="n">priceCodeList</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// ...</span>

<span class="w">    </span><span class="nd">@RequestMapping</span><span class="p">(</span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RequestMethod</span><span class="p">.</span><span class="na">POST</span><span class="p">,</span><span class="w"> </span><span class="n">params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;confirm&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">confirm</span><span class="p">(</span><span class="n">OrderForm</span><span class="w"> </span><span class="n">form</span><span class="p">,</span><span class="w"> </span><span class="n">Locale</span><span class="w"> </span><span class="n">locale</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ...</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">priceMassage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getPriceMessage</span><span class="p">(</span><span class="n">form</span><span class="p">.</span><span class="na">getPriceCode</span><span class="p">(),</span><span class="w"> </span><span class="n">locale</span><span class="p">);</span>
<span class="w">        </span><span class="c1">// ...</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getPriceMessage</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">targetPrice</span><span class="p">,</span><span class="w"> </span><span class="n">Locale</span><span class="w"> </span><span class="n">locale</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="k">return</span><span class="w"> </span><span class="n">priceCodeList</span><span class="p">.</span><span class="na">asMap</span><span class="p">(</span><span class="n">locale</span><span class="p">).</span><span class="na">get</span><span class="p">(</span><span class="n">targetPrice</span><span class="p">);</span><span class="w">  </span><span class="c1">// (1)</span>
<span class="w">    </span><span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sr. No.</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Map of locale corresponding to I18nCodeList#asMap(Locale) can be fetched.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="display-code-name-corresponding-to-code-value">
<span id="codelist-display-label"></span><h3><a class="toc-backref" href="#id37" role="doc-backlink"><span class="section-number">5.14.2.6. </span>Display code name corresponding to code value</a><a class="headerlink" href="#display-code-name-corresponding-to-code-value" title="Permalink to this heading">¶</a></h3>
<p>When it is necessary to refer the codelist in JSP, it can be referred same as <code class="docutils literal notranslate"><span class="pre">java.util.Map</span></code> interface.</p>
<p>For details, see the below example.</p>
<p><strong>Example of jsp implementation</strong></p>
<div class="highlight-jsp notranslate"><div class="highlight"><pre><span></span>Order<span class="w"> </span>Status<span class="w"> </span>:<span class="w"> </span>${f:h(CL_ORDERSTATUS[orderForm.orderStatus])}
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sr. No.</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Get a codelist that has been converted to the <code class="docutils literal notranslate"><span class="pre">java.util.Map</span></code> from the request scope (In this example, <code class="docutils literal notranslate"><span class="pre">&quot;CL_ORDERSTATUS&quot;</span></code> used as codelist ). The codelist has been referred with the beanID of codelist.</div>
<div class="line">Then specify a code value as a key of the <code class="docutils literal notranslate"><span class="pre">Map</span></code> interface which displays a corresponding code name (In this example, <code class="docutils literal notranslate"><span class="pre">orderStatus</span></code> value is used as a key).</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="input-validation-of-code-value-using-codelist">
<span id="codelist-validate"></span><h3><a class="toc-backref" href="#id38" role="doc-backlink"><span class="section-number">5.14.2.7. </span>Input validation of code value using codelist</a><a class="headerlink" href="#input-validation-of-code-value-using-codelist" title="Permalink to this heading">¶</a></h3>
<p>When checking whether the input value is the code value defined in codelist,
<code class="docutils literal notranslate"><span class="pre">org.terasoluna.gfw.common.codelist.ExistInCodeList</span></code> annotation for BeanValidation is provided in common library.</p>
<p>For details on BeanValidation and message output method, refer to <a class="reference internal" href="Validation.html"><span class="doc">Input Validation</span></a>.</p>
<p>For input validation using <code class="docutils literal notranslate"><span class="pre">&#64;ExistInCodeList</span></code> annotation,
it is necessary to carry out “<a class="reference internal" href="Validation.html#validation-message-def"><span class="std std-ref">Definition of error messages</span></a>” for <code class="docutils literal notranslate"><span class="pre">&#64;ExistInCodeList</span></code> .</p>
<p>When project is created by <a class="reference external" href="https://github.com/terasolunaorg/terasoluna-gfw-web-multi-blank">Blank project</a> ,
the following message is defined in <code class="docutils literal notranslate"><span class="pre">ValidationMessages.properties</span></code> file directly under <code class="docutils literal notranslate"><span class="pre">xxx-web/src/main/resources</span></code>.
Please change the message to fit the application requirements.</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">org.terasoluna.gfw.common.codelist.ExistInCodeList.message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">Does not exist in {codeListId}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the terasoluna-gfw-common 5.0.0.RELEASE or later,
the format of message property key has been changed to standard format of Bean Validation (FQCN of annotation + <code class="docutils literal notranslate"><span class="pre">.message</span></code>).</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Property key of message</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">version 5.0.0.RELEASE or later</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">org.terasoluna.gfw.common.codelist.ExistInCodeList.message</span></code></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">version 1.0.x.RELEASE</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">org.terasoluna.gfw.common.codelist.ExistInCodeList</span></code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>For migrating to the version 5.0.0.RELEASE or later from the version 1.0.x.RELEASE,
when message is changed to fit the application requirements,
the property key should be changed.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>From terasoluna-gfw-common 1.0.2.RELEASE,
<code class="docutils literal notranslate"><span class="pre">ValidationMessages.properties</span></code>wherein <code class="docutils literal notranslate"><span class="pre">&#64;ExistInCodeList</span></code>message is defined,
is not included in jar file.
This is to fix the “<a class="reference external" href="https://github.com/terasolunaorg/terasoluna-gfw/issues/256">Bug in which message is not displayed if multiple ValidationMessages.properties exist</a>”.</p>
<p>For migrating to version 1.0.2.RELEASE or later from version 1.0.1.RELEASE or prior,
if the message defined in <code class="docutils literal notranslate"><span class="pre">ValidationMessages.properties</span></code>included in jar of terasoluna-gfw-common, is used,
it is necessary to define the message by creating <code class="docutils literal notranslate"><span class="pre">ValidationMessages.properties</span></code>.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="example-of-existincodelist-settings">
<h4><a class="toc-backref" href="#id39" role="doc-backlink"><span class="section-number">5.14.2.7.1. </span>Example of &#64;ExistInCodeList settings</a><a class="headerlink" href="#example-of-existincodelist-settings" title="Permalink to this heading">¶</a></h4>
<p>See below the example of input validation method using codelist.</p>
<p><strong>Definition of Bean definition file(xxx-codelist.xml)</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;CL_GENDER&quot;</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.SimpleMapCodeList&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;map&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;map&gt;</span>
<span class="w">            </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;M&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Male&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;F&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Female&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/map&gt;</span>
<span class="w">    </span><span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<p><strong>Form object</strong></p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Person</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@ExistInCodeList</span><span class="p">(</span><span class="n">codeListId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;CL_GENDER&quot;</span><span class="p">)</span><span class="w">  </span><span class="c1">// (1)</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">gender</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// getter and setter omitted</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sr. No.</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Set <code class="docutils literal notranslate"><span class="pre">&#64;ExistInCodeList</span></code> annotation for the field for which input is to be validated,</div>
<div class="line">and specify the target codelist in codeListId.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>As a result of above settings, when characters other than M, F are stored in <code class="docutils literal notranslate"><span class="pre">gender</span></code>, the system throws an error.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><code class="docutils literal notranslate"><span class="pre">&#64;ExistInCodeList</span></code> input validation supports only <code class="docutils literal notranslate"><span class="pre">String</span></code> or <code class="docutils literal notranslate"><span class="pre">Character</span></code> data types.
Therefore, even if the fields with <code class="docutils literal notranslate"><span class="pre">&#64;ExistInCodeList</span></code> may contain integer values, they should be defined as String data type. (such as Year/Month/Day)</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
</section>
<section id="how-to-extend">
<h2><a class="toc-backref" href="#id40" role="doc-backlink"><span class="section-number">5.14.3. </span>How to extend</a><a class="headerlink" href="#how-to-extend" title="Permalink to this heading">¶</a></h2>
<section id="when-large-number-of-records-need-to-be-read-from-jdbccodelist">
<span id="settingfetchsize"></span><h3><a class="toc-backref" href="#id41" role="doc-backlink"><span class="section-number">5.14.3.1. </span>When large number of records need to be read from JdbcCodeList</a><a class="headerlink" href="#when-large-number-of-records-need-to-be-read-from-jdbccodelist" title="Permalink to this heading">¶</a></h3>
<p>When large number of records (in hundreds) need to be read from JdbcCodeList, Web application takes time to start.</p>
<p>This is because all records may be fetched at the same time during DB inquiry and it may take time to fetch the list from DB.
(fetchSize may be set to Fetch All by default.)</p>
<p>This problem can be resolved by specifying appropriate value for fetchSize.
In order to change the fetchSize, it is necessary to set the fetchSize of <code class="docutils literal notranslate"><span class="pre">org.springframework.jdbc.core.JdbcTemplate</span></code>.</p>
<p>See the example below.</p>
<p><strong>Definition of Bean definition file(xxx-infra.xml)</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;jdbcTemplateForCodeList&quot;</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span><span class="w"> </span><span class="nt">&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (1) --&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;dataSource&quot;</span><span class="w"> </span><span class="na">ref=</span><span class="s">&quot;dataSource&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;fetchSize&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1000&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (2) --&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;AbstractJdbcCodeList&quot;</span>
<span class="w">    </span><span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.JdbcCodeList&quot;</span><span class="w"> </span><span class="na">abstract=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (3) --&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;jdbcTemplate&quot;</span><span class="w"> </span><span class="na">ref=</span><span class="s">&quot;jdbcTemplateForCodeList&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (4) --&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;CL_AUTHORITIES&quot;</span><span class="w"> </span><span class="na">parent=</span><span class="s">&quot;AbstractJdbcCodeList&quot;</span><span class="w"> </span><span class="nt">&gt;</span><span class="cm">&lt;!-- (5) --&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;querySql&quot;</span>
<span class="w">        </span><span class="na">value=</span><span class="s">&quot;SELECT authority_id, authority_name FROM authority ORDER BY authority_id&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;valueColumn&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;authority_id&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;labelColumn&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;authority_name&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sr. No.</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Define a bean of <code class="docutils literal notranslate"><span class="pre">org.springframework.jdbc.core.JdbcTemplate</span></code> class.</div>
<div class="line">It is necessary for setting the fetchSize independently.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Set an appropriate value for the fetchSize.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Define a common bean of JdbcCodeList.</div>
<div class="line">Common parts of other JdbcCodeList are set. Therefore, for bean definition of basic JdbcCodeList, set this bean definition in parent class.</div>
<div class="line">This bean class cannot be instantiated by setting <code class="docutils literal notranslate"><span class="pre">abstract</span></code> attribute to true.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Set the jdbcTemplate referring to (1).</div>
<div class="line">JdbcTemplate for which fetchSize value is set is stored in JdbcCodeList.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Bean definition of JdbcCodeList</div>
<div class="line">By setting Bean defined in (3) as parent class in parent attribute, JdbcCodeList is set with fetchSize.</div>
<div class="line">In this bean definition, only the query related settings are carried out and the required CodeList is created.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="when-reloading-the-codelist">
<span id="codelisttaskscheduler"></span><h3><a class="toc-backref" href="#id42" role="doc-backlink"><span class="section-number">5.14.3.2. </span>When reloading the codelist</a><a class="headerlink" href="#when-reloading-the-codelist" title="Permalink to this heading">¶</a></h3>
<p>Codelist provided in common library is read at the time of launching the application and it is never updated subsequently.
However, in some cases, when the master data of the codelist is updated, the codelist also needs to be updated.</p>
<p>Example: Updating the codelist when DB master is updated using JdbcCodeList.</p>
<p>Common library provides <code class="docutils literal notranslate"><span class="pre">org.terasoluna.gfw.common.codelist.ReloadableCodeList</span></code> interface.
The class implementing the above interface, implements refresh method. Codelist can be updated by calling this refresh method.
JdbcCodeList implements ReloadableCodeList interface; hence it is possible to update the codelist.</p>
<p>Codelist can be updated in following two ways.</p>
<ol class="arabic simple">
<li><p>By using Task Scheduler</p></li>
<li><p>By calling refresh method in Controller (Service) class</p></li>
</ol>
<p>This guideline recommends the method to reload the codelist periodically using <a class="reference external" href="http://docs.spring.io/spring/docs/4.1.7.RELEASE/spring-framework-reference/html/scheduling.html">Spring Task Scheduler</a>.</p>
<p>However, when it is necessary to arbitrarily refresh the codelist, it is appropriate to call refresh method in Controller class.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the codelist having ReloadableCodeList interface, refer to <a class="reference internal" href="#listofcodelist"><span class="std std-ref">List of codelist types</span></a>.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="using-task-scheduler">
<h4><a class="toc-backref" href="#id43" role="doc-backlink"><span class="section-number">5.14.3.2.1. </span>Using Task Scheduler</a><a class="headerlink" href="#using-task-scheduler" title="Permalink to this heading">¶</a></h4>
<p>Example for setting the Task Scheduler is shown below.</p>
<p><strong>Definition of Bean definition file(xxx-codelist.xml)</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;task:scheduler</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;taskScheduler&quot;</span><span class="w"> </span><span class="na">pool-size=</span><span class="s">&quot;10&quot;</span><span class="nt">/&gt;</span><span class="w">  </span><span class="cm">&lt;!-- (1) --&gt;</span>

<span class="nt">&lt;task:scheduled-tasks</span><span class="w"> </span><span class="na">scheduler=</span><span class="s">&quot;taskScheduler&quot;</span><span class="nt">&gt;</span><span class="w">  </span><span class="cm">&lt;!-- (2) --&gt;</span>
<span class="w">    </span><span class="nt">&lt;task:scheduled</span><span class="w"> </span><span class="na">ref=</span><span class="s">&quot;CL_AUTHORITIES&quot;</span><span class="w"> </span><span class="na">method=</span><span class="s">&quot;refresh&quot;</span><span class="w"> </span><span class="na">cron=</span><span class="s">&quot;${cron.codelist.refreshTime}&quot;</span><span class="nt">/&gt;</span><span class="w">  </span><span class="cm">&lt;!-- (3) --&gt;</span>
<span class="nt">&lt;/task:scheduled-tasks&gt;</span>

<span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;CL_AUTHORITIES&quot;</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.JdbcCodeList&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;dataSource&quot;</span><span class="w"> </span><span class="na">ref=</span><span class="s">&quot;dataSource&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;querySql&quot;</span>
<span class="w">        </span><span class="na">value=</span><span class="s">&quot;SELECT authority_id, authority_name FROM authority ORDER BY authority_id&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;valueColumn&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;authority_id&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;labelColumn&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;authority_name&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sr. No.</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Specify the thread pool size in pool-size attribute of <code class="docutils literal notranslate"><span class="pre">&lt;task:scheduler&gt;</span></code> element.</div>
<div class="line">When pool-size attribute is not specified, the value is set to “1”.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Define <code class="docutils literal notranslate"><span class="pre">&lt;task:scheduled-tasks&gt;</span></code> element and set <code class="docutils literal notranslate"><span class="pre">&lt;task:scheduler&gt;</span></code> ID in scheduler attribute.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Define <code class="docutils literal notranslate"><span class="pre">&lt;task:scheduled&gt;</span></code> element. Specify refresh method in method attribute.</div>
<div class="line">In cron attribute, the value should be mentioned in <code class="docutils literal notranslate"><span class="pre">org.springframework.scheduling.support.CronSequenceGenerator</span></code> supported format.</div>
<div class="line">Reload timing for cron attribute may change with development environment and commercial environment; hence it is recommended to fetch the codelist from property file or environment variable.</div>
<div class="line"><br /></div>
<div class="line"><strong>Example of setting cron attribute</strong></div>
<div class="line">Specify in “Seconds Minutes Hours Month Year Day”.</div>
<div class="line">execution every second                      “* * * * * *”</div>
<div class="line">execution every hour                        “0 0 * * * *”</div>
<div class="line">execution every hour 9:00-17:00 on weekdays “0 0 9-17 * * MON-FRI”</div>
<div class="line"><br /></div>
<div class="line">For details, refer to JavaDoc.</div>
<div class="line"><a class="reference external" href="http://docs.spring.io/spring/docs/4.1.7.RELEASE/javadoc-api/org/springframework/scheduling/support/CronSequenceGenerator.html">http://docs.spring.io/spring/docs/4.1.7.RELEASE/javadoc-api/org/springframework/scheduling/support/CronSequenceGenerator.html</a></div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="calling-refresh-method-in-controller-service-class">
<h4><a class="toc-backref" href="#id44" role="doc-backlink"><span class="section-number">5.14.3.2.2. </span>Calling refresh method in Controller (Service) class</a><a class="headerlink" href="#calling-refresh-method-in-controller-service-class" title="Permalink to this heading">¶</a></h4>
<p>See the example below for directly calling refresh method of JdbcCodeList in Service class.</p>
<p><strong>Definition of Bean definition file(xxx-codelist.xml)</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;CL_AUTHORITIES&quot;</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.JdbcCodeList&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;dataSource&quot;</span><span class="w"> </span><span class="na">ref=</span><span class="s">&quot;dataSource&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;querySql&quot;</span>
<span class="w">        </span><span class="na">value=</span><span class="s">&quot;SELECT authority_id, authority_name FROM authority ORDER BY authority_id&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;valueColumn&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;authority_id&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;labelColumn&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;authority_name&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<p><strong>Controller class</strong></p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Controller</span>
<span class="nd">@RequestMapping</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;codelist&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CodeListContoller</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Inject</span>
<span class="w">    </span><span class="n">CodeListService</span><span class="w"> </span><span class="n">codeListService</span><span class="p">;</span><span class="w"> </span><span class="c1">// (1)</span>

<span class="w">    </span><span class="nd">@RequestMapping</span><span class="p">(</span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RequestMethod</span><span class="p">.</span><span class="na">GET</span><span class="p">,</span><span class="w"> </span><span class="n">params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;refresh&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">refreshJdbcCodeList</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">codeListService</span><span class="p">.</span><span class="na">refresh</span><span class="p">();</span><span class="w"> </span><span class="c1">// (2)</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;codelist/jdbcCodeList&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sr. No.</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Inject the Service class that executes refresh method of ReloadableCodeList class.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Execute the refresh method of Service class that executes refresh method of ReloadableCodeList class.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p><strong>Service class</strong></p>
<p>The description below is given only for the implementation class. Description for interface class has been omitted.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Service</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CodeListServiceImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">CodeListService</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// (3)</span>

<span class="w">    </span><span class="nd">@Inject</span>
<span class="w">    </span><span class="nd">@Named</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;CL_AUTHORITIES&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">// (4)</span>
<span class="w">    </span><span class="n">ReloadableCodeList</span><span class="w"> </span><span class="n">codeListItem</span><span class="p">;</span><span class="w"> </span><span class="c1">// (5)</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">refresh</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// (6)</span>
<span class="w">        </span><span class="n">codeListItem</span><span class="p">.</span><span class="na">refresh</span><span class="p">();</span><span class="w"> </span><span class="c1">// (7)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sr. No.</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Implement <code class="docutils literal notranslate"><span class="pre">CodeListService</span></code> interface for <code class="docutils literal notranslate"><span class="pre">CodeListServiceImpl</span></code> class.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Specify the corresponding codelist using <code class="docutils literal notranslate"><span class="pre">&#64;Named</span></code> annotation at the time of injecting the codelist.</div>
<div class="line">ID of the bean to be fetched should be specified in <code class="docutils literal notranslate"><span class="pre">value</span></code> attribute.</div>
<div class="line">Codelist of ID attribute “CL_AUTHORITIES” of bean tag defined in Bean definition file is injected.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">ReloadableCodeList interface should be defined in field type.</div>
<div class="line">ReloadableCodeList interface should be implemented for Bean specified in (4).</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(6)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">refresh method defined in Service class</div>
<div class="line">is called from Controller class.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(7)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">refresh method of codelist wherein ReloadableCodeList interface is implemented.</div>
<div class="line">Codelist is updated by executing refresh method.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="customizing-the-codelist-independently">
<span id="originalcustomizecodelist"></span><h3><a class="toc-backref" href="#id45" role="doc-backlink"><span class="section-number">5.14.3.3. </span>Customizing the codelist independently</a><a class="headerlink" href="#customizing-the-codelist-independently" title="Permalink to this heading">¶</a></h3>
<p>In order to create a codelist which does not fall under the 4 types provided by the common library, the existing codelist can be customized independently.
Refer to the table below for the implementation method and type of codelist that can be created.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 30%" />
<col style="width: 45%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sr. No.</p></th>
<th class="head"><p>Reloadable</p></th>
<th class="head"><p>Class to be inherited</p></th>
<th class="head"><p>Implementation location</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Not required</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">org.terasoluna.gfw.common.codelist.AbstractCodeList</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Override <code class="docutils literal notranslate"><span class="pre">asMap</span></code></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Required</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">org.terasoluna.gfw.common.codelist.AbstractReloadableCodeList</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Override <code class="docutils literal notranslate"><span class="pre">retrieveMap</span></code></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>The codelist can be customized by directly implementing <code class="docutils literal notranslate"><span class="pre">org.terasoluna.gfw.common.codelist.CodeList</span></code> and <code class="docutils literal notranslate"><span class="pre">org.terasoluna.gfw.common.codelist.ReloadableCodeList</span></code> interfaces; however extending the abstract class provided in common library minimizes the implementation efforts.</p>
<p>Actual example of independent customization is shown below.
It illustrates a codelist for creating a list of current year and the next year.
(Example: If current year is 2013, it is stored in codelist in the order of “2013, 2014”.)</p>
<p><strong>Codelist class</strong></p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Component</span><span class="p">(</span><span class="s">&quot;CL_YEAR&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">// (1)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DepYearCodeList</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">AbstractCodeList</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// (2)</span>

<span class="w">    </span><span class="nd">@Inject</span>
<span class="w">    </span><span class="n">JodaTimeDateFactory</span><span class="w"> </span><span class="n">dateFactory</span><span class="p">;</span><span class="w"> </span><span class="c1">// (3)</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">asMap</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">// (4)</span>
<span class="w">        </span><span class="n">DateTime</span><span class="w"> </span><span class="n">dateTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dateFactory</span><span class="p">.</span><span class="na">newDateTime</span><span class="p">();</span>
<span class="w">        </span><span class="n">DateTime</span><span class="w"> </span><span class="n">nextYearDateTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dateTime</span><span class="p">.</span><span class="na">plusYears</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="w">        </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">depYearMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">LinkedHashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="o">&gt;</span><span class="p">();</span>

<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">thisYear</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dateTime</span><span class="p">.</span><span class="na">toString</span><span class="p">(</span><span class="s">&quot;Y&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">nextYear</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nextYearDateTime</span><span class="p">.</span><span class="na">toString</span><span class="p">(</span><span class="s">&quot;Y&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">depYearMap</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">thisYear</span><span class="p">,</span><span class="w"> </span><span class="n">thisYear</span><span class="p">);</span>
<span class="w">        </span><span class="n">depYearMap</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">nextYear</span><span class="p">,</span><span class="w"> </span><span class="n">nextYear</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Collections</span><span class="p">.</span><span class="na">unmodifiableMap</span><span class="p">(</span><span class="n">depYearMap</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sr. No.</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Register the codelist as a component using <code class="docutils literal notranslate"><span class="pre">&#64;Component</span></code> annotation.</div>
<div class="line">By specifying <code class="docutils literal notranslate"><span class="pre">&quot;CL_YEAR&quot;</span></code> in Value, register the codelist as a component using the codelist intercept set in bean definition.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Inherit <code class="docutils literal notranslate"><span class="pre">org.terasoluna.gfw.common.codelist.AbstractCodeList</span></code>.</div>
<div class="line">When creating the list of current year and next year, reloading is not necessary since it is created dynamically by calculating from system date.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">org.terasoluna.gfw.common.date.jodatime.JodaTimeDateFactory</span></code> creating the Date class of system date is injected.</div>
<div class="line">Current year and next year can be fetched using <code class="docutils literal notranslate"><span class="pre">JodaTimeDateFactory</span></code>.</div>
<div class="line">Class that implements <code class="docutils literal notranslate"><span class="pre">JodaTimeDateFactory</span></code> interface should be set in advance in bean definition file.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Override <code class="docutils literal notranslate"><span class="pre">asMap()</span></code> method and create the list of current year and next year.</div>
<div class="line">Implementation differs with every created codelist.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Example of jsp implementation</strong></p>
<div class="highlight-jsp notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;form:select</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;mostRecentYear&quot;</span><span class="w"> </span><span class="na">items=</span><span class="s">&quot;${CL_YEAR}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (5) --&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sr. No.</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">&quot;CL_YEAR&quot;</span></code> registered as component in items attribute should be specified in <code class="docutils literal notranslate"><span class="pre">${}</span></code> placeholder to fetch the corresponding codelist.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p><strong>Output HTML</strong></p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">select</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;mostRecentYear&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;mostRecentYear&quot;</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2013&quot;</span><span class="p">&gt;</span>2013<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2014&quot;</span><span class="p">&gt;</span>2014<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
</pre></div>
</div>
<p><strong>Output screen</strong></p>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/codelist_customizeCodelist.png"><img alt="customized codelist" src="../_images/codelist_customizeCodelist.png" style="width: 10%;" /></a>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Implementation should be made thread-safe at the time of customizing the reloadable CodeList independently.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="appendix">
<h2><a class="toc-backref" href="#id46" role="doc-backlink"><span class="section-number">5.14.4. </span>Appendix</a><a class="headerlink" href="#appendix" title="Permalink to this heading">¶</a></h2>
<section id="setting-simplei18ncodelist">
<span id="aftercodelisti18n"></span><h3><a class="toc-backref" href="#id47" role="doc-backlink"><span class="section-number">5.14.4.1. </span>Setting SimpleI18nCodeList</a><a class="headerlink" href="#setting-simplei18ncodelist" title="Permalink to this heading">¶</a></h3>
<p>Apart from the settings mentioned in <a class="reference internal" href="#codelisti18n"><span class="std std-ref">How to use SimpleI18nCodeList</span></a>, SimpleI18nCodeList can be set in following 2 ways.
The respective setting methods are explained using the example of selectbox for selecting charges.</p>
<section id="set-java-util-map-key-code-value-value-label-for-each-locale-by-rows">
<h4><a class="toc-backref" href="#id48" role="doc-backlink"><span class="section-number">5.14.4.1.1. </span>Set <code class="docutils literal notranslate"><span class="pre">java.util.Map</span></code> (key = code value, value = label) for each locale by rows</a><a class="headerlink" href="#set-java-util-map-key-code-value-value-label-for-each-locale-by-rows" title="Permalink to this heading">¶</a></h4>
<p><strong>Definition of Bean definition file(xxx-codelist.xml)</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;CL_I18N_PRICE&quot;</span>
<span class="w">    </span><span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.i18n.SimpleI18nCodeList&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;rows&quot;</span><span class="nt">&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (1) --&gt;</span>
<span class="w">        </span><span class="nt">&lt;util:map&gt;</span>
<span class="w">            </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;util:map&gt;</span>
<span class="w">                    </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;unlimited&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                    </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;10000&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Less than \\10,000&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                    </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;20000&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Less than \\20,000&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                    </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;30000&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Less than \\30,000&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                    </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;40000&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Less than \\40,000&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                    </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;50000&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Less than \\50,000&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;/util:map&gt;</span>
<span class="w">            </span><span class="nt">&lt;/entry&gt;</span>
<span class="w">            </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;ja&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;util:map&gt;</span>
<span class="w">                    </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;unlimited&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                    </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;10000&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;10,000円以下&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                    </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;20000&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;20,000円以下&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                    </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;30000&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;30,000円以下&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                    </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;40000&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;40,000円以下&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                    </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;50000&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;50,000円以下&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;/util:map&gt;</span>
<span class="w">            </span><span class="nt">&lt;/entry&gt;</span>
<span class="w">        </span><span class="nt">&lt;/util:map&gt;</span>
<span class="w">    </span><span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sr. No.</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Set “Map of Map” for rows property. External Map key is <code class="docutils literal notranslate"><span class="pre">java.lang.Locale</span></code>.</div>
<div class="line">Internal Map key is a code value and value is a label corresponding to locale.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="set-java-util-map-key-locale-value-label-for-each-code-value-by-columns">
<h4><a class="toc-backref" href="#id49" role="doc-backlink"><span class="section-number">5.14.4.1.2. </span>Set <code class="docutils literal notranslate"><span class="pre">java.util.Map</span></code>(key = locale, value = label) for each code value by columns</a><a class="headerlink" href="#set-java-util-map-key-locale-value-label-for-each-code-value-by-columns" title="Permalink to this heading">¶</a></h4>
<p><strong>Definition of Bean definition file(xxx-codelist.xml)</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;CL_I18N_PRICE&quot;</span>
<span class="w">    </span><span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.i18n.SimpleI18nCodeList&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;columns&quot;</span><span class="nt">&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (1) --&gt;</span>
<span class="w">        </span><span class="nt">&lt;util:map&gt;</span>
<span class="w">            </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;util:map&gt;</span>
<span class="w">                    </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;en&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;unlimited&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                    </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;ja&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;上限なし&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;/util:map&gt;</span>
<span class="w">            </span><span class="nt">&lt;/entry&gt;</span>
<span class="w">            </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;10000&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;util:map&gt;</span>
<span class="w">                    </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;en&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Less than \\10,000&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                    </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;ja&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;10,000円以下&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;/util:map&gt;</span>
<span class="w">            </span><span class="nt">&lt;/entry&gt;</span>
<span class="w">            </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;20000&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;util:map&gt;</span>
<span class="w">                    </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;en&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Less than \\20,000&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                    </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;ja&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;20,000円以下&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;/util:map&gt;</span>
<span class="w">            </span><span class="nt">&lt;/entry&gt;</span>
<span class="w">            </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;30000&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;util:map&gt;</span>
<span class="w">                    </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;en&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Less than \\30,000&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                    </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;ja&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;30,000円以下&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;/util:map&gt;</span>
<span class="w">            </span><span class="nt">&lt;/entry&gt;</span>
<span class="w">            </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;40000&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;util:map&gt;</span>
<span class="w">                    </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;en&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Less than \\40,000&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                    </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;ja&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;40,000円以下&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;/util:map&gt;</span>
<span class="w">            </span><span class="nt">&lt;/entry&gt;</span>
<span class="w">            </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;50000&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;util:map&gt;</span>
<span class="w">                    </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;en&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Less than \\50,000&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                    </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;ja&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;50,000円以下&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;/util:map&gt;</span>
<span class="w">            </span><span class="nt">&lt;/entry&gt;</span>
<span class="w">        </span><span class="nt">&lt;/util:map&gt;</span>
<span class="w">    </span><span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sr. No.</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Set “Map of Map” for columns property. External Map key is a code value.</div>
<div class="line">Internal Map key is <code class="docutils literal notranslate"><span class="pre">java.lang.Locale</span></code> and value is a label corresponding to locale.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="variations-of-numberrangecodelist">
<span id="codelistappendixnumberrangecodelistvariation"></span><h3><a class="toc-backref" href="#id50" role="doc-backlink"><span class="section-number">5.14.4.2. </span>Variations of NumberRangeCodeList</a><a class="headerlink" href="#variations-of-numberrangecodelist" title="Permalink to this heading">¶</a></h3>
<section id="create-the-descending-numberrangecodelist">
<h4><a class="toc-backref" href="#id51" role="doc-backlink"><span class="section-number">5.14.4.2.1. </span>Create the Descending NumberRangeCodeList</a><a class="headerlink" href="#create-the-descending-numberrangecodelist" title="Permalink to this heading">¶</a></h4>
<p>Example of setting To value &lt; From value is shown below.</p>
<p><strong>Definition of Bean definition file(xxx-codelist.xml)</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;CL_BIRTH_YEAR&quot;</span>
<span class="w">    </span><span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.NumberRangeCodeList&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;from&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;2013&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (1) --&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;to&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;2000&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (2) --&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sr. No.</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Specify the range start value. Specify a value greater than the one specified in “value” attribute of “to” property.</div>
<div class="line">As per this specification, display the values decreased in accordance with the interval in To-From range in descending order.</div>
<div class="line">Since interval is not set, default value 1 is applied.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Specify the range end value.</div>
<div class="line">In this example, since 2000 is specified as range end value; the value is reduced by 1 and stored in descending order from 2013 to 2000.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Example of jsp implementation</strong></p>
<div class="highlight-jsp notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;form:select</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;birthYear&quot;</span><span class="w"> </span><span class="na">items=</span><span class="s">&quot;${CL_BIRTH_YEAR}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p><strong>Output HTML</strong></p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">select</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;birthYear&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;birthYear&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2013&quot;</span><span class="p">&gt;</span>2013<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2012&quot;</span><span class="p">&gt;</span>2012<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2011&quot;</span><span class="p">&gt;</span>2011<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2010&quot;</span><span class="p">&gt;</span>2010<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2009&quot;</span><span class="p">&gt;</span>2009<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2008&quot;</span><span class="p">&gt;</span>2008<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2007&quot;</span><span class="p">&gt;</span>2007<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2006&quot;</span><span class="p">&gt;</span>2006<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2005&quot;</span><span class="p">&gt;</span>2005<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2004&quot;</span><span class="p">&gt;</span>2004<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2003&quot;</span><span class="p">&gt;</span>2003<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2002&quot;</span><span class="p">&gt;</span>2002<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2001&quot;</span><span class="p">&gt;</span>2001<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2000&quot;</span><span class="p">&gt;</span>2000<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
</pre></div>
</div>
<p><strong>Output screen</strong></p>
<figure class="align-default">
<img alt="codelist numberrenge2" src="../_images/codelist_numberrenge2.png" />
</figure>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="change-interval-of-numberrangecodelist">
<h4><a class="toc-backref" href="#id52" role="doc-backlink"><span class="section-number">5.14.4.2.2. </span>Change interval of NumberRangeCodeList</a><a class="headerlink" href="#change-interval-of-numberrangecodelist" title="Permalink to this heading">¶</a></h4>
<p>Example of setting interval value is shown below.</p>
<p><strong>Definition of Bean definition file(xxx-codelist.xml)</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;CL_BULK_ORDER_QUANTITY_UNIT&quot;</span>
<span class="w">    </span><span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.NumberRangeCodeList&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;from&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;10&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;to&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;50&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;interval&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;10&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="cm">&lt;!-- (1) --&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sr. No.</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Specify increment (decrement) value. Then, store the values obtained upon increasing (decreasing) the interval value within From-To range as codelist.</div>
<div class="line">In the above example, the values are stored in the order of <code class="docutils literal notranslate"><span class="pre">10</span></code>,<code class="docutils literal notranslate"><span class="pre">20</span></code>,<code class="docutils literal notranslate"><span class="pre">30</span></code>,<code class="docutils literal notranslate"><span class="pre">40</span></code>,<code class="docutils literal notranslate"><span class="pre">50</span></code> in the codelist.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Example of jsp implementation</strong></p>
<div class="highlight-jsp notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;form:select</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;quantity&quot;</span><span class="w"> </span><span class="na">items=</span><span class="s">&quot;${CL_BULK_ORDER_QUANTITY_UNIT}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p><strong>Output HTML</strong></p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">select</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;quantity&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;quantity&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;10&quot;</span><span class="p">&gt;</span>10<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;20&quot;</span><span class="p">&gt;</span>20<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;30&quot;</span><span class="p">&gt;</span>30<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;40&quot;</span><span class="p">&gt;</span>40<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;50&quot;</span><span class="p">&gt;</span>50<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
</pre></div>
</div>
<p><strong>Output screen</strong></p>
<figure class="align-default">
<img alt="codelist numberrenge3" src="../_images/codelist_numberrenge3.png" />
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If From-To value exceeds the specified range, then the value increased (decreased) in accordance with interval is not stored in the codelist.</p>
<p>i.e. in case of following definition,</p>
<blockquote>
<div><div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;CL_BULK_ORDER_QUANTITY_UNIT&quot;</span>
<span class="w">    </span><span class="na">class=</span><span class="s">&quot;org.terasoluna.gfw.common.codelist.NumberRangeCodeList&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;from&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;10&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;to&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;55&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;interval&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;10&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
</div></blockquote>
<p>5 values of <code class="docutils literal notranslate"><span class="pre">10</span></code>,<code class="docutils literal notranslate"><span class="pre">20</span></code>,<code class="docutils literal notranslate"><span class="pre">30</span></code>,<code class="docutils literal notranslate"><span class="pre">40</span></code>,<code class="docutils literal notranslate"><span class="pre">50</span></code> are stored in the codelist.
The value of subsequent interval <code class="docutils literal notranslate"><span class="pre">60</span></code> and the range threshold value <code class="docutils literal notranslate"><span class="pre">55</span></code> are not stored in the codelist.</p>
</div>
</section>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="Ajax.html" title="5.15. Ajax"
             >next</a> |</li>
        <li class="right" >
          <a href="Internationalization.html" title="5.13. Internationalization"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">TERASOLUNA Server Framework for Java (5.x) Development Guideline 5.0.1.RELEASE documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" ><span class="section-number">5. </span>Architecture in Detail - TERASOLUNA Server Framework for Java (5.x)</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">5.14. </span>Codelist</a></li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013-2015, NTT DATA.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 5.3.0.Theme by <a href="http://github.com/vkvn">vkvn</a>
    </div>
    
    <script>
    
    $(function() {
    	var $sidebar	= $('.sphinxsidebar'),
    		$window		= $(window),
    		offset		= $sidebar.offset(),
    		topPadding	= 3,
    		$scroll		= $('#scroll');
    	
    	$window.scroll(function() {
    		if ($scroll.is(':checked')) {
				if ($window.scrollTop() > offset.top) {
					$sidebar.stop().animate({
						marginTop:$window.scrollTop() - offset.top + topPadding
					});
				} else {
					$sidebar.stop().animate({
						marginTop:0
					});
				}
			}
		});
    	
    	var $navList = $('ul:first', $sidebar);
    	$('li:first', $navList).addClass('open');
    	
    	$navList.treeview({
    		persist: "location",
    		collapsed: true,
    		unique: false
    	});
    	
	});
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-46550814-1', 'terasolunaorg.github.io');
    ga('send', 'pageview');
    </script>
  </body>
</html>