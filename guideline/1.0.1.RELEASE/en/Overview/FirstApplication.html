<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>2.3. First application based on Spring MVC &#8212; TERASOLUNA Global Framework Development Guideline 1.0.1.RELEASE documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/solar.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="2.4. Application Layering" href="ApplicationLayering.html" />
    <link rel="prev" title="2.2. Overview of Spring MVC Architecture" href="SpringMVCOverview.html" /><script async src="https://www.googletagmanager.com/gtag/js?id=G-847V2Q99G8"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date()); gtag('config', 'G-847V2Q99G8');
</script>
<script src="../_static/jquery.treeview.js" type="text/javascript"></script>
<!-- <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro|Open+Sans:300italic,400italic,700italic,400,300,700' rel='stylesheet' type='text/css'> -->
<link href="../_static/solarized-dark.css" rel="stylesheet">
<link href="../_static/jquery.treeview.css" rel="stylesheet">
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="ApplicationLayering.html" title="2.4. Application Layering"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="SpringMVCOverview.html" title="2.2. Overview of Spring MVC Architecture"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">TERASOLUNA Global Framework Development Guideline 1.0.1.RELEASE documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U"><span class="section-number">2. </span>Summary - Architecture of TERASOLUNA Global Framework</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">2.3. </span>First application based on Spring MVC</a></li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><label><input id="scroll" type="checkbox" checked> scroll sidebar</label>
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">2.3. First application based on Spring MVC</a><ul>
<li><a class="reference internal" href="#prerequisites">2.3.1. Prerequisites</a></li>
<li><a class="reference internal" href="#create-a-new-project">2.3.2. Create a New Project</a></li>
<li><a class="reference internal" href="#run-on-server">2.3.3. Run on Server</a></li>
<li><a class="reference internal" href="#create-an-echo-application">2.3.4. Create an Echo Application</a><ul>
<li><a class="reference internal" href="#creating-a-form-object">2.3.4.1. Creating a form object</a></li>
<li><a class="reference internal" href="#create-a-controller">2.3.4.2. Create a Controller</a></li>
<li><a class="reference internal" href="#create-jsp-files">2.3.4.3. Create JSP Files</a></li>
<li><a class="reference internal" href="#implement-input-validation">2.3.4.4. Implement Input Validation</a></li>
<li><a class="reference internal" href="#summary">2.3.4.5. Summary</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="SpringMVCOverview.html"
                          title="previous chapter"><span class="section-number">2.2. </span>Overview of Spring MVC Architecture</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="ApplicationLayering.html"
                          title="next chapter"><span class="section-number">2.4. </span>Application Layering</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/Overview/FirstApplication.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="first-application-based-on-spring-mvc">
<h1><span class="section-number">2.3. </span>First application based on Spring MVC<a class="headerlink" href="#first-application-based-on-spring-mvc" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="index">
<p class="topic-title">Index</p>
<ul class="simple">
<li><p><a class="reference internal" href="#prerequisites" id="id1">Prerequisites</a></p></li>
<li><p><a class="reference internal" href="#create-a-new-project" id="id2">Create a New Project</a></p></li>
<li><p><a class="reference internal" href="#run-on-server" id="id3">Run on Server</a></p></li>
<li><p><a class="reference internal" href="#create-an-echo-application" id="id4">Create an Echo Application</a></p>
<ul>
<li><p><a class="reference internal" href="#creating-a-form-object" id="id5">Creating a form object</a></p></li>
<li><p><a class="reference internal" href="#create-a-controller" id="id6">Create a Controller</a></p></li>
<li><p><a class="reference internal" href="#create-jsp-files" id="id7">Create JSP Files</a></p></li>
<li><p><a class="reference internal" href="#implement-input-validation" id="id8">Implement Input Validation</a></p></li>
<li><p><a class="reference internal" href="#summary" id="id9">Summary</a></p></li>
</ul>
</li>
</ul>
</nav>
<p>Before entering into the advanced usage of Spring MVC, it is better to understand Spring MVC by actually trying handson web application development using Spring MVC.
This purpose of this chapter to understand the overall picture. <strong>Note that it does not follow the recommendations given from the next chapter onwards. (for the ease of understanding)</strong>.</p>
<section id="prerequisites">
<h2><a class="toc-backref" href="#id1" role="doc-backlink"><span class="section-number">2.3.1. </span>Prerequisites</a><a class="headerlink" href="#prerequisites" title="Permalink to this heading">¶</a></h2>
<p>The description of this chapter has been verified on the following environment. (For other environments, replace the contents mentioned here appropriately)</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 75%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Product</p></th>
<th class="head"><p>Version</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>JDK</p></td>
<td><p>1.6.0_33</p></td>
</tr>
<tr class="row-odd"><td><p>Spring Tool Suite (STS)</p></td>
<td><p>3.2.0</p></td>
</tr>
<tr class="row-even"><td><p>VMware vFabric tc Server Developer Edition</p></td>
<td><p>2.8</p></td>
</tr>
<tr class="row-odd"><td><p>Fire Fox</p></td>
<td><p>21.0</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To connect to the internet via a proxy server,
STS Proxy settings and <a class="reference external" href="http://maven.apache.org/guides/mini/guide-proxies.html">Maven Proxy settings</a> are required for the following operations.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>“Spring Template Project” used in this chapter has been removed from Spiring Tool Suite 3.4; hence, the contents of this chapter can only be confirmed on “Spring Tool Suite 3.3” or before.</p>
<p>Refer to <a class="reference internal" href="../Appendix/CreateProjectFromBlank.html"><span class="doc">[coming soon] Create Project from Blank Project</span></a> in case using Spring Tool Suite 3.4.</p>
<p>We plan to update the contents of this chapter in future.</p>
</div>
</section>
<section id="create-a-new-project">
<h2><a class="toc-backref" href="#id2" role="doc-backlink"><span class="section-number">2.3.2. </span>Create a New Project</a><a class="headerlink" href="#create-a-new-project" title="Permalink to this heading">¶</a></h2>
<p>From the menu of SpringSource Tool Suite, select [File] -&gt; [New] -&gt; [Spring Template Project] -&gt; [Spring MVC Project] -&gt; [Next],
and create Spring MVC project.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If proxy server is being used, there is a possibility of not being able to select Spring Template Project.
In order to resolve this, do the following.</p>
<ul class="simple">
<li><p>First select [window] -&gt; [Preferences] -&gt; [Spring] -&gt; [Template Projects] and remove all items except “spring-defaults”.</p></li>
<li><p>Then click Apply.</p></li>
<li><p>After this, when [File] -&gt; [New] -&gt; [Spring Project] is clicked, [Spring MVC Project] can be selected from Templetes.</p></li>
</ul>
</div>
<p>Enter “helloworld” in [Project Name], “com.example.helloworld” in [Please specify the top-level package] and click [Finish] on the next screen.</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/NewSpringMVCProject.png"><img alt="New Spring MVC Project" src="../_images/NewSpringMVCProject.png" style="width: 60%;" /></a>
</figure>
<p>Following project is generated in the Package Explorer (<strong>Internet access is required</strong>)</p>
<figure class="align-default">
<img alt="workspace" src="../_images/HelloWorldWorkspace.png" />
</figure>
<p>The generated configuration file (src/main/webapp/WEB-INF/spring/appServlet/servlet-context.xml) of Spring MVC is described briefly to understand the configuration of Spring MVC.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;beans:beans</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">&quot;http://www.springframework.org/schema/mvc&quot;</span>
<span class="w">    </span><span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="w"> </span><span class="na">xmlns:beans=</span><span class="s">&quot;http://www.springframework.org/schema/beans&quot;</span>
<span class="w">    </span><span class="na">xmlns:context=</span><span class="s">&quot;http://www.springframework.org/schema/context&quot;</span>
<span class="w">    </span><span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd</span>
<span class="s">        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span>
<span class="s">        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- DispatcherServlet Context: defines this servlet&#39;s request-processing</span>
<span class="cm">        infrastructure --&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- (1) Enables the Spring MVC @Controller programming model --&gt;</span>
<span class="w">    </span><span class="nt">&lt;annotation-driven</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- Handles HTTP GET requests for /resources/** by efficiently serving</span>
<span class="cm">        up static resources in the ${webappRoot}/resources directory --&gt;</span>
<span class="w">    </span><span class="nt">&lt;resources</span><span class="w"> </span><span class="na">mapping=</span><span class="s">&quot;/resources/**&quot;</span><span class="w"> </span><span class="na">location=</span><span class="s">&quot;/resources/&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- (2) Resolves views selected for rendering by @Controllers to .jsp resources</span>
<span class="cm">        in the /WEB-INF/views directory --&gt;</span>
<span class="w">    </span><span class="nt">&lt;beans:bean</span>
<span class="w">        </span><span class="na">class=</span><span class="s">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;beans:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;prefix&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;/WEB-INF/views/&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;beans:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;suffix&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;.jsp&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/beans:bean&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- (3) --&gt;</span>
<span class="w">    </span><span class="nt">&lt;context:component-scan</span><span class="w"> </span><span class="na">base-package=</span><span class="s">&quot;com.example.helloworld&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/beans:beans&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item number</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><p>Default settings of Spring MVC are configured by defining &lt;annotation-driven /&gt;. Refer to the official website <a class="reference external" href="http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-config-enable">Enabling the MVC Java Config or the MVC XML Namespace</a>  of Spring framework for default configuration.</p></td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><p>Define the location of View by specifying Resolver of View.</p></td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><p>Define the package which will be target of searching components used in Spring MVC.</p></td>
</tr>
</tbody>
</table>
<p>Following is the <code class="docutils literal notranslate"><span class="pre">com.example.helloworld.HomeController</span></code> (However, it is modified to simple form for explanation).</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.helloworld</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Date</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">org.slf4j.Logger</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.slf4j.LoggerFactory</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Controller</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.ui.Model</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.web.bind.annotation.RequestMethod</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * Handles requests for the application home page.</span>
<span class="cm"> */</span>
<span class="hll"><span class="nd">@Controller</span><span class="c1">// (1)</span>
</span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">HomeController</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Logger</span><span class="w"> </span><span class="n">logger</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LoggerFactory</span>
<span class="w">            </span><span class="p">.</span><span class="na">getLogger</span><span class="p">(</span><span class="n">HomeController</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Simply selects the home view to render by returning its name.</span>
<span class="cm">     */</span>
<span class="hll"><span class="w">    </span><span class="nd">@RequestMapping</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;/&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RequestMethod</span><span class="p">.</span><span class="na">GET</span><span class="p">)</span><span class="w"> </span><span class="c1">// (2)</span>
</span><span class="hll"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">home</span><span class="p">(</span><span class="n">Model</span><span class="w"> </span><span class="n">model</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// (3)</span>
</span><span class="w">        </span><span class="n">logger</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;Welcome home!&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="n">Date</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Date</span><span class="p">();</span>
<span class="w">        </span><span class="n">model</span><span class="p">.</span><span class="na">addAttribute</span><span class="p">(</span><span class="s">&quot;serverTime&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">date</span><span class="p">);</span>

<span class="hll"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;home&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// (4)</span>
</span><span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>It is explained briefly.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item number</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><p>It can be read automatically by DI container if <code class="docutils literal notranslate"><span class="pre">&#64;Controller</span></code> annotation is used. As stated earlier in “explanation of Spring MVC configuration files (3)”, it is the target of component-scan.</p></td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><p>It gets executed when the HTTP method is GET and when the Resource is (or request URL) is “/”.</p></td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><p>Set objects to be delivered to View.</p></td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(4)</div>
</div>
</td>
<td><p>Return View name. Rendering is performed by <code class="docutils literal notranslate"><span class="pre">WEB-INF/views/home.jsp</span></code> as per the configuration in “Explanation of Spring MVC configuration files (2)”.</p></td>
</tr>
</tbody>
</table>
<p>The object set in Model is set in HttpServletRequest.
The value passed from Controller can be output by mentioning <code class="docutils literal notranslate"><span class="pre">${serverTime}</span></code> in home.jsp as shown below.
( <strong>However, as described below, it is necessary to perform HTML escaping since there is possibility of ${XXX} becoming a target of XSS</strong> )</p>
<div class="highlight-jsp notranslate"><div class="highlight"><pre><span></span><span class="k">&lt;%@</span><span class="w"> </span><span class="n">taglib</span><span class="w"> </span><span class="n">uri</span><span class="o">=</span><span class="s">&quot;http://java.sun.com/jsp/jstl/core&quot;</span><span class="w"> </span><span class="n">prefix</span><span class="o">=</span><span class="s">&quot;c&quot;</span><span class="w"> </span><span class="k">%&gt;</span>
<span class="k">&lt;%@</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">session</span><span class="o">=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="k">%&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="w">	</span><span class="nt">&lt;title&gt;</span>Home<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="nt">&lt;h1&gt;</span>
<span class="w">	</span>Hello<span class="w"> </span>world!<span class="w">  </span>
<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;P&gt;</span><span class="w">  </span>The<span class="w"> </span>time<span class="w"> </span>on<span class="w"> </span>the<span class="w"> </span>server<span class="w"> </span>is<span class="w"> </span>${serverTime}.<span class="w"> </span><span class="nt">&lt;/P&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="run-on-server">
<h2><a class="toc-backref" href="#id3" role="doc-backlink"><span class="section-number">2.3.3. </span>Run on Server</a><a class="headerlink" href="#run-on-server" title="Permalink to this heading">¶</a></h2>
<p>Right click “helloworld” project in STS, and start helloworld project by executing “Run As” -&gt; “Run On Server” -&gt; “localhost” -&gt; “VMware vFabric tc Server Developer Edition v2.8” -&gt; “Finish”.
Enter “<a class="reference external" href="http://localhost:8080/helloworld/">http://localhost:8080/helloworld/</a>” in browser to display the following screen.</p>
<figure class="align-default">
<img alt="Hello World" src="../_images/AppHelloWorldIndex.png" />
</figure>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="create-an-echo-application">
<span id="first-application-create-an-echo-application"></span><h2><a class="toc-backref" href="#id4" role="doc-backlink"><span class="section-number">2.3.4. </span>Create an Echo Application</a><a class="headerlink" href="#create-an-echo-application" title="Permalink to this heading">¶</a></h2>
<p>Lets go ahead and reate a simple application. It is a typical eco application in which message will be displayed if name is entered in the text field as given below.</p>
<figure class="align-default">
<img alt="Form of Echo Application" src="../_images/AppEchoIndex.png" />
</figure>
<figure class="align-default">
<img alt="Output of Echo Application" src="../_images/AppEchoHello.png" />
</figure>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="creating-a-form-object">
<h3><a class="toc-backref" href="#id5" role="doc-backlink"><span class="section-number">2.3.4.1. </span>Creating a form object</a><a class="headerlink" href="#creating-a-form-object" title="Permalink to this heading">¶</a></h3>
<p>First create a form object to accept the value of text field. Create <code class="docutils literal notranslate"><span class="pre">EchoForm</span></code> class in <code class="docutils literal notranslate"><span class="pre">com.example.helloworld.echo</span></code> package.
It is a simple JavaBean that has only 1 property.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.helloworld.echo</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.io.Serializable</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">EchoForm</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Serializable</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">serialVersionUID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2557725707095364445L</span><span class="p">;</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setName</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="create-a-controller">
<h3><a class="toc-backref" href="#id6" role="doc-backlink"><span class="section-number">2.3.4.2. </span>Create a Controller</a><a class="headerlink" href="#create-a-controller" title="Permalink to this heading">¶</a></h3>
<p>Next, create the Controller class. create the <code class="docutils literal notranslate"><span class="pre">EchoController</span></code> class in “com.example.helloworld.echo” package.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.helloworld.echo</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Controller</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.ui.Model</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.web.bind.annotation.ModelAttribute</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="p">;</span>

<span class="nd">@Controller</span>
<span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;echo&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">EchoController</span><span class="w"> </span><span class="p">{</span>

<span class="hll"><span class="w">    </span><span class="nd">@ModelAttribute</span><span class="w"> </span><span class="c1">// (1)</span>
</span><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">EchoForm</span><span class="w"> </span><span class="nf">setUpEchoForm</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">EchoForm</span><span class="w"> </span><span class="n">form</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">EchoForm</span><span class="p">();</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">form</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="hll"><span class="w">    </span><span class="nd">@RequestMapping</span><span class="w"> </span><span class="c1">// (2)</span>
</span><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">index</span><span class="p">(</span><span class="n">Model</span><span class="w"> </span><span class="n">model</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="hll"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;echo/index&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// (4)</span>
</span><span class="w">    </span><span class="p">}</span>

<span class="hll"><span class="w">    </span><span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">// (5)</span>
</span><span class="hll"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">hello</span><span class="p">(</span><span class="n">EchoForm</span><span class="w"> </span><span class="n">form</span><span class="p">,</span><span class="w"> </span><span class="n">Model</span><span class="w"> </span><span class="n">model</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="c1">// (3)</span>
</span><span class="hll"><span class="w">        </span><span class="n">model</span><span class="p">.</span><span class="na">addAttribute</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">form</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span><span class="w"> </span><span class="c1">// (6)</span>
</span><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;echo/hello&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item number</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Add <code class="docutils literal notranslate"><span class="pre">&#64;ModelAttribute</span></code> annotation to the method. Return value of such a method is automatically added to the Model.</div>
<div class="line">Attribute name can be specified in <code class="docutils literal notranslate"><span class="pre">&#64;ModelAttribute</span></code>, but the class name with the first letter in lower case is the default attribute name.</div>
<div class="line">In this case it will be <code class="docutils literal notranslate"><span class="pre">echoForm</span></code>. This attribute name must match with the value of <code class="docutils literal notranslate"><span class="pre">modelAttribute</span></code> of <code class="docutils literal notranslate"><span class="pre">form:form</span></code> tag.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">When nothing is specified in <code class="docutils literal notranslate"><span class="pre">value</span></code> attribute of <code class="docutils literal notranslate"><span class="pre">&#64;RequestMapping</span></code> annotation at the method level, it is mapped to <code class="docutils literal notranslate"><span class="pre">&#64;RequestMapping</span></code> added at class level.</div>
<div class="line">In this case, <code class="docutils literal notranslate"><span class="pre">index</span></code> method is called, if <code class="docutils literal notranslate"><span class="pre">&lt;contextPath&gt;/echo</span></code> is accessed. When nothing is set in <code class="docutils literal notranslate"><span class="pre">method</span></code> attribute, mapping is done for any HTTP method.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">EchoForm object added to the model in (1) is passed as argument.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Since <code class="docutils literal notranslate"><span class="pre">echo/index</span></code> is returned as View name, <code class="docutils literal notranslate"><span class="pre">WEB-INF/views/echo/index.jsp</span></code> is rendered by ViewResolver.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">(5)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Since <code class="docutils literal notranslate"><span class="pre">hello</span></code> is specified in <code class="docutils literal notranslate"><span class="pre">&#64;RequestMapping</span></code> annotation at method level, if <code class="docutils literal notranslate"><span class="pre">&lt;contextPath&gt;/echo/hello</span></code> is accessed, <code class="docutils literal notranslate"><span class="pre">hello</span></code> method is called.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(6)</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">name</span></code> entered in form is passed as it is to the View.</div>
</div>
</td>
</tr>
</tbody>
</table>
</section>
<section id="create-jsp-files">
<h3><a class="toc-backref" href="#id7" role="doc-backlink"><span class="section-number">2.3.4.3. </span>Create JSP Files</a><a class="headerlink" href="#create-jsp-files" title="Permalink to this heading">¶</a></h3>
<p>Finally create JSP of input screen and output screen. Each file path must match with View name as follows.</p>
<ul class="simple">
<li><p>Input Screen src/main/webapp/WEB-INF/views/echo/index.jsp</p></li>
</ul>
<div class="highlight-jsp notranslate"><div class="highlight"><pre><span></span><span class="k">&lt;%@</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">contentType</span><span class="o">=</span><span class="s">&quot;text/html; charset=UTF-8&quot;</span><span class="k">%&gt;</span>
<span class="k">&lt;%@</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">pageEncoding</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="k">%&gt;</span>
<span class="k">&lt;%@</span><span class="w"> </span><span class="n">taglib</span><span class="w"> </span><span class="n">uri</span><span class="o">=</span><span class="s">&quot;http://java.sun.com/jsp/jstl/core&quot;</span><span class="w"> </span><span class="n">prefix</span><span class="o">=</span><span class="s">&quot;c&quot;</span><span class="k">%&gt;</span>
<span class="k">&lt;%@</span><span class="w"> </span><span class="n">taglib</span><span class="w"> </span><span class="n">uri</span><span class="o">=</span><span class="s">&quot;http://www.springframework.org/tags&quot;</span><span class="w"> </span><span class="n">prefix</span><span class="o">=</span><span class="s">&quot;spring&quot;</span><span class="k">%&gt;</span>
<span class="k">&lt;%@</span><span class="w"> </span><span class="n">taglib</span><span class="w"> </span><span class="n">uri</span><span class="o">=</span><span class="s">&quot;http://www.springframework.org/tags/form&quot;</span><span class="w"> </span><span class="n">prefix</span><span class="o">=</span><span class="s">&quot;form&quot;</span><span class="k">%&gt;</span>
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;title&gt;</span>Echo<span class="w"> </span>Application<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="w">  </span><span class="cm">&lt;!-- (1) --&gt;</span>
<span class="w">  </span><span class="nt">&lt;form:form</span><span class="w"> </span><span class="na">modelAttribute=</span><span class="s">&quot;echoForm&quot;</span><span class="w"> </span><span class="na">action=</span><span class="s">&quot;${pageContext.request.contextPath}/echo/hello&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;form:label</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>Input<span class="w"> </span>Your<span class="w"> </span>Name:<span class="nt">&lt;/form:label&gt;</span>
<span class="w">    </span><span class="nt">&lt;form:input</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;name&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;submit&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/form:form&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item number</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">HTML form is constructed by using tag library. Specify the name of form object created by Controller in <code class="docutils literal notranslate"><span class="pre">modelAttribute</span></code>.</div>
<div class="line">Refer <a class="reference external" href="http://docs.spring.io/spring/docs/3.2.x/spring-framework-reference/html/view.html#view-jsp-formtaglib-formtag">here</a>for tag library.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>The generated HTML is as follows</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">form</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;echoForm&quot;</span> <span class="na">action</span><span class="o">=</span><span class="s">&quot;/helloworld/echo/hello&quot;</span> <span class="na">method</span><span class="o">=</span><span class="s">&quot;post&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;name&quot;</span><span class="p">&gt;</span>Input Your Name:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;name&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;name&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span> <span class="p">/&gt;</span>
  <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Output Screen src/main/webapp/WEB-INF/views/echo/hello.jsp</p></li>
</ul>
<div class="highlight-jsp notranslate"><div class="highlight"><pre><span></span><span class="k">&lt;%@</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">contentType</span><span class="o">=</span><span class="s">&quot;text/html; charset=UTF-8&quot;</span><span class="k">%&gt;</span>
<span class="k">&lt;%@</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">pageEncoding</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="k">%&gt;</span>
<span class="k">&lt;%@</span><span class="w"> </span><span class="n">taglib</span><span class="w"> </span><span class="n">uri</span><span class="o">=</span><span class="s">&quot;http://java.sun.com/jsp/jstl/core&quot;</span><span class="w"> </span><span class="n">prefix</span><span class="o">=</span><span class="s">&quot;c&quot;</span><span class="k">%&gt;</span>
<span class="k">&lt;%@</span><span class="w"> </span><span class="n">taglib</span><span class="w"> </span><span class="n">uri</span><span class="o">=</span><span class="s">&quot;http://www.springframework.org/tags&quot;</span><span class="w"> </span><span class="n">prefix</span><span class="o">=</span><span class="s">&quot;spring&quot;</span><span class="k">%&gt;</span>
<span class="k">&lt;%@</span><span class="w"> </span><span class="n">taglib</span><span class="w"> </span><span class="n">uri</span><span class="o">=</span><span class="s">&quot;http://www.springframework.org/tags/form&quot;</span><span class="w"> </span><span class="n">prefix</span><span class="o">=</span><span class="s">&quot;form&quot;</span><span class="k">%&gt;</span>
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;title&gt;</span>Echo<span class="w"> </span>Application<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="w">  </span><span class="nt">&lt;p&gt;</span>
<span class="w">    </span>Hello<span class="w"> </span><span class="nt">&lt;c:out</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${name}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>!
<span class="w">  </span><span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p>Output <code class="docutils literal notranslate"><span class="pre">name</span></code> passed from Controller. Take countermeasures for XSS  using <code class="docutils literal notranslate"><span class="pre">c:out</span></code> tag.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Countermeasure for XSS are taken using <code class="docutils literal notranslate"><span class="pre">c:out</span></code> standard tag here. However, <code class="docutils literal notranslate"><span class="pre">f:h()</span></code> function that can be used easily is provided in common library.
Refer to <a class="reference internal" href="../Security/XSS.html"><span class="doc">XSS Countermeasures</span></a> for details.</p>
</div>
<p>Implementation of Eco application is completed here. Start the server, access the link <code class="docutils literal notranslate"><span class="pre">http://localhost:8080/helloworld/echo</span></code>  to access the application.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="implement-input-validation">
<h3><a class="toc-backref" href="#id8" role="doc-backlink"><span class="section-number">2.3.4.4. </span>Implement Input Validation</a><a class="headerlink" href="#implement-input-validation" title="Permalink to this heading">¶</a></h3>
<p>Input validation is not performed in this application till this point.
In Spring MVC, Bean Validation (<a class="reference external" href="http://jcp.org/en/jsr/detail?id=303">JSR-303</a>) and annotation based input validation can be easily implemented. For example input validation of name is performed in Eco Application.</p>
<p>Following dependency is added to pom.xml for using Bean Validation.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="w">        </span><span class="cm">&lt;!-- Bean Validation (JSR-303) --&gt;</span>
<span class="w">        </span><span class="nt">&lt;dependency&gt;</span>
<span class="w">            </span><span class="nt">&lt;artifactId&gt;</span>hibernate-validator<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">            </span><span class="nt">&lt;groupId&gt;</span>org.hibernate<span class="nt">&lt;/groupId&gt;</span>
<span class="w">            </span><span class="nt">&lt;version&gt;</span>4.3.1.Final<span class="nt">&lt;/version&gt;</span>
<span class="w">        </span><span class="nt">&lt;/dependency&gt;</span>
</pre></div>
</div>
<p>In <code class="docutils literal notranslate"><span class="pre">EchoForm</span></code>, add <code class="docutils literal notranslate"><span class="pre">&#64;NotNull</span></code> annotation and <code class="docutils literal notranslate"><span class="pre">&#64;Size</span></code> annotation to <code class="docutils literal notranslate"><span class="pre">name</span></code> property as follows (can be added to getter method).</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.helloworld.echo</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.io.Serializable</span><span class="p">;</span>

<span class="hll"><span class="kn">import</span><span class="w"> </span><span class="nn">javax.validation.constraints.NotNull</span><span class="p">;</span>
</span><span class="hll"><span class="kn">import</span><span class="w"> </span><span class="nn">javax.validation.constraints.Size</span><span class="p">;</span>
</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">EchoForm</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Serializable</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">serialVersionUID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2557725707095364446L</span><span class="p">;</span>

<span class="hll"><span class="w">    </span><span class="nd">@NotNull</span><span class="w"> </span><span class="c1">// (1)</span>
</span><span class="hll"><span class="w">    </span><span class="nd">@Size</span><span class="p">(</span><span class="n">min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="c1">// (2)</span>
</span><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setName</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item number</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">By adding <code class="docutils literal notranslate"><span class="pre">&#64;NotNull</span></code> annotation, whether <code class="docutils literal notranslate"><span class="pre">name</span></code> parameter exists in HTTP request is checked.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">By adding <code class="docutils literal notranslate"><span class="pre">&#64;Size(min=1,</span> <span class="pre">max=5)</span></code> annotation, whether the size of <code class="docutils literal notranslate"><span class="pre">name</span></code> is more than or equal to 1 and less than or equal to 5 is checked.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>In <code class="docutils literal notranslate"><span class="pre">EchoController</span></code> class, add <code class="docutils literal notranslate"><span class="pre">&#64;Valid</span></code> annotation as shown below and also use of <code class="docutils literal notranslate"><span class="pre">hasErrors</span></code> method.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.helloworld.echo</span><span class="p">;</span>

<span class="hll"><span class="kn">import</span><span class="w"> </span><span class="nn">javax.validation.Valid</span><span class="p">;</span>
</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Controller</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.ui.Model</span><span class="p">;</span>
<span class="hll"><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.validation.BindingResult</span><span class="p">;</span>
</span><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.web.bind.annotation.ModelAttribute</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="p">;</span>

<span class="nd">@Controller</span>
<span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;echo&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">EchoController</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@ModelAttribute</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">EchoForm</span><span class="w"> </span><span class="nf">setUpEchoForm</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">EchoForm</span><span class="w"> </span><span class="n">form</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">EchoForm</span><span class="p">();</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">form</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@RequestMapping</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">index</span><span class="p">(</span><span class="n">Model</span><span class="w"> </span><span class="n">model</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;echo/index&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">)</span>
<span class="hll"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">hello</span><span class="p">(</span><span class="nd">@Valid</span><span class="w"> </span><span class="n">EchoForm</span><span class="w"> </span><span class="n">form</span><span class="p">,</span><span class="w"> </span><span class="n">BindingResult</span><span class="w"> </span><span class="n">result</span><span class="p">,</span><span class="w"> </span><span class="n">Model</span><span class="w"> </span><span class="n">model</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// (1)</span>
</span><span class="hll"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">hasErrors</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// (2)</span>
</span><span class="hll"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;echo/index&quot;</span><span class="p">;</span>
</span><span class="hll"><span class="w">        </span><span class="p">}</span>
</span><span class="w">        </span><span class="n">model</span><span class="p">.</span><span class="na">addAttribute</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">form</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;echo/hello&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item number</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">In Controller, add <code class="docutils literal notranslate"><span class="pre">&#64;Valid</span></code> annotation to the argument on which validation needs to be executed. Also add <code class="docutils literal notranslate"><span class="pre">BindingResult</span></code> object to arguments.</div>
<div class="line">Input validation is automatically performed using Bean Validation and the result is stored in <code class="docutils literal notranslate"><span class="pre">BindingResult</span></code> object.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">It can be checked whether there is error by using <code class="docutils literal notranslate"><span class="pre">hasErrors</span></code> method.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="highlight-jsp notranslate"><div class="highlight"><pre><span></span><span class="k">&lt;%@</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">contentType</span><span class="o">=</span><span class="s">&quot;text/html; charset=UTF-8&quot;</span><span class="k">%&gt;</span>
<span class="k">&lt;%@</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">pageEncoding</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="k">%&gt;</span>
<span class="k">&lt;%@</span><span class="w"> </span><span class="n">taglib</span><span class="w"> </span><span class="n">uri</span><span class="o">=</span><span class="s">&quot;http://java.sun.com/jsp/jstl/core&quot;</span><span class="w"> </span><span class="n">prefix</span><span class="o">=</span><span class="s">&quot;c&quot;</span><span class="k">%&gt;</span>
<span class="k">&lt;%@</span><span class="w"> </span><span class="n">taglib</span><span class="w"> </span><span class="n">uri</span><span class="o">=</span><span class="s">&quot;http://www.springframework.org/tags&quot;</span><span class="w"> </span><span class="n">prefix</span><span class="o">=</span><span class="s">&quot;spring&quot;</span><span class="k">%&gt;</span>
<span class="k">&lt;%@</span><span class="w"> </span><span class="n">taglib</span><span class="w"> </span><span class="n">uri</span><span class="o">=</span><span class="s">&quot;http://www.springframework.org/tags/form&quot;</span><span class="w"> </span><span class="n">prefix</span><span class="o">=</span><span class="s">&quot;form&quot;</span><span class="k">%&gt;</span>
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;title&gt;</span>Echo<span class="w"> </span>Application<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="w">  </span><span class="nt">&lt;form:form</span><span class="w"> </span><span class="na">modelAttribute=</span><span class="s">&quot;echoForm&quot;</span><span class="w"> </span><span class="na">action=</span><span class="s">&quot;${action}&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;form:label</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>Input<span class="w"> </span>Your<span class="w"> </span>Name:<span class="nt">&lt;/form:label&gt;</span>
<span class="w">    </span><span class="nt">&lt;form:input</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;name&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="hll"><span class="w">    </span><span class="nt">&lt;form:errors</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;name&quot;</span><span class="w"> </span><span class="na">cssStyle=</span><span class="s">&quot;color:red&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="cm">&lt;!-- (1) --&gt;</span>
</span><span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;submit&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/form:form&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item number</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Add <code class="docutils literal notranslate"><span class="pre">form:errors</span></code> tag for displaying error message when an error occurs on input screen.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">Implementation of input validation is completed.</div>
<div class="line">Error message is displayed in the following conditions:</div>
</div>
<ul class="simple">
<li><p>When an empty name is sent</p></li>
<li><p>Size is more than 5 characters.</p></li>
</ul>
<figure class="align-default">
<img alt="Validation Error (name is empty)" src="../_images/AppValidationEmpty.png" />
</figure>
<figure class="align-default">
<img alt="Validation Error (name's size is over 5)" src="../_images/AppValidationSizeOver.png" />
</figure>
<p>The generated HTML is as follows</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">form</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;echoForm&quot;</span> <span class="na">action</span><span class="o">=</span><span class="s">&quot;/helloworld/echo/hello&quot;</span> <span class="na">method</span><span class="o">=</span><span class="s">&quot;post&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;name&quot;</span><span class="p">&gt;</span>Input Your Name:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;name&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;name&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;name.errors&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;color:red&quot;</span><span class="p">&gt;</span>size must be between 1 and 5<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span> <span class="p">/&gt;</span>
  <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
</section>
<section id="summary">
<h3><a class="toc-backref" href="#id9" role="doc-backlink"><span class="section-number">2.3.4.5. </span>Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h3>
<p>The following are the learnings from this chapter.</p>
<ol class="arabic simple">
<li><p>Setting up configuration file of Spring MVC (simplified level)</p></li>
<li><p>How to do Screen Transition (simplified level)</p></li>
<li><p>Way to pass values between screens.</p></li>
<li><p>Simple input validation</p></li>
</ol>
<p>If above points are still not understood, it is recommended to read this chapter again and start again from building the environment.
This will imporve the understanding of above concepts.</p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="ApplicationLayering.html" title="2.4. Application Layering"
             >next</a> |</li>
        <li class="right" >
          <a href="SpringMVCOverview.html" title="2.2. Overview of Spring MVC Architecture"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">TERASOLUNA Global Framework Development Guideline 1.0.1.RELEASE documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" ><span class="section-number">2. </span>Summary - Architecture of TERASOLUNA Global Framework</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">2.3. </span>First application based on Spring MVC</a></li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013-2014, NTT DATA.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 5.3.0.Theme by <a href="http://github.com/vkvn">vkvn</a>
    </div>
    
    <script>
    
    $(function() {
    	var $sidebar	= $('.sphinxsidebar'),
    		$window		= $(window),
    		offset		= $sidebar.offset(),
    		topPadding	= 3,
    		$scroll		= $('#scroll');
    	
    	$window.scroll(function() {
    		if ($scroll.is(':checked')) {
				if ($window.scrollTop() > offset.top) {
					$sidebar.stop().animate({
						marginTop:$window.scrollTop() - offset.top + topPadding
					});
				} else {
					$sidebar.stop().animate({
						marginTop:0
					});
				}
			}
		});
    	
    	var $navList = $('ul:first', $sidebar);
    	$('li:first', $navList).addClass('open');
    	
    	$navList.treeview({
    		persist: "location",
    		collapsed: true,
    		unique: false
    	});
    	
	});
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-46550814-1', 'terasolunaorg.github.io');
    ga('send', 'pageview');
    </script>
  </body>
</html>